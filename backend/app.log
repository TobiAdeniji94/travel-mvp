2025-08-03 21:02:20,810 - app.main - INFO - Starting application...
2025-08-03 21:02:20,811 - app.main - INFO - Initializing database manager...
2025-08-03 21:02:20,811 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:02:20,812 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:02:20,812 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:02:50,078 - app.main - INFO - Shutting down application...
2025-08-03 21:02:50,079 - app.main - INFO - Closing database connections...
2025-08-03 21:02:50,079 - app.main - INFO - Database connections closed successfully
2025-08-03 21:02:58,505 - app.main - INFO - Starting application...
2025-08-03 21:02:58,506 - app.main - INFO - Initializing database manager...
2025-08-03 21:02:58,506 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:02:58,507 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:02:58,508 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:04:07,932 - app.main - INFO - Shutting down application...
2025-08-03 21:04:07,932 - app.main - INFO - Closing database connections...
2025-08-03 21:04:07,932 - app.main - INFO - Database connections closed successfully
2025-08-03 21:04:14,767 - app.main - INFO - Starting application...
2025-08-03 21:04:14,768 - app.main - INFO - Initializing database manager...
2025-08-03 21:04:14,768 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:04:14,769 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:04:14,770 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:08:02,882 - app.main - INFO - Shutting down application...
2025-08-03 21:08:02,882 - app.main - INFO - Closing database connections...
2025-08-03 21:08:02,883 - app.main - INFO - Database connections closed successfully
2025-08-03 21:08:11,873 - app.main - INFO - Starting application...
2025-08-03 21:08:11,874 - app.main - INFO - Initializing database manager...
2025-08-03 21:08:11,874 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:08:11,875 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:08:11,876 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:08:51,851 - app.main - INFO - Shutting down application...
2025-08-03 21:08:51,852 - app.main - INFO - Closing database connections...
2025-08-03 21:08:51,852 - app.main - INFO - Database connections closed successfully
2025-08-03 21:08:59,290 - app.main - INFO - Starting application...
2025-08-03 21:08:59,291 - app.main - INFO - Initializing database manager...
2025-08-03 21:08:59,291 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:08:59,293 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:08:59,293 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:12:41,124 - app.main - INFO - Shutting down application...
2025-08-03 21:12:41,125 - app.main - INFO - Closing database connections...
2025-08-03 21:12:41,125 - app.main - INFO - Database connections closed successfully
2025-08-03 21:12:49,187 - app.main - INFO - Starting application...
2025-08-03 21:12:49,188 - app.main - INFO - Initializing database manager...
2025-08-03 21:12:49,189 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:12:49,190 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:12:49,190 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:12:58,416 - app.main - INFO - Shutting down application...
2025-08-03 21:12:58,417 - app.main - INFO - Closing database connections...
2025-08-03 21:12:58,417 - app.main - INFO - Database connections closed successfully
2025-08-03 21:13:05,785 - app.main - INFO - Starting application...
2025-08-03 21:13:05,786 - app.main - INFO - Initializing database manager...
2025-08-03 21:13:05,786 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:13:05,788 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:13:05,788 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:13:15,816 - app.main - INFO - Shutting down application...
2025-08-03 21:13:15,816 - app.main - INFO - Closing database connections...
2025-08-03 21:13:15,817 - app.main - INFO - Database connections closed successfully
2025-08-03 21:13:24,801 - app.main - INFO - Starting application...
2025-08-03 21:13:24,801 - app.main - INFO - Initializing database manager...
2025-08-03 21:13:24,802 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:13:24,803 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:13:24,803 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:14:24,170 - app.main - INFO - Shutting down application...
2025-08-03 21:14:24,172 - app.main - INFO - Closing database connections...
2025-08-03 21:14:24,173 - app.main - INFO - Database connections closed successfully
2025-08-03 21:14:33,751 - app.main - INFO - Starting application...
2025-08-03 21:14:33,752 - app.main - INFO - Initializing database manager...
2025-08-03 21:14:33,753 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:14:33,755 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:14:33,755 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:14:44,788 - app.main - INFO - Shutting down application...
2025-08-03 21:14:44,789 - app.main - INFO - Closing database connections...
2025-08-03 21:14:44,789 - app.main - INFO - Database connections closed successfully
2025-08-03 21:14:53,278 - app.main - INFO - Starting application...
2025-08-03 21:14:53,279 - app.main - INFO - Initializing database manager...
2025-08-03 21:14:53,279 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:14:53,280 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:14:53,281 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:16:34,629 - app.main - INFO - Shutting down application...
2025-08-03 21:16:34,630 - app.main - INFO - Closing database connections...
2025-08-03 21:16:34,630 - app.main - INFO - Database connections closed successfully
2025-08-03 21:16:42,397 - app.main - INFO - Starting application...
2025-08-03 21:16:42,398 - app.main - INFO - Initializing database manager...
2025-08-03 21:16:42,398 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:16:42,399 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:16:42,399 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:16:53,236 - app.main - INFO - Shutting down application...
2025-08-03 21:16:53,236 - app.main - INFO - Closing database connections...
2025-08-03 21:16:53,236 - app.main - INFO - Database connections closed successfully
2025-08-03 21:17:01,500 - app.main - INFO - Starting application...
2025-08-03 21:17:01,501 - app.main - INFO - Initializing database manager...
2025-08-03 21:17:01,501 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:17:01,503 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:17:01,503 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:18:37,870 - app.main - INFO - Shutting down application...
2025-08-03 21:18:37,870 - app.main - INFO - Closing database connections...
2025-08-03 21:18:37,870 - app.main - INFO - Database connections closed successfully
2025-08-03 21:18:45,160 - app.main - INFO - Starting application...
2025-08-03 21:18:45,161 - app.main - INFO - Initializing database manager...
2025-08-03 21:18:45,161 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:18:45,163 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:18:45,163 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:03,818 - app.main - INFO - Shutting down application...
2025-08-03 21:20:03,819 - app.main - INFO - Closing database connections...
2025-08-03 21:20:03,819 - app.main - INFO - Database connections closed successfully
2025-08-03 21:20:13,039 - app.main - INFO - Starting application...
2025-08-03 21:20:13,040 - app.main - INFO - Initializing database manager...
2025-08-03 21:20:13,041 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:20:13,043 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:13,043 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:23,887 - app.main - INFO - Shutting down application...
2025-08-03 21:20:23,887 - app.main - INFO - Closing database connections...
2025-08-03 21:20:23,888 - app.main - INFO - Database connections closed successfully
2025-08-03 21:20:32,377 - app.main - INFO - Starting application...
2025-08-03 21:20:32,377 - app.main - INFO - Initializing database manager...
2025-08-03 21:20:32,378 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:20:32,379 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:32,381 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:44,410 - app.main - INFO - Shutting down application...
2025-08-03 21:20:44,410 - app.main - INFO - Closing database connections...
2025-08-03 21:20:44,410 - app.main - INFO - Database connections closed successfully
2025-08-03 21:20:52,862 - app.main - INFO - Starting application...
2025-08-03 21:20:52,862 - app.main - INFO - Initializing database manager...
2025-08-03 21:20:52,863 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:20:52,864 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:52,864 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:21:03,193 - app.main - INFO - Shutting down application...
2025-08-03 21:21:03,194 - app.main - INFO - Closing database connections...
2025-08-03 21:21:03,194 - app.main - INFO - Database connections closed successfully
2025-08-03 21:21:11,992 - app.main - INFO - Starting application...
2025-08-03 21:21:11,993 - app.main - INFO - Initializing database manager...
2025-08-03 21:21:11,993 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:21:11,995 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:21:11,995 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:22:30,248 - app.main - INFO - Shutting down application...
2025-08-03 21:22:30,248 - app.main - INFO - Closing database connections...
2025-08-03 21:22:30,248 - app.main - INFO - Database connections closed successfully
2025-08-03 21:22:38,230 - app.main - INFO - Starting application...
2025-08-03 21:22:38,231 - app.main - INFO - Initializing database manager...
2025-08-03 21:22:38,232 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:22:38,234 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:22:38,235 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:22:51,670 - app.main - INFO - Shutting down application...
2025-08-03 21:22:51,671 - app.main - INFO - Closing database connections...
2025-08-03 21:22:51,671 - app.main - INFO - Database connections closed successfully
2025-08-03 21:22:59,551 - app.main - INFO - Starting application...
2025-08-03 21:22:59,552 - app.main - INFO - Initializing database manager...
2025-08-03 21:22:59,553 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:22:59,555 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:22:59,555 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:25:25,908 - app.main - INFO - Shutting down application...
2025-08-03 21:25:25,908 - app.main - INFO - Closing database connections...
2025-08-03 21:25:25,909 - app.main - INFO - Database connections closed successfully
2025-08-03 21:25:33,899 - app.main - INFO - Starting application...
2025-08-03 21:25:33,900 - app.main - INFO - Initializing database manager...
2025-08-03 21:25:33,900 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:25:33,902 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:25:33,902 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:25:43,846 - app.main - INFO - Shutting down application...
2025-08-03 21:25:43,846 - app.main - INFO - Closing database connections...
2025-08-03 21:25:43,846 - app.main - INFO - Database connections closed successfully
2025-08-03 21:25:52,151 - app.main - INFO - Starting application...
2025-08-03 21:25:52,152 - app.main - INFO - Initializing database manager...
2025-08-03 21:25:52,152 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:25:52,154 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:25:52,154 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:26:51,827 - app.main - INFO - Shutting down application...
2025-08-03 21:26:51,828 - app.main - INFO - Closing database connections...
2025-08-03 21:26:51,828 - app.main - INFO - Database connections closed successfully
2025-08-03 21:27:00,048 - app.main - INFO - Starting application...
2025-08-03 21:27:00,049 - app.main - INFO - Initializing database manager...
2025-08-03 21:27:00,049 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:27:00,051 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:27:00,051 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:27:09,681 - app.main - INFO - Shutting down application...
2025-08-03 21:27:09,682 - app.main - INFO - Closing database connections...
2025-08-03 21:27:09,682 - app.main - INFO - Database connections closed successfully
2025-08-03 21:27:17,367 - app.main - INFO - Starting application...
2025-08-03 21:27:17,367 - app.main - INFO - Initializing database manager...
2025-08-03 21:27:17,368 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:27:17,370 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:27:17,370 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:27:29,586 - app.main - INFO - Shutting down application...
2025-08-03 21:27:29,586 - app.main - INFO - Closing database connections...
2025-08-03 21:27:29,587 - app.main - INFO - Database connections closed successfully
2025-08-03 21:27:37,333 - app.main - INFO - Starting application...
2025-08-03 21:27:37,333 - app.main - INFO - Initializing database manager...
2025-08-03 21:27:37,334 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:27:37,336 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:27:37,336 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:28:59,281 - app.main - INFO - Shutting down application...
2025-08-03 21:28:59,282 - app.main - INFO - Closing database connections...
2025-08-03 21:28:59,282 - app.main - INFO - Database connections closed successfully
2025-08-03 21:29:07,122 - app.main - INFO - Starting application...
2025-08-03 21:29:07,123 - app.main - INFO - Initializing database manager...
2025-08-03 21:29:07,123 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:29:07,125 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:29:07,126 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:29:17,555 - app.main - INFO - Shutting down application...
2025-08-03 21:29:17,556 - app.main - INFO - Closing database connections...
2025-08-03 21:29:17,556 - app.main - INFO - Database connections closed successfully
2025-08-03 21:29:24,851 - app.main - INFO - Starting application...
2025-08-03 21:29:24,852 - app.main - INFO - Initializing database manager...
2025-08-03 21:29:24,853 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:29:24,854 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:29:24,855 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:42:51,693 - app.main - INFO - Shutting down application...
2025-08-03 22:42:51,700 - app.main - INFO - Closing database connections...
2025-08-03 22:42:51,703 - app.main - INFO - Database connections closed successfully
2025-08-03 22:43:07,862 - app.main - INFO - Starting application...
2025-08-03 22:43:07,863 - app.main - INFO - Initializing database manager...
2025-08-03 22:43:07,865 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 22:43:07,867 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:43:07,868 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:43:13,532 - app.main - INFO - Shutting down application...
2025-08-03 22:43:13,533 - app.main - INFO - Closing database connections...
2025-08-03 22:43:13,533 - app.main - INFO - Database connections closed successfully
2025-08-03 22:43:22,250 - app.main - INFO - Starting application...
2025-08-03 22:43:22,251 - app.main - INFO - Initializing database manager...
2025-08-03 22:43:22,251 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 22:43:22,253 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:43:22,253 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:44:59,962 - app.main - INFO - Shutting down application...
2025-08-03 22:44:59,963 - app.main - INFO - Closing database connections...
2025-08-03 22:44:59,963 - app.main - INFO - Database connections closed successfully
2025-08-03 22:45:08,224 - app.main - INFO - Starting application...
2025-08-03 22:45:08,224 - app.main - INFO - Initializing database manager...
2025-08-03 22:45:08,225 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 22:45:08,226 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:45:08,227 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:49:12,626 - app.main - INFO - Shutting down application...
2025-08-03 22:49:12,627 - app.main - INFO - Closing database connections...
2025-08-03 22:49:12,627 - app.main - INFO - Database connections closed successfully
2025-08-03 22:49:18,731 - app.main - INFO - Starting application...
2025-08-03 22:49:18,732 - app.main - INFO - Initializing database manager...
2025-08-03 22:49:18,732 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 22:49:18,734 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:49:18,735 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:04:33,809 - app.main - INFO - Starting application...
2025-08-04 00:04:33,810 - app.main - INFO - Initializing database manager...
2025-08-04 00:04:33,812 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:04:33,813 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:04:33,813 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:05:51,665 - app.main - INFO - Starting application...
2025-08-04 00:05:51,666 - app.main - INFO - Initializing database manager...
2025-08-04 00:05:51,666 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:05:51,668 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:05:51,669 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:06:16,499 - app.main - INFO - Starting application...
2025-08-04 00:06:16,500 - app.main - INFO - Initializing database manager...
2025-08-04 00:06:16,502 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:06:16,507 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:06:16,508 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:16:28,647 - app.main - INFO - Shutting down application...
2025-08-04 00:16:28,648 - app.main - INFO - Closing database connections...
2025-08-04 00:16:28,648 - app.main - INFO - Database connections closed successfully
2025-08-04 00:16:37,085 - app.main - INFO - Starting application...
2025-08-04 00:16:37,086 - app.main - INFO - Initializing database manager...
2025-08-04 00:16:37,087 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:16:37,094 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:16:37,095 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:16:49,049 - app.main - ERROR - Unhandled exception: 'async_generator' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 634, in solve_dependencies
    solved = await solve_generator(
             ^^^^^^^^^^^^^^^^^^^^^^
        call=call, stack=async_exit_stack, sub_values=solved_result.values
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 560, in solve_generator
    return await stack.enter_async_context(cm)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 668, in enter_async_context
    result = await _enter(cm)
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/db/session.py", line 289, in get_session
    async with db_manager.get_session() as session:
               ~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: 'async_generator' object does not support the asynchronous context manager protocol
2025-08-04 00:19:44,935 - app.main - INFO - Shutting down application...
2025-08-04 00:19:44,937 - app.main - INFO - Closing database connections...
2025-08-04 00:19:44,938 - app.main - INFO - Database connections closed successfully
2025-08-04 00:19:54,051 - app.main - INFO - Starting application...
2025-08-04 00:19:54,053 - app.main - INFO - Initializing database manager...
2025-08-04 00:19:54,056 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:19:54,057 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:19:54,058 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:20:00,910 - app.main - ERROR - Unhandled exception: Database manager not initialized
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 634, in solve_dependencies
    solved = await solve_generator(
             ^^^^^^^^^^^^^^^^^^^^^^
        call=call, stack=async_exit_stack, sub_values=solved_result.values
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 560, in solve_generator
    return await stack.enter_async_context(cm)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 668, in enter_async_context
    result = await _enter(cm)
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/db/session.py", line 290, in get_session
    async with db_manager.get_session() as session:
               ~~~~~~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/db/session.py", line 148, in get_session
    raise RuntimeError("Database manager not initialized")
RuntimeError: Database manager not initialized
2025-08-04 00:25:15,041 - app.main - INFO - Shutting down application...
2025-08-04 00:25:15,043 - app.main - INFO - Closing database connections...
2025-08-04 00:25:15,043 - app.main - INFO - Database connections closed successfully
2025-08-04 00:25:23,616 - app.main - INFO - Starting application...
2025-08-04 00:25:23,618 - app.main - INFO - Initializing database manager...
2025-08-04 00:25:23,619 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:25:23,621 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:25:23,621 - app.main - ERROR - Failed to initialize database manager
Traceback (most recent call last):
  File "/app/app/main.py", line 37, in lifespan
    await db_manager.initialize()
  File "/app/app/db/session.py", line 127, in initialize
    self.engine = self._create_engine()
                  ~~~~~~~~~~~~~~~~~~~^^
  File "/app/app/db/session.py", line 94, in _create_engine
    engine = create_async_engine(**engine_config)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 673, in create_engine
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:29:45,121 - app.main - INFO - Starting application...
2025-08-04 00:29:45,123 - app.main - INFO - Initializing database manager...
2025-08-04 00:29:45,125 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:29:45,127 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:29:45,200 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:29:45,201 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:29:45,202 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:30:37,559 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-04 00:30:37,943 - app.db.crud - INFO - Created user: testuser123
2025-08-04 00:30:37,944 - app.api.users - INFO - Created new user: testuser123
2025-08-04 00:30:38,032 - app.main - INFO - Shutting down application...
2025-08-04 00:30:38,032 - app.main - INFO - Closing database connections...
2025-08-04 00:30:38,033 - app.db.session - INFO - Closing database connections...
2025-08-04 00:30:38,038 - app.db.session - INFO - Database connections closed
2025-08-04 00:30:38,038 - app.main - INFO - Database connections closed successfully
2025-08-04 00:30:46,549 - app.main - INFO - Starting application...
2025-08-04 00:30:46,552 - app.main - INFO - Initializing database manager...
2025-08-04 00:30:46,552 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:30:46,557 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:30:46,634 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:30:46,636 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:30:46,637 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:30:54,914 - app.db.session - ERROR - Unexpected session error: 1 validation errors:
  {'type': 'enum', 'loc': ('response', 0, 'status'), 'msg': "Input should be 'active', 'inactive' or 'suspended'", 'input': None, 'ctx': {'expected': "'active', 'inactive' or 'suspended'"}}

2025-08-04 00:30:54,916 - app.main - ERROR - Unhandled exception: 1 validation errors:
  {'type': 'enum', 'loc': ('response', 0, 'status'), 'msg': "Input should be 'active', 'inactive' or 'suspended'", 'input': None, 'ctx': {'expected': "'active', 'inactive' or 'suspended'"}}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'enum', 'loc': ('response', 0, 'status'), 'msg': "Input should be 'active', 'inactive' or 'suspended'", 'input': None, 'ctx': {'expected': "'active', 'inactive' or 'suspended'"}}

2025-08-04 00:36:36,905 - app.main - INFO - Shutting down application...
2025-08-04 00:36:36,905 - app.main - INFO - Closing database connections...
2025-08-04 00:36:36,906 - app.db.session - INFO - Closing database connections...
2025-08-04 00:36:36,912 - app.db.session - INFO - Database connections closed
2025-08-04 00:36:36,913 - app.main - INFO - Database connections closed successfully
2025-08-04 00:36:46,981 - app.main - INFO - Starting application...
2025-08-04 00:36:46,982 - app.main - INFO - Initializing database manager...
2025-08-04 00:36:46,983 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:36:46,985 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:36:47,928 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:36:47,929 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:36:47,929 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:37:08,002 - app.main - INFO - Shutting down application...
2025-08-04 00:37:08,003 - app.main - INFO - Closing database connections...
2025-08-04 00:37:08,004 - app.db.session - INFO - Closing database connections...
2025-08-04 00:37:08,010 - app.db.session - INFO - Database connections closed
2025-08-04 00:37:08,010 - app.main - INFO - Database connections closed successfully
2025-08-04 00:37:16,346 - app.main - INFO - Starting application...
2025-08-04 00:37:16,347 - app.main - INFO - Initializing database manager...
2025-08-04 00:37:16,349 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:37:16,351 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:37:16,418 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:37:16,419 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:37:16,419 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:40:47,283 - app.main - ERROR - Database health check failed: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-04 00:41:21,409 - app.main - INFO - Shutting down application...
2025-08-04 00:41:21,410 - app.main - INFO - Closing database connections...
2025-08-04 00:41:21,411 - app.db.session - INFO - Closing database connections...
2025-08-04 00:41:21,414 - app.db.session - INFO - Database connections closed
2025-08-04 00:41:21,416 - app.main - INFO - Database connections closed successfully
2025-08-04 00:41:30,767 - app.main - INFO - Starting application...
2025-08-04 00:41:30,768 - app.main - INFO - Initializing database manager...
2025-08-04 00:41:30,769 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:41:30,771 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:41:30,836 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:41:30,838 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:41:30,839 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:44:00,152 - app.main - INFO - Shutting down application...
2025-08-04 00:44:00,152 - app.main - INFO - Closing database connections...
2025-08-04 00:44:00,153 - app.db.session - INFO - Closing database connections...
2025-08-04 00:44:00,159 - app.db.session - INFO - Database connections closed
2025-08-04 00:44:00,160 - app.main - INFO - Database connections closed successfully
2025-08-04 00:44:10,526 - app.main - INFO - Starting application...
2025-08-04 00:44:10,528 - app.main - INFO - Initializing database manager...
2025-08-04 00:44:10,529 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:44:10,532 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:44:10,615 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:44:10,615 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:44:10,616 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:44:29,178 - app.main - INFO - Shutting down application...
2025-08-04 00:44:29,179 - app.main - INFO - Closing database connections...
2025-08-04 00:44:29,180 - app.db.session - INFO - Closing database connections...
2025-08-04 00:44:29,186 - app.db.session - INFO - Database connections closed
2025-08-04 00:44:29,187 - app.main - INFO - Database connections closed successfully
2025-08-04 00:44:38,030 - app.main - INFO - Starting application...
2025-08-04 00:44:38,030 - app.main - INFO - Initializing database manager...
2025-08-04 00:44:38,032 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:44:38,034 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:44:38,109 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:44:38,110 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:44:38,111 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:44:59,323 - app.main - INFO - Shutting down application...
2025-08-04 00:44:59,324 - app.main - INFO - Closing database connections...
2025-08-04 00:44:59,325 - app.db.session - INFO - Closing database connections...
2025-08-04 00:44:59,330 - app.db.session - INFO - Database connections closed
2025-08-04 00:44:59,332 - app.main - INFO - Database connections closed successfully
2025-08-04 00:45:08,522 - app.main - INFO - Starting application...
2025-08-04 00:45:08,523 - app.main - INFO - Initializing database manager...
2025-08-04 00:45:08,524 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:45:08,528 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:45:08,601 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:45:08,601 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:45:08,602 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:45:59,359 - app.main - INFO - Shutting down application...
2025-08-04 00:45:59,360 - app.main - INFO - Closing database connections...
2025-08-04 00:45:59,360 - app.db.session - INFO - Closing database connections...
2025-08-04 00:45:59,375 - app.db.session - INFO - Database connections closed
2025-08-04 00:45:59,376 - app.main - INFO - Database connections closed successfully
2025-08-04 00:46:08,046 - app.main - INFO - Starting application...
2025-08-04 00:46:08,047 - app.main - INFO - Initializing database manager...
2025-08-04 00:46:08,048 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:46:08,052 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:46:08,125 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:46:08,125 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:46:08,126 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:46:30,588 - app.main - INFO - Shutting down application...
2025-08-04 00:46:30,588 - app.main - INFO - Closing database connections...
2025-08-04 00:46:30,589 - app.db.session - INFO - Closing database connections...
2025-08-04 00:46:30,594 - app.db.session - INFO - Database connections closed
2025-08-04 00:46:30,595 - app.main - INFO - Database connections closed successfully
2025-08-04 00:46:38,943 - app.main - INFO - Starting application...
2025-08-04 00:46:38,943 - app.main - INFO - Initializing database manager...
2025-08-04 00:46:38,944 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:46:38,947 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:46:39,021 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:46:39,023 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:46:39,026 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:47:00,810 - app.main - INFO - Shutting down application...
2025-08-04 00:47:00,811 - app.main - INFO - Closing database connections...
2025-08-04 00:47:00,811 - app.db.session - INFO - Closing database connections...
2025-08-04 00:47:00,817 - app.db.session - INFO - Database connections closed
2025-08-04 00:47:00,818 - app.main - INFO - Database connections closed successfully
2025-08-04 00:47:09,330 - app.main - INFO - Starting application...
2025-08-04 00:47:09,333 - app.main - INFO - Initializing database manager...
2025-08-04 00:47:09,334 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:47:09,339 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:47:09,407 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:47:09,409 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:47:09,409 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:48:41,578 - app.main - INFO - Shutting down application...
2025-08-04 00:48:41,579 - app.main - INFO - Closing database connections...
2025-08-04 00:48:41,580 - app.db.session - INFO - Closing database connections...
2025-08-04 00:48:41,585 - app.db.session - INFO - Database connections closed
2025-08-04 00:48:41,586 - app.main - INFO - Database connections closed successfully
2025-08-04 00:48:50,238 - app.main - INFO - Starting application...
2025-08-04 00:48:50,239 - app.main - INFO - Initializing database manager...
2025-08-04 00:48:50,240 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:48:50,243 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:48:50,317 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:48:50,318 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:48:50,318 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:50:46,137 - app.main - INFO - Shutting down application...
2025-08-04 00:50:46,138 - app.main - INFO - Closing database connections...
2025-08-04 00:50:46,139 - app.db.session - INFO - Closing database connections...
2025-08-04 00:50:46,143 - app.db.session - INFO - Database connections closed
2025-08-04 00:50:46,144 - app.main - INFO - Database connections closed successfully
2025-08-04 00:50:54,620 - app.main - INFO - Starting application...
2025-08-04 00:50:54,621 - app.main - INFO - Initializing database manager...
2025-08-04 00:50:54,622 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:50:54,626 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:50:54,709 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:50:54,710 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:50:54,711 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:53:07,880 - app.main - INFO - Starting application...
2025-08-04 00:53:07,880 - app.main - INFO - Initializing database manager...
2025-08-04 00:53:07,881 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:53:07,883 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:53:07,951 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:53:07,951 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:53:07,952 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:53:58,071 - app.main - INFO - Starting application...
2025-08-04 00:53:58,072 - app.main - INFO - Initializing database manager...
2025-08-04 00:53:58,073 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:53:58,076 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:53:58,152 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:53:58,152 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:53:58,153 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:55:57,336 - app.main - INFO - Shutting down application...
2025-08-04 00:55:57,337 - app.main - INFO - Closing database connections...
2025-08-04 00:55:57,338 - app.db.session - INFO - Closing database connections...
2025-08-04 00:55:57,344 - app.db.session - INFO - Database connections closed
2025-08-04 00:55:57,345 - app.main - INFO - Database connections closed successfully
2025-08-04 00:56:07,442 - app.main - INFO - Starting application...
2025-08-04 00:56:07,443 - app.main - INFO - Initializing database manager...
2025-08-04 00:56:07,444 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:56:07,446 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:56:07,525 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:56:07,525 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:56:07,526 - app.main - INFO - Database manager initialized successfully
2025-08-04 01:03:43,974 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-04 01:03:44,321 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-04 01:03:44,322 - app.core.security - INFO - user_authentication completed in 0.42s
2025-08-04 01:03:44,323 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-04 01:03:44,346 - app.core.security - INFO - Access token created successfully
2025-08-04 01:03:44,347 - app.core.security - INFO - Refresh token created successfully
2025-08-04 01:03:44,348 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-04 01:03:44,349 - app.api.auth - INFO - user_login completed in 0.45s
2025-08-04 01:06:52,335 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 01:06:54,250 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 01:06:54,291 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 01:06:54,293 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 01:06:54,303 - app.api.itinerary - ERROR - Failed to get location coordinates: 'NoneType' object has no attribute 'latitude'
2025-08-04 01:06:54,303 - app.api.itinerary - INFO - itinerary_generation completed in 1.97s
2025-08-04 01:06:54,304 - app.db.session - ERROR - Unexpected session error: 500: Failed to retrieve location coordinates
2025-08-04 01:13:09,100 - app.main - INFO - Shutting down application...
2025-08-04 01:13:09,101 - app.main - INFO - Closing database connections...
2025-08-04 01:13:09,102 - app.db.session - INFO - Closing database connections...
2025-08-04 01:13:09,111 - app.db.session - INFO - Database connections closed
2025-08-04 01:13:09,112 - app.main - INFO - Database connections closed successfully
2025-08-04 01:13:18,352 - app.main - INFO - Starting application...
2025-08-04 01:13:18,353 - app.main - INFO - Initializing database manager...
2025-08-04 01:13:18,355 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 01:13:18,357 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 01:13:18,428 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 01:13:18,429 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 01:13:18,430 - app.main - INFO - Database manager initialized successfully
2025-08-04 01:13:35,592 - app.main - INFO - Shutting down application...
2025-08-04 01:13:35,593 - app.main - INFO - Closing database connections...
2025-08-04 01:13:35,594 - app.db.session - INFO - Closing database connections...
2025-08-04 01:13:35,602 - app.db.session - INFO - Database connections closed
2025-08-04 01:13:35,602 - app.main - INFO - Database connections closed successfully
2025-08-04 01:13:46,637 - app.main - INFO - Starting application...
2025-08-04 01:13:46,638 - app.main - INFO - Initializing database manager...
2025-08-04 01:13:46,639 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 01:13:46,642 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 01:13:46,731 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 01:13:46,732 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 01:13:46,732 - app.main - INFO - Database manager initialized successfully
2025-08-04 01:14:05,500 - app.main - INFO - Shutting down application...
2025-08-04 01:14:05,501 - app.main - INFO - Closing database connections...
2025-08-04 01:14:05,502 - app.db.session - INFO - Closing database connections...
2025-08-04 01:14:05,511 - app.db.session - INFO - Database connections closed
2025-08-04 01:14:05,512 - app.main - INFO - Database connections closed successfully
2025-08-04 01:14:16,402 - app.main - INFO - Starting application...
2025-08-04 01:14:16,404 - app.main - INFO - Initializing database manager...
2025-08-04 01:14:16,407 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 01:14:16,416 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 01:14:16,494 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 01:14:16,495 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 01:14:16,495 - app.main - INFO - Database manager initialized successfully
2025-08-04 01:14:30,819 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 01:14:32,761 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 01:14:32,799 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 01:14:32,800 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 01:14:32,822 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 01:14:32,835 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 01:14:32,840 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 01:14:32,884 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 01:14:32,989 - app.api.itinerary - ERROR - Failed to build POI list: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 01:14:32,990 - app.api.itinerary - INFO - itinerary_generation completed in 2.17s
2025-08-04 01:14:32,992 - app.db.session - ERROR - Unexpected session error: 500: Failed to build itinerary items
2025-08-04 11:31:41,320 - app.main - INFO - Shutting down application...
2025-08-04 11:31:41,324 - app.main - INFO - Closing database connections...
2025-08-04 11:31:41,328 - app.db.session - INFO - Closing database connections...
2025-08-04 11:31:41,354 - app.db.session - INFO - Database connections closed
2025-08-04 11:31:41,355 - app.main - INFO - Database connections closed successfully
2025-08-04 11:31:51,070 - app.main - INFO - Starting application...
2025-08-04 11:31:51,071 - app.main - INFO - Initializing database manager...
2025-08-04 11:31:51,072 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 11:31:51,074 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 11:31:51,148 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 11:31:51,148 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 11:31:51,149 - app.main - INFO - Database manager initialized successfully
2025-08-04 11:34:17,387 - app.main - INFO - Shutting down application...
2025-08-04 11:34:17,388 - app.main - INFO - Closing database connections...
2025-08-04 11:34:17,389 - app.db.session - INFO - Closing database connections...
2025-08-04 11:34:17,396 - app.db.session - INFO - Database connections closed
2025-08-04 11:34:17,397 - app.main - INFO - Database connections closed successfully
2025-08-04 11:34:27,095 - app.main - INFO - Starting application...
2025-08-04 11:34:27,096 - app.main - INFO - Initializing database manager...
2025-08-04 11:34:27,097 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 11:34:27,100 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 11:34:27,183 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 11:34:27,186 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 11:34:27,188 - app.main - INFO - Database manager initialized successfully
2025-08-04 11:51:18,074 - app.main - INFO - Shutting down application...
2025-08-04 11:51:18,075 - app.main - INFO - Closing database connections...
2025-08-04 11:51:18,076 - app.db.session - INFO - Closing database connections...
2025-08-04 11:51:18,086 - app.db.session - INFO - Database connections closed
2025-08-04 11:51:18,086 - app.main - INFO - Database connections closed successfully
2025-08-04 11:51:27,073 - app.main - INFO - Starting application...
2025-08-04 11:51:27,074 - app.main - INFO - Initializing database manager...
2025-08-04 11:51:27,075 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 11:51:27,077 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 11:51:27,142 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 11:51:27,143 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 11:51:27,143 - app.main - INFO - Database manager initialized successfully
2025-08-04 20:19:00,879 - app.main - INFO - Shutting down application...
2025-08-04 20:19:00,886 - app.main - INFO - Closing database connections...
2025-08-04 20:19:00,892 - app.db.session - INFO - Closing database connections...
2025-08-04 20:19:01,027 - app.db.session - INFO - Database connections closed
2025-08-04 20:19:01,029 - app.main - INFO - Database connections closed successfully
2025-08-04 21:09:35,382 - app.main - INFO - Starting application...
2025-08-04 21:09:35,383 - app.main - INFO - Initializing database manager...
2025-08-04 21:09:35,384 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:09:35,386 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:09:35,565 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:09:35,566 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:09:35,566 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:09:52,303 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-04 21:09:52,650 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-04 21:09:52,651 - app.core.security - INFO - user_authentication completed in 0.43s
2025-08-04 21:09:52,651 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-04 21:09:52,666 - app.core.security - INFO - Access token created successfully
2025-08-04 21:09:52,667 - app.core.security - INFO - Refresh token created successfully
2025-08-04 21:09:52,667 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-04 21:09:52,668 - app.api.auth - INFO - user_login completed in 0.45s
2025-08-04 21:10:22,126 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 21:10:23,683 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 21:10:23,707 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 21:10:23,807 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
2025-08-04 21:10:23,809 - app.db.session - ERROR - Database session error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('560478a6-3119-457d-8341-8ee576cb8f0d'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=datetime.timezone.utc), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-05T00:00:00+00:00", "2026-07-06T00:00:00+00:00", "2026-07-07T00:00:00+00:00" ... (158 characters truncated) ... .0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 1578.986406326294, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 21, 10, 23, 803246, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 21, 10, 23, 803271, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-04 21:10:23,810 - app.main - ERROR - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('560478a6-3119-457d-8341-8ee576cb8f0d'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=datetime.timezone.utc), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-05T00:00:00+00:00", "2026-07-06T00:00:00+00:00", "2026-07-07T00:00:00+00:00" ... (158 characters truncated) ... .0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 1578.986406326294, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 21, 10, 23, 803246, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 21, 10, 23, 803271, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 635, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 653, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedObjectError: type "itinerarystatus" does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 862, in generate_itinerary
    await session.commit()
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1014, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('560478a6-3119-457d-8341-8ee576cb8f0d'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=datetime.timezone.utc), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-05T00:00:00+00:00", "2026-07-06T00:00:00+00:00", "2026-07-07T00:00:00+00:00" ... (158 characters truncated) ... .0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 1578.986406326294, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 21, 10, 23, 803246, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 21, 10, 23, 803271, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-04 21:13:38,335 - app.main - INFO - Shutting down application...
2025-08-04 21:13:38,336 - app.main - INFO - Closing database connections...
2025-08-04 21:13:38,337 - app.db.session - INFO - Closing database connections...
2025-08-04 21:13:38,347 - app.db.session - INFO - Database connections closed
2025-08-04 21:13:38,347 - app.main - INFO - Database connections closed successfully
2025-08-04 21:14:09,053 - app.main - INFO - Starting application...
2025-08-04 21:14:09,054 - app.main - INFO - Initializing database manager...
2025-08-04 21:14:09,056 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:14:09,059 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:14:09,120 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:14:09,120 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:14:09,121 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:15:08,842 - app.main - INFO - Shutting down application...
2025-08-04 21:15:08,842 - app.main - INFO - Closing database connections...
2025-08-04 21:15:08,842 - app.db.session - INFO - Closing database connections...
2025-08-04 21:15:08,846 - app.db.session - INFO - Database connections closed
2025-08-04 21:15:08,846 - app.main - INFO - Database connections closed successfully
2025-08-04 21:15:15,204 - app.main - INFO - Starting application...
2025-08-04 21:15:15,205 - app.main - INFO - Initializing database manager...
2025-08-04 21:15:15,205 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:15:15,207 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:15:15,262 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:15:15,262 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:15:15,263 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:15:40,512 - app.main - INFO - Shutting down application...
2025-08-04 21:15:40,513 - app.main - INFO - Closing database connections...
2025-08-04 21:15:40,513 - app.db.session - INFO - Closing database connections...
2025-08-04 21:15:40,518 - app.db.session - INFO - Database connections closed
2025-08-04 21:15:40,518 - app.main - INFO - Database connections closed successfully
2025-08-04 21:15:48,816 - app.main - INFO - Starting application...
2025-08-04 21:15:48,817 - app.main - INFO - Initializing database manager...
2025-08-04 21:15:48,818 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:15:48,819 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:15:48,869 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:15:48,869 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:15:48,869 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:15:48,940 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 21:15:50,578 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 21:15:50,603 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 21:15:50,604 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 21:15:50,612 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 21:15:50,617 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 21:15:50,621 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 21:15:50,643 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 21:15:50,650 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 340, in build_poi_list
    opens=datetime.combine(start_date.date(), time(9, 0), tzinfo=start_date.tzinfo),
                                              ~~~~^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 21:15:50,660 - app.api.itinerary - INFO - itinerary_generation completed in 1.72s
2025-08-04 21:15:50,661 - app.db.session - ERROR - Unexpected session error: 500: Failed to build itinerary items
2025-08-04 21:19:05,025 - app.main - INFO - Shutting down application...
2025-08-04 21:19:05,026 - app.main - INFO - Closing database connections...
2025-08-04 21:19:05,026 - app.db.session - INFO - Closing database connections...
2025-08-04 21:19:05,037 - app.db.session - INFO - Database connections closed
2025-08-04 21:19:05,038 - app.main - INFO - Database connections closed successfully
2025-08-04 21:19:15,612 - app.main - INFO - Starting application...
2025-08-04 21:19:15,613 - app.main - INFO - Initializing database manager...
2025-08-04 21:19:15,614 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:19:15,616 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:19:15,684 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:19:15,685 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:19:15,686 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:19:24,410 - app.main - INFO - Shutting down application...
2025-08-04 21:19:24,411 - app.main - INFO - Closing database connections...
2025-08-04 21:19:24,411 - app.db.session - INFO - Closing database connections...
2025-08-04 21:19:24,415 - app.db.session - INFO - Database connections closed
2025-08-04 21:19:24,415 - app.main - INFO - Database connections closed successfully
2025-08-04 21:19:31,427 - app.main - INFO - Starting application...
2025-08-04 21:19:31,428 - app.main - INFO - Initializing database manager...
2025-08-04 21:19:31,429 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:19:31,431 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:19:31,495 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:19:31,496 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:19:31,496 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:20:29,783 - app.main - INFO - Shutting down application...
2025-08-04 21:20:29,783 - app.main - INFO - Closing database connections...
2025-08-04 21:20:29,783 - app.db.session - INFO - Closing database connections...
2025-08-04 21:20:29,787 - app.db.session - INFO - Database connections closed
2025-08-04 21:20:29,788 - app.main - INFO - Database connections closed successfully
2025-08-04 21:20:36,255 - app.main - INFO - Starting application...
2025-08-04 21:20:36,256 - app.main - INFO - Initializing database manager...
2025-08-04 21:20:36,256 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:20:36,258 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:20:36,306 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:20:36,306 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:20:36,307 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:15:33,688 - app.main - INFO - Shutting down application...
2025-08-04 22:15:33,691 - app.main - INFO - Closing database connections...
2025-08-04 22:15:33,692 - app.db.session - INFO - Closing database connections...
2025-08-04 22:15:33,720 - app.db.session - INFO - Database connections closed
2025-08-04 22:15:33,720 - app.main - INFO - Database connections closed successfully
2025-08-04 22:15:45,238 - app.main - INFO - Starting application...
2025-08-04 22:15:45,245 - app.main - INFO - Initializing database manager...
2025-08-04 22:15:45,249 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:15:45,254 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:15:45,427 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:15:45,428 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:15:45,434 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:20:25,720 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-08-04 22:20:25,721 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-08-04 22:20:33,523 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-04 22:20:33,843 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-04 22:20:33,844 - app.core.security - INFO - user_authentication completed in 0.41s
2025-08-04 22:20:33,844 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-04 22:20:33,846 - app.core.security - INFO - Access token created successfully
2025-08-04 22:20:33,847 - app.core.security - INFO - Refresh token created successfully
2025-08-04 22:20:33,847 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-04 22:20:33,848 - app.api.auth - INFO - user_login completed in 0.41s
2025-08-04 22:20:50,136 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:20:51,989 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:20:52,019 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:20:52,020 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:20:52,029 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:20:52,041 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:20:52,044 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:20:52,119 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:20:52,127 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 340, in build_poi_list
    opens=datetime.combine(start_date.date(), time(9, 0), tzinfo=start_date.tzinfo),
                                              ~~~~^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:20:52,136 - app.api.itinerary - INFO - itinerary_generation completed in 1.99s
2025-08-04 22:20:52,137 - app.db.session - ERROR - Unexpected session error: 500: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:23:42,165 - app.main - INFO - Shutting down application...
2025-08-04 22:23:42,166 - app.main - INFO - Closing database connections...
2025-08-04 22:23:42,166 - app.db.session - INFO - Closing database connections...
2025-08-04 22:23:42,181 - app.db.session - INFO - Database connections closed
2025-08-04 22:23:42,181 - app.main - INFO - Database connections closed successfully
2025-08-04 22:23:54,766 - app.main - INFO - Starting application...
2025-08-04 22:23:54,767 - app.main - INFO - Initializing database manager...
2025-08-04 22:23:54,767 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:23:54,770 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:23:54,890 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:23:54,890 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:23:54,891 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:24:04,725 - app.main - INFO - Shutting down application...
2025-08-04 22:24:04,726 - app.main - INFO - Closing database connections...
2025-08-04 22:24:04,727 - app.db.session - INFO - Closing database connections...
2025-08-04 22:24:04,733 - app.db.session - INFO - Database connections closed
2025-08-04 22:24:04,733 - app.main - INFO - Database connections closed successfully
2025-08-04 22:24:31,399 - app.main - INFO - Starting application...
2025-08-04 22:24:31,403 - app.main - INFO - Initializing database manager...
2025-08-04 22:24:31,403 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:24:31,405 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:24:31,461 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:24:31,462 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:24:31,462 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:25:40,993 - app.main - INFO - Shutting down application...
2025-08-04 22:25:40,994 - app.main - INFO - Closing database connections...
2025-08-04 22:25:40,994 - app.db.session - INFO - Closing database connections...
2025-08-04 22:25:40,999 - app.db.session - INFO - Database connections closed
2025-08-04 22:25:41,000 - app.main - INFO - Database connections closed successfully
2025-08-04 22:25:49,480 - app.main - INFO - Starting application...
2025-08-04 22:25:49,482 - app.main - INFO - Initializing database manager...
2025-08-04 22:25:49,483 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:25:49,485 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:25:49,539 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:25:49,539 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:25:49,540 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:26:15,935 - app.main - INFO - Shutting down application...
2025-08-04 22:26:15,935 - app.main - INFO - Closing database connections...
2025-08-04 22:26:15,936 - app.db.session - INFO - Closing database connections...
2025-08-04 22:26:15,940 - app.db.session - INFO - Database connections closed
2025-08-04 22:26:15,940 - app.main - INFO - Database connections closed successfully
2025-08-04 22:26:24,806 - app.main - INFO - Starting application...
2025-08-04 22:26:24,806 - app.main - INFO - Initializing database manager...
2025-08-04 22:26:24,807 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:26:24,810 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:26:24,915 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:26:24,916 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:26:24,917 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:26:49,888 - app.main - INFO - Shutting down application...
2025-08-04 22:26:49,890 - app.main - INFO - Closing database connections...
2025-08-04 22:26:49,891 - app.db.session - INFO - Closing database connections...
2025-08-04 22:26:49,902 - app.db.session - INFO - Database connections closed
2025-08-04 22:26:49,906 - app.main - INFO - Database connections closed successfully
2025-08-04 22:27:00,037 - app.main - INFO - Starting application...
2025-08-04 22:27:00,037 - app.main - INFO - Initializing database manager...
2025-08-04 22:27:00,038 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:27:00,041 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:27:00,090 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:27:00,091 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:27:00,091 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:27:10,333 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:27:11,823 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:27:11,847 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:27:11,848 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:27:11,858 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:27:11,862 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:27:11,865 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:27:11,925 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:27:11,949 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:27:11,949 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 68, in parse_opening_hours
    o, c = oh.split("-")
    ^^^^
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 362, in build_poi_list
    o, c = parse_opening_hours(oh or "")
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 72, in parse_opening_hours
    return time(9, 0), time(17, 0)
           ~~~~^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:27:11,962 - app.api.itinerary - INFO - itinerary_generation completed in 1.63s
2025-08-04 22:27:11,962 - app.db.session - ERROR - Unexpected session error: 500: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:27:11,994 - app.main - INFO - Shutting down application...
2025-08-04 22:27:11,994 - app.main - INFO - Closing database connections...
2025-08-04 22:27:11,995 - app.db.session - INFO - Closing database connections...
2025-08-04 22:27:12,004 - app.db.session - INFO - Database connections closed
2025-08-04 22:27:12,005 - app.main - INFO - Database connections closed successfully
2025-08-04 22:27:19,118 - app.main - INFO - Starting application...
2025-08-04 22:27:19,120 - app.main - INFO - Initializing database manager...
2025-08-04 22:27:19,122 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:27:19,124 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:27:19,187 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:27:19,188 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:27:19,188 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:27:29,012 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:27:30,442 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:27:30,465 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:27:30,466 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:27:30,474 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:27:30,477 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:27:30,480 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:27:30,500 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:27:30,510 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:27:30,510 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 68, in parse_opening_hours
    o, c = oh.split("-")
    ^^^^
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 362, in build_poi_list
    o, c = parse_opening_hours(oh or "")
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 72, in parse_opening_hours
    return time(9, 0), time(17, 0)
           ~~~~^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:27:30,522 - app.api.itinerary - INFO - itinerary_generation completed in 1.51s
2025-08-04 22:27:30,522 - app.db.session - ERROR - Unexpected session error: 500: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:29:52,658 - app.main - INFO - Shutting down application...
2025-08-04 22:29:52,658 - app.main - INFO - Closing database connections...
2025-08-04 22:29:52,659 - app.db.session - INFO - Closing database connections...
2025-08-04 22:29:52,664 - app.db.session - INFO - Database connections closed
2025-08-04 22:29:52,664 - app.main - INFO - Database connections closed successfully
2025-08-04 22:30:03,011 - app.main - INFO - Starting application...
2025-08-04 22:30:03,012 - app.main - INFO - Initializing database manager...
2025-08-04 22:30:03,012 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:30:03,015 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:30:03,066 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:30:03,066 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:30:03,067 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:30:11,289 - app.main - INFO - Shutting down application...
2025-08-04 22:30:11,290 - app.main - INFO - Closing database connections...
2025-08-04 22:30:11,290 - app.db.session - INFO - Closing database connections...
2025-08-04 22:30:11,294 - app.db.session - INFO - Database connections closed
2025-08-04 22:30:11,294 - app.main - INFO - Database connections closed successfully
2025-08-04 22:30:18,148 - app.main - INFO - Starting application...
2025-08-04 22:30:18,149 - app.main - INFO - Initializing database manager...
2025-08-04 22:30:18,149 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:30:18,151 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:30:18,200 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:30:18,201 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:30:18,202 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:30:29,836 - app.main - INFO - Shutting down application...
2025-08-04 22:30:29,837 - app.main - INFO - Closing database connections...
2025-08-04 22:30:29,838 - app.db.session - INFO - Closing database connections...
2025-08-04 22:30:29,842 - app.db.session - INFO - Database connections closed
2025-08-04 22:30:29,842 - app.main - INFO - Database connections closed successfully
2025-08-04 22:30:38,108 - app.main - INFO - Starting application...
2025-08-04 22:30:38,108 - app.main - INFO - Initializing database manager...
2025-08-04 22:30:38,109 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:30:38,111 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:30:38,159 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:30:38,160 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:30:38,162 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:30:38,252 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:30:39,819 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:30:39,844 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:30:39,845 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:30:39,854 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:30:39,857 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:30:39,861 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:30:39,883 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:30:39,893 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,893 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,894 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,895 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,896 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,897 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,898 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,898 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:30:39,899 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:30:39,899 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:30:39,919 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:30:40,044 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:30:40,058 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
2025-08-04 22:30:40,062 - app.api.itinerary - ERROR - Failed to persist itinerary: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('18eaebfb-4d6e-4777-9790-6d06b0cb8fd6'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=<UTC>), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=<UTC>), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-11T00:00:00+00:00"], "interests": ["budget"], "budget": 2000.0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 1583.9834213256836, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 22, 30, 40, 50149, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 22, 30, 40, 50155, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-04 22:30:40,062 - app.api.itinerary - INFO - itinerary_generation completed in 1.81s
2025-08-04 22:30:40,063 - app.db.session - ERROR - Unexpected session error: 500: Failed to save itinerary
2025-08-04 22:31:39,284 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:31:39,306 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:31:39,318 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:31:39,319 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:31:39,321 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:31:39,323 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:31:39,325 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:31:39,329 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:31:39,335 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,336 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,336 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,337 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,337 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,338 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,338 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,339 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:31:39,339 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:31:39,340 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:31:39,342 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:31:39,446 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:31:39,451 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
2025-08-04 22:31:39,453 - app.api.itinerary - ERROR - Failed to persist itinerary: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('8b4368ba-d672-4970-8346-ef2b155b7d98'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=<UTC>), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=<UTC>), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-11T00:00:00+00:00"], "interests": ["budget"], "budget": 2000.0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 32.39846229553223, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 22, 31, 39, 449749, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 22, 31, 39, 449755, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-04 22:31:39,453 - app.api.itinerary - INFO - itinerary_generation completed in 0.17s
2025-08-04 22:31:39,454 - app.db.session - ERROR - Unexpected session error: 500: Failed to save itinerary
2025-08-04 22:36:34,648 - app.main - INFO - Starting application...
2025-08-04 22:36:34,649 - app.main - INFO - Initializing database manager...
2025-08-04 22:36:34,649 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:36:34,651 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:36:34,719 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:36:34,719 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:36:34,720 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:36:45,732 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:36:47,232 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:36:47,257 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:36:47,258 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:36:47,269 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:36:47,273 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:36:47,276 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:36:47,304 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:36:47,316 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,317 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,317 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,318 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,319 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,320 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,321 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,321 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:36:47,322 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:36:47,323 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:36:47,330 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:36:47,489 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:36:47,507 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum itinerarystatus: "GENERATED"
2025-08-04 22:36:47,509 - app.api.itinerary - ERROR - Failed to persist itinerary: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum itinerarystatus: "GENERATED"
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('bb29ace9-9d2d-480d-8893-54428dacde51'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=<UTC>), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=<UTC>), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-11T00:00:00+00:00"], "interests": ["budget"], "budget": 2000.0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 1516.7720317840576, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 22, 36, 47, 496353, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 22, 36, 47, 496359, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-04 22:36:47,509 - app.api.itinerary - INFO - itinerary_generation completed in 1.77s
2025-08-04 22:36:47,510 - app.db.session - ERROR - Unexpected session error: 500: Failed to save itinerary
2025-08-04 22:37:10,780 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:37:10,800 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:37:10,809 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:37:10,810 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:37:10,812 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:37:10,814 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:37:10,816 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:37:10,820 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:37:10,824 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,824 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,825 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,825 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,825 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,826 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,827 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,827 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:37:10,828 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:37:10,829 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:37:10,831 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:37:10,939 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:37:10,942 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum itinerarystatus: "GENERATED"
2025-08-04 22:37:10,943 - app.api.itinerary - ERROR - Failed to persist itinerary: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum itinerarystatus: "GENERATED"
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('0c14fe4f-dcfb-4f47-a1e6-1a430fc5d655'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=<UTC>), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=<UTC>), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-11T00:00:00+00:00"], "interests": ["budget"], "budget": 2000.0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 27.144193649291992, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 22, 37, 10, 941231, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 22, 37, 10, 941236, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-04 22:37:10,943 - app.api.itinerary - INFO - itinerary_generation completed in 0.16s
2025-08-04 22:37:10,944 - app.db.session - ERROR - Unexpected session error: 500: Failed to save itinerary
2025-08-04 22:42:12,096 - app.main - INFO - Starting application...
2025-08-04 22:42:12,097 - app.main - INFO - Initializing database manager...
2025-08-04 22:42:12,098 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:42:12,100 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:42:12,153 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:42:12,154 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:42:12,154 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:42:24,633 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:42:26,153 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:42:26,178 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:42:26,179 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:42:26,185 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:42:26,188 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:42:26,191 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:42:26,210 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:42:26,219 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,219 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,220 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,221 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,222 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,222 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,223 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,223 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:42:26,224 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:42:26,225 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:42:26,231 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:42:26,348 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:42:26,412 - app.api.itinerary - INFO - Itinerary 22093061-db79-432e-b98e-ba28eb05a3ff persisted successfully
2025-08-04 22:42:26,413 - app.api.itinerary - INFO - Successfully generated itinerary 22093061-db79-432e-b98e-ba28eb05a3ff for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-04 22:42:26,413 - app.api.itinerary - INFO - itinerary_generation completed in 1.78s
2025-08-04 22:44:11,679 - app.main - INFO - Shutting down application...
2025-08-04 22:44:11,679 - app.main - INFO - Closing database connections...
2025-08-04 22:44:11,679 - app.db.session - INFO - Closing database connections...
2025-08-04 22:44:11,684 - app.db.session - INFO - Database connections closed
2025-08-04 22:44:11,685 - app.main - INFO - Database connections closed successfully
2025-08-04 22:44:17,918 - app.main - INFO - Starting application...
2025-08-04 22:44:17,919 - app.main - INFO - Initializing database manager...
2025-08-04 22:44:17,919 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:44:17,921 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:44:17,965 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:44:17,966 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:44:17,966 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:44:25,875 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:44:27,356 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:44:27,380 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:44:27,490 - app.db.session - ERROR - Unexpected session error: 404: No activities found within 20.0 km
2025-08-04 22:46:03,970 - app.main - INFO - Shutting down application...
2025-08-04 22:46:03,970 - app.main - INFO - Closing database connections...
2025-08-04 22:46:03,971 - app.db.session - INFO - Closing database connections...
2025-08-04 22:46:03,978 - app.db.session - INFO - Database connections closed
2025-08-04 22:46:03,979 - app.main - INFO - Database connections closed successfully
2025-08-04 22:46:11,131 - app.main - INFO - Starting application...
2025-08-04 22:46:11,131 - app.main - INFO - Initializing database manager...
2025-08-04 22:46:11,132 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:46:11,136 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:46:11,187 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:46:11,188 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:46:11,188 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:46:15,159 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:46:16,648 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:46:16,674 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:46:16,734 - app.db.session - ERROR - Unexpected session error: 404: No activities found within 20.0 km
2025-08-04 22:46:53,175 - app.main - INFO - Shutting down application...
2025-08-04 22:46:53,178 - app.main - INFO - Closing database connections...
2025-08-04 22:46:53,179 - app.db.session - INFO - Closing database connections...
2025-08-04 22:46:53,197 - app.db.session - INFO - Database connections closed
2025-08-04 22:46:53,199 - app.main - INFO - Database connections closed successfully
2025-08-04 22:47:03,080 - app.main - INFO - Starting application...
2025-08-04 22:47:03,080 - app.main - INFO - Initializing database manager...
2025-08-04 22:47:03,082 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:47:03,084 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:47:03,138 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:47:03,139 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:47:03,139 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:47:04,045 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:47:05,797 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:47:05,823 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:47:05,899 - app.db.session - ERROR - Unexpected session error: 404: No activities found within 50.0 km
2025-08-04 22:47:49,309 - app.main - INFO - Shutting down application...
2025-08-04 22:47:49,309 - app.main - INFO - Closing database connections...
2025-08-04 22:47:49,310 - app.db.session - INFO - Closing database connections...
2025-08-04 22:47:49,329 - app.db.session - INFO - Database connections closed
2025-08-04 22:47:49,330 - app.main - INFO - Database connections closed successfully
2025-08-04 22:47:58,136 - app.main - INFO - Starting application...
2025-08-04 22:47:58,137 - app.main - INFO - Initializing database manager...
2025-08-04 22:47:58,138 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:47:58,140 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:47:58,201 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:47:58,202 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:47:58,202 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:47:59,302 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:48:00,868 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:48:00,892 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:48:00,893 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:48:00,899 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:48:00,902 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:48:00,905 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:48:00,925 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:48:00,935 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,935 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,936 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,936 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,937 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,938 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,938 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,939 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:48:00,940 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:48:00,941 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:48:00,950 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:48:01,070 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:48:01,120 - app.api.itinerary - INFO - Itinerary 3c24bfeb-7da3-44c6-b097-fea1464f81d6 persisted successfully
2025-08-04 22:48:01,120 - app.api.itinerary - INFO - Successfully generated itinerary 3c24bfeb-7da3-44c6-b097-fea1464f81d6 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-04 22:48:01,121 - app.api.itinerary - INFO - itinerary_generation completed in 1.82s
2025-08-04 22:48:11,388 - app.main - INFO - Shutting down application...
2025-08-04 22:48:11,389 - app.main - INFO - Closing database connections...
2025-08-04 22:48:11,389 - app.db.session - INFO - Closing database connections...
2025-08-04 22:48:11,398 - app.db.session - INFO - Database connections closed
2025-08-04 22:48:11,399 - app.main - INFO - Database connections closed successfully
2025-08-04 22:48:19,353 - app.main - INFO - Starting application...
2025-08-04 22:48:19,353 - app.main - INFO - Initializing database manager...
2025-08-04 22:48:19,354 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:48:19,356 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:48:19,437 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:48:19,438 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:48:19,438 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:19:28,931 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 23:19:31,186 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 23:19:31,187 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 23:19:31,196 - app.api.itinerary - INFO - itinerary_generation completed in 2.25s
2025-08-04 23:19:31,197 - app.db.session - ERROR - Unexpected session error: 404: Destination 'New York City' not found
2025-08-04 23:19:46,297 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 23:19:46,413 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 23:19:46,414 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 23:19:46,418 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 23:19:46,430 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 23:19:46,433 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 23:19:46,496 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 23:19:46,510 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,510 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-08-04 23:19:46,511 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-08-04 23:19:46,512 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,513 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,514 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,514 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-08-04 23:19:46,514 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,515 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,521 - app.api.itinerary - INFO - Built POI list with 49 items
2025-08-04 23:19:46,560 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-04 23:19:46,622 - app.api.itinerary - INFO - Itinerary 90e61afc-7697-4133-927c-e0e66408f220 persisted successfully
2025-08-04 23:19:46,623 - app.api.itinerary - INFO - Successfully generated itinerary 90e61afc-7697-4133-927c-e0e66408f220 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-04 23:19:46,623 - app.api.itinerary - INFO - itinerary_generation completed in 0.32s
2025-08-04 23:20:11,504 - app.main - INFO - Shutting down application...
2025-08-04 23:20:11,505 - app.main - INFO - Closing database connections...
2025-08-04 23:20:11,506 - app.db.session - INFO - Closing database connections...
2025-08-04 23:20:11,521 - app.db.session - INFO - Database connections closed
2025-08-04 23:20:11,522 - app.main - INFO - Database connections closed successfully
2025-08-04 23:20:22,276 - app.main - INFO - Starting application...
2025-08-04 23:20:22,277 - app.main - INFO - Initializing database manager...
2025-08-04 23:20:22,278 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:20:22,281 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:20:22,342 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:20:22,342 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:20:22,343 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:20:22,432 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 23:20:24,776 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 23:20:24,878 - app.db.session - ERROR - Unexpected session error: 404: No accommodations found within 20.0 km
2025-08-04 23:20:33,579 - app.main - INFO - Shutting down application...
2025-08-04 23:20:33,580 - app.main - INFO - Closing database connections...
2025-08-04 23:20:33,580 - app.db.session - INFO - Closing database connections...
2025-08-04 23:20:33,586 - app.db.session - INFO - Database connections closed
2025-08-04 23:20:33,586 - app.main - INFO - Database connections closed successfully
2025-08-04 23:20:40,990 - app.main - INFO - Starting application...
2025-08-04 23:20:40,991 - app.main - INFO - Initializing database manager...
2025-08-04 23:20:40,993 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:20:40,995 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:20:41,040 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:20:41,041 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:20:41,041 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:43:35,621 - app.main - INFO - Shutting down application...
2025-08-04 23:43:35,623 - app.main - INFO - Closing database connections...
2025-08-04 23:43:35,624 - app.db.session - INFO - Closing database connections...
2025-08-04 23:43:35,663 - app.db.session - INFO - Database connections closed
2025-08-04 23:43:35,664 - app.main - INFO - Database connections closed successfully
2025-08-04 23:43:48,370 - app.main - INFO - Starting application...
2025-08-04 23:43:48,371 - app.main - INFO - Initializing database manager...
2025-08-04 23:43:48,372 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:43:48,374 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:43:48,481 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:43:48,482 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:43:48,483 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:48:36,925 - app.main - INFO - Shutting down application...
2025-08-04 23:48:36,926 - app.main - INFO - Closing database connections...
2025-08-04 23:48:36,926 - app.db.session - INFO - Closing database connections...
2025-08-04 23:48:36,932 - app.db.session - INFO - Database connections closed
2025-08-04 23:48:36,932 - app.main - INFO - Database connections closed successfully
2025-08-04 23:48:48,642 - app.main - INFO - Starting application...
2025-08-04 23:48:48,643 - app.main - INFO - Initializing database manager...
2025-08-04 23:48:48,644 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:48:48,647 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:48:48,704 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:48:48,704 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:48:48,705 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:49:15,892 - app.main - INFO - Shutting down application...
2025-08-04 23:49:15,894 - app.main - INFO - Closing database connections...
2025-08-04 23:49:15,895 - app.db.session - INFO - Closing database connections...
2025-08-04 23:49:15,905 - app.db.session - INFO - Database connections closed
2025-08-04 23:49:15,905 - app.main - INFO - Database connections closed successfully
2025-08-04 23:49:22,903 - app.main - INFO - Starting application...
2025-08-04 23:49:22,904 - app.main - INFO - Initializing database manager...
2025-08-04 23:49:22,905 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:49:22,906 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:49:22,961 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:49:22,962 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:49:22,963 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:51:38,737 - app.main - INFO - Shutting down application...
2025-08-04 23:51:38,738 - app.main - INFO - Closing database connections...
2025-08-04 23:51:38,738 - app.db.session - INFO - Closing database connections...
2025-08-04 23:51:38,743 - app.db.session - INFO - Database connections closed
2025-08-04 23:51:38,743 - app.main - INFO - Database connections closed successfully
2025-08-04 23:51:45,638 - app.main - INFO - Starting application...
2025-08-04 23:51:45,639 - app.main - INFO - Initializing database manager...
2025-08-04 23:51:45,640 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:51:45,642 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:51:45,693 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:51:45,694 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:51:45,694 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:52:28,529 - app.main - INFO - Shutting down application...
2025-08-04 23:52:28,529 - app.main - INFO - Closing database connections...
2025-08-04 23:52:28,530 - app.db.session - INFO - Closing database connections...
2025-08-04 23:52:28,534 - app.db.session - INFO - Database connections closed
2025-08-04 23:52:28,535 - app.main - INFO - Database connections closed successfully
2025-08-04 23:52:35,062 - app.main - INFO - Starting application...
2025-08-04 23:52:35,063 - app.main - INFO - Initializing database manager...
2025-08-04 23:52:35,065 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:52:35,066 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:52:35,115 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:52:35,116 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:52:35,116 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:53:45,512 - app.main - INFO - Shutting down application...
2025-08-04 23:53:45,512 - app.main - INFO - Closing database connections...
2025-08-04 23:53:45,513 - app.db.session - INFO - Closing database connections...
2025-08-04 23:53:45,516 - app.db.session - INFO - Database connections closed
2025-08-04 23:53:45,516 - app.main - INFO - Database connections closed successfully
2025-08-04 23:53:52,502 - app.main - INFO - Starting application...
2025-08-04 23:53:52,503 - app.main - INFO - Initializing database manager...
2025-08-04 23:53:52,504 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:53:52,505 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:53:52,562 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:53:52,563 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:55:07,306 - app.main - INFO - Shutting down application...
2025-08-04 23:55:07,307 - app.main - INFO - Closing database connections...
2025-08-04 23:55:07,308 - app.db.session - INFO - Closing database connections...
2025-08-04 23:55:07,313 - app.db.session - INFO - Database connections closed
2025-08-04 23:55:07,313 - app.main - INFO - Database connections closed successfully
2025-08-04 23:55:15,545 - app.main - INFO - Starting application...
2025-08-04 23:55:15,546 - app.main - INFO - Initializing database manager...
2025-08-04 23:55:15,547 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:55:15,550 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:55:15,607 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:55:15,608 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:56:59,183 - app.main - INFO - Shutting down application...
2025-08-04 23:56:59,183 - app.main - INFO - Closing database connections...
2025-08-04 23:56:59,184 - app.db.session - INFO - Closing database connections...
2025-08-04 23:56:59,188 - app.db.session - INFO - Database connections closed
2025-08-04 23:56:59,189 - app.main - INFO - Database connections closed successfully
2025-08-04 23:57:06,624 - app.main - INFO - Starting application...
2025-08-04 23:57:06,625 - app.main - INFO - Initializing database manager...
2025-08-04 23:57:06,628 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:57:06,631 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:57:06,705 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:57:06,706 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:58:49,060 - app.main - INFO - Shutting down application...
2025-08-04 23:58:49,060 - app.main - INFO - Closing database connections...
2025-08-04 23:58:49,061 - app.db.session - INFO - Closing database connections...
2025-08-04 23:58:49,065 - app.db.session - INFO - Database connections closed
2025-08-04 23:58:49,066 - app.main - INFO - Database connections closed successfully
2025-08-04 23:58:56,484 - app.main - INFO - Starting application...
2025-08-04 23:58:56,485 - app.main - INFO - Initializing database manager...
2025-08-04 23:58:56,485 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:58:56,487 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:58:56,533 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:58:56,533 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:59:05,057 - app.main - INFO - Shutting down application...
2025-08-04 23:59:05,057 - app.main - INFO - Closing database connections...
2025-08-04 23:59:05,058 - app.db.session - INFO - Closing database connections...
2025-08-04 23:59:05,062 - app.db.session - INFO - Database connections closed
2025-08-04 23:59:05,062 - app.main - INFO - Database connections closed successfully
2025-08-04 23:59:12,857 - app.main - INFO - Starting application...
2025-08-04 23:59:12,857 - app.main - INFO - Initializing database manager...
2025-08-04 23:59:12,858 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:59:12,861 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:59:12,916 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:59:12,917 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:59:23,762 - app.main - INFO - Shutting down application...
2025-08-04 23:59:23,763 - app.main - INFO - Closing database connections...
2025-08-04 23:59:23,763 - app.db.session - INFO - Closing database connections...
2025-08-04 23:59:23,769 - app.db.session - INFO - Database connections closed
2025-08-04 23:59:23,770 - app.main - INFO - Database connections closed successfully
2025-08-04 23:59:31,414 - app.main - INFO - Starting application...
2025-08-04 23:59:31,414 - app.main - INFO - Initializing database manager...
2025-08-04 23:59:31,415 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:59:31,417 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:59:31,513 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:59:31,514 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:03:23,640 - app.main - INFO - Shutting down application...
2025-08-05 00:03:23,642 - app.main - INFO - Closing database connections...
2025-08-05 00:03:23,643 - app.db.session - INFO - Closing database connections...
2025-08-05 00:03:23,660 - app.db.session - INFO - Database connections closed
2025-08-05 00:03:23,661 - app.main - INFO - Database connections closed successfully
2025-08-05 00:03:36,405 - app.main - INFO - Starting application...
2025-08-05 00:03:36,405 - app.main - INFO - Initializing database manager...
2025-08-05 00:03:36,406 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:03:36,409 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:03:36,481 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:03:36,483 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:05:34,663 - app.main - INFO - Shutting down application...
2025-08-05 00:05:34,663 - app.main - INFO - Closing database connections...
2025-08-05 00:05:34,664 - app.db.session - INFO - Closing database connections...
2025-08-05 00:05:34,669 - app.db.session - INFO - Database connections closed
2025-08-05 00:05:34,669 - app.main - INFO - Database connections closed successfully
2025-08-05 00:05:44,005 - app.main - INFO - Starting application...
2025-08-05 00:05:44,005 - app.main - INFO - Initializing database manager...
2025-08-05 00:05:44,007 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:05:44,009 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:05:44,056 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:05:44,057 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:07:24,503 - app.main - INFO - Shutting down application...
2025-08-05 00:07:24,503 - app.main - INFO - Closing database connections...
2025-08-05 00:07:24,504 - app.db.session - INFO - Closing database connections...
2025-08-05 00:07:24,509 - app.db.session - INFO - Database connections closed
2025-08-05 00:07:24,509 - app.main - INFO - Database connections closed successfully
2025-08-05 00:07:31,675 - app.main - INFO - Starting application...
2025-08-05 00:07:31,676 - app.main - INFO - Initializing database manager...
2025-08-05 00:07:31,676 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:07:31,678 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:07:31,726 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:07:31,726 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:08:09,875 - app.main - INFO - Shutting down application...
2025-08-05 00:08:09,876 - app.main - INFO - Closing database connections...
2025-08-05 00:08:09,876 - app.db.session - INFO - Closing database connections...
2025-08-05 00:08:09,880 - app.db.session - INFO - Database connections closed
2025-08-05 00:08:09,880 - app.main - INFO - Database connections closed successfully
2025-08-05 00:08:16,500 - app.main - INFO - Starting application...
2025-08-05 00:08:16,501 - app.main - INFO - Initializing database manager...
2025-08-05 00:08:16,501 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:08:16,503 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:08:16,556 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:08:16,557 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:08:28,602 - app.main - INFO - Shutting down application...
2025-08-05 00:08:28,602 - app.main - INFO - Closing database connections...
2025-08-05 00:08:28,603 - app.db.session - INFO - Closing database connections...
2025-08-05 00:08:28,606 - app.db.session - INFO - Database connections closed
2025-08-05 00:08:28,607 - app.main - INFO - Database connections closed successfully
2025-08-05 00:08:36,100 - app.main - INFO - Starting application...
2025-08-05 00:08:36,101 - app.main - INFO - Initializing database manager...
2025-08-05 00:08:36,101 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:08:36,103 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:08:36,153 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:08:36,153 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:08:44,977 - app.main - INFO - Shutting down application...
2025-08-05 00:08:44,978 - app.main - INFO - Closing database connections...
2025-08-05 00:08:44,978 - app.db.session - INFO - Closing database connections...
2025-08-05 00:08:44,982 - app.db.session - INFO - Database connections closed
2025-08-05 00:08:44,982 - app.main - INFO - Database connections closed successfully
2025-08-05 00:08:52,619 - app.main - INFO - Starting application...
2025-08-05 00:08:52,619 - app.main - INFO - Initializing database manager...
2025-08-05 00:08:52,620 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:08:52,621 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:08:52,668 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:08:52,668 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:10:16,640 - app.main - INFO - Shutting down application...
2025-08-05 00:10:16,640 - app.main - INFO - Closing database connections...
2025-08-05 00:10:16,641 - app.db.session - INFO - Closing database connections...
2025-08-05 00:10:16,646 - app.db.session - INFO - Database connections closed
2025-08-05 00:10:16,646 - app.main - INFO - Database connections closed successfully
2025-08-05 00:10:23,835 - app.main - INFO - Starting application...
2025-08-05 00:10:23,837 - app.main - INFO - Initializing database manager...
2025-08-05 00:10:23,839 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:10:23,841 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:10:23,889 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:10:23,890 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:10:36,037 - app.main - INFO - Shutting down application...
2025-08-05 00:10:36,037 - app.main - INFO - Closing database connections...
2025-08-05 00:10:36,037 - app.db.session - INFO - Closing database connections...
2025-08-05 00:10:36,041 - app.db.session - INFO - Database connections closed
2025-08-05 00:10:36,042 - app.main - INFO - Database connections closed successfully
2025-08-05 00:10:42,419 - app.main - INFO - Starting application...
2025-08-05 00:10:42,423 - app.main - INFO - Initializing database manager...
2025-08-05 00:10:42,426 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:10:42,429 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:10:42,547 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:10:42,547 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:11:40,255 - app.main - INFO - Shutting down application...
2025-08-05 00:11:40,256 - app.main - INFO - Closing database connections...
2025-08-05 00:11:40,256 - app.db.session - INFO - Closing database connections...
2025-08-05 00:11:40,261 - app.db.session - INFO - Database connections closed
2025-08-05 00:11:40,262 - app.main - INFO - Database connections closed successfully
2025-08-05 00:11:46,722 - app.main - INFO - Starting application...
2025-08-05 00:11:46,723 - app.main - INFO - Initializing database manager...
2025-08-05 00:11:46,724 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:11:46,725 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:11:46,790 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:11:46,790 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:12:12,299 - app.main - INFO - Shutting down application...
2025-08-05 00:12:12,299 - app.main - INFO - Closing database connections...
2025-08-05 00:12:12,300 - app.db.session - INFO - Closing database connections...
2025-08-05 00:12:12,304 - app.db.session - INFO - Database connections closed
2025-08-05 00:12:12,305 - app.main - INFO - Database connections closed successfully
2025-08-05 00:12:19,168 - app.main - INFO - Starting application...
2025-08-05 00:12:19,168 - app.main - INFO - Initializing database manager...
2025-08-05 00:12:19,169 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:12:19,170 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:12:19,216 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:12:19,216 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:12:46,110 - app.main - INFO - Shutting down application...
2025-08-05 00:12:46,110 - app.main - INFO - Closing database connections...
2025-08-05 00:12:46,111 - app.db.session - INFO - Closing database connections...
2025-08-05 00:12:46,116 - app.db.session - INFO - Database connections closed
2025-08-05 00:12:46,116 - app.main - INFO - Database connections closed successfully
2025-08-05 00:12:53,379 - app.main - INFO - Starting application...
2025-08-05 00:12:53,380 - app.main - INFO - Initializing database manager...
2025-08-05 00:12:53,380 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:12:53,382 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:12:53,441 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:12:53,442 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:13:03,573 - app.main - INFO - Shutting down application...
2025-08-05 00:13:03,573 - app.main - INFO - Closing database connections...
2025-08-05 00:13:03,574 - app.db.session - INFO - Closing database connections...
2025-08-05 00:13:03,577 - app.db.session - INFO - Database connections closed
2025-08-05 00:13:03,578 - app.main - INFO - Database connections closed successfully
2025-08-05 00:13:13,050 - app.main - INFO - Starting application...
2025-08-05 00:13:13,051 - app.main - INFO - Initializing database manager...
2025-08-05 00:13:13,052 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:13:13,054 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:13:13,126 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:13:13,127 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:13:21,854 - app.main - INFO - Shutting down application...
2025-08-05 00:13:21,856 - app.main - INFO - Closing database connections...
2025-08-05 00:13:21,857 - app.db.session - INFO - Closing database connections...
2025-08-05 00:13:21,861 - app.db.session - INFO - Database connections closed
2025-08-05 00:13:21,862 - app.main - INFO - Database connections closed successfully
2025-08-05 00:13:29,059 - app.main - INFO - Starting application...
2025-08-05 00:13:29,059 - app.main - INFO - Initializing database manager...
2025-08-05 00:13:29,061 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:13:29,063 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:13:29,124 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:13:29,124 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:13:39,053 - app.main - INFO - Shutting down application...
2025-08-05 00:13:39,053 - app.main - INFO - Closing database connections...
2025-08-05 00:13:39,053 - app.db.session - INFO - Closing database connections...
2025-08-05 00:13:39,057 - app.db.session - INFO - Database connections closed
2025-08-05 00:13:39,057 - app.main - INFO - Database connections closed successfully
2025-08-05 00:13:48,338 - app.main - INFO - Starting application...
2025-08-05 00:13:48,339 - app.main - INFO - Initializing database manager...
2025-08-05 00:13:48,341 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:13:48,342 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:13:48,392 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:13:48,393 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:13:58,925 - app.main - INFO - Shutting down application...
2025-08-05 00:13:58,925 - app.main - INFO - Closing database connections...
2025-08-05 00:13:58,927 - app.db.session - INFO - Closing database connections...
2025-08-05 00:13:58,935 - app.db.session - INFO - Database connections closed
2025-08-05 00:13:58,936 - app.main - INFO - Database connections closed successfully
2025-08-05 00:14:06,124 - app.main - INFO - Starting application...
2025-08-05 00:14:06,125 - app.main - INFO - Initializing database manager...
2025-08-05 00:14:06,125 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:14:06,126 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:14:06,176 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:14:06,177 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:14:17,263 - app.main - INFO - Shutting down application...
2025-08-05 00:14:17,263 - app.main - INFO - Closing database connections...
2025-08-05 00:14:17,264 - app.db.session - INFO - Closing database connections...
2025-08-05 00:14:17,269 - app.db.session - INFO - Database connections closed
2025-08-05 00:14:17,269 - app.main - INFO - Database connections closed successfully
2025-08-05 00:14:24,215 - app.main - INFO - Starting application...
2025-08-05 00:14:24,216 - app.main - INFO - Initializing database manager...
2025-08-05 00:14:24,218 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:14:24,219 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:14:24,266 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:14:24,266 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:14:51,065 - app.main - INFO - Shutting down application...
2025-08-05 00:14:51,066 - app.main - INFO - Closing database connections...
2025-08-05 00:14:51,066 - app.db.session - INFO - Closing database connections...
2025-08-05 00:14:51,070 - app.db.session - INFO - Database connections closed
2025-08-05 00:14:51,070 - app.main - INFO - Database connections closed successfully
2025-08-05 00:14:57,433 - app.main - INFO - Starting application...
2025-08-05 00:14:57,433 - app.main - INFO - Initializing database manager...
2025-08-05 00:14:57,434 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:14:57,436 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:14:57,489 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:14:57,490 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:15:07,018 - app.main - INFO - Shutting down application...
2025-08-05 00:15:07,019 - app.main - INFO - Closing database connections...
2025-08-05 00:15:07,019 - app.db.session - INFO - Closing database connections...
2025-08-05 00:15:07,023 - app.db.session - INFO - Database connections closed
2025-08-05 00:15:07,024 - app.main - INFO - Database connections closed successfully
2025-08-05 00:15:14,954 - app.main - INFO - Starting application...
2025-08-05 00:15:14,955 - app.main - INFO - Initializing database manager...
2025-08-05 00:15:14,956 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:15:14,959 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:15:15,028 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:15:15,029 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:18:01,617 - app.main - INFO - Shutting down application...
2025-08-05 00:18:01,618 - app.main - INFO - Closing database connections...
2025-08-05 00:18:01,618 - app.db.session - INFO - Closing database connections...
2025-08-05 00:18:01,631 - app.db.session - INFO - Database connections closed
2025-08-05 00:18:01,631 - app.main - INFO - Database connections closed successfully
2025-08-05 00:18:10,556 - app.main - INFO - Starting application...
2025-08-05 00:18:10,557 - app.main - INFO - Initializing database manager...
2025-08-05 00:18:10,558 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:18:10,560 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:18:10,629 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:18:10,630 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:18:18,252 - app.main - INFO - Shutting down application...
2025-08-05 00:18:18,253 - app.main - INFO - Closing database connections...
2025-08-05 00:18:18,254 - app.db.session - INFO - Closing database connections...
2025-08-05 00:18:18,261 - app.db.session - INFO - Database connections closed
2025-08-05 00:18:18,261 - app.main - INFO - Database connections closed successfully
2025-08-05 00:18:25,758 - app.main - INFO - Starting application...
2025-08-05 00:18:25,759 - app.main - INFO - Initializing database manager...
2025-08-05 00:18:25,760 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:18:25,762 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:18:25,824 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:18:25,825 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:20:07,090 - app.main - INFO - Shutting down application...
2025-08-05 00:20:07,091 - app.main - INFO - Closing database connections...
2025-08-05 00:20:07,091 - app.db.session - INFO - Closing database connections...
2025-08-05 00:20:07,095 - app.db.session - INFO - Database connections closed
2025-08-05 00:20:07,095 - app.main - INFO - Database connections closed successfully
2025-08-05 00:20:14,747 - app.main - INFO - Starting application...
2025-08-05 00:20:14,748 - app.main - INFO - Initializing database manager...
2025-08-05 00:20:14,748 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:20:14,750 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:20:14,804 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:20:14,805 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:22:13,517 - app.main - INFO - Shutting down application...
2025-08-05 00:22:13,518 - app.main - INFO - Closing database connections...
2025-08-05 00:22:13,518 - app.db.session - INFO - Closing database connections...
2025-08-05 00:22:13,522 - app.db.session - INFO - Database connections closed
2025-08-05 00:22:13,523 - app.main - INFO - Database connections closed successfully
2025-08-05 00:22:19,795 - app.main - INFO - Starting application...
2025-08-05 00:22:19,796 - app.main - INFO - Initializing database manager...
2025-08-05 00:22:19,796 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:22:19,799 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:22:19,871 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:22:19,871 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:22:29,604 - app.main - INFO - Shutting down application...
2025-08-05 00:22:29,605 - app.main - INFO - Closing database connections...
2025-08-05 00:22:29,605 - app.db.session - INFO - Closing database connections...
2025-08-05 00:22:29,610 - app.db.session - INFO - Database connections closed
2025-08-05 00:22:29,611 - app.main - INFO - Database connections closed successfully
2025-08-05 00:22:37,514 - app.main - INFO - Starting application...
2025-08-05 00:22:37,515 - app.main - INFO - Initializing database manager...
2025-08-05 00:22:37,517 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:22:37,520 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:22:37,572 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:22:37,573 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:24:07,090 - app.main - INFO - Shutting down application...
2025-08-05 00:24:07,090 - app.main - INFO - Closing database connections...
2025-08-05 00:24:07,090 - app.db.session - INFO - Closing database connections...
2025-08-05 00:24:07,095 - app.db.session - INFO - Database connections closed
2025-08-05 00:24:07,095 - app.main - INFO - Database connections closed successfully
2025-08-05 00:24:13,788 - app.main - INFO - Starting application...
2025-08-05 00:24:13,789 - app.main - INFO - Initializing database manager...
2025-08-05 00:24:13,790 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:24:13,792 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:24:13,844 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:24:13,844 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:24:26,127 - app.main - INFO - Shutting down application...
2025-08-05 00:24:26,127 - app.main - INFO - Closing database connections...
2025-08-05 00:24:26,128 - app.db.session - INFO - Closing database connections...
2025-08-05 00:24:26,131 - app.db.session - INFO - Database connections closed
2025-08-05 00:24:26,131 - app.main - INFO - Database connections closed successfully
2025-08-05 00:24:32,273 - app.main - INFO - Starting application...
2025-08-05 00:24:32,273 - app.main - INFO - Initializing database manager...
2025-08-05 00:24:32,274 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:24:32,275 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:24:32,319 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:24:32,319 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:25:10,651 - app.main - INFO - Shutting down application...
2025-08-05 00:25:10,652 - app.main - INFO - Closing database connections...
2025-08-05 00:25:10,652 - app.db.session - INFO - Closing database connections...
2025-08-05 00:25:10,655 - app.db.session - INFO - Database connections closed
2025-08-05 00:25:10,656 - app.main - INFO - Database connections closed successfully
2025-08-05 00:25:17,659 - app.main - INFO - Starting application...
2025-08-05 00:25:17,664 - app.main - INFO - Initializing database manager...
2025-08-05 00:25:17,664 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:25:17,666 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:25:17,719 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:25:17,719 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:25:29,636 - app.main - INFO - Shutting down application...
2025-08-05 00:25:29,637 - app.main - INFO - Closing database connections...
2025-08-05 00:25:29,637 - app.db.session - INFO - Closing database connections...
2025-08-05 00:25:29,641 - app.db.session - INFO - Database connections closed
2025-08-05 00:25:29,641 - app.main - INFO - Database connections closed successfully
2025-08-05 00:25:37,233 - app.main - INFO - Starting application...
2025-08-05 00:25:37,233 - app.main - INFO - Initializing database manager...
2025-08-05 00:25:37,234 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:25:37,235 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:25:37,285 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:25:37,285 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:28:20,050 - app.main - INFO - Shutting down application...
2025-08-05 00:28:20,051 - app.main - INFO - Closing database connections...
2025-08-05 00:28:20,051 - app.db.session - INFO - Closing database connections...
2025-08-05 00:28:20,055 - app.db.session - INFO - Database connections closed
2025-08-05 00:28:20,055 - app.main - INFO - Database connections closed successfully
2025-08-05 00:28:26,423 - app.main - INFO - Starting application...
2025-08-05 00:28:26,423 - app.main - INFO - Initializing database manager...
2025-08-05 00:28:26,424 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:28:26,426 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:28:26,473 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:28:26,474 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:28:39,579 - app.main - INFO - Shutting down application...
2025-08-05 00:28:39,579 - app.main - INFO - Closing database connections...
2025-08-05 00:28:39,580 - app.db.session - INFO - Closing database connections...
2025-08-05 00:28:39,583 - app.db.session - INFO - Database connections closed
2025-08-05 00:28:39,584 - app.main - INFO - Database connections closed successfully
2025-08-05 00:28:46,489 - app.main - INFO - Starting application...
2025-08-05 00:28:46,489 - app.main - INFO - Initializing database manager...
2025-08-05 00:28:46,490 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:28:46,491 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:28:46,536 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:28:46,537 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:29:41,921 - app.main - INFO - Shutting down application...
2025-08-05 00:29:41,922 - app.main - INFO - Closing database connections...
2025-08-05 00:29:41,922 - app.db.session - INFO - Closing database connections...
2025-08-05 00:29:41,926 - app.db.session - INFO - Database connections closed
2025-08-05 00:29:41,927 - app.main - INFO - Database connections closed successfully
2025-08-05 00:29:49,073 - app.main - INFO - Starting application...
2025-08-05 00:29:49,073 - app.main - INFO - Initializing database manager...
2025-08-05 00:29:49,074 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:29:49,075 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:29:49,121 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:29:49,122 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:29:58,349 - app.main - INFO - Shutting down application...
2025-08-05 00:29:58,349 - app.main - INFO - Closing database connections...
2025-08-05 00:29:58,350 - app.db.session - INFO - Closing database connections...
2025-08-05 00:29:58,355 - app.db.session - INFO - Database connections closed
2025-08-05 00:29:58,356 - app.main - INFO - Database connections closed successfully
2025-08-05 00:30:06,670 - app.main - INFO - Starting application...
2025-08-05 00:30:06,670 - app.main - INFO - Initializing database manager...
2025-08-05 00:30:06,673 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:30:06,675 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:30:06,740 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:30:06,741 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:32:04,637 - app.main - INFO - Shutting down application...
2025-08-05 00:32:04,638 - app.main - INFO - Closing database connections...
2025-08-05 00:32:04,638 - app.db.session - INFO - Closing database connections...
2025-08-05 00:32:04,643 - app.db.session - INFO - Database connections closed
2025-08-05 00:32:04,643 - app.main - INFO - Database connections closed successfully
2025-08-05 00:32:10,867 - app.main - INFO - Starting application...
2025-08-05 00:32:10,868 - app.main - INFO - Initializing database manager...
2025-08-05 00:32:10,869 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:32:10,871 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:32:10,925 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:32:10,926 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:32:23,674 - app.main - INFO - Shutting down application...
2025-08-05 00:32:23,674 - app.main - INFO - Closing database connections...
2025-08-05 00:32:23,675 - app.db.session - INFO - Closing database connections...
2025-08-05 00:32:23,679 - app.db.session - INFO - Database connections closed
2025-08-05 00:32:23,679 - app.main - INFO - Database connections closed successfully
2025-08-05 00:32:31,336 - app.main - INFO - Starting application...
2025-08-05 00:32:31,338 - app.main - INFO - Initializing database manager...
2025-08-05 00:32:31,340 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:32:31,365 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:32:31,413 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:32:31,414 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:55:06,586 - app.main - INFO - Starting application...
2025-08-05 00:55:06,587 - app.main - INFO - Initializing database manager...
2025-08-05 00:55:06,587 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:55:06,608 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:55:06,656 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:55:06,656 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:55:30,865 - app.main - INFO - Starting application...
2025-08-05 00:55:30,866 - app.main - INFO - Initializing database manager...
2025-08-05 00:55:30,866 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:55:30,903 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:55:30,970 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:55:30,970 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:56:02,453 - app.core.security - ERROR - Authentication error for testuser123: '_AsyncGeneratorContextManager' object has no attribute 'execute'
2025-08-05 00:56:02,454 - app.core.security - INFO - user_authentication completed in 0.00s
2025-08-05 00:56:02,454 - app.api.auth - WARNING - Failed login attempt for user: testuser123
2025-08-05 00:56:02,455 - app.api.auth - INFO - user_login completed in 0.00s
2025-08-05 00:56:27,715 - app.db.crud - ERROR - Error getting user by username testuser123: '_AsyncGeneratorContextManager' object has no attribute 'execute'
2025-08-05 00:56:27,716 - app.db.crud - ERROR - Error getting user by email test@example.com: '_AsyncGeneratorContextManager' object has no attribute 'execute'
2025-08-05 00:56:27,717 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-05 00:56:28,080 - app.api.users - ERROR - Error creating user: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:00:51,033 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:00:51,033 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:02:58,422 - app.main - INFO - Shutting down application...
2025-08-05 01:02:58,422 - app.main - INFO - Closing database connections...
2025-08-05 01:02:58,424 - app.db.session - INFO - Closing database connections...
2025-08-05 01:02:58,449 - app.db.session - INFO - Database connections closed
2025-08-05 01:02:58,450 - app.main - INFO - Database connections closed successfully
2025-08-05 01:04:50,909 - app.main - INFO - Starting application...
2025-08-05 01:04:50,911 - app.main - INFO - Initializing database manager...
2025-08-05 01:04:50,911 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:04:50,974 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:04:51,062 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:04:51,062 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:04:57,954 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:04:57,955 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:05:17,867 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:05:17,868 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:07:21,606 - app.main - INFO - Shutting down application...
2025-08-05 01:07:21,607 - app.main - INFO - Closing database connections...
2025-08-05 01:07:21,607 - app.db.session - INFO - Closing database connections...
2025-08-05 01:07:21,610 - app.db.session - INFO - Database connections closed
2025-08-05 01:07:21,611 - app.main - INFO - Database connections closed successfully
2025-08-05 01:28:38,804 - app.main - INFO - Starting application...
2025-08-05 01:28:38,807 - app.main - INFO - Initializing database manager...
2025-08-05 01:28:38,808 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:28:38,843 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:28:38,939 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:28:38,939 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:28:39,042 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:28:39,042 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:29:02,499 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:29:02,499 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:29:15,354 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:29:15,354 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:32:39,911 - app.main - INFO - Shutting down application...
2025-08-05 01:32:39,911 - app.main - INFO - Closing database connections...
2025-08-05 01:32:39,912 - app.db.session - INFO - Closing database connections...
2025-08-05 01:32:39,917 - app.db.session - INFO - Database connections closed
2025-08-05 01:32:39,918 - app.main - INFO - Database connections closed successfully
2025-08-05 01:32:46,626 - app.main - INFO - Starting application...
2025-08-05 01:32:46,626 - app.main - INFO - Initializing database manager...
2025-08-05 01:32:46,627 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:32:46,656 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:32:46,707 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:32:46,707 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:34:21,465 - app.api.auth - INFO - user_registration completed in 0.13s
2025-08-05 01:34:21,466 - app.db.session - ERROR - Unexpected session error: 400: Username already registered
2025-08-05 01:34:36,416 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-05 01:34:36,738 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-05 01:34:36,738 - app.core.security - INFO - user_authentication completed in 0.33s
2025-08-05 01:34:36,739 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-05 01:34:36,763 - app.core.security - INFO - Access token created successfully
2025-08-05 01:34:36,763 - app.core.security - INFO - Refresh token created successfully
2025-08-05 01:34:36,764 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-05 01:34:36,764 - app.api.auth - INFO - user_login completed in 0.35s
2025-08-05 01:35:04,874 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:35:06,634 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 01:35:06,635 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 01:35:06,647 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 01:35:06,659 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 01:35:06,664 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 01:35:06,823 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 01:35:06,844 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,844 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,845 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:35:06,845 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,845 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:35:06,846 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,846 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,847 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:35:06,847 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,866 - app.api.itinerary - INFO - Built POI list with 49 items
2025-08-05 01:35:06,912 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-05 01:35:06,989 - app.api.itinerary - INFO - Itinerary fb54d921-6c30-41c0-aace-34df126fc657 persisted successfully
2025-08-05 01:35:06,989 - app.api.itinerary - INFO - Successfully generated itinerary fb54d921-6c30-41c0-aace-34df126fc657 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 01:35:06,990 - app.api.itinerary - INFO - itinerary_generation completed in 2.11s
2025-08-05 01:43:05,372 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:43:05,388 - app.db.crud - ERROR - Error getting itinerary <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7ff8b02f4c30>: 'UUID' object has no attribute 'execute'
2025-08-05 01:43:05,389 - app.db.session - ERROR - Unexpected session error: 'NoneType' object has no attribute 'user_id'
2025-08-05 01:43:05,393 - app.main - ERROR - Unhandled exception: 'NoneType' object has no attribute 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 623, in read_itinerary
    if itin.user_id != current_user.id:
       ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'user_id'
2025-08-05 01:46:39,978 - app.main - INFO - Shutting down application...
2025-08-05 01:46:39,978 - app.main - INFO - Closing database connections...
2025-08-05 01:46:39,979 - app.db.session - INFO - Closing database connections...
2025-08-05 01:46:40,044 - app.db.session - INFO - Database connections closed
2025-08-05 01:46:40,045 - app.main - INFO - Database connections closed successfully
2025-08-05 01:47:01,035 - app.main - INFO - Starting application...
2025-08-05 01:47:01,036 - app.main - INFO - Initializing database manager...
2025-08-05 01:47:01,036 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:47:01,071 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:47:01,139 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:47:01,140 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:47:35,313 - app.main - INFO - Shutting down application...
2025-08-05 01:47:35,313 - app.main - INFO - Closing database connections...
2025-08-05 01:47:35,313 - app.db.session - INFO - Closing database connections...
2025-08-05 01:47:35,317 - app.db.session - INFO - Database connections closed
2025-08-05 01:47:35,317 - app.main - INFO - Database connections closed successfully
2025-08-05 01:47:42,349 - app.main - INFO - Starting application...
2025-08-05 01:47:42,350 - app.main - INFO - Initializing database manager...
2025-08-05 01:47:42,351 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:47:42,375 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:47:42,437 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:47:42,438 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:48:10,573 - app.main - INFO - Shutting down application...
2025-08-05 01:48:10,573 - app.main - INFO - Closing database connections...
2025-08-05 01:48:10,574 - app.db.session - INFO - Closing database connections...
2025-08-05 01:48:10,579 - app.db.session - INFO - Database connections closed
2025-08-05 01:48:10,579 - app.main - INFO - Database connections closed successfully
2025-08-05 01:48:18,185 - app.main - INFO - Starting application...
2025-08-05 01:48:18,186 - app.main - INFO - Initializing database manager...
2025-08-05 01:48:18,187 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:48:18,210 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:48:18,263 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:48:18,263 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:48:28,091 - app.main - INFO - Shutting down application...
2025-08-05 01:48:28,091 - app.main - INFO - Closing database connections...
2025-08-05 01:48:28,092 - app.db.session - INFO - Closing database connections...
2025-08-05 01:48:28,096 - app.db.session - INFO - Database connections closed
2025-08-05 01:48:28,097 - app.main - INFO - Database connections closed successfully
2025-08-05 01:49:10,674 - app.main - INFO - Starting application...
2025-08-05 01:49:10,675 - app.main - INFO - Initializing database manager...
2025-08-05 01:49:10,675 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:49:10,715 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:49:10,784 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:49:10,784 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:50:01,215 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:50:01,217 - app.db.crud - ERROR - Error getting itinerary <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7cf40c144cd0>: 'UUID' object has no attribute 'execute'
2025-08-05 01:50:01,217 - app.db.session - ERROR - Unexpected session error: 404: Itinerary with ID <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7cf40c144cd0> not found
2025-08-05 01:50:25,419 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:50:27,224 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 01:50:27,224 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 01:50:27,233 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 01:50:27,239 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 01:50:27,242 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 01:50:27,293 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 01:50:27,306 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,307 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,307 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:50:27,308 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,309 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:50:27,309 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,310 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,311 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:50:27,312 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,318 - app.api.itinerary - INFO - Built POI list with 49 items
2025-08-05 01:50:27,375 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-05 01:50:27,426 - app.api.itinerary - INFO - Itinerary 71fa84d6-6df0-4894-9cea-d5d896cc6c6a persisted successfully
2025-08-05 01:50:27,426 - app.api.itinerary - INFO - Successfully generated itinerary 71fa84d6-6df0-4894-9cea-d5d896cc6c6a for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 01:50:27,427 - app.api.itinerary - INFO - itinerary_generation completed in 2.01s
2025-08-05 01:50:56,793 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:50:56,794 - app.db.crud - ERROR - Error getting itinerary <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7cf40c169a70>: 'UUID' object has no attribute 'execute'
2025-08-05 01:50:56,795 - app.db.session - ERROR - Unexpected session error: 404: Itinerary with ID <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7cf40c169a70> not found
2025-08-05 01:52:23,591 - app.main - INFO - Shutting down application...
2025-08-05 01:52:23,591 - app.main - INFO - Closing database connections...
2025-08-05 01:52:23,592 - app.db.session - INFO - Closing database connections...
2025-08-05 01:52:23,597 - app.db.session - INFO - Database connections closed
2025-08-05 01:52:23,598 - app.main - INFO - Database connections closed successfully
2025-08-05 01:52:30,690 - app.main - INFO - Starting application...
2025-08-05 01:52:30,691 - app.main - INFO - Initializing database manager...
2025-08-05 01:52:30,692 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:52:30,730 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:52:30,782 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:52:30,782 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:52:42,920 - app.main - INFO - Shutting down application...
2025-08-05 01:52:42,920 - app.main - INFO - Closing database connections...
2025-08-05 01:52:42,920 - app.db.session - INFO - Closing database connections...
2025-08-05 01:52:42,925 - app.db.session - INFO - Database connections closed
2025-08-05 01:52:42,925 - app.main - INFO - Database connections closed successfully
2025-08-05 01:52:53,032 - app.main - INFO - Starting application...
2025-08-05 01:52:53,032 - app.main - INFO - Initializing database manager...
2025-08-05 01:52:53,033 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:52:53,058 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:52:53,115 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:52:53,116 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:53:03,947 - app.main - INFO - Shutting down application...
2025-08-05 01:53:03,948 - app.main - INFO - Closing database connections...
2025-08-05 01:53:03,948 - app.db.session - INFO - Closing database connections...
2025-08-05 01:53:03,951 - app.db.session - INFO - Database connections closed
2025-08-05 01:53:03,952 - app.main - INFO - Database connections closed successfully
2025-08-05 01:53:11,053 - app.main - INFO - Starting application...
2025-08-05 01:53:11,054 - app.main - INFO - Initializing database manager...
2025-08-05 01:53:11,055 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:53:11,080 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:53:11,134 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:53:11,134 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:53:23,675 - app.main - INFO - Shutting down application...
2025-08-05 01:53:23,675 - app.main - INFO - Closing database connections...
2025-08-05 01:53:23,676 - app.db.session - INFO - Closing database connections...
2025-08-05 01:53:23,680 - app.db.session - INFO - Database connections closed
2025-08-05 01:53:23,680 - app.main - INFO - Database connections closed successfully
2025-08-05 01:53:31,356 - app.main - INFO - Starting application...
2025-08-05 01:53:31,356 - app.main - INFO - Initializing database manager...
2025-08-05 01:53:31,357 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:53:31,387 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:53:31,437 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:53:31,437 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:53:34,632 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:56:10,165 - app.main - INFO - Shutting down application...
2025-08-05 01:56:10,166 - app.main - INFO - Closing database connections...
2025-08-05 01:56:10,166 - app.db.session - INFO - Closing database connections...
2025-08-05 01:56:10,171 - app.db.session - INFO - Database connections closed
2025-08-05 01:56:10,172 - app.main - INFO - Database connections closed successfully
2025-08-05 01:56:16,790 - app.main - INFO - Starting application...
2025-08-05 01:56:16,791 - app.main - INFO - Initializing database manager...
2025-08-05 01:56:16,791 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:56:16,814 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:56:16,879 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:56:16,881 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:56:26,207 - app.main - INFO - Shutting down application...
2025-08-05 01:56:26,208 - app.main - INFO - Closing database connections...
2025-08-05 01:56:26,208 - app.db.session - INFO - Closing database connections...
2025-08-05 01:56:26,212 - app.db.session - INFO - Database connections closed
2025-08-05 01:56:26,212 - app.main - INFO - Database connections closed successfully
2025-08-05 01:56:35,781 - app.main - INFO - Starting application...
2025-08-05 01:56:35,781 - app.main - INFO - Initializing database manager...
2025-08-05 01:56:35,782 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:56:35,814 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:56:35,892 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:56:35,892 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:57:48,786 - app.main - INFO - Shutting down application...
2025-08-05 01:57:48,787 - app.main - INFO - Closing database connections...
2025-08-05 01:57:48,787 - app.db.session - INFO - Closing database connections...
2025-08-05 01:57:48,795 - app.db.session - INFO - Database connections closed
2025-08-05 01:57:48,804 - app.main - INFO - Database connections closed successfully
2025-08-05 01:57:57,718 - app.main - INFO - Starting application...
2025-08-05 01:57:57,719 - app.main - INFO - Initializing database manager...
2025-08-05 01:57:57,719 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:57:57,782 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:57:57,862 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:57:57,863 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:58:06,288 - app.main - INFO - Shutting down application...
2025-08-05 01:58:06,288 - app.main - INFO - Closing database connections...
2025-08-05 01:58:06,289 - app.db.session - INFO - Closing database connections...
2025-08-05 01:58:06,291 - app.db.session - INFO - Database connections closed
2025-08-05 01:58:06,292 - app.main - INFO - Database connections closed successfully
2025-08-05 01:58:15,772 - app.main - INFO - Starting application...
2025-08-05 01:58:15,773 - app.main - INFO - Initializing database manager...
2025-08-05 01:58:15,773 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:58:15,796 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:58:15,846 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:58:15,846 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:02:55,087 - app.main - INFO - Shutting down application...
2025-08-05 02:02:55,087 - app.main - INFO - Closing database connections...
2025-08-05 02:02:55,087 - app.db.session - INFO - Closing database connections...
2025-08-05 02:02:55,090 - app.db.session - INFO - Database connections closed
2025-08-05 02:02:55,090 - app.main - INFO - Database connections closed successfully
2025-08-05 02:05:07,171 - app.main - INFO - Starting application...
2025-08-05 02:05:07,172 - app.main - INFO - Initializing database manager...
2025-08-05 02:05:07,172 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:05:07,221 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:05:07,306 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:05:07,307 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:06:40,228 - app.main - INFO - Shutting down application...
2025-08-05 02:06:40,229 - app.main - INFO - Closing database connections...
2025-08-05 02:06:40,229 - app.db.session - INFO - Closing database connections...
2025-08-05 02:06:40,233 - app.db.session - INFO - Database connections closed
2025-08-05 02:06:40,233 - app.main - INFO - Database connections closed successfully
2025-08-05 02:06:48,906 - app.main - INFO - Starting application...
2025-08-05 02:06:48,906 - app.main - INFO - Initializing database manager...
2025-08-05 02:06:48,907 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:06:48,932 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:06:48,979 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:06:48,980 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:06:49,067 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 02:06:51,190 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 02:06:51,191 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 02:06:51,203 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 02:06:51,209 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 02:06:51,212 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 02:06:51,277 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 02:06:51,293 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,293 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,294 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:06:51,295 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,297 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:06:51,297 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,298 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,298 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:06:51,299 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,308 - app.api.itinerary - INFO - Built POI list with 49 items
2025-08-05 02:06:51,394 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-05 02:06:51,490 - app.api.itinerary - INFO - Itinerary 3a376b57-8f37-4b5a-9613-b48210214353 persisted successfully
2025-08-05 02:06:51,490 - app.api.itinerary - INFO - Successfully generated itinerary 3a376b57-8f37-4b5a-9613-b48210214353 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 02:06:51,491 - app.api.itinerary - INFO - itinerary_generation completed in 2.42s
2025-08-05 02:07:13,658 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 02:08:01,671 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 02:08:01,790 - app.core.nlp.parser - INFO - Parsed travel request with 75.0% confidence
2025-08-05 02:08:01,791 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 02:08:01,794 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 02:08:01,797 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 02:08:01,799 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 02:08:01,808 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 02:08:01,821 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:01,821 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:01,822 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:01,822 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:01,823 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:01,823 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:01,823 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:01,824 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:01,827 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-05 02:08:01,944 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-05 02:08:01,973 - app.api.itinerary - INFO - Itinerary 1a888af6-5eca-4436-adbd-0b877d5e3b6e persisted successfully
2025-08-05 02:08:01,974 - app.api.itinerary - INFO - Successfully generated itinerary 1a888af6-5eca-4436-adbd-0b877d5e3b6e for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 02:08:01,974 - app.api.itinerary - INFO - itinerary_generation completed in 0.30s
2025-08-05 02:08:01,979 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.23515, id=UUID('e570f32c-4c51-4088-9056-f86ab78fb9eb'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/571618861.webp?k=dbbeb1b1cc661e28674e3a52863c3a49058e9afc24f9408a667e8692603a5a29&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Suite 401 in Shanghai city centre', description=None, longitude=121.45707, price=Decimal('1071'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.23515, id=UUID('e570f32c-4c51-4088-9056-f86ab78fb9eb'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/571618861.webp?k=dbbeb1b1cc661e28674e3a52863c3a49058e9afc24f9408a667e8692603a5a29&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Suite 401 in Shanghai city centre', description=None, longitude=121.45707, price=Decimal('1071'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20897, id=UUID('a93d93b3-53e2-4459-aff5-1fc6857502f2'), images=[], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - TianZi Fang Branch Xintiandi Taipuqiao near the Bund Sunny Cozy Deluxe Room', description=None, longitude=121.47061, price=Decimal('2005'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20897, id=UUID('a93d93b3-53e2-4459-aff5-1fc6857502f2'), images=[], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - TianZi Fang Branch Xintiandi Taipuqiao near the Bund Sunny Cozy Deluxe Room', description=None, longitude=121.47061, price=Decimal('2005'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20142, id=UUID('f097db0e-6dd9-485a-94e4-a022490a29ce'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/606218929.webp?k=a2646e155889ee486d7b578496e00a055dd5b0c25c1dcfaec156464c9ff3da14&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - Bund Branch Quality Renovated Luxury 3Bedroom, Spacious Living Room Fully Equipped Haiyue Garden', description=None, longitude=121.47484, price=Decimal('3756'), amenities=['182'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20142, id=UUID('f097db0e-6dd9-485a-94e4-a022490a29ce'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/606218929.webp?k=a2646e155889ee486d7b578496e00a055dd5b0c25c1dcfaec156464c9ff3da14&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - Bund Branch Quality Renovated Luxury 3Bedroom, Spacious Living Room Fully Equipped Haiyue Garden', description=None, longitude=121.47484, price=Decimal('3756'), amenities=['182'], star_rating=None, check_in_time=None, contact_info=None)}

2025-08-05 02:08:01,980 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}

2025-08-05 02:08:18,321 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 02:08:18,418 - app.core.nlp.parser - INFO - Parsed travel request with 75.0% confidence
2025-08-05 02:08:18,419 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 02:08:18,421 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 02:08:18,423 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 02:08:18,425 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 02:08:18,434 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 02:08:18,438 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:18,439 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:18,440 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:18,440 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:18,441 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:18,441 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:18,442 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:18,442 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:18,445 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-05 02:08:18,566 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-05 02:08:18,586 - app.api.itinerary - INFO - Itinerary 43344cab-4980-4e67-81f6-dd022abf6991 persisted successfully
2025-08-05 02:08:18,586 - app.api.itinerary - INFO - Successfully generated itinerary 43344cab-4980-4e67-81f6-dd022abf6991 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 02:08:18,587 - app.api.itinerary - INFO - itinerary_generation completed in 0.26s
2025-08-05 02:08:18,588 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.23515, id=UUID('e570f32c-4c51-4088-9056-f86ab78fb9eb'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/571618861.webp?k=dbbeb1b1cc661e28674e3a52863c3a49058e9afc24f9408a667e8692603a5a29&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Suite 401 in Shanghai city centre', description=None, longitude=121.45707, price=Decimal('1071'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.23515, id=UUID('e570f32c-4c51-4088-9056-f86ab78fb9eb'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/571618861.webp?k=dbbeb1b1cc661e28674e3a52863c3a49058e9afc24f9408a667e8692603a5a29&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Suite 401 in Shanghai city centre', description=None, longitude=121.45707, price=Decimal('1071'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20897, id=UUID('a93d93b3-53e2-4459-aff5-1fc6857502f2'), images=[], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - TianZi Fang Branch Xintiandi Taipuqiao near the Bund Sunny Cozy Deluxe Room', description=None, longitude=121.47061, price=Decimal('2005'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20897, id=UUID('a93d93b3-53e2-4459-aff5-1fc6857502f2'), images=[], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - TianZi Fang Branch Xintiandi Taipuqiao near the Bund Sunny Cozy Deluxe Room', description=None, longitude=121.47061, price=Decimal('2005'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20142, id=UUID('f097db0e-6dd9-485a-94e4-a022490a29ce'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/606218929.webp?k=a2646e155889ee486d7b578496e00a055dd5b0c25c1dcfaec156464c9ff3da14&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - Bund Branch Quality Renovated Luxury 3Bedroom, Spacious Living Room Fully Equipped Haiyue Garden', description=None, longitude=121.47484, price=Decimal('3756'), amenities=['182'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20142, id=UUID('f097db0e-6dd9-485a-94e4-a022490a29ce'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/606218929.webp?k=a2646e155889ee486d7b578496e00a055dd5b0c25c1dcfaec156464c9ff3da14&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - Bund Branch Quality Renovated Luxury 3Bedroom, Spacious Living Room Fully Equipped Haiyue Garden', description=None, longitude=121.47484, price=Decimal('3756'), amenities=['182'], star_rating=None, check_in_time=None, contact_info=None)}

2025-08-05 02:08:18,591 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}

2025-08-05 02:10:53,499 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 02:10:53,615 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 02:10:53,615 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 02:10:53,619 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 02:10:53,621 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 02:10:53,624 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 02:10:53,632 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 02:10:53,637 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,637 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,638 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:10:53,638 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,639 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:10:53,639 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,639 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,640 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:10:53,640 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,643 - app.api.itinerary - INFO - Built POI list with 49 items
2025-08-05 02:10:53,689 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-05 02:10:53,709 - app.api.itinerary - INFO - Itinerary bf25e091-64d2-4ab8-98b1-afec645ae7f9 persisted successfully
2025-08-05 02:10:53,709 - app.api.itinerary - INFO - Successfully generated itinerary bf25e091-64d2-4ab8-98b1-afec645ae7f9 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 02:10:53,710 - app.api.itinerary - INFO - itinerary_generation completed in 0.21s
2025-08-05 02:18:30,813 - app.main - INFO - Shutting down application...
2025-08-05 02:18:30,814 - app.main - INFO - Closing database connections...
2025-08-05 02:18:30,815 - app.db.session - INFO - Closing database connections...
2025-08-05 02:18:30,841 - app.db.session - INFO - Database connections closed
2025-08-05 02:18:30,841 - app.main - INFO - Database connections closed successfully
2025-08-05 02:18:40,681 - app.main - INFO - Starting application...
2025-08-05 02:18:40,681 - app.main - INFO - Initializing database manager...
2025-08-05 02:18:40,682 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:18:40,721 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:18:40,786 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:18:40,787 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:57:03,078 - app.main - INFO - Shutting down application...
2025-08-05 02:57:03,079 - app.main - INFO - Closing database connections...
2025-08-05 02:57:03,079 - app.db.session - INFO - Closing database connections...
2025-08-05 02:57:03,102 - app.db.session - INFO - Database connections closed
2025-08-05 02:57:03,102 - app.main - INFO - Database connections closed successfully
2025-08-05 02:57:13,491 - app.main - INFO - Starting application...
2025-08-05 02:57:13,492 - app.main - INFO - Initializing database manager...
2025-08-05 02:57:13,494 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:57:13,560 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:57:13,657 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:57:13,658 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:57:21,179 - app.main - INFO - Shutting down application...
2025-08-05 02:57:21,179 - app.main - INFO - Closing database connections...
2025-08-05 02:57:21,179 - app.db.session - INFO - Closing database connections...
2025-08-05 02:57:21,185 - app.db.session - INFO - Database connections closed
2025-08-05 02:57:21,186 - app.main - INFO - Database connections closed successfully
2025-08-05 02:57:32,322 - app.main - INFO - Starting application...
2025-08-05 02:57:32,323 - app.main - INFO - Initializing database manager...
2025-08-05 02:57:32,323 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:57:32,362 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:57:32,427 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:57:32,428 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:57:41,553 - app.main - INFO - Shutting down application...
2025-08-05 02:57:41,553 - app.main - INFO - Closing database connections...
2025-08-05 02:57:41,554 - app.db.session - INFO - Closing database connections...
2025-08-05 02:57:41,558 - app.db.session - INFO - Database connections closed
2025-08-05 02:57:41,558 - app.main - INFO - Database connections closed successfully
2025-08-05 02:57:49,349 - app.main - INFO - Starting application...
2025-08-05 02:57:49,350 - app.main - INFO - Initializing database manager...
2025-08-05 02:57:49,352 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:57:49,408 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:57:49,486 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:57:49,487 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:58:02,053 - app.main - INFO - Shutting down application...
2025-08-05 02:58:02,054 - app.main - INFO - Closing database connections...
2025-08-05 02:58:02,054 - app.db.session - INFO - Closing database connections...
2025-08-05 02:58:02,059 - app.db.session - INFO - Database connections closed
2025-08-05 02:58:02,060 - app.main - INFO - Database connections closed successfully
2025-08-05 02:58:25,314 - app.main - INFO - Starting application...
2025-08-05 02:58:25,315 - app.main - INFO - Initializing database manager...
2025-08-05 02:58:25,316 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:58:25,340 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:58:25,386 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:58:25,387 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:58:52,635 - app.main - INFO - Shutting down application...
2025-08-05 02:58:52,636 - app.main - INFO - Closing database connections...
2025-08-05 02:58:52,636 - app.db.session - INFO - Closing database connections...
2025-08-05 02:58:52,640 - app.db.session - INFO - Database connections closed
2025-08-05 02:58:52,640 - app.main - INFO - Database connections closed successfully
2025-08-05 02:59:18,279 - app.main - INFO - Starting application...
2025-08-05 02:59:18,280 - app.main - INFO - Initializing database manager...
2025-08-05 02:59:18,280 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:59:18,329 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:59:18,399 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:59:18,399 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:59:29,035 - app.main - INFO - Shutting down application...
2025-08-05 02:59:29,036 - app.main - INFO - Closing database connections...
2025-08-05 02:59:29,038 - app.db.session - INFO - Closing database connections...
2025-08-05 02:59:29,043 - app.db.session - INFO - Database connections closed
2025-08-05 02:59:29,043 - app.main - INFO - Database connections closed successfully
2025-08-05 02:59:40,004 - app.main - INFO - Starting application...
2025-08-05 02:59:40,004 - app.main - INFO - Initializing database manager...
2025-08-05 02:59:40,004 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:59:40,028 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:59:40,073 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:59:40,074 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:59:48,899 - app.main - INFO - Shutting down application...
2025-08-05 02:59:48,900 - app.main - INFO - Closing database connections...
2025-08-05 02:59:48,900 - app.db.session - INFO - Closing database connections...
2025-08-05 02:59:48,904 - app.db.session - INFO - Database connections closed
2025-08-05 02:59:48,904 - app.main - INFO - Database connections closed successfully
2025-08-05 02:59:55,644 - app.main - INFO - Starting application...
2025-08-05 02:59:55,645 - app.main - INFO - Initializing database manager...
2025-08-05 02:59:55,645 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:59:55,666 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:59:55,717 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:59:55,717 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:00:05,245 - app.main - INFO - Shutting down application...
2025-08-05 03:00:05,245 - app.main - INFO - Closing database connections...
2025-08-05 03:00:05,246 - app.db.session - INFO - Closing database connections...
2025-08-05 03:00:05,249 - app.db.session - INFO - Database connections closed
2025-08-05 03:00:05,249 - app.main - INFO - Database connections closed successfully
2025-08-05 03:00:14,410 - app.main - INFO - Starting application...
2025-08-05 03:00:14,410 - app.main - INFO - Initializing database manager...
2025-08-05 03:00:14,412 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:00:14,475 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:00:14,562 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:00:14,562 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:00:24,691 - app.main - INFO - Shutting down application...
2025-08-05 03:00:24,691 - app.main - INFO - Closing database connections...
2025-08-05 03:00:24,691 - app.db.session - INFO - Closing database connections...
2025-08-05 03:00:24,695 - app.db.session - INFO - Database connections closed
2025-08-05 03:00:24,695 - app.main - INFO - Database connections closed successfully
2025-08-05 03:00:32,234 - app.main - INFO - Starting application...
2025-08-05 03:00:32,235 - app.main - INFO - Initializing database manager...
2025-08-05 03:00:32,236 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:00:32,303 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:00:32,389 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:00:32,389 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:00:43,805 - app.main - INFO - Shutting down application...
2025-08-05 03:00:43,806 - app.main - INFO - Closing database connections...
2025-08-05 03:00:43,806 - app.db.session - INFO - Closing database connections...
2025-08-05 03:00:43,810 - app.db.session - INFO - Database connections closed
2025-08-05 03:00:43,810 - app.main - INFO - Database connections closed successfully
2025-08-05 03:01:05,660 - app.main - INFO - Starting application...
2025-08-05 03:01:05,660 - app.main - INFO - Initializing database manager...
2025-08-05 03:01:05,661 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:01:05,696 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:01:05,770 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:01:05,771 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:01:17,472 - app.main - INFO - Shutting down application...
2025-08-05 03:01:17,472 - app.main - INFO - Closing database connections...
2025-08-05 03:01:17,472 - app.db.session - INFO - Closing database connections...
2025-08-05 03:01:17,476 - app.db.session - INFO - Database connections closed
2025-08-05 03:01:17,476 - app.main - INFO - Database connections closed successfully
2025-08-05 03:01:24,626 - app.main - INFO - Starting application...
2025-08-05 03:01:24,626 - app.main - INFO - Initializing database manager...
2025-08-05 03:01:24,627 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:01:24,660 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:01:24,710 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:01:24,710 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:01:56,980 - app.main - INFO - Shutting down application...
2025-08-05 03:01:56,980 - app.main - INFO - Closing database connections...
2025-08-05 03:01:56,981 - app.db.session - INFO - Closing database connections...
2025-08-05 03:01:56,985 - app.db.session - INFO - Database connections closed
2025-08-05 03:01:56,986 - app.main - INFO - Database connections closed successfully
2025-08-05 03:02:04,449 - app.main - INFO - Starting application...
2025-08-05 03:02:04,450 - app.main - INFO - Initializing database manager...
2025-08-05 03:02:04,450 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:02:04,482 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:02:04,545 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:02:04,546 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:02:17,814 - app.main - INFO - Shutting down application...
2025-08-05 03:02:17,814 - app.main - INFO - Closing database connections...
2025-08-05 03:02:17,815 - app.db.session - INFO - Closing database connections...
2025-08-05 03:02:17,818 - app.db.session - INFO - Database connections closed
2025-08-05 03:02:17,818 - app.main - INFO - Database connections closed successfully
2025-08-05 03:02:25,196 - app.main - INFO - Starting application...
2025-08-05 03:02:25,196 - app.main - INFO - Initializing database manager...
2025-08-05 03:02:25,197 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:02:25,227 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:02:25,271 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:02:25,272 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:02:35,702 - app.main - INFO - Shutting down application...
2025-08-05 03:02:35,703 - app.main - INFO - Closing database connections...
2025-08-05 03:02:35,703 - app.db.session - INFO - Closing database connections...
2025-08-05 03:02:35,708 - app.db.session - INFO - Database connections closed
2025-08-05 03:02:35,709 - app.main - INFO - Database connections closed successfully
2025-08-05 03:02:42,713 - app.main - INFO - Starting application...
2025-08-05 03:02:42,713 - app.main - INFO - Initializing database manager...
2025-08-05 03:02:42,714 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:02:42,735 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:02:42,781 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:02:42,781 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:06:24,896 - app.main - INFO - Shutting down application...
2025-08-05 03:06:24,896 - app.main - INFO - Closing database connections...
2025-08-05 03:06:24,897 - app.db.session - INFO - Closing database connections...
2025-08-05 03:06:24,904 - app.db.session - INFO - Database connections closed
2025-08-05 03:06:24,904 - app.main - INFO - Database connections closed successfully
2025-08-05 03:07:53,931 - app.main - INFO - Starting application...
2025-08-05 03:07:53,932 - app.main - INFO - Initializing database manager...
2025-08-05 03:07:53,932 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:07:53,970 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:07:54,071 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:07:54,072 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:09:39,307 - app.main - INFO - Shutting down application...
2025-08-05 03:09:39,308 - app.main - INFO - Closing database connections...
2025-08-05 03:09:39,308 - app.db.session - INFO - Closing database connections...
2025-08-05 03:09:39,311 - app.db.session - INFO - Database connections closed
2025-08-05 03:09:39,311 - app.main - INFO - Database connections closed successfully
2025-08-05 03:09:49,590 - app.main - INFO - Starting application...
2025-08-05 03:09:49,591 - app.main - INFO - Initializing database manager...
2025-08-05 03:09:49,591 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:09:49,624 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:09:49,691 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:09:49,693 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:09:59,222 - app.main - INFO - Shutting down application...
2025-08-05 03:09:59,223 - app.main - INFO - Closing database connections...
2025-08-05 03:09:59,224 - app.db.session - INFO - Closing database connections...
2025-08-05 03:09:59,229 - app.db.session - INFO - Database connections closed
2025-08-05 03:09:59,229 - app.main - INFO - Database connections closed successfully
2025-08-05 03:10:06,743 - app.main - INFO - Starting application...
2025-08-05 03:10:06,743 - app.main - INFO - Initializing database manager...
2025-08-05 03:10:06,744 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:10:06,773 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:10:06,822 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:10:06,822 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:10:18,904 - app.main - INFO - Shutting down application...
2025-08-05 03:10:18,917 - app.main - INFO - Closing database connections...
2025-08-05 03:10:18,947 - app.db.session - INFO - Closing database connections...
2025-08-05 03:10:18,952 - app.db.session - INFO - Database connections closed
2025-08-05 03:10:18,953 - app.main - INFO - Database connections closed successfully
2025-08-05 03:10:26,391 - app.main - INFO - Starting application...
2025-08-05 03:10:26,391 - app.main - INFO - Initializing database manager...
2025-08-05 03:10:26,392 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:10:26,440 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:10:26,506 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:10:26,507 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:10:52,125 - app.main - INFO - Shutting down application...
2025-08-05 03:10:52,125 - app.main - INFO - Closing database connections...
2025-08-05 03:10:52,126 - app.db.session - INFO - Closing database connections...
2025-08-05 03:10:52,129 - app.db.session - INFO - Database connections closed
2025-08-05 03:10:52,130 - app.main - INFO - Database connections closed successfully
2025-08-05 03:11:01,552 - app.main - INFO - Starting application...
2025-08-05 03:11:01,552 - app.main - INFO - Initializing database manager...
2025-08-05 03:11:01,553 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:11:01,579 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:11:01,633 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:11:01,633 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:11:11,863 - app.main - INFO - Shutting down application...
2025-08-05 03:11:11,864 - app.main - INFO - Closing database connections...
2025-08-05 03:11:11,864 - app.db.session - INFO - Closing database connections...
2025-08-05 03:11:11,868 - app.db.session - INFO - Database connections closed
2025-08-05 03:11:11,868 - app.main - INFO - Database connections closed successfully
2025-08-05 03:11:19,064 - app.main - INFO - Starting application...
2025-08-05 03:11:19,064 - app.main - INFO - Initializing database manager...
2025-08-05 03:11:19,065 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:11:19,101 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:11:19,176 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:11:19,176 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:15:26,599 - app.main - INFO - Shutting down application...
2025-08-05 03:15:26,601 - app.main - INFO - Closing database connections...
2025-08-05 03:15:26,602 - app.db.session - INFO - Closing database connections...
2025-08-05 03:15:26,608 - app.db.session - INFO - Database connections closed
2025-08-05 03:15:26,608 - app.main - INFO - Database connections closed successfully
2025-08-05 03:15:45,326 - app.main - INFO - Starting application...
2025-08-05 03:15:45,328 - app.main - INFO - Initializing database manager...
2025-08-05 03:15:45,330 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:15:45,409 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:15:45,524 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:15:45,526 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:15:57,766 - app.main - INFO - Shutting down application...
2025-08-05 03:15:57,767 - app.main - INFO - Closing database connections...
2025-08-05 03:15:57,768 - app.db.session - INFO - Closing database connections...
2025-08-05 03:15:57,773 - app.db.session - INFO - Database connections closed
2025-08-05 03:15:57,775 - app.main - INFO - Database connections closed successfully
2025-08-05 03:17:29,049 - app.main - INFO - Starting application...
2025-08-05 03:17:29,050 - app.main - INFO - Initializing database manager...
2025-08-05 03:17:29,052 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:17:29,106 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:17:29,239 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:17:29,239 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:17:38,870 - app.main - INFO - Shutting down application...
2025-08-05 03:17:38,870 - app.main - INFO - Closing database connections...
2025-08-05 03:17:38,871 - app.db.session - INFO - Closing database connections...
2025-08-05 03:17:38,875 - app.db.session - INFO - Database connections closed
2025-08-05 03:17:38,876 - app.main - INFO - Database connections closed successfully
2025-08-05 03:17:48,967 - app.main - INFO - Starting application...
2025-08-05 03:17:48,968 - app.main - INFO - Initializing database manager...
2025-08-05 03:17:48,969 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:17:48,997 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:17:49,046 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:17:49,047 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:19:32,154 - app.main - INFO - Shutting down application...
2025-08-05 03:19:32,155 - app.main - INFO - Closing database connections...
2025-08-05 03:19:32,155 - app.db.session - INFO - Closing database connections...
2025-08-05 03:19:32,161 - app.db.session - INFO - Database connections closed
2025-08-05 03:19:32,161 - app.main - INFO - Database connections closed successfully
2025-08-05 03:20:01,598 - app.main - INFO - Starting application...
2025-08-05 03:20:01,601 - app.main - INFO - Initializing database manager...
2025-08-05 03:20:01,604 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:20:01,631 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:20:01,684 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:20:01,684 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:20:12,514 - app.main - INFO - Shutting down application...
2025-08-05 03:20:12,515 - app.main - INFO - Closing database connections...
2025-08-05 03:20:12,515 - app.db.session - INFO - Closing database connections...
2025-08-05 03:20:12,520 - app.db.session - INFO - Database connections closed
2025-08-05 03:20:12,521 - app.main - INFO - Database connections closed successfully
2025-08-05 03:20:41,643 - app.main - INFO - Starting application...
2025-08-05 03:20:41,645 - app.main - INFO - Initializing database manager...
2025-08-05 03:20:41,646 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:20:41,670 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:20:41,719 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:20:41,719 - app.main - INFO - Database manager initialized successfully
2025-08-05 21:03:02,383 - app.main - INFO - Starting application...
2025-08-05 21:03:02,384 - app.main - INFO - Initializing database manager...
2025-08-05 21:03:02,384 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 21:03:02,447 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 21:03:02,515 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 21:03:02,516 - app.main - INFO - Database manager initialized successfully
2025-08-05 21:27:25,478 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-05 21:27:25,837 - app.api.auth - INFO - New user registered: ttobi_94
2025-08-05 21:27:25,837 - app.api.auth - INFO - New user registered: ttobi_94
2025-08-05 21:27:25,880 - app.api.auth - ERROR - Unexpected error in registration: 3 validation errors for UserRead
status
  Field required [type=missing, input_value={'id': UUID('b760e9d1-895...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
updated_at
  Field required [type=missing, input_value={'id': UUID('b760e9d1-895...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'id': UUID('b760e9d1-895...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-08-05 21:27:25,881 - app.api.auth - INFO - user_registration completed in 0.54s
2025-08-05 21:27:25,882 - app.db.session - ERROR - Unexpected session error: 500: Registration failed
2025-08-05 21:34:17,068 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 21:34:17,069 - app.db.session - ERROR - Unexpected session error: 400: Username already registered
2025-08-05 21:34:55,724 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 21:34:55,724 - app.db.session - ERROR - Unexpected session error: 400: Email already registered
2025-08-05 21:44:57,633 - app.api.auth - INFO - New user registered: ttobi
2025-08-05 21:44:57,634 - app.api.auth - INFO - New user registered: ttobi
2025-08-05 21:44:57,634 - app.api.auth - ERROR - Unexpected error in registration: 3 validation errors for UserRead
status
  Field required [type=missing, input_value={'id': UUID('17f3ed12-e72...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
updated_at
  Field required [type=missing, input_value={'id': UUID('17f3ed12-e72...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'id': UUID('17f3ed12-e72...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-08-05 21:44:57,635 - app.api.auth - INFO - user_registration completed in 0.29s
2025-08-05 21:44:57,635 - app.db.session - ERROR - Unexpected session error: 500: Registration failed
2025-08-05 21:45:15,731 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 21:45:15,731 - app.db.session - ERROR - Unexpected session error: 400: Username already registered
2025-08-05 21:45:21,818 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 21:45:21,819 - app.db.session - ERROR - Unexpected session error: 400: Email already registered
2025-08-05 21:48:40,731 - app.main - INFO - Shutting down application...
2025-08-05 21:48:40,731 - app.main - INFO - Closing database connections...
2025-08-05 21:48:40,732 - app.db.session - INFO - Closing database connections...
2025-08-05 21:48:40,743 - app.db.session - INFO - Database connections closed
2025-08-05 21:48:40,743 - app.main - INFO - Database connections closed successfully
2025-08-05 21:48:54,465 - app.main - INFO - Starting application...
2025-08-05 21:48:54,468 - app.main - INFO - Initializing database manager...
2025-08-05 21:48:54,470 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 21:48:54,519 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 21:48:54,634 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 21:48:54,634 - app.main - INFO - Database manager initialized successfully
2025-08-05 21:49:04,498 - app.main - INFO - Shutting down application...
2025-08-05 21:49:04,498 - app.main - INFO - Closing database connections...
2025-08-05 21:49:04,499 - app.db.session - INFO - Closing database connections...
2025-08-05 21:49:04,502 - app.db.session - INFO - Database connections closed
2025-08-05 21:49:04,503 - app.main - INFO - Database connections closed successfully
2025-08-05 21:49:12,385 - app.main - INFO - Starting application...
2025-08-05 21:49:12,385 - app.main - INFO - Initializing database manager...
2025-08-05 21:49:12,386 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 21:49:12,409 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 21:49:12,458 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 21:49:12,458 - app.main - INFO - Database manager initialized successfully
2025-08-05 21:55:57,222 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-05 21:55:57,586 - app.api.auth - INFO - New user registered: ttob
2025-08-05 21:55:57,586 - app.api.auth - INFO - New user registered: ttob
2025-08-05 21:55:57,593 - app.api.auth - INFO - user_registration completed in 0.43s
2025-08-05 21:58:37,028 - app.api.auth - INFO - New user registered: ttgi_
2025-08-05 21:58:37,028 - app.api.auth - INFO - New user registered: ttgi_
2025-08-05 21:58:37,029 - app.api.auth - INFO - user_registration completed in 0.33s
2025-08-05 21:58:37,348 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-05 21:58:37,349 - app.core.security - INFO - user_authentication completed in 0.30s
2025-08-05 21:58:37,350 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-05 21:58:37,369 - app.core.security - INFO - Access token created successfully
2025-08-05 21:58:37,369 - app.core.security - INFO - Refresh token created successfully
2025-08-05 21:58:37,370 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-05 21:58:37,370 - app.api.auth - INFO - user_login completed in 0.32s
2025-08-05 21:58:37,429 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 21:58:38,673 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 21:58:38,679 - app.db.session - ERROR - Unexpected session error: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 21:58:38,682 - app.main - ERROR - Unhandled exception: get_itineraries() missing 1 required positional argument: 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 678, in list_itineraries
    itineraries = await get_itineraries(session)
                        ~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 21:58:38,732 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 21:58:38,735 - app.db.session - ERROR - Unexpected session error: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 21:58:38,740 - app.main - ERROR - Unhandled exception: get_itineraries() missing 1 required positional argument: 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 678, in list_itineraries
    itineraries = await get_itineraries(session)
                        ~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:02:01,988 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 22:02:01,988 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-05 22:02:01,989 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-05 22:02:01,990 - app.api.nlp - INFO - nlp_parsing completed in 2.50s
2025-08-05 22:10:16,085 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:12:53,623 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-05 22:12:53,624 - app.core.security - INFO - user_authentication completed in 0.31s
2025-08-05 22:12:53,624 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-05 22:12:53,626 - app.core.security - INFO - Access token created successfully
2025-08-05 22:12:53,626 - app.core.security - INFO - Refresh token created successfully
2025-08-05 22:12:53,627 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-05 22:12:53,627 - app.api.auth - INFO - user_login completed in 0.31s
2025-08-05 22:12:53,680 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:12:53,866 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:12:53,871 - app.db.session - ERROR - Unexpected session error: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:12:53,873 - app.main - ERROR - Unhandled exception: get_itineraries() missing 1 required positional argument: 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 678, in list_itineraries
    itineraries = await get_itineraries(session)
                        ~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:12:53,897 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:12:53,899 - app.db.session - ERROR - Unexpected session error: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:12:53,900 - app.main - ERROR - Unhandled exception: get_itineraries() missing 1 required positional argument: 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 678, in list_itineraries
    itineraries = await get_itineraries(session)
                        ~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:12:53,926 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:12:53,935 - app.db.session - ERROR - Unexpected session error: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:12:53,937 - app.main - ERROR - Unhandled exception: get_itineraries() missing 1 required positional argument: 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 678, in list_itineraries
    itineraries = await get_itineraries(session)
                        ~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:13:07,162 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 22:13:07,163 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-05 22:13:07,163 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-05 22:13:07,164 - app.api.nlp - INFO - nlp_parsing completed in 0.19s
2025-08-05 22:13:18,131 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:13:18,236 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 22:13:18,238 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 22:13:18,238 - app.api.itinerary - ERROR - Unexpected error in itinerary generation: 'NoneType' object has no attribute 'get'
2025-08-05 22:13:18,239 - app.api.itinerary - INFO - itinerary_generation completed in 0.11s
2025-08-05 22:13:18,239 - app.db.session - ERROR - Unexpected session error: 500: Failed to generate itinerary
2025-08-05 22:18:59,467 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:18:59,469 - app.db.session - ERROR - Unexpected session error: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:18:59,471 - app.main - ERROR - Unhandled exception: get_itineraries() missing 1 required positional argument: 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 678, in list_itineraries
    itineraries = await get_itineraries(session)
                        ~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:18:59,498 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:18:59,500 - app.db.session - ERROR - Unexpected session error: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:18:59,503 - app.main - ERROR - Unhandled exception: get_itineraries() missing 1 required positional argument: 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 678, in list_itineraries
    itineraries = await get_itineraries(session)
                        ~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:18:59,536 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:18:59,538 - app.db.session - ERROR - Unexpected session error: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:18:59,541 - app.main - ERROR - Unhandled exception: get_itineraries() missing 1 required positional argument: 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 678, in list_itineraries
    itineraries = await get_itineraries(session)
                        ~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 22:22:32,948 - app.main - INFO - Shutting down application...
2025-08-05 22:22:32,948 - app.main - INFO - Closing database connections...
2025-08-05 22:22:32,949 - app.db.session - INFO - Closing database connections...
2025-08-05 22:22:32,967 - app.db.session - INFO - Database connections closed
2025-08-05 22:22:32,967 - app.main - INFO - Database connections closed successfully
2025-08-05 22:22:47,161 - app.main - INFO - Starting application...
2025-08-05 22:22:47,162 - app.main - INFO - Initializing database manager...
2025-08-05 22:22:47,162 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 22:22:47,225 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 22:22:47,314 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 22:22:47,314 - app.main - INFO - Database manager initialized successfully
2025-08-05 22:27:38,579 - app.core.nlp.parser - INFO - Parsed travel request with 75.0% confidence
2025-08-05 22:27:38,580 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-05 22:27:38,580 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-05 22:27:38,581 - app.api.nlp - INFO - nlp_parsing completed in 2.34s
2025-08-05 22:27:43,353 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:27:43,476 - app.core.nlp.parser - INFO - Parsed travel request with 75.0% confidence
2025-08-05 22:27:43,476 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 22:27:43,477 - app.api.itinerary - ERROR - Unexpected error in itinerary generation: 'NoneType' object has no attribute 'get'
2025-08-05 22:27:43,478 - app.api.itinerary - INFO - itinerary_generation completed in 0.12s
2025-08-05 22:27:43,479 - app.db.session - ERROR - Unexpected session error: 500: Failed to generate itinerary
2025-08-05 22:30:23,433 - app.main - INFO - Shutting down application...
2025-08-05 22:30:23,434 - app.main - INFO - Closing database connections...
2025-08-05 22:30:23,434 - app.db.session - INFO - Closing database connections...
2025-08-05 22:30:23,438 - app.db.session - INFO - Database connections closed
2025-08-05 22:30:23,438 - app.main - INFO - Database connections closed successfully
2025-08-05 22:30:33,092 - app.main - INFO - Starting application...
2025-08-05 22:30:33,093 - app.main - INFO - Initializing database manager...
2025-08-05 22:30:33,093 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 22:30:33,117 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 22:30:33,166 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 22:30:33,166 - app.main - INFO - Database manager initialized successfully
2025-08-05 22:30:55,003 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:30:57,059 - app.core.nlp.parser - INFO - Parsed travel request with 75.0% confidence
2025-08-05 22:30:57,060 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 22:30:57,082 - app.api.itinerary - INFO - itinerary_generation completed in 2.08s
2025-08-05 22:30:57,083 - app.db.session - ERROR - Unexpected session error: 404: No destination found matching 'California'
2025-08-05 22:31:36,097 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:31:36,099 - app.db.session - ERROR - Unexpected session error: name 'get_user_itineraries' is not defined
2025-08-05 22:31:36,100 - app.main - ERROR - Unhandled exception: name 'get_user_itineraries' is not defined
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 679, in list_itineraries
    itineraries = await get_user_itineraries(session, user_id=current_user.id)
                        ^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_user_itineraries' is not defined. Did you mean: 'get_itineraries'?
2025-08-05 22:31:36,143 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:31:36,145 - app.db.session - ERROR - Unexpected session error: name 'get_user_itineraries' is not defined
2025-08-05 22:31:36,147 - app.main - ERROR - Unhandled exception: name 'get_user_itineraries' is not defined
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 679, in list_itineraries
    itineraries = await get_user_itineraries(session, user_id=current_user.id)
                        ^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_user_itineraries' is not defined. Did you mean: 'get_itineraries'?
2025-08-05 22:31:36,177 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:31:36,181 - app.db.session - ERROR - Unexpected session error: name 'get_user_itineraries' is not defined
2025-08-05 22:31:36,184 - app.main - ERROR - Unhandled exception: name 'get_user_itineraries' is not defined
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 679, in list_itineraries
    itineraries = await get_user_itineraries(session, user_id=current_user.id)
                        ^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_user_itineraries' is not defined. Did you mean: 'get_itineraries'?
2025-08-05 22:32:20,689 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:32:20,791 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:32:20,795 - app.db.session - ERROR - Unexpected session error: name 'get_user_itineraries' is not defined
2025-08-05 22:32:20,797 - app.main - ERROR - Unhandled exception: name 'get_user_itineraries' is not defined
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 679, in list_itineraries
    itineraries = await get_user_itineraries(session, user_id=current_user.id)
                        ^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_user_itineraries' is not defined. Did you mean: 'get_itineraries'?
2025-08-05 22:32:35,902 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:32:35,971 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:32:35,972 - app.db.session - ERROR - Unexpected session error: name 'get_user_itineraries' is not defined
2025-08-05 22:32:35,974 - app.main - ERROR - Unhandled exception: name 'get_user_itineraries' is not defined
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 679, in list_itineraries
    itineraries = await get_user_itineraries(session, user_id=current_user.id)
                        ^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_user_itineraries' is not defined. Did you mean: 'get_itineraries'?
2025-08-05 22:35:56,541 - app.main - INFO - Shutting down application...
2025-08-05 22:35:56,541 - app.main - INFO - Closing database connections...
2025-08-05 22:35:56,542 - app.db.session - INFO - Closing database connections...
2025-08-05 22:35:56,547 - app.db.session - INFO - Database connections closed
2025-08-05 22:35:56,547 - app.main - INFO - Database connections closed successfully
2025-08-05 22:36:03,920 - app.main - INFO - Starting application...
2025-08-05 22:36:03,921 - app.main - INFO - Initializing database manager...
2025-08-05 22:36:03,921 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 22:36:03,939 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 22:36:03,979 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 22:36:03,979 - app.main - INFO - Database manager initialized successfully
2025-08-05 22:39:22,099 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:39:22,127 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:39:22,205 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 22:39:22,205 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-05 22:39:22,206 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 22:40:20,578 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 22:40:20,579 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-05 22:40:20,579 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-05 22:40:20,580 - app.api.nlp - INFO - nlp_parsing completed in 1.71s
2025-08-05 22:40:27,292 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:40:27,412 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 22:40:27,413 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 22:40:27,419 - app.api.itinerary - INFO - itinerary_generation completed in 0.13s
2025-08-05 22:40:27,420 - app.db.session - ERROR - Unexpected session error: 404: No destination found matching 'New York City'
2025-08-05 22:40:39,529 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:40:39,545 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 22:40:39,545 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 22:40:39,546 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 22:40:39,550 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:40:39,560 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 22:40:39,560 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 22:40:39,561 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 22:41:00,417 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 22:41:00,417 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-05 22:41:00,418 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-05 22:41:00,418 - app.api.nlp - INFO - nlp_parsing completed in 0.13s
2025-08-05 22:41:03,026 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 22:41:03,140 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 22:41:03,141 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 22:41:03,147 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 22:41:03,153 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 22:41:03,157 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 22:41:03,262 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 22:41:03,334 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 22:41:03,335 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 22:41:03,335 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 22:41:03,336 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 22:41:03,336 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 22:41:03,337 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 22:41:03,337 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 22:41:03,337 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 22:41:03,338 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 22:41:03,626 - app.api.itinerary - INFO - Built POI list with 40 items
2025-08-05 22:41:03,742 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-05 22:41:03,815 - app.api.itinerary - INFO - Itinerary 14ba01b2-9238-4355-b9bd-ec6b07db0fd5 persisted successfully
2025-08-05 22:41:03,815 - app.api.itinerary - INFO - Successfully generated itinerary 14ba01b2-9238-4355-b9bd-ec6b07db0fd5 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-05 22:41:03,816 - app.api.itinerary - INFO - itinerary_generation completed in 0.79s
2025-08-05 22:41:03,820 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}

2025-08-05 22:41:03,822 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}

2025-08-05 23:15:41,854 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-08-05 23:15:41,855 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-08-05 23:16:35,128 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-05 23:16:35,431 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-05 23:16:35,432 - app.core.security - INFO - user_authentication completed in 0.32s
2025-08-05 23:16:35,432 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-05 23:16:35,434 - app.core.security - INFO - Access token created successfully
2025-08-05 23:16:35,434 - app.core.security - INFO - Refresh token created successfully
2025-08-05 23:16:35,435 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-05 23:16:35,435 - app.api.auth - INFO - user_login completed in 0.32s
2025-08-05 23:16:35,445 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:16:35,638 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:16:35,659 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:16:35,682 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:16:35,683 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-05 23:16:35,684 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:16:35,735 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:16:35,735 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:16:35,736 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:16:43,853 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:16:43,885 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}

2025-08-05 23:16:43,887 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}

2025-08-05 23:16:43,908 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:16:43,930 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}

2025-08-05 23:16:43,940 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}

2025-08-05 23:16:43,967 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:16:43,986 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}

2025-08-05 23:16:43,989 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}

2025-08-05 23:21:29,584 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:21:29,607 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:21:29,608 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-05 23:21:29,610 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:21:29,616 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:21:29,630 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:21:29,631 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:21:29,631 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:21:39,280 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:21:39,305 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}

2025-08-05 23:21:39,307 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}

2025-08-05 23:21:39,329 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:21:39,349 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}

2025-08-05 23:21:39,351 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}

2025-08-05 23:21:39,376 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:21:39,392 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.712774, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdcWDfyXrJ_SIqgdUIfV6w6exTSc8RMyFFhBTUlo0unhAzQyrMPDCc1kSBBX4ltnw9ExOX-scFRfoOWd3LLpteCOJRdQKfVCZtn7QxOeHdXKIOxRoTFbcJast44YWME_vb4vzRa9lK5Anw89EHOH10iI2FHMWLQ89pVVYJJoFhDzXsHZ5X1Lqr7_HZkN1fp8iP6pAdM7Se7AQWL35HztzJS-vAmwXgn0xDrJCJEmV7lxZIaBYWrrFS7crwKoUL3b44mu2rnq9PHqmWMCnJNxF7VAvz4o9bi5QQG4XHnaTmDpwwaDYfqy7sL_KL3kFitF24JKIftY2khQfQTD4__jOb8Q4bvf0o6-lsVfyBAUPSiq_0lwWbACPpLPJ4ALHq4cGJEsRxAgyUZAHeF6-zthJyjrHRnvZayyv5S3dGwIis5Zx4&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpf6Y28Tt4LPEuJRyqGaknhYbRbfno5RGgQP7zrRa1gNgNjXAPto2EVtYLMgsrLXLqaVwtCpwjW3a534Ctsq77Xy6kZqdjJMGCAtFDnZae9hPpBTmoVOl5EglaEO7HhbrRymEVyv9tiNVokYR69arK1j4ah2-9tbMJmgQhN9J1ANvYcVKcIFXEOtdfLGDHBOEcbMO1Dw9_ojOVsv8_i7v4Oae4PlIR6OvQZEkiRN3EZu2vcetGjHwyAkU4eplyIEUh6NoI3lcH-BOiOIEKPmdRfYjst7b3nP_NyCj8t32OpJ7-DOd-RzxrKz7xbaBJzfO9tyu7fo274_0n-wvZFcEH0I6Bj_5uUO6qRPGZuBS4UKr3QqzxfIult2WK1tXhwGKjn4nJ1XPcTXCiZq9h_aGny3aMZT4ktI7kCdwdRNjAGTbGQ&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd66qX5oSfAmgwK6ahb4sWqorCHQiPUfZXzCd_Nq0Ru9v-V8NsynZoT3sMggfBOc2WpXemwzjZ2Lwe7RdVoCHk4eTlK0xjjW2LxYmm6UvUSCvHrO8fiBuOIPr0vHqKuHW-KYP7mSIaII2AXp5TUzlRY22Vidcf2oLVK27FXl1hkZnHqbAw7MazIvLU8_AYhPVGUpb_i8iMsMCAqW6JA41MySVaWpAMXyKln8gjhoiOT9RktV3MnnnG4wtWwC0LGNbloiwzl4iEUY8Bn1C4mQPOKDSVzaan5cd0cPq5SoHpeRdewqQagGkGvgv0DMEgrQpplP4jI1w53BVAu1t5nHtJln-8eZtEnmNNkXfyGstNIIZaGrKYL1S60PL8SN4xpUjj6sWd9MSDhCJg-dwcd84l1me9D0Tk339XSEHkqVIRdbA&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type='attraction', difficulty_level='easy', accessibility_info='Contact venue for accessibility information', id=UUID('afd02e86-f3c1-4936-8099-747351aaab25'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=90, age_restrictions='All ages')}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpcPoCSBq1qPrEguxSSrU4wxzwkz9wGC603RhVSGREWdpe82tmdtQU0KnnN79RXyQIbzkEdTKexxILfAedRaVn7l149MCVZM8xXVqCUxG6dzFjrzA9gMHKWmBm9uJHrA5qlcV53uY-bZnn3zbGTN9u09nGMzB5JRlZhx33Ri3UvAxZyY_tSrt-obE-eKAvt-ShtwL4Gun9KSwO2sBIIXTHoYAPWa2UwDz3oj5NptP_iiEkB3kbXOYPXhhwKnJcau0O5XklNhuOhxXEMxsiVHcULrqbq88zFfZT3Fzc5wujYlPD0s-vmMQhkqGitreubmcIbiZMgf7ywAfL3YXq43okGbqbFlCNR3VNGm7-HbkBQ6rqkV9a5NR8S4DPzrCQ9JWwDhXeVOGG8-UpyqetmKJie7jjNUdOIq33sQZA5kJK9dUZE&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpdKTsH48Y25DGu3CUnR_yDey7HeRYVqQd3Ne87iho1hOPrdmLACgJlzfgDJxCrPVd7cHtPrc5uxTKqDgnkjJwpHyKVpqXRjMHhSTvZTbf7u_w-koQX-Bmg-3b8nNsE2AOAG0JcsPAmntn-bP7iNKCH1LiZKlXEBwLhdmpWjNuBmX2K57mGJO7Tnlzj5xndfDBtqQVn0oHemVUhXg5hOwfNtQ92KBxZayFsUQK5BbHfbDSgEMdt5xfiXM4XW4bXgavRFFLhw7i14_4YbdLcpfHJA-_NBcRwVvGT2y1pkSgy_dixUmMR1a8oZs6Qo4rwNp6bXnGWDZoohK_OVR9sFPKO_-q_HKfzz4EWR-yW2UYu8NyGxXtmuy-Vkrm_9qg4GdovZzahOMrnT8vWCVpEAJ8-jgbl3m0uHZ7eBF2s8PUHqtDs&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe6s9YwW9izLdjpT9P_NyJyj4_pj7tpNQR7AXdar1-Ccq7iJYXbt8meHTLZfSLXRAKwetADH7GQp6o3noioLpUwi6dySPmI59kC24fehPK7ZRgnGThCw6uvg7TNhobhkS9JqRtli-xLvUydmO8oEV68CFo4ImTeMYGsY6pItc-8ExWj3rpqy2wosxLIKYgX5lZPt3CTW5gvpiAkXvumjDfLhmIkOfiGzyvTuj0yeL9GFIkDBUxwV45DqNemQGAo0knuqbKA9IGnlQf1WZwjvjdKycZBp0DQVIDGCUdslmB8KOl-wE89heWg_w52B40ApMWxbi_22pW0_TvtVvDrknLkiVYC6tg6KyQQCgDHSGzkkcsS1EZEYdPYdf6Jl2ooZykgGEPSAkpCAE8iW_6anxEdFm8yeTnv8RF99ZXaAwUGBg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity(latitude=40.7127744, name='New York City Hall', images=['https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpe2b3Y5uTeB3WTN8uEYxwHFpDOLpCPsgFE89okm8BpFQPBwT4waTL3mbOyafoJflKYKXdZPq5MJmUdipM9KV4iKjRKXtDqFz-vyQqi0pvqmXXe9M3zIyaVpwOWTUAg6xWsgbsp4eJOqVK1W-T6E0zizfp8k-EkBu7gpSXLWe5LL85T9iLFh0jeONOY2x8XWz18lNZFwFal_vf2GP3U00CVtMsjBXfHKAt8xDqhRn7qMmowGbkyfCeGq1Kumfe3o1fskKcVPlzHJeOlhDejEswDj6h5y4NH3ZNaVcW83csU6JvQ2nfn-_TOvvpzDv0_tisIoIDio3Dkp-SDvbvKzpL2qE-F-dYhPeC-mhSvaAYCXfBIlM4RGOrlBUbti5moF86sQeW33Rdsdkz2w4hiL709UfrbUleRw4vnXh3y52MR4txY&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpeSe6zZ8DDvjOFRT8V2HJS6LenvNgoFhpcYxlaGV9toL-_oNI13RCEVDw5zO5bfV4I0fShv7-4GWPvBlsR_FPUOdTTwLGTrtpLXcSOY1aG389_B4HZvhSD1zRt3tSI_9uLJuB_IDzjwoqNuoXrAg7tjijfjO538b4URvOkXU2DSvSNTHniYDijeTuH5oAF7G3FYqOD5ctXsxa1gsv8yVpZ0nBO3_LVIVZvZ6X_nhJiF8RVh-wUZZw5r8vePCbI8GJzdUkZGIAQlyUq1zA3eH4zGvp39vQl2FYhFt_-dWqbqbgeiXTrACsPiT4a4BkO_PsSQ3ufZN6tOL-WiQgc3r2_Rzj89YIGTQ2eirZ2jltzeVlnXr5xwTIX9CxCuOPzQbaP28JvoTq3TcecqevbWmFLKcbbgLWw23W7LpWVMWgx0xgk&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0', 'https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference=ATKogpd7gb8Do_LR_JhfZSusqmAUWccofr7fGXikc0yvJq--8gbaow8dOPl_37DDoihyTQreUN0tQnB6AwaXPztNN3LjjAN5vLCAQ9XihmgsDRzwvIsWbP0NLqv84C-2zxZgOtNdOJ7dSiThMqsk_ixCf-3z2JzUwf4vvaO5L5s4XhmJWpjWdhvC4AfZfEGT15Jx3LQwavyBGxVa4-EU2S8z58bPoYowNkxMMpjUhKLz5Infe1GsZNu_B9PtSqPDN3dYGuXfWftmxc6naoqGbVa9KAWkd2wn6r37S2rAeg-yXFGECEYVHVe80CdYA7DIT0dttZSPqcs91zcaUuskIbDZz7uYDgq4eeC6cgIITxmgnesnCywTdWhy95C83mqv0K8T8-bfj7qzD5CZxOkjgpfYuuenTXictaB78CvyupZLW-tAlg&key=AIzaSyBD8WY_hJ19QBBdSk-2aWSq09xO04Lu0m0'], opening_hours='["Monday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Tuesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Wednesday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Thursday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Friday: 9:00\\u202fAM\\u2009\\u2013\\u20095:00\\u202fPM", "Saturday: Closed", "Sunday: Closed"]', type=None, difficulty_level=None, accessibility_info=None, id=UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), description="Palatial, circa-1812 government complex housing the mayor's office, the City Council & more.", longitude=-74.006059, price=None, rating=4.3, duration_minutes=None, age_restrictions=None)}

2025-08-05 23:21:39,394 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 0, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 1, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'created_at'), 'msg': 'Field required', 'input': Activity()}
  {'type': 'missing', 'loc': ('response', 'act_links', 2, 'activity', 'updated_at'), 'msg': 'Field required', 'input': Activity()}

2025-08-05 23:27:56,878 - app.main - INFO - Shutting down application...
2025-08-05 23:27:56,879 - app.main - INFO - Closing database connections...
2025-08-05 23:27:56,880 - app.db.session - INFO - Closing database connections...
2025-08-05 23:27:56,932 - app.db.session - INFO - Database connections closed
2025-08-05 23:27:56,932 - app.main - INFO - Database connections closed successfully
2025-08-05 23:28:07,471 - app.main - INFO - Starting application...
2025-08-05 23:28:07,472 - app.main - INFO - Initializing database manager...
2025-08-05 23:28:07,473 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 23:28:07,506 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 23:28:07,562 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 23:28:07,563 - app.main - INFO - Database manager initialized successfully
2025-08-05 23:29:02,581 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:29:02,595 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:29:02,620 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:29:02,620 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:29:02,621 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:29:02,643 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:29:02,644 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:29:02,645 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:29:08,932 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:29:08,996 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:29:45,571 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:29:45,590 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:29:45,590 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:29:45,591 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:29:45,595 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:29:45,607 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:29:45,608 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:29:45,608 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:30:33,811 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 23:30:33,811 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-05 23:30:33,812 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-05 23:30:33,812 - app.api.nlp - INFO - nlp_parsing completed in 2.00s
2025-08-05 23:30:37,594 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:30:37,698 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 23:30:37,699 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 23:30:37,704 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 23:30:37,707 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 23:30:37,711 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 23:30:37,763 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 23:30:37,817 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 23:30:37,818 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 23:30:37,818 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 23:30:37,818 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 23:30:37,819 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 23:30:37,819 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 23:30:37,820 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 23:30:37,820 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 23:30:37,821 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 23:30:37,994 - app.api.itinerary - INFO - Built POI list with 40 items
2025-08-05 23:30:38,118 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-05 23:30:38,153 - app.api.itinerary - INFO - Itinerary 3c5c609a-b670-47fd-930c-80bfab1e664b persisted successfully
2025-08-05 23:30:38,153 - app.api.itinerary - INFO - Successfully generated itinerary 3c5c609a-b670-47fd-930c-80bfab1e664b for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-05 23:30:38,154 - app.api.itinerary - INFO - itinerary_generation completed in 0.56s
2025-08-05 23:30:45,883 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:30:45,918 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:31:35,125 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:31:35,145 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:31:35,165 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:31:35,166 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-05 23:31:35,166 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:31:35,170 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:31:35,171 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:31:35,171 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:31:40,660 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:31:40,691 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:31:44,821 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:31:44,838 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:31:44,847 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:31:44,848 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:31:44,849 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:31:44,857 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:31:44,858 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:31:44,858 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:33:28,523 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-05 23:33:28,523 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-05 23:33:28,524 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-05 23:33:28,524 - app.api.nlp - INFO - nlp_parsing completed in 0.03s
2025-08-05 23:33:35,181 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:33:35,198 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-05 23:33:35,199 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 23:33:35,202 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 23:33:35,204 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 23:33:35,206 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 23:33:35,223 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-05 23:33:35,292 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-05 23:33:35,319 - app.api.itinerary - INFO - Itinerary 3e5b0faf-b0af-4cd7-8175-a5b1308377bf persisted successfully
2025-08-05 23:33:35,319 - app.api.itinerary - INFO - Successfully generated itinerary 3e5b0faf-b0af-4cd7-8175-a5b1308377bf for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-05 23:33:35,320 - app.api.itinerary - INFO - itinerary_generation completed in 0.14s
2025-08-05 23:33:35,322 - app.db.session - ERROR - Unexpected session error: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, images=['https://cf.bstatic.com/xdata/images/hotel/square240/506048553.webp?k=8aeb980b4288002f20968e579cdee3bacb454016bad9ab14d2626411911f99d0&o='], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8409'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, images=['https://cf.bstatic.com/xdata/images/hotel/square240/506048553.webp?k=8aeb980b4288002f20968e579cdee3bacb454016bad9ab14d2626411911f99d0&o='], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8409'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, images=[], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8141'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, images=[], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8141'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}

2025-08-05 23:33:35,324 - app.main - ERROR - Unhandled exception: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}

2025-08-05 23:35:31,880 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:35:31,898 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:35:31,898 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:35:31,899 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:35:31,903 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:35:31,915 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:35:31,915 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:35:31,916 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:35:35,112 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:35:35,142 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:35:38,393 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:35:38,404 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:35:38,405 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:35:38,405 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:35:38,408 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:35:38,422 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:35:38,422 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:35:38,423 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:35:40,730 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:35:40,752 - app.db.session - ERROR - Unexpected session error: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, images=['https://cf.bstatic.com/xdata/images/hotel/square240/506048553.webp?k=8aeb980b4288002f20968e579cdee3bacb454016bad9ab14d2626411911f99d0&o='], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8409'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, images=['https://cf.bstatic.com/xdata/images/hotel/square240/506048553.webp?k=8aeb980b4288002f20968e579cdee3bacb454016bad9ab14d2626411911f99d0&o='], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8409'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, images=[], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8141'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, images=[], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8141'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}

2025-08-05 23:35:40,754 - app.main - ERROR - Unhandled exception: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}

2025-08-05 23:35:40,770 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:35:40,807 - app.db.session - ERROR - Unexpected session error: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, images=['https://cf.bstatic.com/xdata/images/hotel/square240/506048553.webp?k=8aeb980b4288002f20968e579cdee3bacb454016bad9ab14d2626411911f99d0&o='], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8409'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, images=['https://cf.bstatic.com/xdata/images/hotel/square240/506048553.webp?k=8aeb980b4288002f20968e579cdee3bacb454016bad9ab14d2626411911f99d0&o='], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8409'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, images=[], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8141'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, images=[], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8141'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}

2025-08-05 23:35:40,816 - app.main - ERROR - Unhandled exception: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}

2025-08-05 23:35:40,837 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:35:40,853 - app.db.session - ERROR - Unexpected session error: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, images=['https://cf.bstatic.com/xdata/images/hotel/square240/506048553.webp?k=8aeb980b4288002f20968e579cdee3bacb454016bad9ab14d2626411911f99d0&o='], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8409'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, images=['https://cf.bstatic.com/xdata/images/hotel/square240/506048553.webp?k=8aeb980b4288002f20968e579cdee3bacb454016bad9ab14d2626411911f99d0&o='], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8409'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, images=[], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8141'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, images=[], rating=9.6, type=None, capacity=None, check_out_time=None, name='Villa-des-Prs', description=None, longitude=2.3364926, price=Decimal('8141'), amenities=['435', '436', '439', '440', '441', '442', '443', '444', '445', '446', '448', '489', '490', '491', '492', '493', '494', '495', '496', '499', '500', '501', '502', '503', '505', '506'], star_rating=None, check_in_time=None, contact_info=None)}

2025-08-05 23:35:40,856 - app.main - ERROR - Unhandled exception: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 4 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}

2025-08-05 23:36:25,236 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:36:25,249 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:36:25,249 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:36:25,250 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:36:25,254 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:36:25,265 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-05 23:36:25,266 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-05 23:36:25,267 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-05 23:36:38,320 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-05 23:36:38,321 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-05 23:36:38,321 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-05 23:36:38,322 - app.api.nlp - INFO - nlp_parsing completed in 0.03s
2025-08-05 23:39:00,718 - app.main - INFO - Shutting down application...
2025-08-05 23:39:00,719 - app.main - INFO - Closing database connections...
2025-08-05 23:39:00,719 - app.db.session - INFO - Closing database connections...
2025-08-05 23:39:00,729 - app.db.session - INFO - Database connections closed
2025-08-05 23:39:00,729 - app.main - INFO - Database connections closed successfully
2025-08-05 23:39:08,499 - app.main - INFO - Starting application...
2025-08-05 23:39:08,499 - app.main - INFO - Initializing database manager...
2025-08-05 23:39:08,500 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 23:39:08,521 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 23:39:08,564 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 23:39:08,565 - app.main - INFO - Database manager initialized successfully
2025-08-05 23:40:00,283 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:40:00,350 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-05 23:40:00,351 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 23:40:00,357 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 23:40:00,361 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 23:40:00,364 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 23:40:00,479 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-05 23:40:00,564 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-05 23:40:00,620 - app.api.itinerary - INFO - Itinerary b4dae2ac-6132-4abd-a80a-d99d150231c5 persisted successfully
2025-08-05 23:40:00,620 - app.api.itinerary - INFO - Successfully generated itinerary b4dae2ac-6132-4abd-a80a-d99d150231c5 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-05 23:40:00,621 - app.api.itinerary - INFO - itinerary_generation completed in 0.34s
2025-08-05 23:40:05,880 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:40:05,919 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 23:59:40,948 - app.main - INFO - Shutting down application...
2025-08-05 23:59:40,948 - app.main - INFO - Closing database connections...
2025-08-05 23:59:40,949 - app.db.session - INFO - Closing database connections...
2025-08-05 23:59:40,975 - app.db.session - INFO - Database connections closed
2025-08-05 23:59:40,975 - app.main - INFO - Database connections closed successfully
2025-08-05 23:59:50,928 - app.main - INFO - Starting application...
2025-08-05 23:59:50,928 - app.main - INFO - Initializing database manager...
2025-08-05 23:59:50,929 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 23:59:50,958 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 23:59:51,007 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 23:59:51,007 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:10:34,919 - app.main - ERROR - Database health check failed: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-06 00:10:57,858 - app.main - INFO - Shutting down application...
2025-08-06 00:10:57,859 - app.main - INFO - Closing database connections...
2025-08-06 00:10:57,859 - app.db.session - INFO - Closing database connections...
2025-08-06 00:10:57,860 - app.db.session - INFO - Database connections closed
2025-08-06 00:10:57,861 - app.main - INFO - Database connections closed successfully
2025-08-06 00:11:05,551 - app.main - INFO - Starting application...
2025-08-06 00:11:05,552 - app.main - INFO - Initializing database manager...
2025-08-06 00:11:05,553 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:11:05,575 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:11:05,622 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:11:05,623 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:16:27,820 - app.main - INFO - Shutting down application...
2025-08-06 00:16:27,821 - app.main - INFO - Closing database connections...
2025-08-06 00:16:27,821 - app.db.session - INFO - Closing database connections...
2025-08-06 00:16:27,825 - app.db.session - INFO - Database connections closed
2025-08-06 00:16:27,825 - app.main - INFO - Database connections closed successfully
2025-08-06 00:16:35,690 - app.main - INFO - Starting application...
2025-08-06 00:16:35,690 - app.main - INFO - Initializing database manager...
2025-08-06 00:16:35,691 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:16:35,712 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:16:35,757 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:16:35,758 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:16:46,006 - app.main - INFO - Shutting down application...
2025-08-06 00:16:46,006 - app.main - INFO - Closing database connections...
2025-08-06 00:16:46,007 - app.db.session - INFO - Closing database connections...
2025-08-06 00:16:46,010 - app.db.session - INFO - Database connections closed
2025-08-06 00:16:46,010 - app.main - INFO - Database connections closed successfully
2025-08-06 00:16:53,405 - app.main - INFO - Starting application...
2025-08-06 00:16:53,406 - app.main - INFO - Initializing database manager...
2025-08-06 00:16:53,407 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:16:53,429 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:16:53,480 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:16:53,480 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:17:31,404 - app.main - INFO - Shutting down application...
2025-08-06 00:17:31,405 - app.main - INFO - Closing database connections...
2025-08-06 00:17:31,405 - app.db.session - INFO - Closing database connections...
2025-08-06 00:17:31,408 - app.db.session - INFO - Database connections closed
2025-08-06 00:17:31,408 - app.main - INFO - Database connections closed successfully
2025-08-06 00:17:38,613 - app.main - INFO - Starting application...
2025-08-06 00:17:38,614 - app.main - INFO - Initializing database manager...
2025-08-06 00:17:38,615 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:17:38,635 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:17:38,690 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:17:38,690 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:17:50,169 - app.main - INFO - Shutting down application...
2025-08-06 00:17:50,169 - app.main - INFO - Closing database connections...
2025-08-06 00:17:50,170 - app.db.session - INFO - Closing database connections...
2025-08-06 00:17:50,172 - app.db.session - INFO - Database connections closed
2025-08-06 00:17:50,173 - app.main - INFO - Database connections closed successfully
2025-08-06 00:17:57,568 - app.main - INFO - Starting application...
2025-08-06 00:17:57,568 - app.main - INFO - Initializing database manager...
2025-08-06 00:17:57,569 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:17:57,594 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:17:57,643 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:17:57,643 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:20:42,390 - app.main - INFO - Shutting down application...
2025-08-06 00:20:42,391 - app.main - INFO - Closing database connections...
2025-08-06 00:20:42,392 - app.db.session - INFO - Closing database connections...
2025-08-06 00:20:42,396 - app.db.session - INFO - Database connections closed
2025-08-06 00:20:42,396 - app.main - INFO - Database connections closed successfully
2025-08-06 00:20:49,640 - app.main - INFO - Starting application...
2025-08-06 00:20:49,641 - app.main - INFO - Initializing database manager...
2025-08-06 00:20:49,642 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:20:49,698 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:20:49,787 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:20:49,788 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:23:03,966 - app.main - INFO - Shutting down application...
2025-08-06 00:23:03,967 - app.main - INFO - Closing database connections...
2025-08-06 00:23:03,967 - app.db.session - INFO - Closing database connections...
2025-08-06 00:23:03,972 - app.db.session - INFO - Database connections closed
2025-08-06 00:23:03,972 - app.main - INFO - Database connections closed successfully
2025-08-06 00:23:12,500 - app.main - INFO - Starting application...
2025-08-06 00:23:12,500 - app.main - INFO - Initializing database manager...
2025-08-06 00:23:12,501 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:23:12,529 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:23:12,589 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:23:12,590 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:24:13,746 - app.main - INFO - Shutting down application...
2025-08-06 00:24:13,746 - app.main - INFO - Closing database connections...
2025-08-06 00:24:13,747 - app.db.session - INFO - Closing database connections...
2025-08-06 00:24:13,750 - app.db.session - INFO - Database connections closed
2025-08-06 00:24:13,750 - app.main - INFO - Database connections closed successfully
2025-08-06 00:24:20,778 - app.main - INFO - Starting application...
2025-08-06 00:24:20,779 - app.main - INFO - Initializing database manager...
2025-08-06 00:24:20,779 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:24:20,802 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:24:20,848 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:24:20,848 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:24:30,462 - app.main - INFO - Shutting down application...
2025-08-06 00:24:30,462 - app.main - INFO - Closing database connections...
2025-08-06 00:24:30,463 - app.db.session - INFO - Closing database connections...
2025-08-06 00:24:30,467 - app.db.session - INFO - Database connections closed
2025-08-06 00:24:30,468 - app.main - INFO - Database connections closed successfully
2025-08-06 00:24:36,798 - app.main - INFO - Starting application...
2025-08-06 00:24:36,798 - app.main - INFO - Initializing database manager...
2025-08-06 00:24:36,799 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:24:36,820 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:24:36,865 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:24:36,866 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:25:01,790 - app.main - INFO - Shutting down application...
2025-08-06 00:25:01,790 - app.main - INFO - Closing database connections...
2025-08-06 00:25:01,791 - app.db.session - INFO - Closing database connections...
2025-08-06 00:25:01,795 - app.db.session - INFO - Database connections closed
2025-08-06 00:25:01,795 - app.main - INFO - Database connections closed successfully
2025-08-06 00:25:09,261 - app.main - INFO - Starting application...
2025-08-06 00:25:09,262 - app.main - INFO - Initializing database manager...
2025-08-06 00:25:09,264 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:25:09,304 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:25:09,391 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:25:09,391 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:25:21,679 - app.main - INFO - Shutting down application...
2025-08-06 00:25:21,679 - app.main - INFO - Closing database connections...
2025-08-06 00:25:21,679 - app.db.session - INFO - Closing database connections...
2025-08-06 00:25:21,682 - app.db.session - INFO - Database connections closed
2025-08-06 00:25:21,683 - app.main - INFO - Database connections closed successfully
2025-08-06 00:25:28,605 - app.main - INFO - Starting application...
2025-08-06 00:25:28,606 - app.main - INFO - Initializing database manager...
2025-08-06 00:25:28,606 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:25:28,626 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:25:28,674 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:25:28,674 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:26:35,126 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-08-06 00:26:35,126 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-08-06 00:26:51,652 - app.main - INFO - Starting application...
2025-08-06 00:26:51,653 - app.main - INFO - Initializing database manager...
2025-08-06 00:26:51,654 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:26:51,681 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:26:51,734 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:26:51,735 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:26:59,765 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-06 00:27:00,184 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-06 00:27:00,185 - app.core.security - INFO - user_authentication completed in 0.49s
2025-08-06 00:27:00,186 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-06 00:27:00,194 - app.core.security - INFO - Access token created successfully
2025-08-06 00:27:00,195 - app.core.security - INFO - Refresh token created successfully
2025-08-06 00:27:00,195 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-06 00:27:00,196 - app.api.auth - INFO - user_login completed in 0.50s
2025-08-06 00:27:00,213 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:27:00,405 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:27:00,446 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:27:00,465 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 00:27:00,466 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-06 00:27:00,468 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 00:27:00,534 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 00:27:00,536 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-06 00:27:00,537 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 00:28:35,802 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 00:28:35,803 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-06 00:28:35,803 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-06 00:28:35,804 - app.api.nlp - INFO - nlp_parsing completed in 0.09s
2025-08-06 00:28:43,493 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:28:43,515 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 00:28:43,516 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-06 00:28:43,528 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-06 00:28:43,532 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-06 00:28:43,535 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-06 00:28:43,868 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-06 00:28:43,955 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-06 00:28:44,021 - app.api.itinerary - INFO - Itinerary 013ab5cd-70e1-4b0e-8a23-5b4ad9e7f7ab persisted successfully
2025-08-06 00:28:44,022 - app.api.itinerary - INFO - Successfully generated itinerary 013ab5cd-70e1-4b0e-8a23-5b4ad9e7f7ab for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-06 00:28:44,022 - app.api.itinerary - INFO - itinerary_generation completed in 0.53s
2025-08-06 00:28:48,783 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:28:48,834 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:37:26,521 - app.main - INFO - Shutting down application...
2025-08-06 00:37:26,521 - app.main - INFO - Closing database connections...
2025-08-06 00:37:26,522 - app.db.session - INFO - Closing database connections...
2025-08-06 00:37:26,535 - app.db.session - INFO - Database connections closed
2025-08-06 00:37:26,535 - app.main - INFO - Database connections closed successfully
2025-08-06 00:37:34,496 - app.main - INFO - Starting application...
2025-08-06 00:37:34,497 - app.main - INFO - Initializing database manager...
2025-08-06 00:37:34,498 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:37:34,525 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:37:34,571 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:37:34,572 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:38:22,621 - app.main - INFO - Shutting down application...
2025-08-06 00:38:22,621 - app.main - INFO - Closing database connections...
2025-08-06 00:38:22,622 - app.db.session - INFO - Closing database connections...
2025-08-06 00:38:22,625 - app.db.session - INFO - Database connections closed
2025-08-06 00:38:22,626 - app.main - INFO - Database connections closed successfully
2025-08-06 00:38:34,272 - app.main - INFO - Starting application...
2025-08-06 00:38:34,275 - app.main - INFO - Initializing database manager...
2025-08-06 00:38:34,276 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:38:34,344 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:38:34,440 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:38:34,441 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:38:45,903 - app.main - INFO - Shutting down application...
2025-08-06 00:38:45,903 - app.main - INFO - Closing database connections...
2025-08-06 00:38:45,904 - app.db.session - INFO - Closing database connections...
2025-08-06 00:38:45,908 - app.db.session - INFO - Database connections closed
2025-08-06 00:38:45,909 - app.main - INFO - Database connections closed successfully
2025-08-06 00:38:53,536 - app.main - INFO - Starting application...
2025-08-06 00:38:53,536 - app.main - INFO - Initializing database manager...
2025-08-06 00:38:53,537 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 00:38:53,561 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 00:38:53,610 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 00:38:53,611 - app.main - INFO - Database manager initialized successfully
2025-08-06 00:38:57,439 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:39:20,561 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-06 00:39:20,732 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-06 00:39:20,733 - app.core.security - INFO - user_authentication completed in 0.18s
2025-08-06 00:39:20,734 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-06 00:39:20,735 - app.core.security - INFO - Access token created successfully
2025-08-06 00:39:20,735 - app.core.security - INFO - Refresh token created successfully
2025-08-06 00:39:20,736 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-06 00:39:20,737 - app.api.auth - INFO - user_login completed in 0.18s
2025-08-06 00:39:20,790 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:39:20,946 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:39:20,971 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:39:20,992 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 00:39:20,993 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-06 00:39:20,994 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 00:39:20,998 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 00:39:20,999 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-06 00:39:21,000 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 00:40:36,444 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 00:40:36,445 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-06 00:40:36,445 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-06 00:40:36,446 - app.api.nlp - INFO - nlp_parsing completed in 0.06s
2025-08-06 00:40:46,603 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:40:46,624 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 00:40:46,624 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-06 00:40:46,631 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-06 00:40:46,635 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-06 00:40:46,638 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-06 00:40:46,680 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-06 00:40:46,681 - app.api.itinerary - INFO - Fetched activity rows: [(UUID('8093befe-c1dd-4252-8172-d163953015ee'), 48.8606, 2.3376, '09:00-18:00', Decimal('20'))]
2025-08-06 00:40:46,682 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-06 00:40:46,824 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-06 00:40:46,906 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-06 00:40:46,955 - app.api.itinerary - INFO - Itinerary b1370378-a44b-4fdd-8d12-64c3a5b418da persisted successfully
2025-08-06 00:40:46,955 - app.api.itinerary - INFO - Successfully generated itinerary b1370378-a44b-4fdd-8d12-64c3a5b418da for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-06 00:40:46,955 - app.api.itinerary - INFO - itinerary_generation completed in 0.35s
2025-08-06 00:40:49,142 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 00:40:49,186 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 01:57:21,701 - app.main - INFO - Shutting down application...
2025-08-06 01:57:21,704 - app.main - INFO - Closing database connections...
2025-08-06 01:57:21,705 - app.db.session - INFO - Closing database connections...
2025-08-06 01:57:21,802 - app.db.session - INFO - Database connections closed
2025-08-06 01:57:21,803 - app.main - INFO - Database connections closed successfully
2025-08-06 01:57:32,624 - app.main - INFO - Starting application...
2025-08-06 01:57:32,625 - app.main - INFO - Initializing database manager...
2025-08-06 01:57:32,626 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 01:57:32,666 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 01:57:32,738 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 01:57:32,739 - app.main - INFO - Database manager initialized successfully
2025-08-06 02:09:20,448 - app.main - INFO - Starting application...
2025-08-06 02:09:20,450 - app.main - INFO - Initializing database manager...
2025-08-06 02:09:20,451 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 02:09:20,486 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 02:09:20,565 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 02:09:20,566 - app.main - INFO - Database manager initialized successfully
2025-08-06 02:09:28,603 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-06 02:09:28,927 - app.core.security - WARNING - Authentication failed: invalid password for user - ttgi_
2025-08-06 02:09:28,928 - app.core.security - INFO - user_authentication completed in 0.40s
2025-08-06 02:09:28,928 - app.api.auth - WARNING - Failed login attempt for user: ttgi_
2025-08-06 02:09:28,929 - app.api.auth - INFO - user_login completed in 0.40s
2025-08-06 02:09:28,929 - app.db.session - ERROR - Unexpected session error: 401: Incorrect username or password
2025-08-06 02:09:39,972 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-06 02:09:39,972 - app.core.security - INFO - user_authentication completed in 0.26s
2025-08-06 02:09:39,973 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-06 02:09:39,985 - app.core.security - INFO - Access token created successfully
2025-08-06 02:09:39,985 - app.core.security - INFO - Refresh token created successfully
2025-08-06 02:09:39,986 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-06 02:09:39,986 - app.api.auth - INFO - user_login completed in 0.28s
2025-08-06 02:09:40,006 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:09:40,139 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:09:40,183 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:09:40,202 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 02:09:40,204 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-06 02:09:40,206 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 02:09:40,213 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 02:09:40,214 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-06 02:09:40,214 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 02:11:17,339 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 02:11:17,339 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-06 02:11:17,340 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-06 02:11:17,341 - app.api.nlp - INFO - nlp_parsing completed in 0.10s
2025-08-06 02:25:17,726 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:25:17,742 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:25:17,759 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 02:25:17,760 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-06 02:25:17,760 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 02:25:17,812 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 02:25:17,813 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-06 02:25:17,814 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 02:25:23,815 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:25:41,429 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-06 02:25:41,430 - app.core.security - INFO - user_authentication completed in 0.32s
2025-08-06 02:25:41,430 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-06 02:25:41,431 - app.core.security - INFO - Access token created successfully
2025-08-06 02:25:41,432 - app.core.security - INFO - Refresh token created successfully
2025-08-06 02:25:41,433 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-06 02:25:41,433 - app.api.auth - INFO - user_login completed in 0.32s
2025-08-06 02:25:41,483 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:25:42,073 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:25:42,105 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 02:25:42,105 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-06 02:25:42,106 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 02:25:42,114 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:25:42,131 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 02:25:42,133 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-06 02:25:42,135 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 02:28:00,618 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 02:28:00,618 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-06 02:28:00,619 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-06 02:28:00,619 - app.api.nlp - INFO - nlp_parsing completed in 0.03s
2025-08-06 02:40:30,194 - app.main - INFO - Shutting down application...
2025-08-06 02:40:30,195 - app.main - INFO - Closing database connections...
2025-08-06 02:40:30,195 - app.db.session - INFO - Closing database connections...
2025-08-06 02:40:30,203 - app.db.session - INFO - Database connections closed
2025-08-06 02:40:30,204 - app.main - INFO - Database connections closed successfully
2025-08-06 02:40:38,619 - app.main - INFO - Starting application...
2025-08-06 02:40:38,620 - app.main - INFO - Initializing database manager...
2025-08-06 02:40:38,642 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 02:40:38,723 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 02:40:38,787 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 02:40:38,787 - app.main - INFO - Database manager initialized successfully
2025-08-06 02:50:16,177 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:50:16,247 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 02:50:16,248 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-06 02:50:16,266 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-06 02:50:16,271 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-06 02:50:16,276 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-06 02:50:16,419 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-06 02:50:16,420 - app.api.itinerary - INFO - Fetched activity rows: [(UUID('8093befe-c1dd-4252-8172-d163953015ee'), 48.8606, 2.3376, '09:00-18:00', Decimal('20'))]
2025-08-06 02:50:16,422 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-06 02:50:16,729 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-06 02:50:16,816 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-06 02:50:16,896 - app.api.itinerary - INFO - Itinerary ec8fbcdc-b6ff-40df-9747-06741f73a57e persisted successfully
2025-08-06 02:50:16,896 - app.api.itinerary - INFO - Successfully generated itinerary ec8fbcdc-b6ff-40df-9747-06741f73a57e for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-06 02:50:16,897 - app.api.itinerary - INFO - itinerary_generation completed in 0.72s
2025-08-06 02:50:20,334 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:50:20,392 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:52:41,864 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 02:52:41,882 - app.db.session - ERROR - Unexpected session error: name 'delete_itinerary' is not defined
2025-08-06 02:52:41,884 - app.main - ERROR - Unhandled exception: name 'delete_itinerary' is not defined
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 713, in remove_itinerary
    await delete_itinerary(itinerary_id, session)
          ^^^^^^^^^^^^^^^^
NameError: name 'delete_itinerary' is not defined. Did you mean: 'create_itinerary'?
2025-08-06 02:54:43,032 - app.main - INFO - Shutting down application...
2025-08-06 02:54:43,032 - app.main - INFO - Closing database connections...
2025-08-06 02:54:43,033 - app.db.session - INFO - Closing database connections...
2025-08-06 02:54:43,047 - app.db.session - INFO - Database connections closed
2025-08-06 02:54:43,047 - app.main - INFO - Database connections closed successfully
2025-08-06 02:54:50,050 - app.main - INFO - Starting application...
2025-08-06 02:54:50,051 - app.main - INFO - Initializing database manager...
2025-08-06 02:54:50,051 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 02:54:50,077 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 02:54:50,127 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 02:54:50,127 - app.main - INFO - Database manager initialized successfully
2025-08-06 02:55:14,938 - app.main - INFO - Shutting down application...
2025-08-06 02:55:14,938 - app.main - INFO - Closing database connections...
2025-08-06 02:55:14,939 - app.db.session - INFO - Closing database connections...
2025-08-06 02:55:14,943 - app.db.session - INFO - Database connections closed
2025-08-06 02:55:14,944 - app.main - INFO - Database connections closed successfully
2025-08-06 02:55:21,767 - app.main - INFO - Starting application...
2025-08-06 02:55:21,768 - app.main - INFO - Initializing database manager...
2025-08-06 02:55:21,768 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 02:55:21,792 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 02:55:21,839 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 02:55:21,839 - app.main - INFO - Database manager initialized successfully
2025-08-06 02:55:58,004 - app.main - INFO - Shutting down application...
2025-08-06 02:55:58,005 - app.main - INFO - Closing database connections...
2025-08-06 02:55:58,005 - app.db.session - INFO - Closing database connections...
2025-08-06 02:55:58,010 - app.db.session - INFO - Database connections closed
2025-08-06 02:55:58,010 - app.main - INFO - Database connections closed successfully
2025-08-06 02:56:04,438 - app.main - INFO - Starting application...
2025-08-06 02:56:04,439 - app.main - INFO - Initializing database manager...
2025-08-06 02:56:04,439 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 02:56:04,463 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 02:56:04,508 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 02:56:04,508 - app.main - INFO - Database manager initialized successfully
2025-08-06 02:56:14,960 - app.main - INFO - Shutting down application...
2025-08-06 02:56:14,960 - app.main - INFO - Closing database connections...
2025-08-06 02:56:14,960 - app.db.session - INFO - Closing database connections...
2025-08-06 02:56:14,965 - app.db.session - INFO - Database connections closed
2025-08-06 02:56:14,966 - app.main - INFO - Database connections closed successfully
2025-08-06 02:56:21,789 - app.main - INFO - Starting application...
2025-08-06 02:56:21,789 - app.main - INFO - Initializing database manager...
2025-08-06 02:56:21,790 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 02:56:21,815 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 02:56:21,864 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 02:56:21,864 - app.main - INFO - Database manager initialized successfully
2025-08-06 02:58:39,484 - app.main - INFO - Shutting down application...
2025-08-06 02:58:39,485 - app.main - INFO - Closing database connections...
2025-08-06 02:58:39,485 - app.db.session - INFO - Closing database connections...
2025-08-06 02:58:39,489 - app.db.session - INFO - Database connections closed
2025-08-06 02:58:39,490 - app.main - INFO - Database connections closed successfully
2025-08-06 02:58:46,328 - app.main - INFO - Starting application...
2025-08-06 02:58:46,328 - app.main - INFO - Initializing database manager...
2025-08-06 02:58:46,329 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 02:58:46,349 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 02:58:46,402 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 02:58:46,403 - app.main - INFO - Database manager initialized successfully
2025-08-06 03:01:58,776 - app.main - INFO - Shutting down application...
2025-08-06 03:01:58,777 - app.main - INFO - Closing database connections...
2025-08-06 03:01:58,777 - app.db.session - INFO - Closing database connections...
2025-08-06 03:01:58,783 - app.db.session - INFO - Database connections closed
2025-08-06 03:01:58,784 - app.main - INFO - Database connections closed successfully
2025-08-06 03:02:07,661 - app.main - INFO - Starting application...
2025-08-06 03:02:07,662 - app.main - INFO - Initializing database manager...
2025-08-06 03:02:07,663 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 03:02:07,683 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 03:02:07,730 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 03:02:07,730 - app.main - INFO - Database manager initialized successfully
2025-08-06 03:15:56,066 - app.main - INFO - Shutting down application...
2025-08-06 03:15:56,067 - app.main - INFO - Closing database connections...
2025-08-06 03:15:56,067 - app.db.session - INFO - Closing database connections...
2025-08-06 03:15:56,074 - app.db.session - INFO - Database connections closed
2025-08-06 03:15:56,074 - app.main - INFO - Database connections closed successfully
2025-08-06 03:16:05,207 - app.main - INFO - Starting application...
2025-08-06 03:16:05,208 - app.main - INFO - Initializing database manager...
2025-08-06 03:16:05,209 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 03:16:05,244 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 03:16:05,294 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 03:16:05,294 - app.main - INFO - Database manager initialized successfully
2025-08-06 03:30:19,915 - app.main - INFO - Starting application...
2025-08-06 03:30:19,917 - app.main - INFO - Initializing database manager...
2025-08-06 03:30:19,918 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 03:30:19,966 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 03:30:20,085 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 03:30:20,086 - app.main - INFO - Database manager initialized successfully
2025-08-06 03:33:25,123 - app.main - INFO - Shutting down application...
2025-08-06 03:33:25,123 - app.main - INFO - Closing database connections...
2025-08-06 03:33:25,124 - app.db.session - INFO - Closing database connections...
2025-08-06 03:33:25,129 - app.db.session - INFO - Database connections closed
2025-08-06 03:33:25,130 - app.main - INFO - Database connections closed successfully
2025-08-06 03:33:33,558 - app.main - INFO - Starting application...
2025-08-06 03:33:33,558 - app.main - INFO - Initializing database manager...
2025-08-06 03:33:33,559 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 03:33:33,608 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 03:33:33,661 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 03:33:33,661 - app.main - INFO - Database manager initialized successfully
2025-08-06 03:34:23,785 - app.main - INFO - Shutting down application...
2025-08-06 03:34:23,786 - app.main - INFO - Closing database connections...
2025-08-06 03:34:23,786 - app.db.session - INFO - Closing database connections...
2025-08-06 03:34:23,792 - app.db.session - INFO - Database connections closed
2025-08-06 03:34:23,793 - app.main - INFO - Database connections closed successfully
2025-08-06 03:34:31,368 - app.main - INFO - Starting application...
2025-08-06 03:34:31,371 - app.main - INFO - Initializing database manager...
2025-08-06 03:34:31,373 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 03:34:31,422 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 03:34:31,498 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 03:34:31,498 - app.main - INFO - Database manager initialized successfully
2025-08-06 03:47:17,825 - app.main - INFO - Shutting down application...
2025-08-06 03:47:17,826 - app.main - INFO - Closing database connections...
2025-08-06 03:47:17,826 - app.db.session - INFO - Closing database connections...
2025-08-06 03:47:17,831 - app.db.session - INFO - Database connections closed
2025-08-06 03:47:17,832 - app.main - INFO - Database connections closed successfully
2025-08-06 03:47:25,492 - app.main - INFO - Starting application...
2025-08-06 03:47:25,493 - app.main - INFO - Initializing database manager...
2025-08-06 03:47:25,493 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 03:47:25,522 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 03:47:25,574 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 03:47:25,574 - app.main - INFO - Database manager initialized successfully
2025-08-06 03:48:03,482 - app.main - INFO - Shutting down application...
2025-08-06 03:48:03,482 - app.main - INFO - Closing database connections...
2025-08-06 03:48:03,483 - app.db.session - INFO - Closing database connections...
2025-08-06 03:48:03,487 - app.db.session - INFO - Database connections closed
2025-08-06 03:48:03,488 - app.main - INFO - Database connections closed successfully
2025-08-06 03:48:10,254 - app.main - INFO - Starting application...
2025-08-06 03:48:10,254 - app.main - INFO - Initializing database manager...
2025-08-06 03:48:10,255 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 03:48:10,278 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 03:48:10,327 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 03:48:10,328 - app.main - INFO - Database manager initialized successfully
2025-08-06 04:04:48,645 - app.main - INFO - Shutting down application...
2025-08-06 04:04:48,645 - app.main - INFO - Closing database connections...
2025-08-06 04:04:48,645 - app.db.session - INFO - Closing database connections...
2025-08-06 04:04:48,649 - app.db.session - INFO - Database connections closed
2025-08-06 04:04:48,650 - app.main - INFO - Database connections closed successfully
2025-08-06 04:04:56,264 - app.main - INFO - Starting application...
2025-08-06 04:04:56,265 - app.main - INFO - Initializing database manager...
2025-08-06 04:04:56,265 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 04:04:56,294 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 04:04:56,358 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 04:04:56,358 - app.main - INFO - Database manager initialized successfully
2025-08-06 04:05:07,656 - app.main - INFO - Shutting down application...
2025-08-06 04:05:07,656 - app.main - INFO - Closing database connections...
2025-08-06 04:05:07,657 - app.db.session - INFO - Closing database connections...
2025-08-06 04:05:07,662 - app.db.session - INFO - Database connections closed
2025-08-06 04:05:07,663 - app.main - INFO - Database connections closed successfully
2025-08-06 04:05:15,774 - app.main - INFO - Starting application...
2025-08-06 04:05:15,774 - app.main - INFO - Initializing database manager...
2025-08-06 04:05:15,775 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 04:05:15,799 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 04:05:15,848 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 04:05:15,848 - app.main - INFO - Database manager initialized successfully
2025-08-06 04:09:23,912 - app.main - INFO - Shutting down application...
2025-08-06 04:09:23,913 - app.main - INFO - Closing database connections...
2025-08-06 04:09:23,913 - app.db.session - INFO - Closing database connections...
2025-08-06 04:09:23,918 - app.db.session - INFO - Database connections closed
2025-08-06 04:09:23,919 - app.main - INFO - Database connections closed successfully
2025-08-06 04:09:31,054 - app.main - INFO - Starting application...
2025-08-06 04:09:31,055 - app.main - INFO - Initializing database manager...
2025-08-06 04:09:31,056 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 04:09:31,079 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 04:09:31,137 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 04:09:31,137 - app.main - INFO - Database manager initialized successfully
2025-08-06 04:09:59,301 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-08-06 04:09:59,302 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-08-06 04:10:24,282 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-06 04:10:24,625 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-06 04:10:24,625 - app.core.security - INFO - user_authentication completed in 0.44s
2025-08-06 04:10:24,626 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-06 04:10:24,629 - app.core.security - INFO - Access token created successfully
2025-08-06 04:10:24,629 - app.core.security - INFO - Refresh token created successfully
2025-08-06 04:10:24,630 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-06 04:10:24,630 - app.api.auth - INFO - user_login completed in 0.45s
2025-08-06 04:10:24,651 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:10:25,376 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:10:25,422 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:10:25,453 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 04:10:25,454 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-06 04:10:25,455 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 04:10:25,460 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 04:10:25,461 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-06 04:10:25,461 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 04:10:45,076 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 04:10:45,077 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-06 04:10:45,077 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-06 04:10:45,078 - app.api.nlp - INFO - nlp_parsing completed in 0.12s
2025-08-06 04:10:50,730 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:10:50,752 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 04:10:50,752 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-06 04:10:50,771 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-06 04:10:50,774 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-06 04:10:50,780 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-06 04:10:50,925 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-06 04:10:50,925 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-06 04:10:50,926 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=20000
2025-08-06 04:10:50,928 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-06 04:10:50,929 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-06 04:10:51,266 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-06 04:10:51,355 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-06 04:10:51,435 - app.api.itinerary - INFO - Itinerary 6f64560d-184a-43a9-8fcd-f72ece919710 persisted successfully
2025-08-06 04:10:51,436 - app.api.itinerary - INFO - Successfully generated itinerary 6f64560d-184a-43a9-8fcd-f72ece919710 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-06 04:10:51,436 - app.api.itinerary - INFO - itinerary_generation completed in 0.70s
2025-08-06 04:10:53,239 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:10:53,275 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:13:59,062 - app.main - INFO - Shutting down application...
2025-08-06 04:13:59,062 - app.main - INFO - Closing database connections...
2025-08-06 04:13:59,063 - app.db.session - INFO - Closing database connections...
2025-08-06 04:13:59,080 - app.db.session - INFO - Database connections closed
2025-08-06 04:13:59,081 - app.main - INFO - Database connections closed successfully
2025-08-06 04:14:06,367 - app.main - INFO - Starting application...
2025-08-06 04:14:06,367 - app.main - INFO - Initializing database manager...
2025-08-06 04:14:06,368 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-06 04:14:06,400 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-06 04:14:06,495 - app.db.session - INFO - Database manager initialized successfully
2025-08-06 04:14:06,495 - app.main - INFO - Database manager initialized successfully
2025-08-06 04:14:06,869 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:14:06,901 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 04:14:06,902 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-06 04:14:06,903 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 04:14:06,914 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:14:06,929 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 04:14:06,930 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-06 04:14:06,931 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 04:14:20,800 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 04:14:20,801 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-06 04:14:20,801 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-06 04:14:20,802 - app.api.nlp - INFO - nlp_parsing completed in 0.06s
2025-08-06 04:14:24,168 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:14:24,195 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-06 04:14:24,196 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-06 04:14:24,202 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-06 04:14:24,206 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-06 04:14:24,209 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-06 04:14:24,218 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-06 04:14:24,254 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-06 04:14:24,255 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-06 04:14:24,257 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=20000
2025-08-06 04:14:24,257 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-06 04:14:24,258 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-06 04:14:24,380 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-06 04:14:24,380 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-06 04:14:24,380 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-06 04:14:24,384 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-06 04:14:24,385 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-06 04:14:24,385 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=50000
2025-08-06 04:14:24,386 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-06 04:14:24,386 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-06 04:14:24,473 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-06 04:14:24,474 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-06 04:14:24,474 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-06 04:14:24,479 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-06 04:14:24,480 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-06 04:14:24,481 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=100000
2025-08-06 04:14:24,481 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-06 04:14:24,481 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-06 04:14:24,553 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-06 04:14:24,554 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-06 04:14:24,649 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-06 04:14:24,702 - app.api.itinerary - INFO - Itinerary 0b0e8c71-652a-4de8-b488-bb7ff5c4da07 persisted successfully
2025-08-06 04:14:24,703 - app.api.itinerary - INFO - Successfully generated itinerary 0b0e8c71-652a-4de8-b488-bb7ff5c4da07 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-06 04:14:24,703 - app.api.itinerary - INFO - itinerary_generation completed in 0.53s
2025-08-06 04:14:26,358 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:14:26,410 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:17:10,531 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:17:10,549 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 04:17:10,549 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-06 04:17:10,550 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 04:17:10,556 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:17:10,571 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-06 04:17:10,572 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-06 04:17:10,572 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-06 04:17:22,888 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-06 04:17:22,888 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-06 04:17:22,889 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-06 04:17:22,889 - app.api.nlp - INFO - nlp_parsing completed in 1.92s
2025-08-06 04:17:25,123 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:17:25,242 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-06 04:17:25,243 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-06 04:17:25,249 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-06 04:17:25,253 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-06 04:17:25,257 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-06 04:17:25,279 - app.api.itinerary - INFO - Found 0 flight options
2025-08-06 04:17:25,282 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-06 04:17:25,289 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-08-06 04:17:25,290 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-06 04:17:25,292 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=20000
2025-08-06 04:17:25,292 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, lat=40.759, lon=-73.9845, price=120
2025-08-06 04:17:25,293 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-06 04:17:25,294 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-06 04:17:25,295 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-06 04:17:25,296 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, lat=40.745914, lon=-73.8467247, price=None
2025-08-06 04:17:25,297 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-06 04:17:25,298 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-06 04:17:25,298 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-06 04:17:25,299 - app.api.itinerary - INFO - Adding activity POI: id=47d2b428-dc0c-440d-8a9d-9778f30a4e47, lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-06 04:17:25,300 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-06 04:17:25,300 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-06 04:17:25,301 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-06 04:17:25,301 - app.api.itinerary - INFO - Adding activity POI: id=cb136867-635d-4993-8104-1c4c02ac5343, lat=40.745914, lon=-73.8467247, price=None
2025-08-06 04:17:25,301 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-06 04:17:25,302 - app.api.itinerary - INFO - Adding activity POI: id=e60cb649-146d-41a3-a20c-62ac68865086, lat=40.779349, lon=-73.973908, price=None
2025-08-06 04:17:25,302 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-06 04:17:25,302 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-06 04:17:25,303 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-06 04:17:25,303 - app.api.itinerary - INFO - Adding activity POI: id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62, lat=40.745914, lon=-73.846725, price=None
2025-08-06 04:17:25,304 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-08-06 04:17:25,304 - app.api.itinerary - INFO - Activities after budget filter: 9 (before: 11)
2025-08-06 04:17:25,395 - app.api.itinerary - INFO - Built POI list with 40 items
2025-08-06 04:17:25,396 - app.api.itinerary - INFO - build_poi_list found 9 activities with radius_m=20000
2025-08-06 04:17:25,547 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-06 04:17:25,588 - app.api.itinerary - INFO - Itinerary e1a18b10-5b49-4516-8b85-24ee73f31c02 persisted successfully
2025-08-06 04:17:25,589 - app.api.itinerary - INFO - Successfully generated itinerary e1a18b10-5b49-4516-8b85-24ee73f31c02 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-06 04:17:25,589 - app.api.itinerary - INFO - itinerary_generation completed in 0.47s
2025-08-06 04:17:27,205 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-06 04:17:27,238 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:01:38,053 - app.main - INFO - Shutting down application...
2025-08-07 23:01:38,060 - app.main - INFO - Closing database connections...
2025-08-07 23:01:38,066 - app.db.session - INFO - Closing database connections...
2025-08-07 23:01:38,433 - app.db.session - INFO - Database connections closed
2025-08-07 23:01:38,437 - app.main - INFO - Database connections closed successfully
2025-08-07 23:01:50,456 - app.main - INFO - Starting application...
2025-08-07 23:01:50,457 - app.main - INFO - Initializing database manager...
2025-08-07 23:01:50,459 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-07 23:01:50,575 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-07 23:01:51,001 - app.db.session - INFO - Database manager initialized successfully
2025-08-07 23:01:51,002 - app.main - INFO - Database manager initialized successfully
2025-08-07 23:52:18,277 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-08-07 23:52:18,303 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-08-07 23:52:31,662 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-07 23:52:32,067 - app.core.security - WARNING - Authentication failed: invalid password for user - ttgi_
2025-08-07 23:52:32,068 - app.core.security - INFO - user_authentication completed in 1.25s
2025-08-07 23:52:32,069 - app.api.auth - WARNING - Failed login attempt for user: ttgi_
2025-08-07 23:52:32,071 - app.api.auth - INFO - user_login completed in 1.25s
2025-08-07 23:52:32,072 - app.db.session - ERROR - Unexpected session error: 401: Incorrect username or password
2025-08-07 23:52:51,851 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-07 23:52:51,851 - app.core.security - INFO - user_authentication completed in 0.35s
2025-08-07 23:52:51,853 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-07 23:52:51,858 - app.core.security - INFO - Access token created successfully
2025-08-07 23:52:51,860 - app.core.security - INFO - Refresh token created successfully
2025-08-07 23:52:51,861 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-07 23:52:51,862 - app.api.auth - INFO - user_login completed in 0.36s
2025-08-07 23:52:51,908 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:52:52,219 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:52:52,303 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:52:52,679 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-07 23:52:52,680 - app.api.recommend - INFO - destination_recommendations completed in 0.13s
2025-08-07 23:52:52,681 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-07 23:52:52,695 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-07 23:52:52,695 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-07 23:52:52,696 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-07 23:53:12,929 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-07 23:53:12,930 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-07 23:53:12,931 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-07 23:53:12,939 - app.api.nlp - INFO - nlp_parsing completed in 0.70s
2025-08-07 23:53:17,962 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:53:17,989 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-07 23:53:17,990 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-07 23:53:18,014 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-07 23:53:18,018 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-07 23:53:18,035 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-07 23:53:18,129 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-07 23:53:18,318 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-07 23:53:18,318 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-07 23:53:18,323 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=20000
2025-08-07 23:53:18,325 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-07 23:53:18,326 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-07 23:53:18,701 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-07 23:53:18,702 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-07 23:53:18,702 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-07 23:53:18,709 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-07 23:53:18,710 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-07 23:53:18,711 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=50000
2025-08-07 23:53:18,711 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-07 23:53:18,712 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-07 23:53:18,805 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-07 23:53:18,806 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-07 23:53:18,807 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-07 23:53:18,827 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-07 23:53:18,828 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-07 23:53:18,831 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=100000
2025-08-07 23:53:18,831 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-07 23:53:18,832 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-07 23:53:18,926 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-07 23:53:18,928 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-07 23:53:19,067 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-07 23:53:19,068 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], [], []]
2025-08-07 23:53:19,207 - app.api.itinerary - INFO - Itinerary b724e12d-4d7f-4156-a889-a0ca4c5c6933 persisted successfully
2025-08-07 23:53:19,208 - app.api.itinerary - INFO - Successfully generated itinerary b724e12d-4d7f-4156-a889-a0ca4c5c6933 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-07 23:53:19,208 - app.api.itinerary - INFO - itinerary_generation completed in 1.24s
2025-08-07 23:53:21,724 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:53:21,772 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:53:59,819 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-07 23:53:59,820 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-07 23:53:59,820 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-07 23:53:59,820 - app.api.nlp - INFO - nlp_parsing completed in 0.03s
2025-08-07 23:54:05,393 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:54:05,417 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-07 23:54:05,418 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-07 23:54:05,420 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-07 23:54:05,422 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-07 23:54:05,427 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-07 23:54:05,437 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-07 23:54:05,448 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', 'e60cb649-146d-41a3-a20c-62ac68865086', '484755be-3e2b-4389-bd05-0a7081d029c7', 'f92573fd-c9c2-4574-9365-a19f57af4a88', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c']
2025-08-07 23:54:05,449 - app.api.itinerary - INFO - Fetched 8 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('484755be-3e2b-4389-bd05-0a7081d029c7'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-07 23:54:05,450 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=20000
2025-08-07 23:54:05,450 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, lat=40.759, lon=-73.9845, price=120
2025-08-07 23:54:05,451 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-07 23:54:05,451 - app.api.itinerary - INFO - Adding activity POI: id=484755be-3e2b-4389-bd05-0a7081d029c7, lat=40.8622871, lon=-73.8773946, price=None
2025-08-07 23:54:05,452 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-07 23:54:05,452 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-07 23:54:05,453 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-07 23:54:05,453 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, lat=40.745914, lon=-73.8467247, price=None
2025-08-07 23:54:05,453 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-07 23:54:05,454 - app.api.itinerary - INFO - Adding activity POI: id=47d2b428-dc0c-440d-8a9d-9778f30a4e47, lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-07 23:54:05,454 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-07 23:54:05,454 - app.api.itinerary - INFO - Adding activity POI: id=cb136867-635d-4993-8104-1c4c02ac5343, lat=40.745914, lon=-73.8467247, price=None
2025-08-07 23:54:05,455 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-07 23:54:05,455 - app.api.itinerary - INFO - Adding activity POI: id=e60cb649-146d-41a3-a20c-62ac68865086, lat=40.779349, lon=-73.973908, price=None
2025-08-07 23:54:05,456 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-07 23:54:05,456 - app.api.itinerary - INFO - Adding activity POI: id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62, lat=40.745914, lon=-73.846725, price=None
2025-08-07 23:54:05,457 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 100.0
2025-08-07 23:54:05,457 - app.api.itinerary - INFO - Activities after budget filter: 7 (before: 9)
2025-08-07 23:54:05,538 - app.api.itinerary - INFO - Built POI list with 38 items
2025-08-07 23:54:05,539 - app.api.itinerary - INFO - build_poi_list found 7 activities with radius_m=20000
2025-08-07 23:54:05,685 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-07 23:54:05,686 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('1dbddc57-3a40-468d-b7fe-8c0b75e8570e'), latitude=40.712728, longitude=-74.006015, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('278a3d0a-cbfb-4efd-bcf3-bd7c663c3bbf'), latitude=40.7075293, longitude=-74.00618779999999, price=Decimal('191'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('4a21370b-b748-4a4e-9a65-79a5931c0693'), latitude=40.7075293, longitude=-74.00618779999999, price=Decimal('227'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('45053415-c5ce-424d-819d-d7acf47ef483'), latitude=40.7056552, longitude=-74.0156299, price=Decimal('170'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation')], [], [], []]
2025-08-07 23:54:05,719 - app.api.itinerary - INFO - Itinerary b2d79df9-071d-4fbe-8521-5ce890f889e8 persisted successfully
2025-08-07 23:54:05,720 - app.api.itinerary - INFO - Successfully generated itinerary b2d79df9-071d-4fbe-8521-5ce890f889e8 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-07 23:54:05,721 - app.api.itinerary - INFO - itinerary_generation completed in 0.33s
2025-08-07 23:54:07,404 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:54:07,449 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:56:30,367 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-07 23:56:30,368 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-07 23:56:30,368 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-07 23:56:30,369 - app.api.nlp - INFO - nlp_parsing completed in 0.02s
2025-08-07 23:56:36,348 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:56:36,370 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-07 23:56:36,371 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-07 23:56:36,373 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-07 23:56:36,375 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-07 23:56:36,377 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-07 23:56:36,384 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-07 23:56:36,388 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-07 23:56:36,388 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-07 23:56:36,389 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=20000
2025-08-07 23:56:36,389 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-07 23:56:36,389 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-07 23:56:36,460 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-07 23:56:36,460 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-07 23:56:36,461 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-07 23:56:36,466 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-07 23:56:36,467 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-07 23:56:36,468 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=50000
2025-08-07 23:56:36,468 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-07 23:56:36,468 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-07 23:56:36,526 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-07 23:56:36,527 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-07 23:56:36,527 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-07 23:56:36,532 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-07 23:56:36,533 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-07 23:56:36,533 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=100000
2025-08-07 23:56:36,534 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-07 23:56:36,534 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-07 23:56:36,605 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-07 23:56:36,606 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-07 23:56:36,713 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-07 23:56:36,714 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], [], []]
2025-08-07 23:56:36,739 - app.api.itinerary - INFO - Itinerary 5d214cbd-4a60-4a38-ac29-7ec381fab254 persisted successfully
2025-08-07 23:56:36,739 - app.api.itinerary - INFO - Successfully generated itinerary 5d214cbd-4a60-4a38-ac29-7ec381fab254 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-07 23:56:36,740 - app.api.itinerary - INFO - itinerary_generation completed in 0.39s
2025-08-07 23:56:38,974 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-07 23:56:39,011 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:13:51,164 - app.main - INFO - Shutting down application...
2025-08-08 00:13:51,165 - app.main - INFO - Closing database connections...
2025-08-08 00:13:51,166 - app.db.session - INFO - Closing database connections...
2025-08-08 00:13:51,218 - app.db.session - INFO - Database connections closed
2025-08-08 00:13:51,219 - app.main - INFO - Database connections closed successfully
2025-08-08 00:14:03,164 - app.main - INFO - Starting application...
2025-08-08 00:14:03,165 - app.main - INFO - Initializing database manager...
2025-08-08 00:14:03,165 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 00:14:03,211 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 00:14:03,279 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 00:14:03,280 - app.main - INFO - Database manager initialized successfully
2025-08-08 00:14:28,585 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:14:43,097 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-08 00:14:43,418 - app.core.security - WARNING - Authentication failed: invalid password for user - ttgi_
2025-08-08 00:14:43,419 - app.core.security - INFO - user_authentication completed in 0.33s
2025-08-08 00:14:43,419 - app.api.auth - WARNING - Failed login attempt for user: ttgi_
2025-08-08 00:14:43,420 - app.api.auth - INFO - user_login completed in 0.33s
2025-08-08 00:14:43,420 - app.db.session - ERROR - Unexpected session error: 401: Incorrect username or password
2025-08-08 00:15:03,142 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-08 00:15:03,142 - app.core.security - INFO - user_authentication completed in 0.28s
2025-08-08 00:15:03,144 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-08 00:15:03,146 - app.core.security - INFO - Access token created successfully
2025-08-08 00:15:03,147 - app.core.security - INFO - Refresh token created successfully
2025-08-08 00:15:03,147 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-08 00:15:03,147 - app.api.auth - INFO - user_login completed in 0.29s
2025-08-08 00:15:03,157 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:15:03,338 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:15:03,378 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:15:03,396 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 00:15:03,397 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-08 00:15:03,398 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 00:15:03,503 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 00:15:03,504 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 00:15:03,505 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 00:15:14,795 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 00:15:14,795 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-08 00:15:14,796 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-08 00:15:14,796 - app.api.nlp - INFO - nlp_parsing completed in 0.07s
2025-08-08 00:15:18,221 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:15:18,244 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 00:15:18,244 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 00:15:18,251 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 00:15:18,253 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 00:15:18,258 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 00:15:18,265 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 00:15:18,333 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 00:15:18,333 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 00:15:18,334 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=20000
2025-08-08 00:15:18,335 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 00:15:18,335 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 00:15:18,554 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 00:15:18,554 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-08 00:15:18,555 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-08 00:15:18,560 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 00:15:18,560 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 00:15:18,561 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=50000
2025-08-08 00:15:18,562 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 00:15:18,562 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 00:15:18,635 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 00:15:18,636 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-08 00:15:18,636 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-08 00:15:18,640 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 00:15:18,641 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 00:15:18,641 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=100000
2025-08-08 00:15:18,642 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 00:15:18,642 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 00:15:18,715 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 00:15:18,716 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-08 00:15:18,805 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-08 00:15:18,805 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], [], []]
2025-08-08 00:15:18,868 - app.api.itinerary - INFO - Itinerary 7a1cb9db-0070-48ec-af22-99411f23b6cd persisted successfully
2025-08-08 00:15:18,869 - app.api.itinerary - INFO - Successfully generated itinerary 7a1cb9db-0070-48ec-af22-99411f23b6cd for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-08 00:15:18,869 - app.api.itinerary - INFO - itinerary_generation completed in 0.65s
2025-08-08 00:15:21,112 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:15:21,150 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:18:37,324 - app.main - INFO - Shutting down application...
2025-08-08 00:18:37,325 - app.main - INFO - Closing database connections...
2025-08-08 00:18:37,325 - app.db.session - INFO - Closing database connections...
2025-08-08 00:18:37,335 - app.db.session - INFO - Database connections closed
2025-08-08 00:18:37,336 - app.main - INFO - Database connections closed successfully
2025-08-08 00:18:44,683 - app.main - INFO - Starting application...
2025-08-08 00:18:44,684 - app.main - INFO - Initializing database manager...
2025-08-08 00:18:44,684 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 00:18:44,715 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 00:18:44,786 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 00:18:44,787 - app.main - INFO - Database manager initialized successfully
2025-08-08 00:19:42,913 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 00:19:42,914 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-08 00:19:42,914 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-08 00:19:42,915 - app.api.nlp - INFO - nlp_parsing completed in 0.07s
2025-08-08 00:19:45,276 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:19:45,303 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 00:19:45,304 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 00:19:45,309 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 00:19:45,314 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 00:19:45,317 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 00:19:45,323 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 00:19:45,359 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 00:19:45,359 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 00:19:45,360 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=20000
2025-08-08 00:19:45,360 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 00:19:45,361 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 00:19:45,480 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 00:19:45,481 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-08 00:19:45,481 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-08 00:19:45,485 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 00:19:45,486 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 00:19:45,486 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=50000
2025-08-08 00:19:45,487 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 00:19:45,487 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 00:19:45,557 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 00:19:45,558 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-08 00:19:45,558 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-08 00:19:45,564 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 00:19:45,564 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 00:19:45,565 - app.api.itinerary - INFO - Activity location filter: center_pt=CAST(ST_SetSRID(ST_MakePoint(:ST_MakePoint_1, :ST_MakePoint_2), :ST_SetSRID_1) AS geography(GEOMETRY,-1)), radius_m=100000
2025-08-08 00:19:45,565 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 00:19:45,566 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 00:19:45,632 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 00:19:45,633 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-08 00:19:45,725 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-08 00:19:45,725 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], [], []]
2025-08-08 00:19:45,786 - app.api.itinerary - INFO - Itinerary aead2635-b305-4c4f-a723-7a5aa0f740de persisted successfully
2025-08-08 00:19:45,787 - app.api.itinerary - INFO - Successfully generated itinerary aead2635-b305-4c4f-a723-7a5aa0f740de for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-08 00:19:45,787 - app.api.itinerary - INFO - itinerary_generation completed in 0.51s
2025-08-08 00:19:47,645 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:19:47,683 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: (48.853495, 2.348391) (expected str, got tuple)
2025-08-08 00:19:47,684 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
  File "asyncpg/pgproto/./codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
TypeError: expected str, got tuple

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 545, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 185, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $2: (48.853495, 2.348391) (expected str, got tuple)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: (48.853495, 2.348391) (expected str, got tuple)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 371, in build_poi_list
    dest_rows = (await self.session.execute(dest_stmt)).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: (48.853495, 2.348391) (expected str, got tuple)
[SQL: SELECT destinations.id, destinations.latitude, destinations.longitude 
FROM destinations 
WHERE destinations.id IN ($4::UUID) AND ST_DWithin(CAST(ST_SetSRID(ST_MakePoint(destinations.longitude, destinations.latitude), $1::INTEGER) AS geography(GEOMETRY,-1)), $2, $3::INTEGER)]
[parameters: (4326, (48.853495, 2.348391), 20000, UUID('64160910-332a-4243-8e36-b0d3dd55c629'))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 00:19:47,718 - app.db.session - ERROR - Unexpected session error: 500: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: (48.853495, 2.348391) (expected str, got tuple)
[SQL: SELECT destinations.id, destinations.latitude, destinations.longitude 
FROM destinations 
WHERE destinations.id IN ($4::UUID) AND ST_DWithin(CAST(ST_SetSRID(ST_MakePoint(destinations.longitude, destinations.latitude), $1::INTEGER) AS geography(GEOMETRY,-1)), $2, $3::INTEGER)]
[parameters: (4326, (48.853495, 2.348391), 20000, UUID('64160910-332a-4243-8e36-b0d3dd55c629'))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 00:19:47,727 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 00:19:47,751 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: (48.853495, 2.348391) (expected str, got tuple)
2025-08-08 00:19:47,752 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "asyncpg/protocol/prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
  File "asyncpg/protocol/codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
  File "asyncpg/protocol/codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
  File "asyncpg/pgproto/./codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
  File "asyncpg/pgproto/./codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
TypeError: expected str, got tuple

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 545, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
        lambda protocol: protocol.bind_execute(
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
            self._state, args, '', limit, True, timeout))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 185, in bind_execute
  File "asyncpg/protocol/prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
asyncpg.exceptions.DataError: invalid input for query argument $2: (48.853495, 2.348391) (expected str, got tuple)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: (48.853495, 2.348391) (expected str, got tuple)

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 371, in build_poi_list
    dest_rows = (await self.session.execute(dest_stmt)).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: (48.853495, 2.348391) (expected str, got tuple)
[SQL: SELECT destinations.id, destinations.latitude, destinations.longitude 
FROM destinations 
WHERE destinations.id IN ($4::UUID) AND ST_DWithin(CAST(ST_SetSRID(ST_MakePoint(destinations.longitude, destinations.latitude), $1::INTEGER) AS geography(GEOMETRY,-1)), $2, $3::INTEGER)]
[parameters: (4326, (48.853495, 2.348391), 20000, UUID('64160910-332a-4243-8e36-b0d3dd55c629'))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 00:19:47,767 - app.db.session - ERROR - Unexpected session error: 500: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: (48.853495, 2.348391) (expected str, got tuple)
[SQL: SELECT destinations.id, destinations.latitude, destinations.longitude 
FROM destinations 
WHERE destinations.id IN ($4::UUID) AND ST_DWithin(CAST(ST_SetSRID(ST_MakePoint(destinations.longitude, destinations.latitude), $1::INTEGER) AS geography(GEOMETRY,-1)), $2, $3::INTEGER)]
[parameters: (4326, (48.853495, 2.348391), 20000, UUID('64160910-332a-4243-8e36-b0d3dd55c629'))]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-08 00:21:50,114 - app.main - INFO - Shutting down application...
2025-08-08 00:21:50,114 - app.main - INFO - Closing database connections...
2025-08-08 00:21:50,115 - app.db.session - INFO - Closing database connections...
2025-08-08 00:21:50,126 - app.db.session - INFO - Database connections closed
2025-08-08 00:21:50,127 - app.main - INFO - Database connections closed successfully
2025-08-08 00:21:58,978 - app.main - INFO - Starting application...
2025-08-08 00:21:58,979 - app.main - INFO - Initializing database manager...
2025-08-08 00:21:58,980 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 00:21:59,004 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 00:21:59,062 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 00:21:59,062 - app.main - INFO - Database manager initialized successfully
2025-08-08 01:00:03,396 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:00:03,493 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:00:03,722 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 391, in build_poi_list
    func.ST_DWithin(geom_act, center_pt, radius_m)
                              ^^^^^^^^^
NameError: name 'center_pt' is not defined. Did you mean: 'center_lat'?
2025-08-08 01:00:03,755 - app.db.session - ERROR - Unexpected session error: 500: name 'center_pt' is not defined
2025-08-08 01:00:17,300 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-08 01:00:17,606 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-08 01:00:17,607 - app.core.security - INFO - user_authentication completed in 0.31s
2025-08-08 01:00:17,608 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-08 01:00:17,609 - app.core.security - INFO - Access token created successfully
2025-08-08 01:00:17,609 - app.core.security - INFO - Refresh token created successfully
2025-08-08 01:00:17,610 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-08 01:00:17,610 - app.api.auth - INFO - user_login completed in 0.32s
2025-08-08 01:00:17,662 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:00:17,820 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:00:17,841 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:00:17,872 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 01:00:17,873 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-08 01:00:17,874 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 01:00:17,878 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 01:00:17,879 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 01:00:17,879 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 01:00:31,895 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 01:00:31,895 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-08 01:00:31,896 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-08 01:00:31,896 - app.api.nlp - INFO - nlp_parsing completed in 0.09s
2025-08-08 01:00:35,764 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:00:35,790 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 01:00:35,791 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 01:00:35,797 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 01:00:35,801 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 01:00:35,804 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 01:00:35,814 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 01:00:35,814 - app.api.itinerary - ERROR - Unexpected error in itinerary generation: ItineraryService.build_poi_list() missing 1 required positional argument: 'budget'
2025-08-08 01:00:35,814 - app.api.itinerary - INFO - itinerary_generation completed in 0.05s
2025-08-08 01:00:35,815 - app.db.session - ERROR - Unexpected session error: 500: Failed to generate itinerary
2025-08-08 01:01:00,815 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:01:00,839 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 01:01:00,839 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 01:01:00,842 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 01:01:00,843 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 01:01:00,845 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 01:01:00,851 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 01:01:00,851 - app.api.itinerary - ERROR - Unexpected error in itinerary generation: ItineraryService.build_poi_list() missing 1 required positional argument: 'budget'
2025-08-08 01:01:00,852 - app.api.itinerary - INFO - itinerary_generation completed in 0.04s
2025-08-08 01:01:00,853 - app.db.session - ERROR - Unexpected session error: 500: Failed to generate itinerary
2025-08-08 01:01:39,464 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:01:39,489 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 01:01:39,490 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 01:01:39,492 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 01:01:39,494 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 01:01:39,496 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 01:01:39,502 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 01:01:39,503 - app.api.itinerary - ERROR - Unexpected error in itinerary generation: ItineraryService.build_poi_list() missing 1 required positional argument: 'budget'
2025-08-08 01:01:39,504 - app.api.itinerary - INFO - itinerary_generation completed in 0.04s
2025-08-08 01:01:39,505 - app.db.session - ERROR - Unexpected session error: 500: Failed to generate itinerary
2025-08-08 01:03:02,043 - app.main - INFO - Shutting down application...
2025-08-08 01:03:02,043 - app.main - INFO - Closing database connections...
2025-08-08 01:03:02,044 - app.db.session - INFO - Closing database connections...
2025-08-08 01:03:02,060 - app.db.session - INFO - Database connections closed
2025-08-08 01:03:02,060 - app.main - INFO - Database connections closed successfully
2025-08-08 01:03:13,718 - app.main - INFO - Starting application...
2025-08-08 01:03:13,719 - app.main - INFO - Initializing database manager...
2025-08-08 01:03:13,719 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 01:03:13,766 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 01:03:13,838 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 01:03:13,838 - app.main - INFO - Database manager initialized successfully
2025-08-08 01:03:38,873 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:03:38,955 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 01:03:38,957 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 01:03:38,964 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 01:03:38,968 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 01:03:38,974 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 01:03:38,985 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 01:03:38,986 - app.api.itinerary - ERROR - Unexpected error in itinerary generation: name 'center_lat' is not defined
2025-08-08 01:03:38,986 - app.api.itinerary - INFO - itinerary_generation completed in 0.11s
2025-08-08 01:03:38,987 - app.db.session - ERROR - Unexpected session error: 500: Failed to generate itinerary
2025-08-08 01:03:44,249 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:17:30,105 - app.main - INFO - Starting application...
2025-08-08 01:17:30,106 - app.main - INFO - Initializing database manager...
2025-08-08 01:17:30,108 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 01:17:30,149 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 01:17:30,227 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 01:17:30,227 - app.main - INFO - Database manager initialized successfully
2025-08-08 01:18:16,027 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-08 01:18:16,360 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-08 01:18:16,361 - app.core.security - INFO - user_authentication completed in 0.40s
2025-08-08 01:18:16,362 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-08 01:18:16,373 - app.core.security - INFO - Access token created successfully
2025-08-08 01:18:16,374 - app.core.security - INFO - Refresh token created successfully
2025-08-08 01:18:16,374 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-08 01:18:16,375 - app.api.auth - INFO - user_login completed in 0.41s
2025-08-08 01:18:16,443 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:18:16,940 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:18:16,981 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:18:17,004 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 01:18:17,006 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-08 01:18:17,009 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 01:18:17,014 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 01:18:17,015 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 01:18:17,016 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 01:18:37,297 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 01:18:37,297 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-08 01:18:37,298 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-08 01:18:37,298 - app.api.nlp - INFO - nlp_parsing completed in 0.09s
2025-08-08 01:18:40,318 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:18:40,342 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 01:18:40,343 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 01:18:40,355 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 01:18:40,357 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 01:18:40,360 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 01:18:40,367 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 01:18:40,367 - app.api.itinerary - ERROR - Unexpected error in itinerary generation: name 'center_lat' is not defined
2025-08-08 01:18:40,368 - app.api.itinerary - INFO - itinerary_generation completed in 0.05s
2025-08-08 01:18:40,369 - app.db.session - ERROR - Unexpected session error: 500: Failed to generate itinerary
2025-08-08 01:19:31,380 - app.main - INFO - Shutting down application...
2025-08-08 01:19:31,380 - app.main - INFO - Closing database connections...
2025-08-08 01:19:31,380 - app.db.session - INFO - Closing database connections...
2025-08-08 01:19:31,384 - app.db.session - INFO - Database connections closed
2025-08-08 01:19:31,385 - app.main - INFO - Database connections closed successfully
2025-08-08 01:19:39,683 - app.main - INFO - Starting application...
2025-08-08 01:19:39,685 - app.main - INFO - Initializing database manager...
2025-08-08 01:19:39,686 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 01:19:39,729 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 01:19:39,841 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 01:19:39,842 - app.main - INFO - Database manager initialized successfully
2025-08-08 01:19:44,888 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 01:19:44,951 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 01:19:44,952 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 01:19:44,959 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 01:19:44,963 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 01:19:44,967 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 01:19:44,976 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 01:19:45,139 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 391, in build_poi_list
    func.ST_DWithin(geom_act, center_pt, radius_m)
                              ^^^^^^^^^
NameError: name 'center_pt' is not defined. Did you mean: 'center_lat'?
2025-08-08 01:19:45,151 - app.api.itinerary - INFO - itinerary_generation completed in 0.26s
2025-08-08 01:19:45,151 - app.db.session - ERROR - Unexpected session error: 500: name 'center_pt' is not defined
2025-08-08 23:25:14,353 - app.main - INFO - Starting application...
2025-08-08 23:25:14,356 - app.main - INFO - Initializing database manager...
2025-08-08 23:25:14,358 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 23:25:14,434 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 23:25:14,510 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 23:25:14,511 - app.main - INFO - Database manager initialized successfully
2025-08-08 23:30:06,430 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-08-08 23:30:06,437 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-08-08 23:31:05,292 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-08 23:31:05,669 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-08 23:31:05,670 - app.core.security - INFO - user_authentication completed in 0.47s
2025-08-08 23:31:05,670 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-08 23:31:05,671 - app.core.security - INFO - Access token created successfully
2025-08-08 23:31:05,672 - app.core.security - INFO - Refresh token created successfully
2025-08-08 23:31:05,672 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-08 23:31:05,673 - app.api.auth - INFO - user_login completed in 0.48s
2025-08-08 23:31:05,687 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:31:06,382 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:31:06,417 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:31:06,451 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 23:31:06,452 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-08 23:31:06,453 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 23:31:06,459 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 23:31:06,460 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 23:31:06,463 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 23:31:27,848 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 23:31:27,848 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-08 23:31:27,849 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-08 23:31:27,850 - app.api.nlp - INFO - nlp_parsing completed in 0.07s
2025-08-08 23:31:33,706 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:31:33,732 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 23:31:33,732 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 23:31:33,744 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 23:31:33,747 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 23:31:33,751 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 23:31:33,766 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 23:31:33,866 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 391, in build_poi_list
    func.ST_DWithin(geom_act, center_pt, radius_m)
                              ^^^^^^^^^
NameError: name 'center_pt' is not defined. Did you mean: 'center_lat'?
2025-08-08 23:31:33,877 - app.api.itinerary - INFO - itinerary_generation completed in 0.17s
2025-08-08 23:31:33,878 - app.db.session - ERROR - Unexpected session error: 500: name 'center_pt' is not defined
2025-08-08 23:33:12,794 - app.main - INFO - Shutting down application...
2025-08-08 23:33:12,797 - app.main - INFO - Closing database connections...
2025-08-08 23:33:12,798 - app.db.session - INFO - Closing database connections...
2025-08-08 23:33:12,868 - app.db.session - INFO - Database connections closed
2025-08-08 23:33:12,871 - app.main - INFO - Database connections closed successfully
2025-08-08 23:33:21,912 - app.main - INFO - Starting application...
2025-08-08 23:33:21,913 - app.main - INFO - Initializing database manager...
2025-08-08 23:33:21,913 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 23:33:21,953 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 23:33:22,023 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 23:33:22,024 - app.main - INFO - Database manager initialized successfully
2025-08-08 23:34:03,876 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:34:14,836 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-08 23:34:15,141 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-08 23:34:15,142 - app.core.security - INFO - user_authentication completed in 0.31s
2025-08-08 23:34:15,142 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-08 23:34:15,143 - app.core.security - INFO - Access token created successfully
2025-08-08 23:34:15,144 - app.core.security - INFO - Refresh token created successfully
2025-08-08 23:34:15,144 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-08 23:34:15,145 - app.api.auth - INFO - user_login completed in 0.31s
2025-08-08 23:34:15,193 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:34:15,341 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:34:15,381 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 23:34:15,383 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 23:34:15,384 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 23:34:15,387 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:34:15,403 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 23:34:15,404 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 23:34:15,404 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 23:34:46,549 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 23:34:46,549 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-08 23:34:46,549 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-08 23:34:46,550 - app.api.nlp - INFO - nlp_parsing completed in 0.05s
2025-08-08 23:34:49,995 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:34:50,018 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 23:34:50,019 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 23:34:50,025 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 23:34:50,027 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 23:34:50,030 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 23:34:50,039 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 23:34:50,080 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:34:50,081 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:34:50,081 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=20000
2025-08-08 23:34:50,082 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:34:50,083 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:34:50,403 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:34:50,404 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-08 23:34:50,404 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-08 23:34:50,409 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:34:50,410 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:34:50,411 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=50000
2025-08-08 23:34:50,411 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:34:50,412 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:34:50,487 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:34:50,488 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-08 23:34:50,488 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-08 23:34:50,495 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:34:50,496 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:34:50,496 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=100000
2025-08-08 23:34:50,496 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:34:50,497 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:34:50,568 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:34:50,569 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-08 23:34:50,666 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-08 23:34:50,667 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], [], []]
2025-08-08 23:34:50,736 - app.api.itinerary - INFO - Itinerary 8cc7ecee-7532-423c-8a53-0b526b178ea7 persisted successfully
2025-08-08 23:34:50,736 - app.api.itinerary - INFO - Successfully generated itinerary 8cc7ecee-7532-423c-8a53-0b526b178ea7 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-08 23:34:50,737 - app.api.itinerary - INFO - itinerary_generation completed in 0.74s
2025-08-08 23:34:55,567 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:34:55,597 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:34:55,597 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:34:55,598 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-08 23:34:55,598 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:34:55,599 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:34:55,719 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:34:55,821 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-08 23:34:55,822 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], []]
2025-08-08 23:34:55,824 - app.db.session - ERROR - Unexpected session error: 6 validation errors for ItineraryRead
duration_days
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
dest_links.0
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(itin..., planned_duration=None), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
act_links.0
  Input should be a valid dictionary or instance of ItineraryActivityRead [type=model_type, input_value=ItineraryActivity(activit...ne, scheduled_time=None), input_type=ItineraryActivity]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.0
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(it...=None, guest_count=None), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.1
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(it...=None, guest_count=None), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:34:55,827 - app.main - ERROR - Unhandled exception: 6 validation errors for ItineraryRead
duration_days
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
dest_links.0
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
act_links.0
  Input should be a valid dictionary or instance of ItineraryActivityRead [type=model_type, input_value=ItineraryActivity(), input_type=ItineraryActivity]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.0
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.1
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 725, in read_itinerary
    return ItineraryRead(**itin_dict)
  File "/usr/local/lib/python3.13/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 6 validation errors for ItineraryRead
duration_days
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
dest_links.0
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
act_links.0
  Input should be a valid dictionary or instance of ItineraryActivityRead [type=model_type, input_value=ItineraryActivity(), input_type=ItineraryActivity]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.0
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.1
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:34:55,872 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:34:55,927 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:34:55,929 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:34:55,934 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-08 23:34:55,934 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:34:55,935 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:34:56,036 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:34:56,150 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-08 23:34:56,150 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], []]
2025-08-08 23:34:56,152 - app.db.session - ERROR - Unexpected session error: 6 validation errors for ItineraryRead
duration_days
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
dest_links.0
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(itin..., planned_duration=None), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
act_links.0
  Input should be a valid dictionary or instance of ItineraryActivityRead [type=model_type, input_value=ItineraryActivity(activit...ne, scheduled_time=None), input_type=ItineraryActivity]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.0
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(it...=None, guest_count=None), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.1
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(it...=None, guest_count=None), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:34:56,154 - app.main - ERROR - Unhandled exception: 6 validation errors for ItineraryRead
duration_days
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
dest_links.0
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
act_links.0
  Input should be a valid dictionary or instance of ItineraryActivityRead [type=model_type, input_value=ItineraryActivity(), input_type=ItineraryActivity]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.0
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.1
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 725, in read_itinerary
    return ItineraryRead(**itin_dict)
  File "/usr/local/lib/python3.13/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 6 validation errors for ItineraryRead
duration_days
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
dest_links.0
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
act_links.0
  Input should be a valid dictionary or instance of ItineraryActivityRead [type=model_type, input_value=ItineraryActivity(), input_type=ItineraryActivity]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.0
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.1
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:34:56,183 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:34:56,202 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:34:56,203 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:34:56,203 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-08 23:34:56,204 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:34:56,204 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:34:56,275 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:34:56,374 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-08 23:34:56,375 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], []]
2025-08-08 23:34:56,376 - app.db.session - ERROR - Unexpected session error: 6 validation errors for ItineraryRead
duration_days
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
dest_links.0
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(itin..., planned_duration=None), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
act_links.0
  Input should be a valid dictionary or instance of ItineraryActivityRead [type=model_type, input_value=ItineraryActivity(activit...ne, scheduled_time=None), input_type=ItineraryActivity]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.0
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(it...=None, guest_count=None), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.1
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(it...=None, guest_count=None), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:34:56,378 - app.main - ERROR - Unhandled exception: 6 validation errors for ItineraryRead
duration_days
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
dest_links.0
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
act_links.0
  Input should be a valid dictionary or instance of ItineraryActivityRead [type=model_type, input_value=ItineraryActivity(), input_type=ItineraryActivity]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.0
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.1
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 725, in read_itinerary
    return ItineraryRead(**itin_dict)
  File "/usr/local/lib/python3.13/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 6 validation errors for ItineraryRead
duration_days
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'_sa_instance_state': <s...e='activity')], [], []]}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
dest_links.0
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
act_links.0
  Input should be a valid dictionary or instance of ItineraryActivityRead [type=model_type, input_value=ItineraryActivity(), input_type=ItineraryActivity]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.0
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
accom_links.1
  Input should be a valid dictionary or instance of ItineraryAccommodationRead [type=model_type, input_value=ItineraryAccommodation(), input_type=ItineraryAccommodation]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:36:32,103 - app.main - INFO - Shutting down application...
2025-08-08 23:36:32,104 - app.main - INFO - Closing database connections...
2025-08-08 23:36:32,104 - app.db.session - INFO - Closing database connections...
2025-08-08 23:36:32,117 - app.db.session - INFO - Database connections closed
2025-08-08 23:36:32,118 - app.main - INFO - Database connections closed successfully
2025-08-08 23:36:40,205 - app.main - INFO - Starting application...
2025-08-08 23:36:40,206 - app.main - INFO - Initializing database manager...
2025-08-08 23:36:40,207 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 23:36:40,244 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 23:36:40,312 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 23:36:40,312 - app.main - INFO - Database manager initialized successfully
2025-08-08 23:40:25,304 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:40:58,137 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-08 23:40:58,444 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-08 23:40:58,444 - app.core.security - INFO - user_authentication completed in 0.31s
2025-08-08 23:40:58,445 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-08 23:40:58,446 - app.core.security - INFO - Access token created successfully
2025-08-08 23:40:58,447 - app.core.security - INFO - Refresh token created successfully
2025-08-08 23:40:58,447 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-08 23:40:58,448 - app.api.auth - INFO - user_login completed in 0.32s
2025-08-08 23:40:58,459 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:40:58,652 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:40:58,716 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 23:40:58,717 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-08 23:40:58,718 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 23:40:58,722 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:40:58,741 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 23:40:58,741 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 23:40:58,743 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 23:41:19,220 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 23:41:19,221 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-08 23:41:19,221 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-08 23:41:19,222 - app.api.nlp - INFO - nlp_parsing completed in 0.06s
2025-08-08 23:41:22,354 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:41:22,380 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 23:41:22,381 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 23:41:22,387 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 23:41:22,389 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 23:41:22,393 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 23:41:22,400 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 23:41:22,430 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:41:22,431 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:41:22,431 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=20000
2025-08-08 23:41:22,432 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:41:22,432 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:41:22,551 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:41:22,551 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-08 23:41:22,551 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-08 23:41:22,557 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:41:22,557 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:41:22,558 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=50000
2025-08-08 23:41:22,558 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:41:22,559 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:41:22,625 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:41:22,626 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-08 23:41:22,626 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-08 23:41:22,631 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:41:22,631 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:41:22,632 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=100000
2025-08-08 23:41:22,632 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:41:22,633 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:41:22,720 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:41:22,721 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-08 23:41:22,811 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-08 23:41:22,811 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], [], []]
2025-08-08 23:41:22,867 - app.api.itinerary - INFO - Itinerary 80b1e6ab-c5de-4912-8b69-f47f9a6636b8 persisted successfully
2025-08-08 23:41:22,867 - app.api.itinerary - INFO - Successfully generated itinerary 80b1e6ab-c5de-4912-8b69-f47f9a6636b8 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-08 23:41:22,868 - app.api.itinerary - INFO - itinerary_generation completed in 0.51s
2025-08-08 23:41:24,665 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:41:24,706 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:41:24,707 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:41:24,708 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-08 23:41:24,708 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:41:24,709 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:41:24,833 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:41:24,922 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-08 23:41:24,923 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], []]
2025-08-08 23:41:24,927 - app.db.session - ERROR - Unexpected session error: 1 validation error for ItineraryDestinationRead
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(itin..., planned_duration=None), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:41:24,930 - app.main - ERROR - Unhandled exception: 1 validation error for ItineraryDestinationRead
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 735, in read_itinerary
    itin_dict["dest_links"] = [ItineraryDestinationRead.model_validate(dl) for dl in getattr(itin, "dest_links", [])]
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/usr/local/lib/python3.13/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj, strict=strict, from_attributes=from_attributes, context=context, by_alias=by_alias, by_name=by_name
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 1 validation error for ItineraryDestinationRead
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:41:24,965 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:41:25,010 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:41:25,010 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:41:25,011 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-08 23:41:25,011 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:41:25,012 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:41:25,107 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:41:25,235 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-08 23:41:25,236 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], []]
2025-08-08 23:41:25,237 - app.db.session - ERROR - Unexpected session error: 1 validation error for ItineraryDestinationRead
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(itin..., planned_duration=None), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:41:25,240 - app.main - ERROR - Unhandled exception: 1 validation error for ItineraryDestinationRead
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 735, in read_itinerary
    itin_dict["dest_links"] = [ItineraryDestinationRead.model_validate(dl) for dl in getattr(itin, "dest_links", [])]
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/usr/local/lib/python3.13/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj, strict=strict, from_attributes=from_attributes, context=context, by_alias=by_alias, by_name=by_name
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 1 validation error for ItineraryDestinationRead
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:41:25,268 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:41:25,291 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:41:25,292 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:41:25,292 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-08 23:41:25,293 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:41:25,294 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:41:25,374 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:41:25,502 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-08 23:41:25,504 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], []]
2025-08-08 23:41:25,504 - app.db.session - ERROR - Unexpected session error: 1 validation error for ItineraryDestinationRead
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(itin..., planned_duration=None), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:41:25,507 - app.main - ERROR - Unhandled exception: 1 validation error for ItineraryDestinationRead
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 735, in read_itinerary
    itin_dict["dest_links"] = [ItineraryDestinationRead.model_validate(dl) for dl in getattr(itin, "dest_links", [])]
                               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^
  File "/usr/local/lib/python3.13/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        obj, strict=strict, from_attributes=from_attributes, context=context, by_alias=by_alias, by_name=by_name
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
pydantic_core._pydantic_core.ValidationError: 1 validation error for ItineraryDestinationRead
  Input should be a valid dictionary or instance of ItineraryDestinationRead [type=model_type, input_value=ItineraryDestination(), input_type=ItineraryDestination]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-08-08 23:43:38,732 - app.main - INFO - Shutting down application...
2025-08-08 23:43:38,733 - app.main - INFO - Closing database connections...
2025-08-08 23:43:38,734 - app.db.session - INFO - Closing database connections...
2025-08-08 23:43:38,749 - app.db.session - INFO - Database connections closed
2025-08-08 23:43:38,750 - app.main - INFO - Database connections closed successfully
2025-08-08 23:43:47,213 - app.main - INFO - Starting application...
2025-08-08 23:43:47,214 - app.main - INFO - Initializing database manager...
2025-08-08 23:43:47,214 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 23:43:47,236 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 23:43:47,285 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 23:43:47,286 - app.main - INFO - Database manager initialized successfully
2025-08-08 23:44:17,354 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:45:03,883 - app.main - INFO - Starting application...
2025-08-08 23:45:03,883 - app.main - INFO - Initializing database manager...
2025-08-08 23:45:03,884 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 23:45:03,915 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 23:45:03,983 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 23:45:03,984 - app.main - INFO - Database manager initialized successfully
2025-08-08 23:45:17,852 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-08 23:45:18,154 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-08 23:45:18,155 - app.core.security - INFO - user_authentication completed in 0.35s
2025-08-08 23:45:18,156 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-08 23:45:18,162 - app.core.security - INFO - Access token created successfully
2025-08-08 23:45:18,163 - app.core.security - INFO - Refresh token created successfully
2025-08-08 23:45:18,163 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-08 23:45:18,164 - app.api.auth - INFO - user_login completed in 0.36s
2025-08-08 23:45:18,179 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:45:18,358 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:45:18,394 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:45:18,410 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 23:45:18,411 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 23:45:18,411 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 23:45:18,415 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 23:45:18,416 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 23:45:18,417 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 23:45:28,324 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 23:45:28,325 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-08 23:45:28,326 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-08 23:45:28,326 - app.api.nlp - INFO - nlp_parsing completed in 0.05s
2025-08-08 23:45:30,993 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:45:31,028 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 23:45:31,029 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 23:45:31,035 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 23:45:31,037 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 23:45:31,040 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 23:45:31,049 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 23:45:31,079 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:45:31,079 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:45:31,080 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=20000
2025-08-08 23:45:31,080 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:45:31,080 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:45:31,206 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:45:31,207 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-08 23:45:31,207 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-08 23:45:31,212 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:45:31,213 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:45:31,213 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=50000
2025-08-08 23:45:31,214 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:45:31,215 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:45:31,292 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:45:31,293 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-08 23:45:31,293 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-08 23:45:31,298 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:45:31,298 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:45:31,299 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=100000
2025-08-08 23:45:31,299 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:45:31,300 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:45:31,383 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:45:31,384 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-08 23:45:31,479 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-08 23:45:31,480 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], [], []]
2025-08-08 23:45:31,533 - app.api.itinerary - INFO - Itinerary a9a78dfe-5656-4302-a5c5-f528e3ec180a persisted successfully
2025-08-08 23:45:31,534 - app.api.itinerary - INFO - Successfully generated itinerary a9a78dfe-5656-4302-a5c5-f528e3ec180a for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-08 23:45:31,534 - app.api.itinerary - INFO - itinerary_generation completed in 0.54s
2025-08-08 23:45:33,658 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:45:33,694 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:45:33,695 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:45:33,698 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-08 23:45:33,699 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:45:33,700 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:45:33,841 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:45:33,967 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-08 23:45:33,967 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], []]
2025-08-08 23:45:33,978 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:45:34,007 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:45:34,008 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:45:34,009 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-08 23:45:34,011 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:45:34,012 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:45:34,152 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:45:34,329 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-08 23:45:34,329 - app.api.itinerary - INFO - Scheduled items: [[POI(id=UUID('64160910-332a-4243-8e36-b0d3dd55c629'), latitude=48.853495, longitude=2.348391, price=None, opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 17, 0, tzinfo=datetime.timezone.utc), duration=120, type='destination'), POI(id=UUID('87b068fd-0010-477c-89d2-bd7887371df9'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8141'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('1163d838-2a58-4db6-b531-df47f603e9b0'), latitude=48.8535043, longitude=2.3364926, price=Decimal('8409'), opens=datetime.datetime(2025, 8, 10, 0, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 23, 59, tzinfo=datetime.timezone.utc), duration=0, type='accommodation'), POI(id=UUID('8093befe-c1dd-4252-8172-d163953015ee'), latitude=48.8606, longitude=2.3376, price=Decimal('20'), opens=datetime.datetime(2025, 8, 10, 9, 0, tzinfo=datetime.timezone.utc), closes=datetime.datetime(2025, 8, 10, 18, 0, tzinfo=datetime.timezone.utc), duration=60, type='activity')], [], []]
2025-08-08 23:49:54,651 - app.main - INFO - Shutting down application...
2025-08-08 23:49:54,652 - app.main - INFO - Closing database connections...
2025-08-08 23:49:54,652 - app.db.session - INFO - Closing database connections...
2025-08-08 23:49:54,663 - app.db.session - INFO - Database connections closed
2025-08-08 23:49:54,664 - app.main - INFO - Database connections closed successfully
2025-08-08 23:50:02,086 - app.main - INFO - Starting application...
2025-08-08 23:50:02,087 - app.main - INFO - Initializing database manager...
2025-08-08 23:50:02,088 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 23:50:02,110 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 23:50:02,162 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 23:50:02,162 - app.main - INFO - Database manager initialized successfully
2025-08-08 23:50:40,670 - app.main - INFO - Starting application...
2025-08-08 23:50:40,671 - app.main - INFO - Initializing database manager...
2025-08-08 23:50:40,672 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 23:50:40,700 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 23:50:40,750 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 23:50:40,750 - app.main - INFO - Database manager initialized successfully
2025-08-08 23:51:19,330 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:51:19,434 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:51:19,728 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:51:19,734 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:51:19,737 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-08 23:51:19,750 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:51:19,754 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:51:20,063 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:51:20,221 - app.api.itinerary - WARNING - Failed to enrich POI 64160910-332a-4243-8e36-b0d3dd55c629 of type destination: 'Destination' object has no attribute 'category'
2025-08-08 23:51:20,222 - app.api.itinerary - WARNING - Failed to enrich POI 87b068fd-0010-477c-89d2-bd7887371df9 of type accommodation: 'Accommodation' object has no attribute 'category'
2025-08-08 23:51:20,223 - app.api.itinerary - WARNING - Failed to enrich POI 1163d838-2a58-4db6-b531-df47f603e9b0 of type accommodation: 'Accommodation' object has no attribute 'category'
2025-08-08 23:51:20,224 - app.api.itinerary - WARNING - Failed to enrich POI 8093befe-c1dd-4252-8172-d163953015ee of type activity: 'Activity' object has no attribute 'category'
2025-08-08 23:51:20,239 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-08 23:51:20,240 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-08 23:51:32,015 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-08 23:51:32,318 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-08 23:51:32,318 - app.core.security - INFO - user_authentication completed in 0.31s
2025-08-08 23:51:32,319 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-08 23:51:32,320 - app.core.security - INFO - Access token created successfully
2025-08-08 23:51:32,322 - app.core.security - INFO - Refresh token created successfully
2025-08-08 23:51:32,322 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-08 23:51:32,322 - app.api.auth - INFO - user_login completed in 0.31s
2025-08-08 23:51:32,373 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:51:32,529 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:51:32,568 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 23:51:32,568 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 23:51:32,569 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 23:51:32,573 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:51:32,588 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-08 23:51:32,589 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-08 23:51:32,590 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-08 23:51:42,786 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 23:51:42,786 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-08 23:51:42,787 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-08 23:51:42,787 - app.api.nlp - INFO - nlp_parsing completed in 0.05s
2025-08-08 23:51:47,424 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-08 23:51:47,447 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-08 23:51:47,448 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-08 23:51:47,452 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-08 23:51:47,454 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-08 23:51:47,456 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-08 23:51:47,465 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-08 23:51:47,471 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:51:47,472 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:51:47,472 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=20000
2025-08-08 23:51:47,472 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:51:47,473 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:51:47,538 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:51:47,539 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-08 23:51:47,539 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-08 23:51:47,545 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:51:47,545 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:51:47,546 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=50000
2025-08-08 23:51:47,546 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:51:47,547 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:51:47,611 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:51:47,612 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-08 23:51:47,612 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-08 23:51:47,616 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-08 23:51:47,617 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-08 23:51:47,618 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=100000
2025-08-08 23:51:47,618 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-08 23:51:47,619 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-08 23:51:47,684 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-08 23:51:47,685 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-08 23:51:47,765 - app.api.itinerary - WARNING - Failed to enrich POI 64160910-332a-4243-8e36-b0d3dd55c629 of type destination: 'Destination' object has no attribute 'category'
2025-08-08 23:51:47,769 - app.api.itinerary - WARNING - Failed to enrich POI 87b068fd-0010-477c-89d2-bd7887371df9 of type accommodation: 'Accommodation' object has no attribute 'category'
2025-08-08 23:51:47,772 - app.api.itinerary - WARNING - Failed to enrich POI 1163d838-2a58-4db6-b531-df47f603e9b0 of type accommodation: 'Accommodation' object has no attribute 'category'
2025-08-08 23:51:47,775 - app.api.itinerary - WARNING - Failed to enrich POI 8093befe-c1dd-4252-8172-d163953015ee of type activity: 'Activity' object has no attribute 'category'
2025-08-08 23:51:47,788 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-08 23:51:47,789 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-08-08 23:51:47,795 - app.api.itinerary - ERROR - Failed to persist itinerary: 'dict' object has no attribute 'type'
2025-08-08 23:51:47,796 - app.api.itinerary - INFO - itinerary_generation completed in 0.37s
2025-08-08 23:51:47,796 - app.db.session - ERROR - Unexpected session error: 500: Failed to save itinerary
2025-08-08 23:52:44,053 - app.main - INFO - Shutting down application...
2025-08-08 23:52:44,053 - app.main - INFO - Closing database connections...
2025-08-08 23:52:44,054 - app.db.session - INFO - Closing database connections...
2025-08-08 23:52:44,061 - app.db.session - INFO - Database connections closed
2025-08-08 23:52:44,061 - app.main - INFO - Database connections closed successfully
2025-08-08 23:52:51,560 - app.main - INFO - Starting application...
2025-08-08 23:52:51,561 - app.main - INFO - Initializing database manager...
2025-08-08 23:52:51,562 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 23:52:51,583 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 23:52:51,628 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 23:52:51,629 - app.main - INFO - Database manager initialized successfully
2025-08-08 23:53:00,913 - app.main - INFO - Shutting down application...
2025-08-08 23:53:00,913 - app.main - INFO - Closing database connections...
2025-08-08 23:53:00,913 - app.db.session - INFO - Closing database connections...
2025-08-08 23:53:00,917 - app.db.session - INFO - Database connections closed
2025-08-08 23:53:00,917 - app.main - INFO - Database connections closed successfully
2025-08-08 23:53:07,718 - app.main - INFO - Starting application...
2025-08-08 23:53:07,718 - app.main - INFO - Initializing database manager...
2025-08-08 23:53:07,719 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 23:53:07,745 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 23:53:07,865 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 23:53:07,866 - app.main - INFO - Database manager initialized successfully
2025-08-08 23:53:18,400 - app.main - INFO - Shutting down application...
2025-08-08 23:53:18,400 - app.main - INFO - Closing database connections...
2025-08-08 23:53:18,400 - app.db.session - INFO - Closing database connections...
2025-08-08 23:53:18,404 - app.db.session - INFO - Database connections closed
2025-08-08 23:53:18,405 - app.main - INFO - Database connections closed successfully
2025-08-08 23:53:25,157 - app.main - INFO - Starting application...
2025-08-08 23:53:25,158 - app.main - INFO - Initializing database manager...
2025-08-08 23:53:25,158 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-08 23:53:25,180 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-08 23:53:25,225 - app.db.session - INFO - Database manager initialized successfully
2025-08-08 23:53:25,226 - app.main - INFO - Database manager initialized successfully
2025-08-08 23:55:57,213 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:10:58,628 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-09 00:10:58,938 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-09 00:10:58,938 - app.core.security - INFO - user_authentication completed in 0.32s
2025-08-09 00:10:58,939 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-09 00:10:58,941 - app.core.security - INFO - Access token created successfully
2025-08-09 00:10:58,942 - app.core.security - INFO - Refresh token created successfully
2025-08-09 00:10:58,942 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-09 00:10:58,943 - app.api.auth - INFO - user_login completed in 0.33s
2025-08-09 00:10:59,002 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:10:59,157 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:10:59,206 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:10:59,259 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-09 00:10:59,260 - app.api.recommend - INFO - destination_recommendations completed in 0.02s
2025-08-09 00:10:59,261 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-09 00:10:59,266 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-09 00:10:59,267 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-09 00:10:59,268 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-09 00:11:10,278 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-09 00:11:10,278 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-09 00:11:10,279 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-09 00:11:10,279 - app.api.nlp - INFO - nlp_parsing completed in 0.10s
2025-08-09 00:11:13,921 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:11:13,945 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-09 00:11:13,946 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-09 00:11:13,956 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-09 00:11:13,958 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-09 00:11:13,962 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-09 00:11:13,978 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-09 00:11:14,078 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:11:14,078 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:11:14,079 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=20000
2025-08-09 00:11:14,080 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:11:14,080 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:11:14,353 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:11:14,354 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-09 00:11:14,354 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-09 00:11:14,360 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:11:14,360 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:11:14,361 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=50000
2025-08-09 00:11:14,361 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:11:14,362 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:11:14,446 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:11:14,446 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-09 00:11:14,447 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-09 00:11:14,452 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:11:14,452 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:11:14,455 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=100000
2025-08-09 00:11:14,455 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:11:14,456 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:11:14,543 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:11:14,544 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-09 00:11:14,679 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-09 00:11:14,681 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-08-09 00:11:14,750 - app.api.itinerary - INFO - Itinerary 256be340-cc51-4c1d-aca1-61c4082ba129 persisted successfully
2025-08-09 00:11:14,750 - app.api.itinerary - INFO - Successfully generated itinerary 256be340-cc51-4c1d-aca1-61c4082ba129 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-09 00:11:14,751 - app.api.itinerary - INFO - itinerary_generation completed in 0.83s
2025-08-09 00:11:16,334 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:11:16,364 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:11:16,364 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:11:16,364 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:11:16,365 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:11:16,366 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:11:16,506 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:11:16,638 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:11:16,639 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:11:16,651 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:11:16,682 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:11:16,682 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:11:16,683 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:11:16,683 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:11:16,684 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:11:16,805 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:11:16,914 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:11:16,915 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:17:50,907 - app.main - INFO - Shutting down application...
2025-08-09 00:17:50,908 - app.main - INFO - Closing database connections...
2025-08-09 00:17:50,910 - app.db.session - INFO - Closing database connections...
2025-08-09 00:17:50,926 - app.db.session - INFO - Database connections closed
2025-08-09 00:17:50,926 - app.main - INFO - Database connections closed successfully
2025-08-09 00:18:02,558 - app.main - INFO - Starting application...
2025-08-09 00:18:02,559 - app.main - INFO - Initializing database manager...
2025-08-09 00:18:02,560 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-09 00:18:02,619 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-09 00:18:02,706 - app.db.session - INFO - Database manager initialized successfully
2025-08-09 00:18:02,707 - app.main - INFO - Database manager initialized successfully
2025-08-09 00:18:02,840 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:23:36,248 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-09 00:23:36,584 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-09 00:23:36,585 - app.core.security - INFO - user_authentication completed in 0.35s
2025-08-09 00:23:36,586 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-09 00:23:36,588 - app.core.security - INFO - Access token created successfully
2025-08-09 00:23:36,589 - app.core.security - INFO - Refresh token created successfully
2025-08-09 00:23:36,590 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-09 00:23:36,590 - app.api.auth - INFO - user_login completed in 0.35s
2025-08-09 00:23:36,652 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:23:36,828 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:23:36,873 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:23:36,918 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-09 00:23:36,919 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-09 00:23:36,919 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-09 00:23:36,925 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-09 00:23:36,926 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-09 00:23:36,927 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-09 00:23:48,692 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-09 00:23:48,693 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-09 00:23:48,693 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-09 00:23:48,695 - app.api.nlp - INFO - nlp_parsing completed in 0.09s
2025-08-09 00:23:52,744 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:23:52,772 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-09 00:23:52,773 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-09 00:23:52,781 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-09 00:23:52,785 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-09 00:23:52,791 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-09 00:23:52,808 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-09 00:23:52,853 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:23:52,854 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:23:52,854 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=20000
2025-08-09 00:23:52,855 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:23:52,856 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:23:52,987 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:23:52,987 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-09 00:23:52,988 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-09 00:23:52,994 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:23:52,994 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:23:52,995 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=50000
2025-08-09 00:23:52,995 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:23:52,996 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:23:53,076 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:23:53,077 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-09 00:23:53,078 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-09 00:23:53,083 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:23:53,083 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:23:53,084 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=100000
2025-08-09 00:23:53,085 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:23:53,085 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:23:53,201 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:23:53,202 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-09 00:23:53,382 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-09 00:23:53,382 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-08-09 00:23:53,439 - app.api.itinerary - INFO - Itinerary e4261b9a-c2ff-46d3-a9e4-542d3110da09 persisted successfully
2025-08-09 00:23:53,440 - app.api.itinerary - INFO - Successfully generated itinerary e4261b9a-c2ff-46d3-a9e4-542d3110da09 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-09 00:23:53,440 - app.api.itinerary - INFO - itinerary_generation completed in 0.69s
2025-08-09 00:23:54,833 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:23:54,864 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:23:54,865 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:23:54,866 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:23:54,869 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:23:54,871 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:23:55,010 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:23:55,129 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:23:55,129 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:23:55,144 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:23:55,179 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:23:55,180 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:23:55,180 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:23:55,181 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:23:55,182 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:23:55,320 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:23:55,432 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:23:55,433 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:26:04,949 - app.main - INFO - Starting application...
2025-08-09 00:26:04,950 - app.main - INFO - Initializing database manager...
2025-08-09 00:26:04,951 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-09 00:26:04,972 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-09 00:26:05,019 - app.db.session - INFO - Database manager initialized successfully
2025-08-09 00:26:05,020 - app.main - INFO - Database manager initialized successfully
2025-08-09 00:26:35,448 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:26:35,480 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-09 00:26:35,481 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-09 00:26:35,482 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-09 00:26:35,485 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:26:35,500 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-09 00:26:35,500 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-09 00:26:35,500 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-09 00:26:46,016 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-09 00:26:46,017 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-09 00:26:46,017 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-09 00:26:46,018 - app.api.nlp - INFO - nlp_parsing completed in 0.05s
2025-08-09 00:26:50,710 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:26:50,739 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-09 00:26:50,739 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-09 00:26:50,752 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-09 00:26:50,755 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-09 00:26:50,758 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-09 00:26:50,767 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-09 00:26:50,808 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:26:50,808 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:26:50,808 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=20000
2025-08-09 00:26:50,809 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:26:50,809 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:26:50,951 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:26:50,951 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-09 00:26:50,952 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-09 00:26:50,956 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:26:50,956 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:26:50,956 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=50000
2025-08-09 00:26:50,957 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:26:50,957 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:26:51,017 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:26:51,018 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-09 00:26:51,018 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-09 00:26:51,022 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:26:51,022 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:26:51,022 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=100000
2025-08-09 00:26:51,023 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:26:51,024 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:26:51,085 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:26:51,085 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-09 00:26:51,173 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-09 00:26:51,174 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-08-09 00:26:51,214 - app.api.itinerary - INFO - Itinerary e1396b52-8469-4648-9234-98d1a37dfd13 persisted successfully
2025-08-09 00:26:51,215 - app.api.itinerary - INFO - Successfully generated itinerary e1396b52-8469-4648-9234-98d1a37dfd13 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-09 00:26:51,215 - app.api.itinerary - INFO - itinerary_generation completed in 0.50s
2025-08-09 00:26:53,540 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:26:53,569 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:26:53,569 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:26:53,571 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:26:53,571 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:26:53,572 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:26:53,662 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:26:53,736 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:26:53,737 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:26:53,746 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:26:53,769 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:26:53,770 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:26:53,770 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:26:53,772 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:26:53,773 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:26:53,847 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:26:53,931 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:26:53,932 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:33:37,950 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:33:38,002 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:38,003 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:38,004 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:33:38,005 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:33:38,006 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:33:38,189 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:33:38,329 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:33:38,329 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:33:40,363 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:33:40,388 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:40,389 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:40,392 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:33:40,393 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:33:40,397 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:33:40,551 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:33:40,829 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:33:40,832 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:33:42,373 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:33:42,415 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:42,418 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:42,421 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:33:42,423 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:33:42,424 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:33:42,648 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:33:42,817 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:33:42,818 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:33:45,545 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:33:45,586 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:45,586 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:45,591 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:33:45,594 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:33:45,595 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:33:45,755 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:33:45,930 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:33:45,931 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:33:46,950 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:33:46,994 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:46,995 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:46,996 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:33:46,997 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:33:47,007 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:33:47,175 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:33:47,368 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:33:47,376 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:33:48,631 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:33:48,661 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:48,663 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:48,665 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:33:48,666 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:33:48,667 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:33:48,817 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:33:49,037 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:33:49,038 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:33:49,418 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:33:49,461 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:49,469 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:49,472 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:33:49,474 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:33:49,476 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:33:49,648 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:33:49,894 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:33:49,895 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:33:51,133 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:33:51,178 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:51,179 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:51,180 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:33:51,180 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:33:51,181 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:33:51,310 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:33:51,447 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:33:51,447 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:33:52,907 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:33:52,948 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:52,948 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:33:52,949 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:33:52,950 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:33:52,951 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:33:53,076 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:33:53,305 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:33:53,306 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:34:00,614 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:34:00,644 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:00,644 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:00,645 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:34:00,646 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:34:00,646 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:34:00,735 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:34:00,875 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:34:00,876 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:34:09,216 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:34:09,239 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:09,240 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:09,241 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:34:09,243 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:34:09,244 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:34:09,357 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:34:09,482 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:34:09,483 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:34:10,908 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:34:10,937 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:10,938 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:10,938 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:34:10,941 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:34:10,942 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:34:11,066 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:34:11,207 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:34:11,208 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:34:37,978 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:34:38,004 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:38,004 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:38,005 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:34:38,007 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:34:38,008 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:34:38,146 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:34:38,402 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:34:38,403 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:34:40,080 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:34:40,107 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:40,108 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:40,108 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:34:40,109 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:34:40,111 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:34:40,205 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:34:40,344 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:34:40,345 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:34:44,755 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:34:44,789 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:44,790 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:44,790 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:34:44,791 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:34:44,792 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:34:44,926 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:34:45,062 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:34:45,065 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:34:55,521 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:34:55,548 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:55,548 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:55,551 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:34:55,552 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:34:55,553 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:34:55,711 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:34:55,890 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:34:55,891 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:34:57,273 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:34:57,297 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:57,297 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:34:57,298 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:34:57,298 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:34:57,299 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:34:57,405 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:34:57,547 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:34:57,548 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:35:00,523 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:35:00,557 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:35:00,558 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:35:00,558 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:35:00,560 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:35:00,562 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:35:00,722 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:35:00,838 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:35:00,839 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:35:15,019 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:35:15,239 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:35:15,260 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:35:15,260 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:35:15,261 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:35:15,261 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:35:15,262 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:35:15,404 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:35:15,601 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:35:15,602 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:35:15,827 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:35:15,863 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:35:15,863 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:35:15,864 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:35:15,865 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:35:15,868 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:35:16,007 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:35:16,141 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:35:16,142 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:35:40,016 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:36:08,920 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-09 00:36:09,219 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-09 00:36:09,220 - app.core.security - INFO - user_authentication completed in 0.31s
2025-08-09 00:36:09,221 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-09 00:36:09,223 - app.core.security - INFO - Access token created successfully
2025-08-09 00:36:09,223 - app.core.security - INFO - Refresh token created successfully
2025-08-09 00:36:09,224 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-09 00:36:09,224 - app.api.auth - INFO - user_login completed in 0.31s
2025-08-09 00:36:09,274 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:36:09,443 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:36:09,457 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:36:09,478 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-09 00:36:09,479 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-09 00:36:09,480 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-09 00:36:09,488 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-09 00:36:09,490 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-09 00:36:09,491 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-09 00:36:17,973 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-09 00:36:17,975 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-09 00:36:17,975 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-09 00:36:17,976 - app.api.nlp - INFO - nlp_parsing completed in 0.04s
2025-08-09 00:36:20,758 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:36:20,789 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-09 00:36:20,790 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-09 00:36:20,793 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-09 00:36:20,796 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-09 00:36:20,798 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-09 00:36:20,804 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-09 00:36:20,811 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:36:20,811 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:36:20,812 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=20000
2025-08-09 00:36:20,812 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:36:20,813 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:36:20,886 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:36:20,887 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-09 00:36:20,888 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-09 00:36:20,893 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:36:20,894 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:36:20,895 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=50000
2025-08-09 00:36:20,895 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:36:20,896 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:36:20,978 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:36:20,979 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-09 00:36:20,980 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-09 00:36:20,987 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-08-09 00:36:20,991 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:36:20,992 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=100000
2025-08-09 00:36:20,996 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:36:20,997 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:36:21,061 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:36:21,062 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-09 00:36:21,158 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-09 00:36:21,159 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-08-09 00:36:21,185 - app.api.itinerary - INFO - Itinerary 26bced80-f5ec-4515-95e0-9f46e4a091b3 persisted successfully
2025-08-09 00:36:21,185 - app.api.itinerary - INFO - Successfully generated itinerary 26bced80-f5ec-4515-95e0-9f46e4a091b3 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-09 00:36:21,186 - app.api.itinerary - INFO - itinerary_generation completed in 0.42s
2025-08-09 00:36:23,350 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:36:23,380 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:36:23,381 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:36:23,381 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:36:23,382 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:36:23,382 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:36:23,478 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:36:23,586 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:36:23,586 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-09 00:36:23,596 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-09 00:36:23,621 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:36:23,622 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-08-09 00:36:23,622 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-08-09 00:36:23,623 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, lat=48.8606, lon=2.3376, price=20
2025-08-09 00:36:23,624 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-09 00:36:23,704 - app.api.itinerary - INFO - Built POI list with 32 items
2025-08-09 00:36:23,823 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-09 00:36:23,823 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-11 19:54:51,360 - app.main - INFO - Shutting down application...
2025-08-11 19:54:51,364 - app.main - INFO - Closing database connections...
2025-08-11 19:54:51,366 - app.db.session - INFO - Closing database connections...
2025-08-11 19:54:51,558 - app.db.session - INFO - Database connections closed
2025-08-11 19:54:51,562 - app.main - INFO - Database connections closed successfully
2025-08-11 19:55:07,346 - app.main - INFO - Starting application...
2025-08-11 19:55:07,347 - app.main - INFO - Initializing database manager...
2025-08-11 19:55:07,348 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 19:55:07,399 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 19:55:07,500 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 19:55:07,501 - app.main - INFO - Database manager initialized successfully
2025-08-11 19:55:51,165 - app.main - INFO - Shutting down application...
2025-08-11 19:55:51,165 - app.main - INFO - Closing database connections...
2025-08-11 19:55:51,166 - app.db.session - INFO - Closing database connections...
2025-08-11 19:55:51,170 - app.db.session - INFO - Database connections closed
2025-08-11 19:55:51,170 - app.main - INFO - Database connections closed successfully
2025-08-11 19:56:01,268 - app.main - INFO - Starting application...
2025-08-11 19:56:01,269 - app.main - INFO - Initializing database manager...
2025-08-11 19:56:01,270 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 19:56:01,297 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 19:56:01,356 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 19:56:01,357 - app.main - INFO - Database manager initialized successfully
2025-08-11 20:03:38,593 - app.main - INFO - Shutting down application...
2025-08-11 20:03:38,593 - app.main - INFO - Closing database connections...
2025-08-11 20:03:38,593 - app.db.session - INFO - Closing database connections...
2025-08-11 20:03:38,598 - app.db.session - INFO - Database connections closed
2025-08-11 20:03:38,598 - app.main - INFO - Database connections closed successfully
2025-08-11 20:03:48,813 - app.main - INFO - Starting application...
2025-08-11 20:03:48,813 - app.main - INFO - Initializing database manager...
2025-08-11 20:03:48,814 - app.db.session - INFO - Database URL prepared: postgresql://localhost:5432/travel
2025-08-11 20:03:48,838 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 20:03:48,852 - app.db.session - ERROR - Unexpected session error: Multiple exceptions: [Errno 111] Connect call failed ('::1', 5432, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 5432)
2025-08-11 20:03:48,853 - app.db.session - ERROR - Database health check failed: Multiple exceptions: [Errno 111] Connect call failed ('::1', 5432, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 5432)
2025-08-11 20:03:48,854 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 20:03:48,854 - app.main - INFO - Database manager initialized successfully
2025-08-11 20:07:48,747 - app.main - INFO - Shutting down application...
2025-08-11 20:07:48,748 - app.main - INFO - Closing database connections...
2025-08-11 20:07:48,749 - app.db.session - INFO - Closing database connections...
2025-08-11 20:07:48,751 - app.db.session - INFO - Database connections closed
2025-08-11 20:07:48,752 - app.main - INFO - Database connections closed successfully
2025-08-11 20:07:56,694 - app.main - INFO - Starting application...
2025-08-11 20:07:56,694 - app.main - INFO - Initializing database manager...
2025-08-11 20:07:56,695 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/travel
2025-08-11 20:07:56,715 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 20:07:56,753 - app.db.session - ERROR - Unexpected session error: database "travel" does not exist
2025-08-11 20:07:56,754 - app.db.session - ERROR - Database health check failed: database "travel" does not exist
2025-08-11 20:07:56,755 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 20:07:56,756 - app.main - INFO - Database manager initialized successfully
2025-08-11 20:10:30,019 - app.main - INFO - Shutting down application...
2025-08-11 20:10:30,019 - app.main - INFO - Closing database connections...
2025-08-11 20:10:30,020 - app.db.session - INFO - Closing database connections...
2025-08-11 20:10:30,022 - app.db.session - INFO - Database connections closed
2025-08-11 20:10:30,022 - app.main - INFO - Database connections closed successfully
2025-08-11 20:10:38,291 - app.main - INFO - Starting application...
2025-08-11 20:10:38,292 - app.main - INFO - Initializing database manager...
2025-08-11 20:10:38,293 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 20:10:38,328 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 20:10:38,404 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 20:10:38,404 - app.main - INFO - Database manager initialized successfully
2025-08-11 20:11:26,080 - app.main - INFO - Shutting down application...
2025-08-11 20:11:26,080 - app.main - INFO - Closing database connections...
2025-08-11 20:11:26,081 - app.db.session - INFO - Closing database connections...
2025-08-11 20:11:26,086 - app.db.session - INFO - Database connections closed
2025-08-11 20:11:26,087 - app.main - INFO - Database connections closed successfully
2025-08-11 20:11:35,663 - app.main - INFO - Starting application...
2025-08-11 20:11:35,664 - app.main - INFO - Initializing database manager...
2025-08-11 20:11:35,664 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 20:11:35,691 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 20:11:35,750 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 20:11:35,750 - app.main - INFO - Database manager initialized successfully
2025-08-11 20:12:47,121 - app.main - INFO - Shutting down application...
2025-08-11 20:12:47,121 - app.main - INFO - Closing database connections...
2025-08-11 20:12:47,122 - app.db.session - INFO - Closing database connections...
2025-08-11 20:12:47,128 - app.db.session - INFO - Database connections closed
2025-08-11 20:12:47,128 - app.main - INFO - Database connections closed successfully
2025-08-11 20:12:54,783 - app.main - INFO - Starting application...
2025-08-11 20:12:54,784 - app.main - INFO - Initializing database manager...
2025-08-11 20:12:54,785 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 20:12:54,807 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 20:12:54,854 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 20:12:54,855 - app.main - INFO - Database manager initialized successfully
2025-08-11 20:14:01,905 - app.main - INFO - Shutting down application...
2025-08-11 20:14:01,906 - app.main - INFO - Closing database connections...
2025-08-11 20:14:01,906 - app.db.session - INFO - Closing database connections...
2025-08-11 20:14:01,910 - app.db.session - INFO - Database connections closed
2025-08-11 20:14:01,911 - app.main - INFO - Database connections closed successfully
2025-08-11 20:14:11,406 - app.main - INFO - Starting application...
2025-08-11 20:14:11,407 - app.main - INFO - Initializing database manager...
2025-08-11 20:14:11,407 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 20:14:11,438 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 20:14:11,505 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 20:14:11,506 - app.main - INFO - Database manager initialized successfully
2025-08-11 20:14:23,051 - app.main - INFO - Shutting down application...
2025-08-11 20:14:23,051 - app.main - INFO - Closing database connections...
2025-08-11 20:14:23,052 - app.db.session - INFO - Closing database connections...
2025-08-11 20:14:23,056 - app.db.session - INFO - Database connections closed
2025-08-11 20:14:23,057 - app.main - INFO - Database connections closed successfully
2025-08-11 20:14:32,846 - app.main - INFO - Starting application...
2025-08-11 20:14:32,847 - app.main - INFO - Initializing database manager...
2025-08-11 20:14:32,847 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 20:14:32,869 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 20:14:32,922 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 20:14:32,922 - app.main - INFO - Database manager initialized successfully
2025-08-11 20:16:04,382 - app.main - INFO - Shutting down application...
2025-08-11 20:16:04,383 - app.main - INFO - Closing database connections...
2025-08-11 20:16:04,384 - app.db.session - INFO - Closing database connections...
2025-08-11 20:16:04,392 - app.db.session - INFO - Database connections closed
2025-08-11 20:16:04,392 - app.main - INFO - Database connections closed successfully
2025-08-11 20:16:13,187 - app.main - INFO - Starting application...
2025-08-11 20:16:13,188 - app.main - INFO - Initializing database manager...
2025-08-11 20:16:13,189 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 20:16:13,239 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 20:16:13,363 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 20:16:13,364 - app.main - INFO - Database manager initialized successfully
2025-08-11 20:16:44,383 - app.main - INFO - Shutting down application...
2025-08-11 20:16:44,383 - app.main - INFO - Closing database connections...
2025-08-11 20:16:44,384 - app.db.session - INFO - Closing database connections...
2025-08-11 20:16:44,387 - app.db.session - INFO - Database connections closed
2025-08-11 20:16:44,387 - app.main - INFO - Database connections closed successfully
2025-08-11 20:16:52,944 - app.main - INFO - Starting application...
2025-08-11 20:16:52,945 - app.main - INFO - Initializing database manager...
2025-08-11 20:16:52,946 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 20:16:52,994 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 20:16:53,097 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 20:16:53,097 - app.main - INFO - Database manager initialized successfully
2025-08-11 20:17:07,046 - app.main - INFO - Shutting down application...
2025-08-11 20:17:07,047 - app.main - INFO - Closing database connections...
2025-08-11 20:17:07,047 - app.db.session - INFO - Closing database connections...
2025-08-11 20:17:07,051 - app.db.session - INFO - Database connections closed
2025-08-11 20:17:07,052 - app.main - INFO - Database connections closed successfully
2025-08-11 20:17:15,495 - app.main - INFO - Starting application...
2025-08-11 20:17:15,495 - app.main - INFO - Initializing database manager...
2025-08-11 20:17:15,496 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 20:17:15,528 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 20:17:15,616 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 20:17:15,618 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:34:37,466 - app.main - INFO - Shutting down application...
2025-08-11 21:34:37,466 - app.main - INFO - Closing database connections...
2025-08-11 21:34:37,467 - app.db.session - INFO - Closing database connections...
2025-08-11 21:34:37,472 - app.db.session - INFO - Database connections closed
2025-08-11 21:34:37,472 - app.main - INFO - Database connections closed successfully
2025-08-11 21:34:45,811 - app.main - INFO - Starting application...
2025-08-11 21:34:45,812 - app.main - INFO - Initializing database manager...
2025-08-11 21:34:45,812 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:34:45,837 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:34:45,891 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:34:45,892 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:37:20,124 - app.main - INFO - Shutting down application...
2025-08-11 21:37:20,124 - app.main - INFO - Closing database connections...
2025-08-11 21:37:20,125 - app.db.session - INFO - Closing database connections...
2025-08-11 21:37:20,130 - app.db.session - INFO - Database connections closed
2025-08-11 21:37:20,130 - app.main - INFO - Database connections closed successfully
2025-08-11 21:37:29,913 - app.main - INFO - Starting application...
2025-08-11 21:37:29,913 - app.main - INFO - Initializing database manager...
2025-08-11 21:37:29,914 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:37:29,943 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:37:29,998 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:37:29,998 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:38:24,386 - app.main - INFO - Shutting down application...
2025-08-11 21:38:24,386 - app.main - INFO - Closing database connections...
2025-08-11 21:38:24,387 - app.db.session - INFO - Closing database connections...
2025-08-11 21:38:24,391 - app.db.session - INFO - Database connections closed
2025-08-11 21:38:24,392 - app.main - INFO - Database connections closed successfully
2025-08-11 21:38:32,300 - app.main - INFO - Starting application...
2025-08-11 21:38:32,301 - app.main - INFO - Initializing database manager...
2025-08-11 21:38:32,301 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:38:32,323 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:38:32,374 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:38:32,374 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:40:22,426 - app.main - INFO - Shutting down application...
2025-08-11 21:40:22,426 - app.main - INFO - Closing database connections...
2025-08-11 21:40:22,427 - app.db.session - INFO - Closing database connections...
2025-08-11 21:40:22,431 - app.db.session - INFO - Database connections closed
2025-08-11 21:40:22,432 - app.main - INFO - Database connections closed successfully
2025-08-11 21:40:33,326 - app.main - INFO - Starting application...
2025-08-11 21:40:33,326 - app.main - INFO - Initializing database manager...
2025-08-11 21:40:33,328 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:40:33,361 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:40:33,427 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:40:33,428 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:40:45,671 - app.main - INFO - Shutting down application...
2025-08-11 21:40:45,672 - app.main - INFO - Closing database connections...
2025-08-11 21:40:45,673 - app.db.session - INFO - Closing database connections...
2025-08-11 21:40:45,674 - app.db.session - INFO - Database connections closed
2025-08-11 21:40:45,675 - app.main - INFO - Database connections closed successfully
2025-08-11 21:40:52,600 - app.main - INFO - Starting application...
2025-08-11 21:40:52,601 - app.main - INFO - Initializing database manager...
2025-08-11 21:40:52,601 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:40:52,622 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:40:52,669 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:40:52,669 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:41:02,101 - app.main - INFO - Shutting down application...
2025-08-11 21:41:02,101 - app.main - INFO - Closing database connections...
2025-08-11 21:41:02,102 - app.db.session - INFO - Closing database connections...
2025-08-11 21:41:02,106 - app.db.session - INFO - Database connections closed
2025-08-11 21:41:02,107 - app.main - INFO - Database connections closed successfully
2025-08-11 21:41:11,317 - app.main - INFO - Starting application...
2025-08-11 21:41:11,317 - app.main - INFO - Initializing database manager...
2025-08-11 21:41:11,319 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:41:11,346 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:41:11,405 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:41:11,405 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:44:36,413 - app.main - INFO - Shutting down application...
2025-08-11 21:44:36,413 - app.main - INFO - Closing database connections...
2025-08-11 21:44:36,414 - app.db.session - INFO - Closing database connections...
2025-08-11 21:44:36,420 - app.db.session - INFO - Database connections closed
2025-08-11 21:44:36,420 - app.main - INFO - Database connections closed successfully
2025-08-11 21:44:48,813 - app.main - INFO - Starting application...
2025-08-11 21:44:48,814 - app.main - INFO - Initializing database manager...
2025-08-11 21:44:48,816 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:44:48,871 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:44:48,959 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:44:48,960 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:45:01,813 - app.main - INFO - Shutting down application...
2025-08-11 21:45:01,814 - app.main - INFO - Closing database connections...
2025-08-11 21:45:01,814 - app.db.session - INFO - Closing database connections...
2025-08-11 21:45:01,818 - app.db.session - INFO - Database connections closed
2025-08-11 21:45:01,819 - app.main - INFO - Database connections closed successfully
2025-08-11 21:45:09,246 - app.main - INFO - Starting application...
2025-08-11 21:45:09,247 - app.main - INFO - Initializing database manager...
2025-08-11 21:45:09,247 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:45:09,284 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:45:09,336 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:45:09,336 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:47:36,525 - app.main - INFO - Shutting down application...
2025-08-11 21:47:36,526 - app.main - INFO - Closing database connections...
2025-08-11 21:47:36,526 - app.db.session - INFO - Closing database connections...
2025-08-11 21:47:36,533 - app.db.session - INFO - Database connections closed
2025-08-11 21:47:36,533 - app.main - INFO - Database connections closed successfully
2025-08-11 21:47:45,639 - app.main - INFO - Starting application...
2025-08-11 21:47:45,640 - app.main - INFO - Initializing database manager...
2025-08-11 21:47:45,640 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:47:45,668 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:47:45,719 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:47:45,720 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:47:57,861 - app.main - INFO - Shutting down application...
2025-08-11 21:47:57,862 - app.main - INFO - Closing database connections...
2025-08-11 21:47:57,862 - app.db.session - INFO - Closing database connections...
2025-08-11 21:47:57,866 - app.db.session - INFO - Database connections closed
2025-08-11 21:47:57,866 - app.main - INFO - Database connections closed successfully
2025-08-11 21:48:12,887 - app.main - INFO - Starting application...
2025-08-11 21:48:12,888 - app.main - INFO - Initializing database manager...
2025-08-11 21:48:12,889 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:48:12,919 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:48:12,985 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:48:12,985 - app.main - INFO - Database manager initialized successfully
2025-08-11 21:49:52,811 - app.main - INFO - Shutting down application...
2025-08-11 21:49:52,812 - app.main - INFO - Closing database connections...
2025-08-11 21:49:52,812 - app.db.session - INFO - Closing database connections...
2025-08-11 21:49:52,815 - app.db.session - INFO - Database connections closed
2025-08-11 21:49:52,816 - app.main - INFO - Database connections closed successfully
2025-08-11 21:50:00,454 - app.main - INFO - Starting application...
2025-08-11 21:50:00,455 - app.main - INFO - Initializing database manager...
2025-08-11 21:50:00,456 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 21:50:00,486 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 21:50:00,544 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 21:50:00,544 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:07:20,008 - app.main - INFO - Shutting down application...
2025-08-11 22:07:20,015 - app.main - INFO - Closing database connections...
2025-08-11 22:07:20,016 - app.db.session - INFO - Closing database connections...
2025-08-11 22:07:20,021 - app.db.session - INFO - Database connections closed
2025-08-11 22:07:20,021 - app.main - INFO - Database connections closed successfully
2025-08-11 22:07:30,733 - app.main - INFO - Starting application...
2025-08-11 22:07:30,734 - app.main - INFO - Initializing database manager...
2025-08-11 22:07:30,736 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:07:30,763 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:07:30,820 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:07:30,821 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:07:46,606 - app.main - INFO - Shutting down application...
2025-08-11 22:07:46,607 - app.main - INFO - Closing database connections...
2025-08-11 22:07:46,607 - app.db.session - INFO - Closing database connections...
2025-08-11 22:07:46,613 - app.db.session - INFO - Database connections closed
2025-08-11 22:07:46,614 - app.main - INFO - Database connections closed successfully
2025-08-11 22:07:58,791 - app.main - INFO - Starting application...
2025-08-11 22:07:58,793 - app.main - INFO - Initializing database manager...
2025-08-11 22:07:58,799 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:07:58,846 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:07:58,933 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:07:58,934 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:08:16,928 - app.main - INFO - Shutting down application...
2025-08-11 22:08:16,929 - app.main - INFO - Closing database connections...
2025-08-11 22:08:16,931 - app.db.session - INFO - Closing database connections...
2025-08-11 22:08:16,941 - app.db.session - INFO - Database connections closed
2025-08-11 22:08:16,941 - app.main - INFO - Database connections closed successfully
2025-08-11 22:08:27,439 - app.main - INFO - Starting application...
2025-08-11 22:08:27,441 - app.main - INFO - Initializing database manager...
2025-08-11 22:08:27,442 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:08:27,514 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:08:27,632 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:08:27,632 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:08:43,087 - app.main - INFO - Shutting down application...
2025-08-11 22:08:43,088 - app.main - INFO - Closing database connections...
2025-08-11 22:08:43,088 - app.db.session - INFO - Closing database connections...
2025-08-11 22:08:43,093 - app.db.session - INFO - Database connections closed
2025-08-11 22:08:43,094 - app.main - INFO - Database connections closed successfully
2025-08-11 22:08:53,617 - app.main - INFO - Starting application...
2025-08-11 22:08:53,619 - app.main - INFO - Initializing database manager...
2025-08-11 22:08:53,620 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:08:53,668 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:08:53,760 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:08:53,761 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:09:06,911 - app.main - INFO - Shutting down application...
2025-08-11 22:09:06,911 - app.main - INFO - Closing database connections...
2025-08-11 22:09:06,912 - app.db.session - INFO - Closing database connections...
2025-08-11 22:09:06,917 - app.db.session - INFO - Database connections closed
2025-08-11 22:09:06,918 - app.main - INFO - Database connections closed successfully
2025-08-11 22:09:16,298 - app.main - INFO - Starting application...
2025-08-11 22:09:16,299 - app.main - INFO - Initializing database manager...
2025-08-11 22:09:16,299 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:09:16,325 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:09:16,377 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:09:16,377 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:18:23,533 - app.main - INFO - Shutting down application...
2025-08-11 22:18:23,534 - app.main - INFO - Closing database connections...
2025-08-11 22:18:23,535 - app.db.session - INFO - Closing database connections...
2025-08-11 22:18:23,542 - app.db.session - INFO - Database connections closed
2025-08-11 22:18:23,543 - app.main - INFO - Database connections closed successfully
2025-08-11 22:18:32,797 - app.main - INFO - Starting application...
2025-08-11 22:18:32,798 - app.main - INFO - Initializing database manager...
2025-08-11 22:18:32,798 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:18:32,831 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:18:32,918 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:18:32,919 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:18:43,212 - app.main - INFO - Starting application...
2025-08-11 22:18:43,212 - app.main - INFO - Initializing database manager...
2025-08-11 22:18:43,213 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:18:43,246 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:18:43,319 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:18:43,319 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:18:45,930 - app.main - INFO - Shutting down application...
2025-08-11 22:18:45,931 - app.main - INFO - Closing database connections...
2025-08-11 22:18:45,932 - app.db.session - INFO - Closing database connections...
2025-08-11 22:18:45,937 - app.db.session - INFO - Database connections closed
2025-08-11 22:18:45,938 - app.main - INFO - Database connections closed successfully
2025-08-11 22:18:55,521 - app.main - INFO - Starting application...
2025-08-11 22:18:55,522 - app.main - INFO - Initializing database manager...
2025-08-11 22:18:55,523 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:18:55,569 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:18:55,655 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:18:55,655 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:19:27,105 - app.main - INFO - Shutting down application...
2025-08-11 22:19:27,108 - app.main - INFO - Closing database connections...
2025-08-11 22:19:27,111 - app.db.session - INFO - Closing database connections...
2025-08-11 22:19:27,118 - app.db.session - INFO - Database connections closed
2025-08-11 22:19:27,122 - app.main - INFO - Database connections closed successfully
2025-08-11 22:19:46,934 - app.main - INFO - Starting application...
2025-08-11 22:19:46,943 - app.main - INFO - Initializing database manager...
2025-08-11 22:19:46,945 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:19:47,009 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:19:47,118 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:19:47,119 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:20:02,494 - app.main - INFO - Shutting down application...
2025-08-11 22:20:02,494 - app.main - INFO - Closing database connections...
2025-08-11 22:20:02,495 - app.db.session - INFO - Closing database connections...
2025-08-11 22:20:02,500 - app.db.session - INFO - Database connections closed
2025-08-11 22:20:02,500 - app.main - INFO - Database connections closed successfully
2025-08-11 22:20:14,517 - app.main - INFO - Starting application...
2025-08-11 22:20:14,518 - app.main - INFO - Initializing database manager...
2025-08-11 22:20:14,524 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:20:14,579 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:20:14,679 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:20:14,679 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:20:31,309 - app.main - INFO - Shutting down application...
2025-08-11 22:20:31,310 - app.main - INFO - Closing database connections...
2025-08-11 22:20:31,311 - app.db.session - INFO - Closing database connections...
2025-08-11 22:20:31,317 - app.db.session - INFO - Database connections closed
2025-08-11 22:20:31,318 - app.main - INFO - Database connections closed successfully
2025-08-11 22:20:40,991 - app.main - INFO - Starting application...
2025-08-11 22:20:40,992 - app.main - INFO - Initializing database manager...
2025-08-11 22:20:40,996 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:20:41,030 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:20:41,102 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:20:41,102 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:20:42,410 - app.main - INFO - Shutting down application...
2025-08-11 22:20:42,411 - app.main - INFO - Closing database connections...
2025-08-11 22:20:42,412 - app.db.session - INFO - Closing database connections...
2025-08-11 22:20:42,416 - app.db.session - INFO - Database connections closed
2025-08-11 22:20:42,417 - app.main - INFO - Database connections closed successfully
2025-08-11 22:20:52,021 - app.main - INFO - Starting application...
2025-08-11 22:20:52,022 - app.main - INFO - Initializing database manager...
2025-08-11 22:20:52,023 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:20:52,053 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:20:52,126 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:20:52,127 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:21:01,263 - app.main - INFO - Starting application...
2025-08-11 22:21:01,264 - app.main - INFO - Initializing database manager...
2025-08-11 22:21:01,265 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:21:01,295 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:21:01,354 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:21:01,355 - app.main - INFO - Database manager initialized successfully
2025-08-11 22:21:25,448 - app.main - INFO - Shutting down application...
2025-08-11 22:21:25,449 - app.main - INFO - Closing database connections...
2025-08-11 22:21:25,450 - app.db.session - INFO - Closing database connections...
2025-08-11 22:21:25,454 - app.db.session - INFO - Database connections closed
2025-08-11 22:21:25,454 - app.main - INFO - Database connections closed successfully
2025-08-11 22:21:35,088 - app.main - INFO - Starting application...
2025-08-11 22:21:35,089 - app.main - INFO - Initializing database manager...
2025-08-11 22:21:35,095 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 22:21:35,141 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 22:21:35,236 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 22:21:35,237 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:10:14,630 - app.main - INFO - Starting application...
2025-08-11 23:10:14,631 - app.main - INFO - Initializing database manager...
2025-08-11 23:10:14,632 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 23:10:14,670 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 23:10:14,723 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 23:10:14,723 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:14:05,600 - app.main - INFO - Shutting down application...
2025-08-11 23:14:05,600 - app.main - INFO - Closing database connections...
2025-08-11 23:14:05,601 - app.db.session - INFO - Closing database connections...
2025-08-11 23:14:05,609 - app.db.session - INFO - Database connections closed
2025-08-11 23:14:05,610 - app.main - INFO - Database connections closed successfully
2025-08-11 23:14:25,542 - app.main - INFO - Starting application...
2025-08-11 23:14:25,545 - app.main - INFO - Initializing database manager...
2025-08-11 23:14:25,547 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 23:14:25,602 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 23:14:25,683 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 23:14:25,684 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:20:08,642 - app.main - INFO - Shutting down application...
2025-08-11 23:20:08,643 - app.main - INFO - Closing database connections...
2025-08-11 23:20:08,644 - app.db.session - INFO - Closing database connections...
2025-08-11 23:20:08,650 - app.db.session - INFO - Database connections closed
2025-08-11 23:20:08,650 - app.main - INFO - Database connections closed successfully
2025-08-11 23:20:19,754 - app.main - INFO - Starting application...
2025-08-11 23:20:19,756 - app.main - INFO - Initializing database manager...
2025-08-11 23:20:19,756 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 23:20:19,794 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 23:20:19,852 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 23:20:19,855 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:24:21,890 - app.main - INFO - Shutting down application...
2025-08-11 23:24:21,892 - app.main - INFO - Closing database connections...
2025-08-11 23:24:21,896 - app.db.session - INFO - Closing database connections...
2025-08-11 23:24:21,907 - app.db.session - INFO - Database connections closed
2025-08-11 23:24:21,908 - app.main - INFO - Database connections closed successfully
2025-08-11 23:24:34,159 - app.main - INFO - Starting application...
2025-08-11 23:24:34,160 - app.main - INFO - Initializing database manager...
2025-08-11 23:24:34,160 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 23:24:34,191 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 23:24:34,240 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 23:24:34,241 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:25:32,138 - app.main - INFO - Shutting down application...
2025-08-11 23:25:32,138 - app.main - INFO - Closing database connections...
2025-08-11 23:25:32,139 - app.db.session - INFO - Closing database connections...
2025-08-11 23:25:32,143 - app.db.session - INFO - Database connections closed
2025-08-11 23:25:32,144 - app.main - INFO - Database connections closed successfully
2025-08-11 23:25:44,681 - app.main - INFO - Starting application...
2025-08-11 23:25:44,683 - app.main - INFO - Initializing database manager...
2025-08-11 23:25:44,684 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 23:25:44,725 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 23:25:44,788 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 23:25:44,789 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:26:36,758 - app.main - INFO - Shutting down application...
2025-08-11 23:26:36,759 - app.main - INFO - Closing database connections...
2025-08-11 23:26:36,759 - app.db.session - INFO - Closing database connections...
2025-08-11 23:26:36,764 - app.db.session - INFO - Database connections closed
2025-08-11 23:26:36,765 - app.main - INFO - Database connections closed successfully
2025-08-11 23:26:47,799 - app.main - INFO - Starting application...
2025-08-11 23:26:47,801 - app.main - INFO - Initializing database manager...
2025-08-11 23:26:47,801 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 23:26:47,829 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 23:26:47,883 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 23:26:47,883 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:29:45,143 - app.main - INFO - Shutting down application...
2025-08-11 23:29:45,144 - app.main - INFO - Closing database connections...
2025-08-11 23:29:45,145 - app.db.session - INFO - Closing database connections...
2025-08-11 23:29:45,151 - app.db.session - INFO - Database connections closed
2025-08-11 23:29:45,152 - app.main - INFO - Database connections closed successfully
2025-08-11 23:29:59,937 - app.main - INFO - Starting application...
2025-08-11 23:29:59,938 - app.main - INFO - Initializing database manager...
2025-08-11 23:29:59,940 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 23:29:59,986 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 23:30:00,077 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 23:30:00,079 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:30:25,077 - app.main - INFO - Shutting down application...
2025-08-11 23:30:25,078 - app.main - INFO - Closing database connections...
2025-08-11 23:30:25,078 - app.db.session - INFO - Closing database connections...
2025-08-11 23:30:25,082 - app.db.session - INFO - Database connections closed
2025-08-11 23:30:25,083 - app.main - INFO - Database connections closed successfully
2025-08-11 23:30:36,177 - app.main - INFO - Starting application...
2025-08-11 23:30:36,178 - app.main - INFO - Initializing database manager...
2025-08-11 23:30:36,179 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 23:30:36,224 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 23:30:36,295 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 23:30:36,296 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:31:43,506 - app.main - INFO - Starting application...
2025-08-11 23:31:43,507 - app.main - INFO - Initializing database manager...
2025-08-11 23:31:43,508 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 23:31:43,542 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 23:31:43,601 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 23:31:43,601 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:36:44,997 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-11 23:36:45,396 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-11 23:36:45,397 - app.core.security - INFO - user_authentication completed in 0.48s
2025-08-11 23:36:45,398 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-11 23:36:45,417 - app.core.security - INFO - Access token created successfully
2025-08-11 23:36:45,418 - app.core.security - INFO - Refresh token created successfully
2025-08-11 23:36:45,419 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-11 23:36:45,420 - app.api.auth - INFO - user_login completed in 0.50s
2025-08-11 23:37:05,516 - app.core.security - INFO - Current user resolved: testuser123
2025-08-11 23:37:07,468 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-11 23:37:07,470 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-11 23:37:07,493 - app.api.itinerary - INFO - itinerary_generation completed in 1.97s
2025-08-11 23:37:07,493 - app.db.session - ERROR - Unexpected session error: 404: No destination found matching 'Rome'
2025-08-11 23:37:26,116 - app.core.security - INFO - Current user resolved: testuser123
2025-08-11 23:37:26,167 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-11 23:37:26,168 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-11 23:37:26,171 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-11 23:37:26,183 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-11 23:37:26,188 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-11 23:37:26,198 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-11 23:37:26,344 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '198f0814-bf17-4849-8a01-02c7620d7833', 'e60cb649-146d-41a3-a20c-62ac68865086', '484755be-3e2b-4389-bd05-0a7081d029c7', 'cb136867-635d-4993-8104-1c4c02ac5343', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '6c6c6e0b-fa9a-4393-b9c6-8879572b4bb1', '446ab6c2-ae10-4e6c-8ab7-fd55617c70aa']
2025-08-11 23:37:26,345 - app.api.itinerary - INFO - Fetched 8 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('484755be-3e2b-4389-bd05-0a7081d029c7'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-11 23:37:26,346 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-08-11 23:37:26,347 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, lat=40.759, lon=-73.9845, price=120
2025-08-11 23:37:26,347 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:37:26,348 - app.api.itinerary - INFO - Adding activity POI: id=484755be-3e2b-4389-bd05-0a7081d029c7, lat=40.8622871, lon=-73.8773946, price=None
2025-08-11 23:37:26,348 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:37:26,349 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-11 23:37:26,349 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:37:26,350 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, lat=40.745914, lon=-73.8467247, price=None
2025-08-11 23:37:26,350 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:37:26,351 - app.api.itinerary - INFO - Adding activity POI: id=47d2b428-dc0c-440d-8a9d-9778f30a4e47, lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-11 23:37:26,352 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:37:26,352 - app.api.itinerary - INFO - Adding activity POI: id=cb136867-635d-4993-8104-1c4c02ac5343, lat=40.745914, lon=-73.8467247, price=None
2025-08-11 23:37:26,352 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:37:26,353 - app.api.itinerary - INFO - Adding activity POI: id=e60cb649-146d-41a3-a20c-62ac68865086, lat=40.779349, lon=-73.973908, price=None
2025-08-11 23:37:26,353 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:37:26,354 - app.api.itinerary - INFO - Adding activity POI: id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62, lat=40.745914, lon=-73.846725, price=None
2025-08-11 23:37:26,354 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 100.0
2025-08-11 23:37:26,355 - app.api.itinerary - INFO - Activities after budget filter: 7 (before: 9)
2025-08-11 23:37:26,791 - app.api.itinerary - INFO - Built POI list with 38 items
2025-08-11 23:37:26,792 - app.api.itinerary - INFO - build_poi_list found 7 activities with radius_m=20000
2025-08-11 23:37:26,926 - app.api.itinerary - INFO - Created schedule for 1 days
2025-08-11 23:37:26,927 - app.api.itinerary - INFO - Scheduled items: 1 days with enriched details
2025-08-11 23:37:27,005 - app.api.itinerary - INFO - Itinerary 6908c992-bcac-41cb-9fad-6c09ca849e97 persisted successfully
2025-08-11 23:37:27,005 - app.api.itinerary - INFO - Successfully generated itinerary 6908c992-bcac-41cb-9fad-6c09ca849e97 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-11 23:37:27,006 - app.api.itinerary - INFO - itinerary_generation completed in 0.89s
2025-08-11 23:38:00,771 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-08-11 23:38:00,772 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-08-11 23:38:17,263 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-11 23:38:17,263 - app.core.security - INFO - user_authentication completed in 0.27s
2025-08-11 23:38:17,264 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-11 23:38:17,264 - app.core.security - INFO - Access token created successfully
2025-08-11 23:38:17,266 - app.core.security - INFO - Refresh token created successfully
2025-08-11 23:38:17,267 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-11 23:38:17,268 - app.api.auth - INFO - user_login completed in 0.27s
2025-08-11 23:38:17,278 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:38:17,464 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:38:17,495 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:38:17,506 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-11 23:38:17,507 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-11 23:38:17,507 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-11 23:38:17,575 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-11 23:38:17,577 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-11 23:38:17,579 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-11 23:38:35,870 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-11 23:38:35,870 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-11 23:38:35,871 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-11 23:38:35,871 - app.api.nlp - INFO - nlp_parsing completed in 0.11s
2025-08-11 23:38:38,337 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:38:38,550 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-11 23:38:38,551 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-11 23:38:38,557 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-11 23:38:38,561 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-11 23:38:38,564 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-11 23:38:38,580 - app.api.itinerary - INFO - Found 0 flight options
2025-08-11 23:38:38,583 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-11 23:38:38,589 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-08-11 23:38:38,590 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-11 23:38:38,591 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-08-11 23:38:38,592 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, lat=40.759, lon=-73.9845, price=120
2025-08-11 23:38:38,593 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:38:38,594 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-11 23:38:38,595 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:38:38,596 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, lat=40.745914, lon=-73.8467247, price=None
2025-08-11 23:38:38,596 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:38:38,597 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:38:38,597 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:38:38,598 - app.api.itinerary - INFO - Adding activity POI: id=47d2b428-dc0c-440d-8a9d-9778f30a4e47, lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-11 23:38:38,599 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:38:38,600 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:38:38,600 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:38:38,601 - app.api.itinerary - INFO - Adding activity POI: id=cb136867-635d-4993-8104-1c4c02ac5343, lat=40.745914, lon=-73.8467247, price=None
2025-08-11 23:38:38,601 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:38:38,602 - app.api.itinerary - INFO - Adding activity POI: id=e60cb649-146d-41a3-a20c-62ac68865086, lat=40.779349, lon=-73.973908, price=None
2025-08-11 23:38:38,603 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:38:38,603 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:38:38,604 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:38:38,604 - app.api.itinerary - INFO - Adding activity POI: id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62, lat=40.745914, lon=-73.846725, price=None
2025-08-11 23:38:38,606 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-08-11 23:38:38,606 - app.api.itinerary - INFO - Activities after budget filter: 9 (before: 11)
2025-08-11 23:38:38,688 - app.api.itinerary - INFO - Built POI list with 40 items
2025-08-11 23:38:38,689 - app.api.itinerary - INFO - build_poi_list found 9 activities with radius_m=20000
2025-08-11 23:38:38,840 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-11 23:38:38,842 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-11 23:38:38,868 - app.api.itinerary - INFO - Itinerary c7e4e60a-f1d8-4275-bc8c-369e7d061cc7 persisted successfully
2025-08-11 23:38:38,868 - app.api.itinerary - INFO - Successfully generated itinerary c7e4e60a-f1d8-4275-bc8c-369e7d061cc7 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-11 23:38:38,870 - app.api.itinerary - INFO - itinerary_generation completed in 0.51s
2025-08-11 23:38:40,633 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:38:40,659 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:38:40,660 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:38:40,662 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:38:40,663 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:38:40,664 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:38:40,665 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:38:40,666 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:38:40,667 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:38:40,668 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:38:40,670 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:38:40,783 - app.api.itinerary - INFO - Built POI list with 34 items
2025-08-11 23:38:40,944 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:38:40,945 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:38:40,960 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:38:40,986 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:38:40,986 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:38:40,987 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:38:40,988 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:38:40,989 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:38:40,990 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:38:40,991 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:38:40,992 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:38:40,993 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:38:40,994 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:38:41,165 - app.api.itinerary - INFO - Built POI list with 34 items
2025-08-11 23:38:41,312 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:38:41,312 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:40:23,837 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:40:23,894 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:40:23,895 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:40:23,896 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:40:23,897 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:23,898 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:23,902 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:23,904 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:23,905 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:23,906 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:40:23,907 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:40:24,194 - app.api.itinerary - INFO - Built POI list with 34 items
2025-08-11 23:40:24,485 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:40:24,487 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:40:26,121 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:40:26,162 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:40:26,164 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:40:26,167 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:40:26,179 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:26,180 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:26,182 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:26,188 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:26,190 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:26,192 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:40:26,195 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:40:26,437 - app.api.itinerary - INFO - Built POI list with 34 items
2025-08-11 23:40:26,765 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:40:26,767 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:40:27,825 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:40:27,878 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:40:27,880 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:40:27,882 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:40:27,887 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:27,890 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:27,892 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:27,895 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:27,897 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:27,898 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:40:27,909 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:40:28,127 - app.api.itinerary - INFO - Built POI list with 34 items
2025-08-11 23:40:28,535 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:40:28,538 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:40:43,258 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:40:43,283 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:40:43,284 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:40:43,285 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:40:43,286 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:43,288 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:43,290 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:43,291 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:43,292 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:43,294 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:40:43,294 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:40:43,432 - app.api.itinerary - INFO - Built POI list with 34 items
2025-08-11 23:40:43,649 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:40:43,650 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:40:46,430 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:40:46,493 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:40:46,495 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:40:46,499 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:40:46,500 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:46,502 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:46,515 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:46,517 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:46,519 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:46,522 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:40:46,526 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:40:46,763 - app.api.itinerary - INFO - Built POI list with 34 items
2025-08-11 23:40:47,204 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:40:47,207 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:40:48,850 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:40:48,908 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:40:48,910 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:40:48,911 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:40:48,912 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:48,912 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:48,915 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:48,919 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:48,920 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:48,922 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:40:48,923 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:40:49,130 - app.api.itinerary - INFO - Built POI list with 34 items
2025-08-11 23:40:49,453 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:40:49,454 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:40:58,950 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:40:59,002 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:40:59,005 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:40:59,006 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:40:59,006 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:59,007 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:59,008 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:59,009 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:40:59,011 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:40:59,012 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:40:59,013 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:40:59,210 - app.api.itinerary - INFO - Built POI list with 34 items
2025-08-11 23:40:59,534 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:40:59,551 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:43:10,834 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:43:11,079 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:43:11,112 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:43:11,113 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:43:11,113 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:43:11,114 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:43:11,115 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:43:11,116 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:43:11,116 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:43:11,117 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:43:11,117 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:43:11,118 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:43:11,308 - app.api.itinerary - INFO - Built POI list with 34 items
2025-08-11 23:43:11,547 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:43:11,548 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:45:08,019 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-11 23:45:08,020 - app.core.security - INFO - user_authentication completed in 0.28s
2025-08-11 23:45:08,020 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-11 23:45:08,021 - app.core.security - INFO - Access token created successfully
2025-08-11 23:45:08,022 - app.core.security - INFO - Refresh token created successfully
2025-08-11 23:45:08,022 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-11 23:45:08,022 - app.api.auth - INFO - user_login completed in 0.29s
2025-08-11 23:45:08,072 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:45:08,251 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:45:08,280 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-11 23:45:08,281 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-11 23:45:08,282 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-11 23:45:08,295 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:45:08,323 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-11 23:45:08,325 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-11 23:45:08,326 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-11 23:45:46,846 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-11 23:45:46,846 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-11 23:45:46,847 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-11 23:45:46,847 - app.api.nlp - INFO - nlp_parsing completed in 0.13s
2025-08-11 23:45:52,792 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:45:52,882 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-11 23:45:52,883 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-11 23:45:52,886 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-11 23:45:52,888 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-11 23:45:52,890 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-11 23:45:52,899 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-11 23:45:52,907 - app.api.itinerary - INFO - Recommended activity IDs: ['58fddeff-23de-4b56-aa8f-36609fac6ed4', 'e0c84b24-79fc-45b3-8640-70df9628a0bf', '4053bc68-04be-4845-8911-b6191d66f660', '635abf00-6e28-4e21-87bd-7a9c3ba5a835', '466f12cd-fe7b-4441-8ab4-aa31becbb76b', '3623f0cc-479f-4cba-af63-9e62dd6cd812', 'f8905935-fc48-4c69-af97-89c593f81d44', '7c7e53f6-f4fa-44dc-a200-2fb46304b766', 'aeb18db1-596d-4454-bcad-022c754b2b8e', '3a9303ee-7cf1-4301-a9eb-07ff5fa84b47']
2025-08-11 23:45:52,907 - app.api.itinerary - INFO - Fetched 0 activity rows: []
2025-08-11 23:45:52,908 - app.api.itinerary - INFO - Activity location filter: center=(51.5074456,-0.1277653), radius_m=20000
2025-08-11 23:45:52,908 - app.api.itinerary - INFO - Activities after budget filter: 0 (before: 1)
2025-08-11 23:45:52,968 - app.api.itinerary - INFO - Built POI list with 31 items
2025-08-11 23:45:52,969 - app.api.itinerary - INFO - build_poi_list found 0 activities with radius_m=20000
2025-08-11 23:45:52,969 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-11 23:45:52,974 - app.api.itinerary - INFO - Recommended activity IDs: ['58fddeff-23de-4b56-aa8f-36609fac6ed4', 'e0c84b24-79fc-45b3-8640-70df9628a0bf', '4053bc68-04be-4845-8911-b6191d66f660', '635abf00-6e28-4e21-87bd-7a9c3ba5a835', '466f12cd-fe7b-4441-8ab4-aa31becbb76b', '3623f0cc-479f-4cba-af63-9e62dd6cd812', 'f8905935-fc48-4c69-af97-89c593f81d44', '7c7e53f6-f4fa-44dc-a200-2fb46304b766', 'aeb18db1-596d-4454-bcad-022c754b2b8e', '3a9303ee-7cf1-4301-a9eb-07ff5fa84b47']
2025-08-11 23:45:52,974 - app.api.itinerary - INFO - Fetched 0 activity rows: []
2025-08-11 23:45:52,975 - app.api.itinerary - INFO - Activity location filter: center=(51.5074456,-0.1277653), radius_m=50000
2025-08-11 23:45:52,975 - app.api.itinerary - INFO - Activities after budget filter: 0 (before: 1)
2025-08-11 23:45:53,038 - app.api.itinerary - INFO - Built POI list with 31 items
2025-08-11 23:45:53,039 - app.api.itinerary - INFO - build_poi_list found 0 activities with radius_m=50000
2025-08-11 23:45:53,039 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-11 23:45:53,045 - app.api.itinerary - INFO - Recommended activity IDs: ['58fddeff-23de-4b56-aa8f-36609fac6ed4', 'e0c84b24-79fc-45b3-8640-70df9628a0bf', '4053bc68-04be-4845-8911-b6191d66f660', '635abf00-6e28-4e21-87bd-7a9c3ba5a835', '466f12cd-fe7b-4441-8ab4-aa31becbb76b', '3623f0cc-479f-4cba-af63-9e62dd6cd812', 'f8905935-fc48-4c69-af97-89c593f81d44', '7c7e53f6-f4fa-44dc-a200-2fb46304b766', 'aeb18db1-596d-4454-bcad-022c754b2b8e', '3a9303ee-7cf1-4301-a9eb-07ff5fa84b47']
2025-08-11 23:45:53,045 - app.api.itinerary - INFO - Fetched 0 activity rows: []
2025-08-11 23:45:53,046 - app.api.itinerary - INFO - Activity location filter: center=(51.5074456,-0.1277653), radius_m=100000
2025-08-11 23:45:53,047 - app.api.itinerary - INFO - Activities after budget filter: 0 (before: 1)
2025-08-11 23:45:53,118 - app.api.itinerary - INFO - Built POI list with 31 items
2025-08-11 23:45:53,119 - app.api.itinerary - INFO - build_poi_list found 0 activities with radius_m=100000
2025-08-11 23:45:53,216 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-11 23:45:53,217 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-11 23:45:53,245 - app.api.itinerary - INFO - Itinerary 0f726206-0398-41fd-a6c5-47b738254f61 persisted successfully
2025-08-11 23:45:53,245 - app.api.itinerary - INFO - Successfully generated itinerary 0f726206-0398-41fd-a6c5-47b738254f61 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-11 23:45:53,246 - app.api.itinerary - INFO - itinerary_generation completed in 0.45s
2025-08-11 23:45:54,908 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:45:54,948 - app.api.itinerary - INFO - Recommended activity IDs: []
2025-08-11 23:45:54,949 - app.api.itinerary - INFO - Fetched 0 activity rows: []
2025-08-11 23:45:54,949 - app.api.itinerary - INFO - Activity location filter: center=(51.507446,-0.127765), radius_m=20000
2025-08-11 23:45:54,950 - app.api.itinerary - INFO - Activities after budget filter: 0 (before: 1)
2025-08-11 23:45:55,063 - app.api.itinerary - INFO - Built POI list with 31 items
2025-08-11 23:45:55,200 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:45:55,200 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:45:55,213 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:45:55,248 - app.api.itinerary - INFO - Recommended activity IDs: []
2025-08-11 23:45:55,248 - app.api.itinerary - INFO - Fetched 0 activity rows: []
2025-08-11 23:45:55,249 - app.api.itinerary - INFO - Activity location filter: center=(51.507446,-0.127765), radius_m=20000
2025-08-11 23:45:55,250 - app.api.itinerary - INFO - Activities after budget filter: 0 (before: 1)
2025-08-11 23:45:55,381 - app.api.itinerary - INFO - Built POI list with 31 items
2025-08-11 23:45:55,505 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:45:55,506 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:51:20,560 - app.main - INFO - Shutting down application...
2025-08-11 23:51:20,561 - app.main - INFO - Closing database connections...
2025-08-11 23:51:20,562 - app.db.session - INFO - Closing database connections...
2025-08-11 23:51:20,629 - app.db.session - INFO - Database connections closed
2025-08-11 23:51:20,631 - app.main - INFO - Database connections closed successfully
2025-08-11 23:51:53,321 - app.main - INFO - Starting application...
2025-08-11 23:51:53,322 - app.main - INFO - Initializing database manager...
2025-08-11 23:51:53,323 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-11 23:51:53,402 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-11 23:51:53,483 - app.db.session - INFO - Database manager initialized successfully
2025-08-11 23:51:53,484 - app.main - INFO - Database manager initialized successfully
2025-08-11 23:53:22,140 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:53:41,273 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-11 23:53:41,568 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-11 23:53:41,569 - app.core.security - INFO - user_authentication completed in 0.30s
2025-08-11 23:53:41,569 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-11 23:53:41,570 - app.core.security - INFO - Access token created successfully
2025-08-11 23:53:41,571 - app.core.security - INFO - Refresh token created successfully
2025-08-11 23:53:41,572 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-11 23:53:41,573 - app.api.auth - INFO - user_login completed in 0.31s
2025-08-11 23:53:41,584 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:53:41,768 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:53:41,806 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:53:41,823 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-11 23:53:41,824 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-11 23:53:41,824 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-11 23:53:41,888 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-11 23:53:41,889 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-11 23:53:41,890 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-11 23:54:34,253 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-11 23:54:34,254 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-11 23:54:34,255 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-11 23:54:34,255 - app.api.nlp - INFO - nlp_parsing completed in 2.09s
2025-08-11 23:54:41,323 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:54:41,440 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-11 23:54:41,441 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-11 23:54:41,450 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-11 23:54:41,454 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-11 23:54:41,458 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-11 23:54:41,489 - app.api.itinerary - INFO - Found 0 flight options
2025-08-11 23:54:41,492 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-11 23:54:41,523 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-08-11 23:54:41,523 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-11 23:54:41,524 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-08-11 23:54:41,524 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, lat=40.759, lon=-73.9845, price=120
2025-08-11 23:54:41,525 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:54:41,525 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-11 23:54:41,526 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:54:41,527 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, lat=40.745914, lon=-73.8467247, price=None
2025-08-11 23:54:41,527 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:54:41,528 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:54:41,528 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:54:41,529 - app.api.itinerary - INFO - Adding activity POI: id=47d2b428-dc0c-440d-8a9d-9778f30a4e47, lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-11 23:54:41,529 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:54:41,530 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:54:41,530 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:54:41,531 - app.api.itinerary - INFO - Adding activity POI: id=cb136867-635d-4993-8104-1c4c02ac5343, lat=40.745914, lon=-73.8467247, price=None
2025-08-11 23:54:41,532 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:54:41,532 - app.api.itinerary - INFO - Adding activity POI: id=e60cb649-146d-41a3-a20c-62ac68865086, lat=40.779349, lon=-73.973908, price=None
2025-08-11 23:54:41,533 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:54:41,533 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:54:41,534 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-11 23:54:41,537 - app.api.itinerary - INFO - Adding activity POI: id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62, lat=40.745914, lon=-73.846725, price=None
2025-08-11 23:54:41,537 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-08-11 23:54:41,538 - app.api.itinerary - INFO - Activities after budget filter: 9 (before: 11)
2025-08-11 23:54:41,659 - app.api.itinerary - INFO - Built POI list with 40 unique items (from 40 raw)
2025-08-11 23:54:41,659 - app.api.itinerary - INFO - build_poi_list found 9 activities with radius_m=20000
2025-08-11 23:54:41,817 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-11 23:54:41,818 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-11 23:54:41,874 - app.api.itinerary - INFO - Itinerary 87faea84-21d2-4be1-92de-482789dfec72 persisted successfully
2025-08-11 23:54:41,875 - app.api.itinerary - INFO - Successfully generated itinerary 87faea84-21d2-4be1-92de-482789dfec72 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-11 23:54:41,875 - app.api.itinerary - INFO - itinerary_generation completed in 0.55s
2025-08-11 23:54:43,148 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:54:43,184 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:54:43,185 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:54:43,185 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:54:43,186 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:54:43,187 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:54:43,187 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:54:43,188 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:54:43,189 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:54:43,189 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:54:43,190 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:54:43,340 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-11 23:54:43,500 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:54:43,501 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-11 23:54:43,519 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-11 23:54:43,557 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2')]
2025-08-11 23:54:43,558 - app.api.itinerary - INFO - Fetched 3 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-08-11 23:54:43,559 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-11 23:54:43,559 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:54:43,560 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:54:43,562 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:54:43,566 - app.api.itinerary - INFO - Adding activity POI: id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2, lat=40.7127744, lon=-74.006059, price=None
2025-08-11 23:54:43,568 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-11 23:54:43,569 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, lat=40.712774, lon=-74.006059, price=None
2025-08-11 23:54:43,569 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 4)
2025-08-11 23:54:43,729 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-11 23:54:43,959 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-11 23:54:43,960 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:36:53,158 - app.main - INFO - Shutting down application...
2025-08-12 00:36:53,160 - app.main - INFO - Closing database connections...
2025-08-12 00:36:53,161 - app.db.session - INFO - Closing database connections...
2025-08-12 00:36:53,209 - app.db.session - INFO - Database connections closed
2025-08-12 00:36:53,210 - app.main - INFO - Database connections closed successfully
2025-08-12 00:37:12,001 - app.main - INFO - Starting application...
2025-08-12 00:37:12,010 - app.main - INFO - Initializing database manager...
2025-08-12 00:37:12,013 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-12 00:37:12,130 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-12 00:37:12,399 - app.db.session - INFO - Database manager initialized successfully
2025-08-12 00:37:12,400 - app.main - INFO - Database manager initialized successfully
2025-08-12 00:38:16,767 - app.main - INFO - Starting application...
2025-08-12 00:38:16,768 - app.main - INFO - Initializing database manager...
2025-08-12 00:38:16,770 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-12 00:38:16,798 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-12 00:38:16,851 - app.db.session - INFO - Database manager initialized successfully
2025-08-12 00:38:16,852 - app.main - INFO - Database manager initialized successfully
2025-08-12 00:38:22,728 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-12 00:38:23,047 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-12 00:38:23,048 - app.core.security - INFO - user_authentication completed in 0.37s
2025-08-12 00:38:23,049 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-12 00:38:23,060 - app.core.security - INFO - Access token created successfully
2025-08-12 00:38:23,061 - app.core.security - INFO - Refresh token created successfully
2025-08-12 00:38:23,062 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-12 00:38:23,062 - app.api.auth - INFO - user_login completed in 0.39s
2025-08-12 00:38:23,087 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:38:23,248 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:38:23,295 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:38:23,310 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-12 00:38:23,312 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-12 00:38:23,314 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-12 00:38:23,368 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-12 00:38:23,370 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-12 00:38:23,374 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-12 00:38:39,494 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-12 00:38:39,495 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-12 00:38:39,495 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-12 00:38:39,496 - app.api.nlp - INFO - nlp_parsing completed in 2.02s
2025-08-12 00:38:46,771 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:38:47,058 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-12 00:38:47,059 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-12 00:38:47,071 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-12 00:38:47,076 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-12 00:38:47,083 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-12 00:38:47,151 - app.api.itinerary - INFO - Found 0 flight options
2025-08-12 00:38:47,155 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-12 00:38:47,230 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-08-12 00:38:47,231 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-12 00:38:47,232 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-08-12 00:38:47,233 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-08-12 00:38:47,234 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-12 00:38:47,235 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-12 00:38:47,236 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-12 00:38:47,236 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-08-12 00:38:47,237 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:38:47,238 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:38:47,239 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-08-12 00:38:47,239 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-08-12 00:38:47,240 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-08-12 00:38:47,241 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-08-12 00:38:47,242 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-08-12 00:38:47,242 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-08-12 00:38:47,243 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-08-12 00:38:47,243 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-08-12 00:38:47,457 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-12 00:38:47,458 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-08-12 00:38:47,627 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-12 00:38:47,628 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-12 00:38:47,699 - app.api.itinerary - INFO - Itinerary 60e29a0d-6f9e-45c7-ae7c-d62e7d0c0910 persisted successfully
2025-08-12 00:38:47,700 - app.api.itinerary - INFO - Successfully generated itinerary 60e29a0d-6f9e-45c7-ae7c-d62e7d0c0910 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-12 00:38:47,702 - app.api.itinerary - INFO - itinerary_generation completed in 0.92s
2025-08-12 00:38:49,504 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:38:49,544 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:38:49,545 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:38:49,545 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 00:38:49,548 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:38:49,552 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:38:49,553 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 00:38:49,707 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 00:38:49,826 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 00:38:49,827 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:38:49,839 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:38:49,884 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:38:49,885 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:38:49,886 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 00:38:49,886 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:38:49,887 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:38:49,888 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 00:38:50,050 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 00:38:50,241 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 00:38:50,242 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:40:12,042 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:40:12,106 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:40:12,107 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:40:12,108 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 00:40:12,109 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:40:12,110 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:40:12,114 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 00:40:12,323 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 00:40:12,502 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 00:40:12,505 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:40:27,057 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:40:27,352 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:40:27,407 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:40:27,409 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:40:27,411 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 00:40:27,420 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:40:27,422 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:40:27,425 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 00:40:27,677 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 00:40:27,958 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 00:40:27,959 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:40:28,401 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:40:28,428 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:40:28,429 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:40:28,430 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 00:40:28,431 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:40:28,433 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:40:28,434 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 00:40:28,608 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 00:40:28,820 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 00:40:28,821 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:41:47,875 - app.core.security - WARNING - Authentication failed: invalid password for user - ttgi_
2025-08-12 00:41:47,876 - app.core.security - INFO - user_authentication completed in 0.33s
2025-08-12 00:41:47,877 - app.api.auth - WARNING - Failed login attempt for user: ttgi_
2025-08-12 00:41:47,878 - app.api.auth - INFO - user_login completed in 0.34s
2025-08-12 00:41:47,878 - app.db.session - ERROR - Unexpected session error: 401: Incorrect username or password
2025-08-12 00:41:54,592 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-12 00:41:54,592 - app.core.security - INFO - user_authentication completed in 0.29s
2025-08-12 00:41:54,593 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-12 00:41:54,595 - app.core.security - INFO - Access token created successfully
2025-08-12 00:41:54,596 - app.core.security - INFO - Refresh token created successfully
2025-08-12 00:41:54,597 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-12 00:41:54,599 - app.api.auth - INFO - user_login completed in 0.29s
2025-08-12 00:41:54,612 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:41:54,796 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:41:54,831 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-12 00:41:54,832 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-12 00:41:54,832 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-12 00:41:54,841 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:41:54,862 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-12 00:41:54,863 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-12 00:41:54,864 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-12 00:43:26,399 - app.core.nlp.parser - INFO - Parsed travel request with 75.0% confidence
2025-08-12 00:43:26,400 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-12 00:43:26,400 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-12 00:43:26,400 - app.api.nlp - INFO - nlp_parsing completed in 0.13s
2025-08-12 00:43:31,612 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:43:31,705 - app.core.nlp.parser - INFO - Parsed travel request with 75.0% confidence
2025-08-12 00:43:31,706 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-12 00:43:31,709 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-12 00:43:31,714 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-12 00:43:31,718 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-12 00:43:31,737 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-12 00:43:31,750 - app.api.itinerary - INFO - Recommended activity IDs: ['5e5b8218-c579-4584-b218-e038e7106cc5', '6bd13051-d7d0-4595-b9c8-4ae7f3988de8', 'ee6844e3-2dc9-4a69-95c7-788428edf11f', '2e41773f-efcd-4e02-82dd-2d3a500cfe54', 'e879b074-506e-479f-8252-7d6524028062', '65aa210e-a93f-4197-a63c-0dd8930a77db', '29a41cf5-d29f-4584-a415-ec3fddffcc71', 'a1795ae3-7380-4337-ac18-9779488dcbd1', '79598c56-9571-47e8-ac31-21e25da1d094', 'df2cf94a-e588-4af3-98ac-3ed5688a188f']
2025-08-12 00:43:31,750 - app.api.itinerary - INFO - Fetched 7 activity rows: [UUID('df2cf94a-e588-4af3-98ac-3ed5688a188f'), UUID('a1795ae3-7380-4337-ac18-9779488dcbd1'), UUID('65aa210e-a93f-4197-a63c-0dd8930a77db'), UUID('5e5b8218-c579-4584-b218-e038e7106cc5'), UUID('79598c56-9571-47e8-ac31-21e25da1d094'), UUID('29a41cf5-d29f-4584-a415-ec3fddffcc71'), UUID('6bd13051-d7d0-4595-b9c8-4ae7f3988de8')]
2025-08-12 00:43:31,751 - app.api.itinerary - INFO - Activity location filter: center=(34.0536909,-118.242766), radius_m=20000
2025-08-12 00:43:31,751 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-08-12 00:43:31,752 - app.api.itinerary - INFO - Adding activity POI: id=df2cf94a-e588-4af3-98ac-3ed5688a188f, name='Dodger Stadium', lat=34.073851, lon=-118.2399583, price=None
2025-08-12 00:43:31,753 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 11:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 11:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: Closed", "Thursday: 11:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20097:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20097:00\u202fPM"], using default 9:00-17:00
2025-08-12 00:43:31,754 - app.api.itinerary - INFO - Adding activity POI: id=a1795ae3-7380-4337-ac18-9779488dcbd1, name='LACMA Store in the Resnick Pavilion', lat=34.0636493, lon=-118.3589586, price=None
2025-08-12 00:43:31,754 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:43:31,755 - app.api.itinerary - INFO - Adding activity POI: id=65aa210e-a93f-4197-a63c-0dd8930a77db, name='Los Angeles City Hall', lat=34.0537136, lon=-118.2426533, price=None
2025-08-12 00:43:31,755 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 8:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 8:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 8:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 8:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 8:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:43:31,756 - app.api.itinerary - INFO - Adding activity POI: id=5e5b8218-c579-4584-b218-e038e7106cc5, name='Archdiocese of Los Angeles', lat=34.0613259, lon=-118.2983873, price=None
2025-08-12 00:43:31,757 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='lacma store in the resnick pavilion', lat=34.063649, lon=-118.358959, id=79598c56-9571-47e8-ac31-21e25da1d094
2025-08-12 00:43:31,757 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='los angeles city hall', lat=34.053714, lon=-118.242653, id=29a41cf5-d29f-4584-a415-ec3fddffcc71
2025-08-12 00:43:31,758 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='archdiocese of los angeles', lat=34.061326, lon=-118.298387, id=6bd13051-d7d0-4595-b9c8-4ae7f3988de8
2025-08-12 00:43:31,759 - app.api.itinerary - INFO - Activities after budget filter: 4 (before: 7)
2025-08-12 00:43:31,830 - app.api.itinerary - INFO - Built POI list with 37 unique items (from 37 raw)
2025-08-12 00:43:31,831 - app.api.itinerary - INFO - build_poi_list found 4 activities with radius_m=20000
2025-08-12 00:43:31,978 - app.api.itinerary - INFO - Created schedule for 5 days
2025-08-12 00:43:31,979 - app.api.itinerary - INFO - Scheduled items: 5 days with enriched details
2025-08-12 00:43:32,009 - app.api.itinerary - INFO - Itinerary abae10f6-b284-4868-b27a-27244000e813 persisted successfully
2025-08-12 00:43:32,010 - app.api.itinerary - INFO - Successfully generated itinerary abae10f6-b284-4868-b27a-27244000e813 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-12 00:43:32,012 - app.api.itinerary - INFO - itinerary_generation completed in 0.40s
2025-08-12 00:43:33,694 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:43:33,736 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('65aa210e-a93f-4197-a63c-0dd8930a77db')]
2025-08-12 00:43:33,737 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('65aa210e-a93f-4197-a63c-0dd8930a77db')]
2025-08-12 00:43:33,737 - app.api.itinerary - INFO - Activity location filter: center=(34.0536909,-118.242766), radius_m=20000
2025-08-12 00:43:33,738 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:43:33,739 - app.api.itinerary - INFO - Adding activity POI: id=65aa210e-a93f-4197-a63c-0dd8930a77db, name='Los Angeles City Hall', lat=34.0537136, lon=-118.2426533, price=None
2025-08-12 00:43:33,740 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 4)
2025-08-12 00:43:33,865 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-12 00:43:34,007 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-12 00:43:34,008 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-08-12 00:43:34,020 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:43:34,048 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('65aa210e-a93f-4197-a63c-0dd8930a77db')]
2025-08-12 00:43:34,052 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('65aa210e-a93f-4197-a63c-0dd8930a77db')]
2025-08-12 00:43:34,055 - app.api.itinerary - INFO - Activity location filter: center=(34.0536909,-118.242766), radius_m=20000
2025-08-12 00:43:34,057 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:43:34,058 - app.api.itinerary - INFO - Adding activity POI: id=65aa210e-a93f-4197-a63c-0dd8930a77db, name='Los Angeles City Hall', lat=34.0537136, lon=-118.2426533, price=None
2025-08-12 00:43:34,060 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 4)
2025-08-12 00:43:34,246 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-12 00:43:34,446 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-12 00:43:34,447 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-08-12 00:44:28,820 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:44:28,847 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-12 00:44:28,848 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-12 00:44:28,849 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-12 00:44:28,853 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:44:28,872 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-12 00:44:28,873 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-12 00:44:28,873 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-12 00:45:00,282 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-12 00:45:00,282 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-12 00:45:00,283 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-12 00:45:00,284 - app.api.nlp - INFO - nlp_parsing completed in 0.13s
2025-08-12 00:45:04,136 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:45:04,257 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-12 00:45:04,258 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-12 00:45:04,262 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-12 00:45:04,264 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-12 00:45:04,266 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-12 00:45:04,277 - app.api.itinerary - INFO - Found 0 flight options
2025-08-12 00:45:04,280 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-12 00:45:04,285 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-08-12 00:45:04,286 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-12 00:45:04,287 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-08-12 00:45:04,288 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-08-12 00:45:04,288 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-12 00:45:04,289 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-12 00:45:04,290 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-12 00:45:04,290 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-08-12 00:45:04,291 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:45:04,292 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:45:04,292 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-08-12 00:45:04,293 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-08-12 00:45:04,294 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-08-12 00:45:04,294 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-08-12 00:45:04,295 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-08-12 00:45:04,296 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-08-12 00:45:04,296 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-08-12 00:45:04,297 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-08-12 00:45:04,361 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-12 00:45:04,362 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-08-12 00:45:04,489 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-12 00:45:04,490 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-12 00:45:04,515 - app.api.itinerary - INFO - Itinerary e4927ddb-47b6-44b9-b06d-74b56220f010 persisted successfully
2025-08-12 00:45:04,516 - app.api.itinerary - INFO - Successfully generated itinerary e4927ddb-47b6-44b9-b06d-74b56220f010 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-12 00:45:04,517 - app.api.itinerary - INFO - itinerary_generation completed in 0.38s
2025-08-12 00:45:06,010 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:45:06,050 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:45:06,051 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:45:06,053 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 00:45:06,055 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:45:06,057 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:45:06,058 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 00:45:06,204 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 00:45:06,343 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 00:45:06,344 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:45:06,356 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:45:06,410 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:45:06,410 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:45:06,411 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 00:45:06,412 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:45:06,413 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:45:06,414 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 00:45:06,560 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 00:45:06,720 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 00:45:06,724 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:46:44,242 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:46:44,287 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:46:44,288 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:46:44,291 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 00:46:44,292 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:46:44,294 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:46:44,295 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 00:46:44,538 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 00:46:44,770 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 00:46:44,770 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:47:24,670 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:47:24,724 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:47:24,725 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:47:24,726 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 00:47:24,728 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:47:24,728 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:47:24,730 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 00:47:24,890 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 00:47:25,181 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 00:47:25,181 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:49:35,829 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:49:35,882 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:49:35,886 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 00:49:35,897 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 00:49:35,900 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 00:49:35,902 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 00:49:35,909 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 00:49:36,139 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 00:49:36,500 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 00:49:36,562 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 00:55:58,594 - app.main - INFO - Shutting down application...
2025-08-12 00:55:58,595 - app.main - INFO - Closing database connections...
2025-08-12 00:55:58,596 - app.db.session - INFO - Closing database connections...
2025-08-12 00:55:58,722 - app.db.session - INFO - Database connections closed
2025-08-12 00:55:58,723 - app.main - INFO - Database connections closed successfully
2025-08-12 00:56:26,185 - app.main - INFO - Starting application...
2025-08-12 00:56:26,186 - app.main - INFO - Initializing database manager...
2025-08-12 00:56:26,188 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-12 00:56:26,281 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-12 00:56:26,391 - app.db.session - INFO - Database manager initialized successfully
2025-08-12 00:56:26,393 - app.main - INFO - Database manager initialized successfully
2025-08-12 00:56:26,624 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:56:26,774 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 393, in build_poi_list
    Accommodation.check_in,
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/pydantic/_internal/_model_construction.py", line 271, in __getattr__
    raise AttributeError(item)
AttributeError: check_in
2025-08-12 00:56:26,781 - app.db.session - ERROR - Unexpected session error: 500: check_in
2025-08-12 00:56:28,333 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:56:28,367 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 393, in build_poi_list
    Accommodation.check_in,
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/pydantic/_internal/_model_construction.py", line 271, in __getattr__
    raise AttributeError(item)
AttributeError: check_in
2025-08-12 00:56:28,371 - app.db.session - ERROR - Unexpected session error: 500: check_in
2025-08-12 00:57:09,020 - app.main - INFO - Starting application...
2025-08-12 00:57:09,022 - app.main - INFO - Initializing database manager...
2025-08-12 00:57:09,023 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-12 00:57:09,079 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-12 00:57:09,136 - app.db.session - INFO - Database manager initialized successfully
2025-08-12 00:57:09,136 - app.main - INFO - Database manager initialized successfully
2025-08-12 00:57:12,564 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-12 00:57:12,941 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-12 00:57:12,945 - app.core.security - INFO - user_authentication completed in 0.44s
2025-08-12 00:57:12,952 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-12 00:57:12,971 - app.core.security - INFO - Access token created successfully
2025-08-12 00:57:12,972 - app.core.security - INFO - Refresh token created successfully
2025-08-12 00:57:12,972 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-12 00:57:12,973 - app.api.auth - INFO - user_login completed in 0.46s
2025-08-12 00:57:13,034 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:57:13,307 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:57:13,361 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:57:13,397 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-12 00:57:13,399 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-12 00:57:13,400 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-12 00:57:13,405 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-12 00:57:13,406 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-12 00:57:13,407 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-12 00:58:20,250 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-12 00:58:20,251 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-12 00:58:20,252 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-12 00:58:20,253 - app.api.nlp - INFO - nlp_parsing completed in 2.38s
2025-08-12 00:58:23,046 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 00:58:23,215 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-12 00:58:23,216 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-12 00:58:23,228 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-12 00:58:23,232 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-12 00:58:23,239 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-12 00:58:23,278 - app.api.itinerary - INFO - Found 0 flight options
2025-08-12 00:58:23,282 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-12 00:58:23,310 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 393, in build_poi_list
    Accommodation.check_in,
    ^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/pydantic/_internal/_model_construction.py", line 271, in __getattr__
    raise AttributeError(item)
AttributeError: check_in
2025-08-12 00:58:23,315 - app.api.itinerary - INFO - itinerary_generation completed in 0.27s
2025-08-12 00:58:23,315 - app.db.session - ERROR - Unexpected session error: 500: check_in
2025-08-12 00:59:37,504 - app.main - INFO - Shutting down application...
2025-08-12 00:59:37,504 - app.main - INFO - Closing database connections...
2025-08-12 00:59:37,505 - app.db.session - INFO - Closing database connections...
2025-08-12 00:59:37,517 - app.db.session - INFO - Database connections closed
2025-08-12 00:59:37,517 - app.main - INFO - Database connections closed successfully
2025-08-12 00:59:48,012 - app.main - INFO - Starting application...
2025-08-12 00:59:48,016 - app.main - INFO - Initializing database manager...
2025-08-12 00:59:48,017 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-12 00:59:48,049 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-12 00:59:48,117 - app.db.session - INFO - Database manager initialized successfully
2025-08-12 00:59:48,117 - app.main - INFO - Database manager initialized successfully
2025-08-12 01:00:31,009 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 01:00:33,149 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-12 01:00:33,150 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-12 01:00:33,167 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-12 01:00:33,172 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-12 01:00:33,177 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-12 01:00:33,223 - app.api.itinerary - INFO - Found 0 flight options
2025-08-12 01:00:33,233 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-12 01:00:33,268 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-08-12 01:00:33,268 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-12 01:00:33,269 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-08-12 01:00:33,270 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-08-12 01:00:33,271 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-12 01:00:33,271 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-12 01:00:33,272 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-12 01:00:33,273 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-08-12 01:00:33,274 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 01:00:33,274 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 01:00:33,275 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-08-12 01:00:33,276 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-08-12 01:00:33,277 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-08-12 01:00:33,278 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-08-12 01:00:33,279 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-08-12 01:00:33,280 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-08-12 01:00:33,281 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-08-12 01:00:33,281 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-08-12 01:00:33,644 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-12 01:00:33,645 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-08-12 01:00:33,762 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-12 01:00:33,762 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-12 01:00:33,829 - app.api.itinerary - INFO - Itinerary c5890c6c-54dc-444b-8242-264b19126a1e persisted successfully
2025-08-12 01:00:33,830 - app.api.itinerary - INFO - Successfully generated itinerary c5890c6c-54dc-444b-8242-264b19126a1e for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-12 01:00:33,831 - app.api.itinerary - INFO - itinerary_generation completed in 2.82s
2025-08-12 01:00:35,542 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 01:00:35,585 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 01:00:35,589 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 01:00:35,591 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 01:00:35,592 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 01:00:35,593 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 01:00:35,594 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 01:00:35,723 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 01:00:36,061 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 01:00:36,063 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 01:00:36,090 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 01:00:36,156 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 01:00:36,157 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 01:00:36,158 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 01:00:36,160 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 01:00:36,162 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 01:00:36,166 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 01:00:36,321 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 01:00:36,464 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 01:00:36,465 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-12 01:01:13,392 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-12 01:01:13,444 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 01:01:13,445 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-12 01:01:13,447 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-12 01:01:13,451 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-12 01:01:13,453 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-12 01:01:13,455 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-12 01:01:13,734 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-12 01:01:13,931 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-12 01:01:13,932 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-15 00:33:28,413 - app.main - INFO - Starting application...
2025-08-15 00:33:28,414 - app.main - INFO - Initializing database manager...
2025-08-15 00:33:28,415 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-15 00:33:28,457 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-15 00:33:28,527 - app.db.session - INFO - Database manager initialized successfully
2025-08-15 00:33:28,528 - app.main - INFO - Database manager initialized successfully
2025-08-15 18:18:51,858 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-15 18:18:52,232 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-15 18:18:52,233 - app.core.security - INFO - user_authentication completed in 1.58s
2025-08-15 18:18:52,235 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-15 18:18:52,403 - app.core.security - INFO - Access token created successfully
2025-08-15 18:18:52,404 - app.core.security - INFO - Refresh token created successfully
2025-08-15 18:18:52,406 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-15 18:18:52,406 - app.api.auth - INFO - user_login completed in 1.76s
2025-08-15 18:19:38,708 - app.core.security - INFO - Current user resolved: testuser123
2025-08-15 18:19:43,275 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-15 18:19:43,276 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-15 18:19:43,303 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-15 18:19:43,322 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-15 18:19:43,354 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-15 18:19:43,468 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-15 18:19:43,650 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '198f0814-bf17-4849-8a01-02c7620d7833', 'e60cb649-146d-41a3-a20c-62ac68865086', '484755be-3e2b-4389-bd05-0a7081d029c7', 'cb136867-635d-4993-8104-1c4c02ac5343', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '6c6c6e0b-fa9a-4393-b9c6-8879572b4bb1', '446ab6c2-ae10-4e6c-8ab7-fd55617c70aa']
2025-08-15 18:19:43,650 - app.api.itinerary - INFO - Fetched 8 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('484755be-3e2b-4389-bd05-0a7081d029c7'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-15 18:19:43,651 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-08-15 18:19:43,652 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-08-15 18:19:43,653 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-15 18:19:43,654 - app.api.itinerary - INFO - Adding activity POI: id=484755be-3e2b-4389-bd05-0a7081d029c7, name='New York Botanical Garden', lat=40.8622871, lon=-73.8773946, price=None
2025-08-15 18:19:43,655 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-15 18:19:43,656 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-15 18:19:43,657 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-15 18:19:43,657 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-08-15 18:19:43,659 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-08-15 18:19:43,659 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-08-15 18:19:43,660 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-08-15 18:19:43,662 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-08-15 18:19:43,663 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 100.0
2025-08-15 18:19:43,664 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-08-15 18:19:44,011 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-15 18:19:44,012 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-08-15 18:19:44,545 - app.ml.inference - INFO - TransformerReorderer loaded successfully
2025-08-15 18:19:44,719 - app.api.itinerary - INFO - Created schedule for 1 days
2025-08-15 18:19:44,720 - app.api.itinerary - INFO - Scheduled items: 1 days with enriched details
2025-08-15 18:19:44,802 - app.api.itinerary - INFO - Itinerary d1af7280-451d-4221-a733-57ed06995123 persisted successfully
2025-08-15 18:19:44,802 - app.api.itinerary - INFO - Successfully generated itinerary d1af7280-451d-4221-a733-57ed06995123 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-15 18:19:44,803 - app.api.itinerary - INFO - itinerary_generation completed in 6.04s
2025-08-15 18:21:32,086 - app.core.nlp.parser - INFO - Parsed travel request with 100.0% confidence
2025-08-15 18:21:32,087 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-15 18:21:32,087 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-15 18:21:32,088 - app.api.nlp - INFO - nlp_parsing completed in 0.14s
2025-08-15 18:30:17,280 - app.core.security - INFO - Current user resolved: testuser123
2025-08-15 18:30:17,391 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-15 18:30:17,392 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-15 18:30:17,397 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-15 18:30:17,404 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-15 18:30:17,413 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-15 18:30:17,441 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-15 18:30:17,451 - app.api.itinerary - INFO - Recommended activity IDs: ['6c6c6e0b-fa9a-4393-b9c6-8879572b4bb1', '446ab6c2-ae10-4e6c-8ab7-fd55617c70aa', '83f19f6f-1ae6-4fc1-b77c-f7b349867087', 'd708fbf6-6f80-4f21-83b6-aaed4566eb3e', 'c390820d-d913-4ca1-9c18-2ab1fb39b1c4', '37f8e87a-9126-4e92-afaa-f33174c50d93', '04fba463-3962-4e2f-9971-b8f8fdeed196', '3ed08831-2e91-4e2e-ac33-9bc3c45ac4cb', '7d670456-240c-419d-94f8-8664fcf70ef2', '40a75a8a-d576-4371-9d48-421e18e5511a']
2025-08-15 18:30:17,451 - app.api.itinerary - INFO - Fetched 0 activity rows: []
2025-08-15 18:30:17,452 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=20000
2025-08-15 18:30:17,453 - app.api.itinerary - INFO - Activities after budget filter: 0 (before: 1)
2025-08-15 18:30:17,567 - app.api.itinerary - INFO - Built POI list with 31 unique items (from 31 raw)
2025-08-15 18:30:17,567 - app.api.itinerary - INFO - build_poi_list found 0 activities with radius_m=20000
2025-08-15 18:30:17,568 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-15 18:30:17,574 - app.api.itinerary - INFO - Recommended activity IDs: ['6c6c6e0b-fa9a-4393-b9c6-8879572b4bb1', '446ab6c2-ae10-4e6c-8ab7-fd55617c70aa', '83f19f6f-1ae6-4fc1-b77c-f7b349867087', 'd708fbf6-6f80-4f21-83b6-aaed4566eb3e', 'c390820d-d913-4ca1-9c18-2ab1fb39b1c4', '37f8e87a-9126-4e92-afaa-f33174c50d93', '04fba463-3962-4e2f-9971-b8f8fdeed196', '3ed08831-2e91-4e2e-ac33-9bc3c45ac4cb', '7d670456-240c-419d-94f8-8664fcf70ef2', '40a75a8a-d576-4371-9d48-421e18e5511a']
2025-08-15 18:30:17,574 - app.api.itinerary - INFO - Fetched 0 activity rows: []
2025-08-15 18:30:17,575 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=50000
2025-08-15 18:30:17,575 - app.api.itinerary - INFO - Activities after budget filter: 0 (before: 1)
2025-08-15 18:30:17,648 - app.api.itinerary - INFO - Built POI list with 31 unique items (from 31 raw)
2025-08-15 18:30:17,649 - app.api.itinerary - INFO - build_poi_list found 0 activities with radius_m=50000
2025-08-15 18:30:17,649 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-15 18:30:17,655 - app.api.itinerary - INFO - Recommended activity IDs: ['6c6c6e0b-fa9a-4393-b9c6-8879572b4bb1', '446ab6c2-ae10-4e6c-8ab7-fd55617c70aa', '83f19f6f-1ae6-4fc1-b77c-f7b349867087', 'd708fbf6-6f80-4f21-83b6-aaed4566eb3e', 'c390820d-d913-4ca1-9c18-2ab1fb39b1c4', '37f8e87a-9126-4e92-afaa-f33174c50d93', '04fba463-3962-4e2f-9971-b8f8fdeed196', '3ed08831-2e91-4e2e-ac33-9bc3c45ac4cb', '7d670456-240c-419d-94f8-8664fcf70ef2', '40a75a8a-d576-4371-9d48-421e18e5511a']
2025-08-15 18:30:17,656 - app.api.itinerary - INFO - Fetched 0 activity rows: []
2025-08-15 18:30:17,657 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=100000
2025-08-15 18:30:17,658 - app.api.itinerary - INFO - Activities after budget filter: 0 (before: 1)
2025-08-15 18:30:17,734 - app.api.itinerary - INFO - Built POI list with 31 unique items (from 31 raw)
2025-08-15 18:30:17,735 - app.api.itinerary - INFO - build_poi_list found 0 activities with radius_m=100000
2025-08-15 18:30:17,820 - app.api.itinerary - INFO - Created schedule for 1 days
2025-08-15 18:30:17,820 - app.api.itinerary - INFO - Scheduled items: 1 days with enriched details
2025-08-15 18:30:17,848 - app.api.itinerary - INFO - Itinerary 8e81f38a-c80a-4e21-9ff1-a387426571bb persisted successfully
2025-08-15 18:30:17,849 - app.api.itinerary - INFO - Successfully generated itinerary 8e81f38a-c80a-4e21-9ff1-a387426571bb for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-15 18:30:17,849 - app.api.itinerary - INFO - itinerary_generation completed in 0.56s
2025-08-17 02:06:41,141 - app.main - INFO - Starting application...
2025-08-17 02:06:41,141 - app.main - INFO - Initializing database manager...
2025-08-17 02:06:41,141 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-17 02:06:41,184 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-17 02:06:41,219 - app.db.session - INFO - Database manager initialized successfully
2025-08-17 02:06:41,220 - app.main - INFO - Database manager initialized successfully
2025-08-17 02:11:09,215 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-08-17 02:11:09,216 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-08-17 02:12:45,226 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-17 02:12:45,489 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-17 02:12:45,489 - app.core.security - INFO - user_authentication completed in 0.33s
2025-08-17 02:12:45,490 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-17 02:12:45,490 - app.core.security - INFO - Access token created successfully
2025-08-17 02:12:45,491 - app.core.security - INFO - Refresh token created successfully
2025-08-17 02:12:45,491 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-17 02:12:45,491 - app.api.auth - INFO - user_login completed in 0.33s
2025-08-17 02:12:45,505 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-17 02:12:46,406 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-17 02:12:46,452 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-17 02:12:46,468 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-17 02:12:46,469 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-08-17 02:12:46,469 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-17 02:12:46,545 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-17 02:12:46,545 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-17 02:12:46,546 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-17 02:14:12,151 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-17 02:14:12,151 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-17 02:14:12,152 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-17 02:14:12,152 - app.api.nlp - INFO - nlp_parsing completed in 1.75s
2025-08-17 02:14:14,720 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-17 02:14:14,737 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-17 02:14:14,737 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-17 02:14:14,738 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-17 02:14:14,742 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-17 02:14:14,768 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-08-17 02:14:14,768 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-08-17 02:14:14,769 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-08-17 02:15:45,842 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-17 02:15:45,843 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-17 02:15:45,843 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-17 02:15:45,844 - app.api.nlp - INFO - nlp_parsing completed in 0.12s
2025-08-17 02:16:58,636 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-17 02:16:58,750 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-17 02:16:58,750 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-17 02:16:58,764 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-17 02:16:58,768 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-17 02:16:58,771 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-17 02:16:58,822 - app.api.itinerary - INFO - Found 0 flight options
2025-08-17 02:16:58,824 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-17 02:16:58,880 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-08-17 02:16:58,880 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-17 02:16:58,881 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-08-17 02:16:58,882 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-08-17 02:16:58,882 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-17 02:16:58,882 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-17 02:16:58,883 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-17 02:16:58,883 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-08-17 02:16:58,884 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-17 02:16:58,884 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-17 02:16:58,885 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-08-17 02:16:58,885 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-08-17 02:16:58,886 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-08-17 02:16:58,886 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-08-17 02:16:58,887 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-08-17 02:16:58,887 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-08-17 02:16:58,888 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-08-17 02:16:58,888 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-08-17 02:16:59,092 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-17 02:16:59,092 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-08-17 02:16:59,462 - app.ml.inference - INFO - TransformerReorderer loaded successfully
2025-08-17 02:16:59,597 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-17 02:16:59,597 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-17 02:16:59,658 - app.api.itinerary - INFO - Itinerary c6ae55c3-fa18-40b3-b0ad-3bccffee5e8e persisted successfully
2025-08-17 02:16:59,658 - app.api.itinerary - INFO - Successfully generated itinerary c6ae55c3-fa18-40b3-b0ad-3bccffee5e8e for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-17 02:16:59,658 - app.api.itinerary - INFO - itinerary_generation completed in 1.02s
2025-08-17 02:17:22,491 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-17 02:17:22,517 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-17 02:17:22,518 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-17 02:17:22,518 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-17 02:17:22,520 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-17 02:17:22,520 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-17 02:17:22,521 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-17 02:17:22,613 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-17 02:17:22,750 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-17 02:17:22,750 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-17 02:17:22,761 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-17 02:17:22,789 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-17 02:17:22,791 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-08-17 02:17:22,791 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-08-17 02:17:22,792 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-17 02:17:22,792 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-17 02:17:22,793 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-17 02:17:22,881 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-17 02:17:22,975 - app.api.itinerary - INFO - Created schedule for 2 days
2025-08-17 02:17:22,975 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-08-17 02:19:16,636 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-17 02:19:16,636 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-17 02:19:16,637 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-17 02:19:16,637 - app.api.nlp - INFO - nlp_parsing completed in 0.11s
2025-08-17 02:19:20,902 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-17 02:19:21,000 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-17 02:19:21,001 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-17 02:19:21,004 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-17 02:19:21,006 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-17 02:19:21,008 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-17 02:19:21,016 - app.api.itinerary - INFO - Found 0 flight options
2025-08-17 02:19:21,018 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-17 02:19:21,022 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-08-17 02:19:21,022 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-17 02:19:21,022 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-08-17 02:19:21,023 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-08-17 02:19:21,023 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-17 02:19:21,024 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-17 02:19:21,024 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-17 02:19:21,024 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-08-17 02:19:21,025 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-17 02:19:21,026 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-17 02:19:21,026 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-08-17 02:19:21,027 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-08-17 02:19:21,027 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-08-17 02:19:21,028 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-08-17 02:19:21,028 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-08-17 02:19:21,028 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-08-17 02:19:21,029 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-08-17 02:19:21,029 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-08-17 02:19:21,087 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-17 02:19:21,088 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-08-17 02:19:21,213 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-17 02:19:21,214 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-08-17 02:19:21,234 - app.api.itinerary - INFO - Itinerary 8331d45f-ccb6-44f6-9979-abeb1a77e9d1 persisted successfully
2025-08-17 02:19:21,234 - app.api.itinerary - INFO - Successfully generated itinerary 8331d45f-ccb6-44f6-9979-abeb1a77e9d1 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-08-17 02:19:21,234 - app.api.itinerary - INFO - itinerary_generation completed in 0.33s
2025-08-17 03:51:47,570 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-17 03:51:47,573 - app.core.security - INFO - user_authentication completed in 0.54s
2025-08-17 03:51:47,573 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-17 03:51:47,580 - app.core.security - INFO - Access token created successfully
2025-08-17 03:51:47,581 - app.core.security - INFO - Refresh token created successfully
2025-08-17 03:51:47,581 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-17 03:51:47,582 - app.api.auth - INFO - user_login completed in 0.55s
2025-08-17 03:52:24,310 - app.core.security - INFO - Current user resolved: testuser123
2025-08-17 03:52:24,722 - app.core.nlp.parser - INFO - Parsed travel request with 100.0% confidence
2025-08-17 03:52:24,724 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-17 03:52:24,739 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-17 03:52:24,765 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-17 03:52:24,780 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-17 03:52:24,830 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-17 03:52:24,934 - app.api.itinerary - INFO - Recommended activity IDs: ['3eb33ca8-3f40-4375-9487-061d176c7d2a', '24e7d2d3-c383-4983-94b9-2b6e00d6d281', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', 'db1a23b4-d709-408c-9af4-50af823e7890', '51b8c98a-6aef-4cbd-880b-4d04fb9eab49', '3623f0cc-479f-4cba-af63-9e62dd6cd812', '7c7e53f6-f4fa-44dc-a200-2fb46304b766', 'aeb18db1-596d-4454-bcad-022c754b2b8e', '635abf00-6e28-4e21-87bd-7a9c3ba5a835']
2025-08-17 03:52:24,935 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('3eb33ca8-3f40-4375-9487-061d176c7d2a')]
2025-08-17 03:52:24,936 - app.api.itinerary - INFO - Activity location filter: center=(35.71,139.8107), radius_m=20000
2025-08-17 03:52:24,937 - app.api.itinerary - INFO - Adding activity POI: id=3eb33ca8-3f40-4375-9487-061d176c7d2a, name='Tokyo Sushi Workshop', lat=35.6895, lon=139.6917, price=75
2025-08-17 03:52:24,938 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-17 03:52:25,185 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-17 03:52:25,186 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-08-17 03:52:25,187 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-08-17 03:52:25,192 - app.api.itinerary - INFO - Recommended activity IDs: ['3eb33ca8-3f40-4375-9487-061d176c7d2a', '24e7d2d3-c383-4983-94b9-2b6e00d6d281', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', 'db1a23b4-d709-408c-9af4-50af823e7890', '51b8c98a-6aef-4cbd-880b-4d04fb9eab49', '3623f0cc-479f-4cba-af63-9e62dd6cd812', '7c7e53f6-f4fa-44dc-a200-2fb46304b766', 'aeb18db1-596d-4454-bcad-022c754b2b8e', '635abf00-6e28-4e21-87bd-7a9c3ba5a835']
2025-08-17 03:52:25,193 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('3eb33ca8-3f40-4375-9487-061d176c7d2a')]
2025-08-17 03:52:25,193 - app.api.itinerary - INFO - Activity location filter: center=(35.71,139.8107), radius_m=50000
2025-08-17 03:52:25,194 - app.api.itinerary - INFO - Adding activity POI: id=3eb33ca8-3f40-4375-9487-061d176c7d2a, name='Tokyo Sushi Workshop', lat=35.6895, lon=139.6917, price=75
2025-08-17 03:52:25,195 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-17 03:52:25,295 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-17 03:52:25,296 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-08-17 03:52:25,296 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-08-17 03:52:25,302 - app.api.itinerary - INFO - Recommended activity IDs: ['3eb33ca8-3f40-4375-9487-061d176c7d2a', '24e7d2d3-c383-4983-94b9-2b6e00d6d281', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', 'db1a23b4-d709-408c-9af4-50af823e7890', '51b8c98a-6aef-4cbd-880b-4d04fb9eab49', '3623f0cc-479f-4cba-af63-9e62dd6cd812', '7c7e53f6-f4fa-44dc-a200-2fb46304b766', 'aeb18db1-596d-4454-bcad-022c754b2b8e', '635abf00-6e28-4e21-87bd-7a9c3ba5a835']
2025-08-17 03:52:25,303 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('3eb33ca8-3f40-4375-9487-061d176c7d2a')]
2025-08-17 03:52:25,303 - app.api.itinerary - INFO - Activity location filter: center=(35.71,139.8107), radius_m=100000
2025-08-17 03:52:25,304 - app.api.itinerary - INFO - Adding activity POI: id=3eb33ca8-3f40-4375-9487-061d176c7d2a, name='Tokyo Sushi Workshop', lat=35.6895, lon=139.6917, price=75
2025-08-17 03:52:25,306 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-08-17 03:52:25,408 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-08-17 03:52:25,409 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-08-17 03:52:25,631 - app.api.itinerary - INFO - Created schedule for 1 days
2025-08-17 03:52:25,631 - app.api.itinerary - INFO - Scheduled items: 1 days with enriched details
2025-08-17 03:52:25,704 - app.api.itinerary - INFO - Itinerary cf1108cb-b4c4-4330-b369-516963e42c24 persisted successfully
2025-08-17 03:52:25,705 - app.api.itinerary - INFO - Successfully generated itinerary cf1108cb-b4c4-4330-b369-516963e42c24 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-17 03:52:25,706 - app.api.itinerary - INFO - itinerary_generation completed in 1.39s
2025-08-25 02:35:44,963 - app.main - INFO - Starting application...
2025-08-25 02:35:44,964 - app.main - INFO - Initializing database manager...
2025-08-25 02:35:44,964 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 02:35:45,002 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 02:35:45,073 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 02:35:45,074 - app.main - INFO - Database manager initialized successfully
2025-08-25 02:36:48,957 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-08-25 02:36:48,958 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-08-25 02:38:47,662 - app.api.security - INFO - Security health check completed successfully
2025-08-25 02:39:09,993 - app.api.security - INFO - Security health check completed successfully
2025-08-25 03:13:17,252 - app.main - INFO - Shutting down application...
2025-08-25 03:13:17,253 - app.main - INFO - Closing database connections...
2025-08-25 03:13:17,253 - app.db.session - INFO - Closing database connections...
2025-08-25 03:13:17,274 - app.db.session - INFO - Database connections closed
2025-08-25 03:13:17,274 - app.main - INFO - Database connections closed successfully
2025-08-25 03:13:30,397 - app.main - INFO - Starting application...
2025-08-25 03:13:30,398 - app.main - INFO - Initializing database manager...
2025-08-25 03:13:30,399 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 03:13:30,445 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 03:13:30,539 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 03:13:30,540 - app.main - INFO - Database manager initialized successfully
2025-08-25 03:14:33,431 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-25 03:14:33,432 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-25 03:14:33,432 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-25 03:14:33,433 - app.api.nlp - INFO - nlp_parsing completed in 1.90s
2025-08-25 03:14:33,526 - app.core.nlp.parser - INFO - Parsed travel request with 100.0% confidence
2025-08-25 03:14:33,527 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-25 03:14:33,527 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-25 03:14:33,528 - app.api.nlp - INFO - nlp_parsing completed in 0.09s
2025-08-25 03:14:33,609 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-25 03:14:33,609 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-25 03:14:33,610 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-25 03:14:33,610 - app.api.nlp - INFO - nlp_parsing completed in 0.08s
2025-08-25 03:14:33,689 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-25 03:14:33,690 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-25 03:14:33,690 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-25 03:14:33,691 - app.api.nlp - INFO - nlp_parsing completed in 0.08s
2025-08-25 03:14:33,763 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-08-25 03:14:33,763 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-25 03:14:33,764 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-25 03:14:33,764 - app.api.nlp - INFO - nlp_parsing completed in 0.07s
2025-08-25 03:14:49,165 - app.main - INFO - Shutting down application...
2025-08-25 03:14:49,166 - app.main - INFO - Closing database connections...
2025-08-25 03:14:49,166 - app.db.session - INFO - Closing database connections...
2025-08-25 03:14:49,169 - app.db.session - INFO - Database connections closed
2025-08-25 03:14:49,170 - app.main - INFO - Database connections closed successfully
2025-08-25 03:14:58,562 - app.main - INFO - Starting application...
2025-08-25 03:14:58,562 - app.main - INFO - Initializing database manager...
2025-08-25 03:14:58,563 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 03:14:58,593 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 03:14:58,639 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 03:14:58,640 - app.main - INFO - Database manager initialized successfully
2025-08-25 03:15:18,166 - app.main - INFO - Shutting down application...
2025-08-25 03:15:18,167 - app.main - INFO - Closing database connections...
2025-08-25 03:15:18,167 - app.db.session - INFO - Closing database connections...
2025-08-25 03:15:18,170 - app.db.session - INFO - Database connections closed
2025-08-25 03:15:18,171 - app.main - INFO - Database connections closed successfully
2025-08-25 03:15:27,312 - app.main - INFO - Starting application...
2025-08-25 03:15:27,313 - app.main - INFO - Initializing database manager...
2025-08-25 03:15:27,314 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 03:15:27,338 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 03:15:27,375 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 03:15:27,376 - app.main - INFO - Database manager initialized successfully
2025-08-25 03:32:06,538 - app.main - INFO - Shutting down application...
2025-08-25 03:32:06,542 - app.main - INFO - Closing database connections...
2025-08-25 03:32:06,546 - app.db.session - INFO - Closing database connections...
2025-08-25 03:32:06,568 - app.db.session - INFO - Database connections closed
2025-08-25 03:32:06,570 - app.main - INFO - Database connections closed successfully
2025-08-25 03:32:19,308 - app.main - INFO - Starting application...
2025-08-25 03:32:19,309 - app.main - INFO - Initializing database manager...
2025-08-25 03:32:19,310 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 03:32:19,336 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 03:32:19,375 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 03:32:19,375 - app.main - INFO - Database manager initialized successfully
2025-08-25 03:32:41,295 - app.main - INFO - Shutting down application...
2025-08-25 03:32:41,296 - app.main - INFO - Closing database connections...
2025-08-25 03:32:41,296 - app.db.session - INFO - Closing database connections...
2025-08-25 03:32:41,299 - app.db.session - INFO - Database connections closed
2025-08-25 03:32:41,300 - app.main - INFO - Database connections closed successfully
2025-08-25 03:32:50,432 - app.main - INFO - Starting application...
2025-08-25 03:32:50,433 - app.main - INFO - Initializing database manager...
2025-08-25 03:32:50,433 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 03:32:50,454 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 03:32:50,490 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 03:32:50,490 - app.main - INFO - Database manager initialized successfully
2025-08-25 03:33:11,350 - app.main - INFO - Shutting down application...
2025-08-25 03:33:11,350 - app.main - INFO - Closing database connections...
2025-08-25 03:33:11,350 - app.db.session - INFO - Closing database connections...
2025-08-25 03:33:11,353 - app.db.session - INFO - Database connections closed
2025-08-25 03:33:11,354 - app.main - INFO - Database connections closed successfully
2025-08-25 03:33:20,847 - app.main - INFO - Starting application...
2025-08-25 03:33:20,848 - app.main - INFO - Initializing database manager...
2025-08-25 03:33:20,851 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 03:33:20,890 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 03:33:20,947 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 03:33:20,947 - app.main - INFO - Database manager initialized successfully
2025-08-25 03:33:44,819 - app.main - INFO - Shutting down application...
2025-08-25 03:33:44,819 - app.main - INFO - Closing database connections...
2025-08-25 03:33:44,819 - app.db.session - INFO - Closing database connections...
2025-08-25 03:33:44,823 - app.db.session - INFO - Database connections closed
2025-08-25 03:33:44,823 - app.main - INFO - Database connections closed successfully
2025-08-25 03:33:53,922 - app.main - INFO - Starting application...
2025-08-25 03:33:53,923 - app.main - INFO - Initializing database manager...
2025-08-25 03:33:53,923 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 03:33:53,956 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 03:33:54,000 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 03:33:54,000 - app.main - INFO - Database manager initialized successfully
2025-08-25 03:34:53,206 - app.main - INFO - Shutting down application...
2025-08-25 03:34:53,206 - app.main - INFO - Closing database connections...
2025-08-25 03:34:53,207 - app.db.session - INFO - Closing database connections...
2025-08-25 03:34:53,209 - app.db.session - INFO - Database connections closed
2025-08-25 03:34:53,210 - app.main - INFO - Database connections closed successfully
2025-08-25 03:35:01,969 - app.main - INFO - Starting application...
2025-08-25 03:35:01,969 - app.main - INFO - Initializing database manager...
2025-08-25 03:35:01,970 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 03:35:01,994 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 03:35:02,031 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 03:35:02,031 - app.main - INFO - Database manager initialized successfully
2025-08-25 03:52:04,944 - app.main - INFO - Shutting down application...
2025-08-25 03:52:04,946 - app.main - INFO - Closing database connections...
2025-08-25 03:52:04,947 - app.db.session - INFO - Closing database connections...
2025-08-25 03:52:04,976 - app.db.session - INFO - Database connections closed
2025-08-25 03:52:04,977 - app.main - INFO - Database connections closed successfully
2025-08-25 03:52:20,162 - app.main - INFO - Starting application...
2025-08-25 03:52:20,163 - app.main - INFO - Initializing database manager...
2025-08-25 03:52:20,163 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 03:52:20,198 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 03:52:20,261 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 03:52:20,261 - app.main - INFO - Database manager initialized successfully
2025-08-25 04:24:24,354 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-25 04:24:24,727 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-25 04:24:24,728 - app.core.security - INFO - user_authentication completed in 0.63s
2025-08-25 04:24:24,728 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-25 04:24:24,776 - app.core.security - INFO - Access token created successfully
2025-08-25 04:24:24,776 - app.core.security - INFO - Refresh token created successfully
2025-08-25 04:24:24,777 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-25 04:24:24,778 - app.api.auth - INFO - user_login completed in 0.68s
2025-08-25 04:26:01,653 - app.core.security - INFO - Current user resolved: testuser123
2025-08-25 04:26:04,526 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-25 04:26:04,527 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-25 04:26:04,546 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-25 04:26:04,561 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-25 04:26:04,572 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-25 04:26:04,698 - app.api.itinerary - INFO - Found 0 flight options
2025-08-25 04:26:04,701 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-08-25 04:26:04,775 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-08-25 04:26:04,776 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-08-25 04:26:04,776 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-08-25 04:26:04,778 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-08-25 04:26:04,778 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-25 04:26:04,779 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-08-25 04:26:04,779 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-25 04:26:04,780 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-08-25 04:26:04,780 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-25 04:26:04,781 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-08-25 04:26:04,781 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-08-25 04:26:04,781 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-08-25 04:26:04,782 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-08-25 04:26:04,782 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-08-25 04:26:04,783 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-08-25 04:26:04,783 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-08-25 04:26:04,784 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-08-25 04:26:04,785 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-08-25 04:26:05,098 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-08-25 04:26:05,099 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-08-25 04:26:05,526 - app.ml.inference - INFO - TransformerReorderer loaded successfully
2025-08-25 04:26:05,730 - app.api.itinerary - INFO - Created schedule for 4 days
2025-08-25 04:26:05,731 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-08-25 04:26:05,810 - app.api.itinerary - INFO - Itinerary 60470bcc-428e-4c17-910a-04fff1552bce persisted successfully
2025-08-25 04:26:05,810 - app.api.itinerary - INFO - Successfully generated itinerary 60470bcc-428e-4c17-910a-04fff1552bce for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-25 04:26:05,811 - app.api.itinerary - INFO - itinerary_generation completed in 4.14s
2025-08-25 05:25:59,677 - app.core.nlp.parser - INFO - Parsed travel request with 100.0% confidence
2025-08-25 05:25:59,681 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-25 05:25:59,682 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-25 05:25:59,686 - app.api.nlp - INFO - nlp_parsing completed in 0.86s
2025-08-25 06:11:39,774 - app.main - INFO - Shutting down application...
2025-08-25 06:11:39,776 - app.main - INFO - Closing database connections...
2025-08-25 06:11:39,778 - app.db.session - INFO - Closing database connections...
2025-08-25 06:11:39,923 - app.db.session - INFO - Database connections closed
2025-08-25 06:11:39,924 - app.main - INFO - Database connections closed successfully
2025-08-25 06:12:00,939 - app.main - INFO - Starting application...
2025-08-25 06:12:00,940 - app.main - INFO - Initializing database manager...
2025-08-25 06:12:00,940 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 06:12:00,984 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 06:12:01,062 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 06:12:01,063 - app.main - INFO - Database manager initialized successfully
2025-08-25 06:12:15,000 - app.main - INFO - Shutting down application...
2025-08-25 06:12:15,001 - app.main - INFO - Closing database connections...
2025-08-25 06:12:15,001 - app.db.session - INFO - Closing database connections...
2025-08-25 06:12:15,004 - app.db.session - INFO - Database connections closed
2025-08-25 06:12:15,005 - app.main - INFO - Database connections closed successfully
2025-08-25 06:12:24,294 - app.main - INFO - Starting application...
2025-08-25 06:12:24,295 - app.main - INFO - Initializing database manager...
2025-08-25 06:12:24,296 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 06:12:24,735 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 06:12:24,775 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 06:12:24,775 - app.main - INFO - Database manager initialized successfully
2025-08-25 06:12:48,778 - app.main - INFO - Shutting down application...
2025-08-25 06:12:48,779 - app.main - INFO - Closing database connections...
2025-08-25 06:12:48,779 - app.db.session - INFO - Closing database connections...
2025-08-25 06:12:48,784 - app.db.session - INFO - Database connections closed
2025-08-25 06:12:48,784 - app.main - INFO - Database connections closed successfully
2025-08-25 06:12:58,532 - app.main - INFO - Starting application...
2025-08-25 06:12:58,533 - app.main - INFO - Initializing database manager...
2025-08-25 06:12:58,533 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-25 06:12:58,557 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-25 06:12:58,599 - app.db.session - INFO - Database manager initialized successfully
2025-08-25 06:12:58,600 - app.main - INFO - Database manager initialized successfully
2025-08-26 09:37:39,296 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-26 09:37:39,645 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-26 09:37:39,645 - app.core.security - INFO - user_authentication completed in 1.64s
2025-08-26 09:37:39,646 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-26 09:37:39,815 - app.core.security - INFO - Access token created successfully
2025-08-26 09:37:39,816 - app.core.security - INFO - Refresh token created successfully
2025-08-26 09:37:39,819 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-26 09:37:39,819 - app.api.auth - INFO - user_login completed in 1.82s
2025-08-26 09:38:12,471 - app.core.nlp.parser - INFO - Parsed travel request with 100.0% confidence
2025-08-26 09:38:12,471 - app.api.nlp - INFO - Successfully parsed travel request
2025-08-26 09:38:12,472 - app.api.nlp - INFO - Travel request parsed successfully
2025-08-26 09:38:12,472 - app.api.nlp - INFO - nlp_parsing completed in 9.93s
2025-08-26 09:43:11,012 - app.main - INFO - Shutting down application...
2025-08-26 09:43:11,012 - app.main - INFO - Closing database connections...
2025-08-26 09:43:11,013 - app.db.session - INFO - Closing database connections...
2025-08-26 09:43:11,018 - app.db.session - INFO - Database connections closed
2025-08-26 09:43:11,018 - app.main - INFO - Database connections closed successfully
2025-08-26 09:43:27,267 - app.main - INFO - Starting application...
2025-08-26 09:43:27,267 - app.main - INFO - Initializing database manager...
2025-08-26 09:43:27,268 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-26 09:43:27,306 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-26 09:43:27,356 - app.db.session - INFO - Database manager initialized successfully
2025-08-26 09:43:27,357 - app.main - INFO - Database manager initialized successfully
2025-08-26 09:43:45,078 - app.main - INFO - Shutting down application...
2025-08-26 09:43:45,078 - app.main - INFO - Closing database connections...
2025-08-26 09:43:45,078 - app.db.session - INFO - Closing database connections...
2025-08-26 09:43:45,081 - app.db.session - INFO - Database connections closed
2025-08-26 09:43:45,081 - app.main - INFO - Database connections closed successfully
2025-08-26 09:43:54,316 - app.main - INFO - Starting application...
2025-08-26 09:43:54,317 - app.main - INFO - Initializing database manager...
2025-08-26 09:43:54,317 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-26 09:43:54,345 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-26 09:43:54,387 - app.db.session - INFO - Database manager initialized successfully
2025-08-26 09:43:54,387 - app.main - INFO - Database manager initialized successfully
2025-08-26 09:44:17,515 - app.main - INFO - Shutting down application...
2025-08-26 09:44:17,515 - app.main - INFO - Closing database connections...
2025-08-26 09:44:17,515 - app.db.session - INFO - Closing database connections...
2025-08-26 09:44:17,518 - app.db.session - INFO - Database connections closed
2025-08-26 09:44:17,519 - app.main - INFO - Database connections closed successfully
2025-08-26 09:44:28,193 - app.main - INFO - Starting application...
2025-08-26 09:44:28,195 - app.main - INFO - Initializing database manager...
2025-08-26 09:44:28,196 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-26 09:44:28,243 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-26 09:44:28,296 - app.db.session - INFO - Database manager initialized successfully
2025-08-26 09:44:28,296 - app.main - INFO - Database manager initialized successfully
2025-08-26 09:44:50,662 - app.main - INFO - Shutting down application...
2025-08-26 09:44:50,662 - app.main - INFO - Closing database connections...
2025-08-26 09:44:50,663 - app.db.session - INFO - Closing database connections...
2025-08-26 09:44:50,666 - app.db.session - INFO - Database connections closed
2025-08-26 09:44:50,666 - app.main - INFO - Database connections closed successfully
2025-08-26 09:44:59,930 - app.main - INFO - Starting application...
2025-08-26 09:44:59,930 - app.main - INFO - Initializing database manager...
2025-08-26 09:44:59,931 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-26 09:44:59,952 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-26 09:44:59,989 - app.db.session - INFO - Database manager initialized successfully
2025-08-26 09:44:59,989 - app.main - INFO - Database manager initialized successfully
2025-08-26 09:45:23,544 - app.main - INFO - Shutting down application...
2025-08-26 09:45:23,544 - app.main - INFO - Closing database connections...
2025-08-26 09:45:23,545 - app.db.session - INFO - Closing database connections...
2025-08-26 09:45:23,547 - app.db.session - INFO - Database connections closed
2025-08-26 09:45:23,548 - app.main - INFO - Database connections closed successfully
2025-08-26 09:45:33,219 - app.main - INFO - Starting application...
2025-08-26 09:45:33,220 - app.main - INFO - Initializing database manager...
2025-08-26 09:45:33,221 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-26 09:45:33,248 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-26 09:45:33,292 - app.db.session - INFO - Database manager initialized successfully
2025-08-26 09:45:33,292 - app.main - INFO - Database manager initialized successfully
2025-08-30 02:18:34,583 - app.main - INFO - Shutting down application...
2025-08-30 02:18:34,591 - app.main - INFO - Closing database connections...
2025-08-30 02:18:34,595 - app.db.session - INFO - Closing database connections...
2025-08-30 02:18:34,727 - app.db.session - INFO - Database connections closed
2025-08-30 02:18:34,729 - app.main - INFO - Database connections closed successfully
2025-08-30 02:18:57,902 - app.main - INFO - Starting application...
2025-08-30 02:18:57,902 - app.main - INFO - Initializing database manager...
2025-08-30 02:18:57,903 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-30 02:18:57,943 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-30 02:18:58,006 - app.db.session - INFO - Database manager initialized successfully
2025-08-30 02:18:58,007 - app.main - INFO - Database manager initialized successfully
2025-08-30 02:44:13,521 - app.main - INFO - Shutting down application...
2025-08-30 02:44:13,523 - app.main - INFO - Closing database connections...
2025-08-30 02:44:13,524 - app.db.session - INFO - Closing database connections...
2025-08-30 02:44:13,559 - app.db.session - INFO - Database connections closed
2025-08-30 02:44:13,560 - app.main - INFO - Database connections closed successfully
2025-08-30 02:44:36,327 - app.main - INFO - Starting application...
2025-08-30 02:44:36,327 - app.main - INFO - Initializing database manager...
2025-08-30 02:44:36,328 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-30 02:44:36,364 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-30 02:44:36,420 - app.db.session - INFO - Database manager initialized successfully
2025-08-30 02:44:36,421 - app.main - INFO - Database manager initialized successfully
2025-08-30 02:44:52,573 - app.main - INFO - Shutting down application...
2025-08-30 02:44:52,573 - app.main - INFO - Closing database connections...
2025-08-30 02:44:52,574 - app.db.session - INFO - Closing database connections...
2025-08-30 02:44:52,579 - app.db.session - INFO - Database connections closed
2025-08-30 02:44:52,579 - app.main - INFO - Database connections closed successfully
2025-08-30 02:45:04,852 - app.main - INFO - Starting application...
2025-08-30 02:45:04,853 - app.main - INFO - Initializing database manager...
2025-08-30 02:45:04,853 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-30 02:45:04,906 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-30 02:45:04,990 - app.db.session - INFO - Database manager initialized successfully
2025-08-30 02:45:04,991 - app.main - INFO - Database manager initialized successfully
2025-09-01 14:04:02,184 - app.main - INFO - Starting application...
2025-09-01 14:04:02,185 - app.main - INFO - Initializing database manager...
2025-09-01 14:04:02,185 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-01 14:04:02,276 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-01 14:04:02,347 - app.db.session - INFO - Database manager initialized successfully
2025-09-01 14:04:02,347 - app.main - INFO - Database manager initialized successfully
2025-09-01 14:05:10,246 - app.main - INFO - Starting application...
2025-09-01 14:05:10,247 - app.main - INFO - Initializing database manager...
2025-09-01 14:05:10,248 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-01 14:05:10,285 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-01 14:05:10,344 - app.db.session - INFO - Database manager initialized successfully
2025-09-01 14:05:10,345 - app.main - INFO - Database manager initialized successfully
2025-09-01 14:08:39,193 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-01 14:08:39,542 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-09-01 14:08:39,543 - app.core.security - INFO - user_authentication completed in 0.48s
2025-09-01 14:08:39,544 - app.api.auth - INFO - Successful login for user: ttgi_
2025-09-01 14:08:39,559 - app.core.security - INFO - Access token created successfully
2025-09-01 14:08:39,560 - app.core.security - INFO - Refresh token created successfully
2025-09-01 14:08:39,561 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-09-01 14:08:39,562 - app.api.auth - INFO - user_login completed in 0.50s
2025-09-01 14:08:39,591 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:08:42,426 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:08:42,479 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:08:42,512 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:08:42,513 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-09-01 14:08:42,513 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:08:42,520 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:08:42,520 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-01 14:08:42,521 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:08:45,227 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:08:45,227 - app.api.auth - INFO - User ttgi_ logged out
2025-09-01 14:08:45,228 - app.api.auth - INFO - user_logout completed in 0.00s
2025-09-01 14:09:44,960 - app.main - ERROR - Database health check failed: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-01 14:15:50,698 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions._base.InterfaceError'>: connection is closed
2025-09-01 14:15:51,132 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-09-01 14:15:51,132 - app.core.security - INFO - user_authentication completed in 0.44s
2025-09-01 14:15:51,133 - app.api.auth - INFO - Successful login for user: ttgi_
2025-09-01 14:15:51,135 - app.core.security - INFO - Access token created successfully
2025-09-01 14:15:51,135 - app.core.security - INFO - Refresh token created successfully
2025-09-01 14:15:51,136 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-09-01 14:15:51,137 - app.api.auth - INFO - user_login completed in 0.45s
2025-09-01 14:15:51,152 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:15:51,304 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:15:51,363 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:15:51,364 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-09-01 14:15:51,364 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:15:51,368 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:15:51,382 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:15:51,383 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-01 14:15:51,383 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:16:21,418 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:16:21,681 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:16:21,681 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:16:21,682 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-01 14:16:21,682 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-01 14:16:21,683 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-01 14:16:21,685 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:16:22,156 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:16:22,819 - app.ml.inference - INFO - TransformerReorderer loaded successfully
2025-09-01 14:16:23,002 - app.api.itinerary - INFO - Created schedule for 2 days
2025-09-01 14:16:23,002 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-09-01 14:16:23,021 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:16:23,058 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:16:23,059 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:16:23,059 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-01 14:16:23,060 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-01 14:16:23,061 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-01 14:16:23,062 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:16:23,156 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:16:23,335 - app.api.itinerary - INFO - Created schedule for 2 days
2025-09-01 14:16:23,336 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-09-01 14:16:36,922 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:16:36,940 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:16:36,941 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-01 14:16:36,941 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:16:36,945 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:16:36,960 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:16:36,961 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-01 14:16:36,962 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:17:49,963 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:17:49,984 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:17:49,984 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-01 14:17:49,985 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:17:49,994 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:17:50,014 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:17:50,014 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-01 14:17:50,015 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:18:12,014 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-09-01 14:18:12,015 - app.api.nlp - INFO - Successfully parsed travel request
2025-09-01 14:18:12,016 - app.api.nlp - INFO - Travel request parsed successfully
2025-09-01 14:18:12,017 - app.api.nlp - INFO - nlp_parsing completed in 0.12s
2025-09-01 14:18:42,010 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:18:42,042 - app.core.nlp.parser - INFO - Parsed travel request with 70.0% confidence
2025-09-01 14:18:42,043 - app.api.itinerary - INFO - Travel request parsed successfully
2025-09-01 14:18:42,054 - app.api.itinerary - INFO - Location coordinates retrieved
2025-09-01 14:18:42,058 - app.api.itinerary - INFO - Destination recommendations generated
2025-09-01 14:18:42,063 - app.api.itinerary - INFO - Activity recommendations generated
2025-09-01 14:18:42,080 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-09-01 14:18:42,091 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-09-01 14:18:42,091 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-09-01 14:18:42,092 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=20000
2025-09-01 14:18:42,094 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, name='Louvre Museum Guided Tour', lat=48.8606, lon=2.3376, price=20
2025-09-01 14:18:42,095 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:18:42,209 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:18:42,210 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=20000
2025-09-01 14:18:42,211 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=50000
2025-09-01 14:18:42,216 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-09-01 14:18:42,216 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-09-01 14:18:42,217 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=50000
2025-09-01 14:18:42,218 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, name='Louvre Museum Guided Tour', lat=48.8606, lon=2.3376, price=20
2025-09-01 14:18:42,219 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:18:42,302 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:18:42,303 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=50000
2025-09-01 14:18:42,304 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=100000
2025-09-01 14:18:42,310 - app.api.itinerary - INFO - Recommended activity IDs: ['f92573fd-c9c2-4574-9365-a19f57af4a88', '4a15a8a5-d18c-42d6-b2ba-8a82caa9ea2c', '305dde53-03bf-46e0-9e97-eb46605305dc', 'b126ab1d-da6c-40a4-bc3c-e9c4a40fffb4', '571d32dc-7afb-48f8-bc6f-95410dafcb6d', '62833b43-f877-400b-901a-8127dbb24e3f', 'db1a23b4-d709-408c-9af4-50af823e7890', 'd50d5bb0-dcbf-4d17-943a-f65bb19fd8c9', '47751b1f-f3a6-44f8-86ea-9d7209c5f6e3', '8093befe-c1dd-4252-8172-d163953015ee']
2025-09-01 14:18:42,311 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-09-01 14:18:42,311 - app.api.itinerary - INFO - Activity location filter: center=(48.8588897,2.320041), radius_m=100000
2025-09-01 14:18:42,312 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, name='Louvre Museum Guided Tour', lat=48.8606, lon=2.3376, price=20
2025-09-01 14:18:42,313 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:18:42,405 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:18:42,405 - app.api.itinerary - INFO - build_poi_list found 1 activities with radius_m=100000
2025-09-01 14:18:42,687 - app.api.itinerary - INFO - Created schedule for 35 days
2025-09-01 14:18:42,690 - app.api.itinerary - INFO - Scheduled items: 35 days with enriched details
2025-09-01 14:18:42,736 - app.api.itinerary - INFO - Itinerary 5f1c751b-306a-4454-9279-5c8efe1fc575 persisted successfully
2025-09-01 14:18:42,736 - app.api.itinerary - INFO - Successfully generated itinerary 5f1c751b-306a-4454-9279-5c8efe1fc575 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-09-01 14:18:42,737 - app.api.itinerary - INFO - itinerary_generation completed in 0.72s
2025-09-01 14:18:44,351 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:18:44,395 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-09-01 14:18:44,396 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-09-01 14:18:44,397 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-09-01 14:18:44,397 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, name='Louvre Museum Guided Tour', lat=48.8606, lon=2.3376, price=20
2025-09-01 14:18:44,398 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:18:44,508 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:18:45,022 - app.api.itinerary - INFO - Created schedule for 34 days
2025-09-01 14:18:45,024 - app.api.itinerary - INFO - Scheduled items: 34 days with enriched details
2025-09-01 14:18:45,037 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:18:45,072 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-09-01 14:18:45,072 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('8093befe-c1dd-4252-8172-d163953015ee')]
2025-09-01 14:18:45,073 - app.api.itinerary - INFO - Activity location filter: center=(48.853495,2.348391), radius_m=20000
2025-09-01 14:18:45,073 - app.api.itinerary - INFO - Adding activity POI: id=8093befe-c1dd-4252-8172-d163953015ee, name='Louvre Museum Guided Tour', lat=48.8606, lon=2.3376, price=20
2025-09-01 14:18:45,074 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:18:45,222 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:18:45,550 - app.api.itinerary - INFO - Created schedule for 34 days
2025-09-01 14:18:45,551 - app.api.itinerary - INFO - Scheduled items: 34 days with enriched details
2025-09-01 14:20:44,774 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:20:44,806 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:20:44,824 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:20:44,825 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-09-01 14:20:44,826 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:20:44,830 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:20:44,831 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-01 14:20:44,832 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:21:10,507 - app.core.nlp.parser - INFO - Parsed travel request with 100.0% confidence
2025-09-01 14:21:10,507 - app.api.nlp - INFO - Successfully parsed travel request
2025-09-01 14:21:10,508 - app.api.nlp - INFO - Travel request parsed successfully
2025-09-01 14:21:10,509 - app.api.nlp - INFO - nlp_parsing completed in 2.38s
2025-09-01 14:21:17,803 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:21:17,909 - app.core.nlp.parser - INFO - Parsed travel request with 100.0% confidence
2025-09-01 14:21:17,910 - app.api.itinerary - INFO - Travel request parsed successfully
2025-09-01 14:21:17,915 - app.api.itinerary - INFO - Location coordinates retrieved
2025-09-01 14:21:17,920 - app.api.itinerary - INFO - Destination recommendations generated
2025-09-01 14:21:17,926 - app.api.itinerary - INFO - Activity recommendations generated
2025-09-01 14:21:17,938 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-09-01 14:21:17,947 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '198f0814-bf17-4849-8a01-02c7620d7833', '3eb33ca8-3f40-4375-9487-061d176c7d2a', '24e7d2d3-c383-4983-94b9-2b6e00d6d281', 'cb136867-635d-4993-8104-1c4c02ac5343', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '484755be-3e2b-4389-bd05-0a7081d029c7']
2025-09-01 14:21:17,948 - app.api.itinerary - INFO - Fetched 8 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('484755be-3e2b-4389-bd05-0a7081d029c7'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-09-01 14:21:17,948 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-09-01 14:21:17,950 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-09-01 14:21:17,952 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-09-01 14:21:17,952 - app.api.itinerary - INFO - Adding activity POI: id=484755be-3e2b-4389-bd05-0a7081d029c7, name='New York Botanical Garden', lat=40.8622871, lon=-73.8773946, price=None
2025-09-01 14:21:17,953 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-01 14:21:17,953 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-09-01 14:21:17,957 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-01 14:21:17,957 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-09-01 14:21:17,958 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-09-01 14:21:17,960 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-09-01 14:21:17,960 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-09-01 14:21:17,961 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-09-01 14:21:17,961 - app.api.itinerary - INFO - Activities after budget filter: 4 (before: 5)
2025-09-01 14:21:18,058 - app.api.itinerary - INFO - Built POI list with 35 unique items (from 35 raw)
2025-09-01 14:21:18,059 - app.api.itinerary - INFO - build_poi_list found 4 activities with radius_m=20000
2025-09-01 14:21:18,193 - app.api.itinerary - INFO - Created schedule for 1 days
2025-09-01 14:21:18,194 - app.api.itinerary - INFO - Scheduled items: 1 days with enriched details
2025-09-01 14:21:18,228 - app.api.itinerary - INFO - Itinerary 865b5be4-55ae-4fde-8cbc-341902513ded persisted successfully
2025-09-01 14:21:18,229 - app.api.itinerary - INFO - Successfully generated itinerary 865b5be4-55ae-4fde-8cbc-341902513ded for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-09-01 14:21:18,229 - app.api.itinerary - INFO - itinerary_generation completed in 0.42s
2025-09-01 14:21:19,866 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:21:19,905 - app.api.itinerary - INFO - Recommended activity IDs: []
2025-09-01 14:21:19,906 - app.api.itinerary - INFO - Fetched 0 activity rows: []
2025-09-01 14:21:19,906 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-01 14:21:19,907 - app.api.itinerary - INFO - Activities after budget filter: 0 (before: 1)
2025-09-01 14:21:19,997 - app.api.itinerary - INFO - Built POI list with 31 unique items (from 31 raw)
2025-09-01 14:21:19,998 - app.api.itinerary - INFO - Created schedule for 0 days
2025-09-01 14:21:19,998 - app.api.itinerary - INFO - Scheduled items: 0 days with enriched details
2025-09-01 14:21:20,007 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:21:20,034 - app.api.itinerary - INFO - Recommended activity IDs: []
2025-09-01 14:21:20,035 - app.api.itinerary - INFO - Fetched 0 activity rows: []
2025-09-01 14:21:20,037 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-01 14:21:20,037 - app.api.itinerary - INFO - Activities after budget filter: 0 (before: 1)
2025-09-01 14:21:20,138 - app.api.itinerary - INFO - Built POI list with 31 unique items (from 31 raw)
2025-09-01 14:21:20,138 - app.api.itinerary - INFO - Created schedule for 0 days
2025-09-01 14:21:20,139 - app.api.itinerary - INFO - Scheduled items: 0 days with enriched details
2025-09-01 14:24:38,033 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-01 14:24:38,033 - app.api.nlp - INFO - Successfully parsed travel request
2025-09-01 14:24:38,034 - app.api.nlp - INFO - Travel request parsed successfully
2025-09-01 14:24:38,034 - app.api.nlp - INFO - nlp_parsing completed in 0.23s
2025-09-01 14:24:41,893 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:24:42,069 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-01 14:24:42,070 - app.api.itinerary - INFO - Travel request parsed successfully
2025-09-01 14:24:42,076 - app.api.itinerary - INFO - Location coordinates retrieved
2025-09-01 14:24:42,081 - app.api.itinerary - INFO - Destination recommendations generated
2025-09-01 14:24:42,085 - app.api.itinerary - INFO - Activity recommendations generated
2025-09-01 14:24:42,106 - app.api.itinerary - INFO - Found 0 flight options
2025-09-01 14:24:42,111 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-09-01 14:24:42,117 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-09-01 14:24:42,118 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-09-01 14:24:42,118 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-09-01 14:24:42,119 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-09-01 14:24:42,120 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-01 14:24:42,121 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-09-01 14:24:42,122 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-01 14:24:42,123 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-09-01 14:24:42,125 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-01 14:24:42,125 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-01 14:24:42,126 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-09-01 14:24:42,127 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-09-01 14:24:42,127 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-09-01 14:24:42,129 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-09-01 14:24:42,129 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-09-01 14:24:42,129 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-09-01 14:24:42,130 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-09-01 14:24:42,131 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-09-01 14:24:42,210 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-09-01 14:24:42,211 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-09-01 14:24:42,327 - app.api.itinerary - INFO - Created schedule for 3 days
2025-09-01 14:24:42,328 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-09-01 14:24:42,354 - app.api.itinerary - INFO - Itinerary abbba04d-6809-4422-98bb-7ab1320208f5 persisted successfully
2025-09-01 14:24:42,355 - app.api.itinerary - INFO - Successfully generated itinerary abbba04d-6809-4422-98bb-7ab1320208f5 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-09-01 14:24:42,356 - app.api.itinerary - INFO - itinerary_generation completed in 0.46s
2025-09-01 14:24:44,527 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:24:44,567 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:24:44,568 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:24:44,569 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-01 14:24:44,571 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-01 14:24:44,572 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-01 14:24:44,573 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:24:44,662 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:24:44,805 - app.api.itinerary - INFO - Created schedule for 2 days
2025-09-01 14:24:44,806 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-09-01 14:24:44,820 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:24:44,840 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:24:44,841 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:24:44,841 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-01 14:24:44,842 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-01 14:24:44,842 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-01 14:24:44,843 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:24:44,917 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:24:45,084 - app.api.itinerary - INFO - Created schedule for 2 days
2025-09-01 14:24:45,085 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-09-01 14:24:52,144 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:24:52,173 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:24:52,180 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:24:52,180 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-01 14:24:52,181 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:24:52,202 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-01 14:24:52,203 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-01 14:24:52,203 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-01 14:25:57,381 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-01 14:25:57,382 - app.api.nlp - INFO - Successfully parsed travel request
2025-09-01 14:25:57,383 - app.api.nlp - INFO - Travel request parsed successfully
2025-09-01 14:25:57,383 - app.api.nlp - INFO - nlp_parsing completed in 0.19s
2025-09-01 14:26:15,631 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:26:15,775 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-01 14:26:15,776 - app.api.itinerary - INFO - Travel request parsed successfully
2025-09-01 14:26:15,783 - app.api.itinerary - INFO - Location coordinates retrieved
2025-09-01 14:26:15,785 - app.api.itinerary - INFO - Destination recommendations generated
2025-09-01 14:26:15,789 - app.api.itinerary - INFO - Activity recommendations generated
2025-09-01 14:26:15,800 - app.api.itinerary - INFO - Found 0 flight options
2025-09-01 14:26:15,804 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-09-01 14:26:15,809 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-09-01 14:26:15,810 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-09-01 14:26:15,811 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-09-01 14:26:15,812 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-09-01 14:26:15,813 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-01 14:26:15,814 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-09-01 14:26:15,815 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-01 14:26:15,816 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-09-01 14:26:15,816 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-01 14:26:15,817 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-01 14:26:15,818 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-09-01 14:26:15,818 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-09-01 14:26:15,819 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-09-01 14:26:15,820 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-09-01 14:26:15,821 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-09-01 14:26:15,821 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-09-01 14:26:15,822 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-09-01 14:26:15,822 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-09-01 14:26:15,896 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-09-01 14:26:15,897 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-09-01 14:26:16,004 - app.api.itinerary - INFO - Created schedule for 3 days
2025-09-01 14:26:16,006 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-09-01 14:26:16,032 - app.api.itinerary - INFO - Itinerary 92c88799-1ae3-4c0c-8df9-9c8a9426a2da persisted successfully
2025-09-01 14:26:16,033 - app.api.itinerary - INFO - Successfully generated itinerary 92c88799-1ae3-4c0c-8df9-9c8a9426a2da for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-09-01 14:26:16,034 - app.api.itinerary - INFO - itinerary_generation completed in 0.40s
2025-09-01 14:26:18,169 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:26:18,225 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:26:18,227 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:26:18,227 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-01 14:26:18,228 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-01 14:26:18,229 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-01 14:26:18,230 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:26:18,342 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:26:18,571 - app.api.itinerary - INFO - Created schedule for 2 days
2025-09-01 14:26:18,572 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-09-01 14:26:18,587 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-01 14:26:18,636 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:26:18,636 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-01 14:26:18,637 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-01 14:26:18,639 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-01 14:26:18,640 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-01 14:26:18,649 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-01 14:26:18,793 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-01 14:26:18,931 - app.api.itinerary - INFO - Created schedule for 2 days
2025-09-01 14:26:18,933 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-09-03 22:26:07,458 - app.main - INFO - Starting application...
2025-09-03 22:26:07,460 - app.main - INFO - Initializing database manager...
2025-09-03 22:26:07,460 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-03 22:26:07,528 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-03 22:26:07,589 - app.db.session - INFO - Database manager initialized successfully
2025-09-03 22:26:07,590 - app.main - INFO - Database manager initialized successfully
2025-09-03 22:27:23,623 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-03 22:27:23,960 - app.core.security - INFO - User authenticated successfully: testuser123
2025-09-03 22:27:23,961 - app.core.security - INFO - user_authentication completed in 0.41s
2025-09-03 22:27:23,961 - app.api.auth - INFO - Successful login for user: testuser123
2025-09-03 22:27:23,971 - app.core.security - INFO - Access token created successfully
2025-09-03 22:27:23,971 - app.core.security - INFO - Refresh token created successfully
2025-09-03 22:27:23,971 - app.api.auth - INFO - User testuser123 logged in successfully
2025-09-03 22:27:23,972 - app.api.auth - INFO - user_login completed in 0.42s
2025-09-03 22:28:10,000 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-03 22:28:10,001 - app.api.nlp - INFO - Successfully parsed travel request
2025-09-03 22:28:10,002 - app.api.nlp - INFO - Travel request parsed successfully
2025-09-03 22:28:10,002 - app.api.nlp - INFO - nlp_parsing completed in 1.94s
2025-09-03 23:07:30,476 - app.core.nlp.parser - INFO - Parsed travel request with 45.0% confidence
2025-09-03 23:07:30,478 - app.api.nlp - INFO - Successfully parsed travel request
2025-09-03 23:07:30,479 - app.api.nlp - INFO - Travel request parsed successfully
2025-09-03 23:07:30,481 - app.api.nlp - INFO - nlp_parsing completed in 0.38s
2025-09-04 01:20:59,217 - app.api.security - INFO - Security health check completed successfully
2025-09-04 01:22:02,267 - app.main - INFO - Starting application...
2025-09-04 01:22:02,268 - app.main - INFO - Initializing database manager...
2025-09-04 01:22:02,270 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 01:22:02,361 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 01:22:02,508 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 01:22:02,508 - app.main - INFO - Database manager initialized successfully
2025-09-04 01:22:05,004 - app.api.security - INFO - Security health check completed successfully
2025-09-04 01:24:08,929 - app.api.security - INFO - Security health check completed successfully
2025-09-04 01:27:03,240 - app.main - INFO - Shutting down application...
2025-09-04 01:27:03,242 - app.main - INFO - Closing database connections...
2025-09-04 01:27:03,243 - app.db.session - INFO - Closing database connections...
2025-09-04 01:27:03,254 - app.db.session - INFO - Database connections closed
2025-09-04 01:27:03,259 - app.main - INFO - Database connections closed successfully
2025-09-04 01:27:27,197 - app.main - INFO - Starting application...
2025-09-04 01:27:27,199 - app.main - INFO - Initializing database manager...
2025-09-04 01:27:27,200 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 01:27:27,313 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 01:27:27,446 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 01:27:27,449 - app.main - INFO - Database manager initialized successfully
2025-09-04 01:28:06,494 - app.main - INFO - Shutting down application...
2025-09-04 01:28:06,494 - app.main - INFO - Closing database connections...
2025-09-04 01:28:06,495 - app.db.session - INFO - Closing database connections...
2025-09-04 01:28:06,499 - app.db.session - INFO - Database connections closed
2025-09-04 01:28:06,499 - app.main - INFO - Database connections closed successfully
2025-09-04 01:28:20,364 - app.main - INFO - Starting application...
2025-09-04 01:28:20,365 - app.main - INFO - Initializing database manager...
2025-09-04 01:28:20,366 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 01:28:20,414 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 01:28:20,481 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 01:28:20,481 - app.main - INFO - Database manager initialized successfully
2025-09-04 01:28:31,103 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-04 01:28:31,431 - app.core.security - INFO - User authenticated successfully: testuser123
2025-09-04 01:28:31,432 - app.core.security - INFO - user_authentication completed in 0.44s
2025-09-04 01:28:31,432 - app.api.auth - INFO - Successful login for user: testuser123
2025-09-04 01:28:31,450 - app.core.security - INFO - Access token created successfully
2025-09-04 01:28:31,450 - app.core.security - INFO - Refresh token created successfully
2025-09-04 01:28:31,451 - app.api.auth - INFO - User testuser123 logged in successfully
2025-09-04 01:28:31,452 - app.api.auth - INFO - user_login completed in 0.46s
2025-09-04 01:29:02,386 - app.core.security - INFO - Current user resolved: testuser123
2025-09-04 01:29:04,279 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-04 01:29:04,280 - app.api.itinerary - INFO - Travel request parsed successfully
2025-09-04 01:29:04,302 - app.api.itinerary - INFO - Location coordinates retrieved
2025-09-04 01:29:04,316 - app.api.itinerary - INFO - Destination recommendations generated
2025-09-04 01:29:04,321 - app.api.itinerary - INFO - Activity recommendations generated
2025-09-04 01:29:04,333 - app.api.itinerary - INFO - Recommended IDs - Destinations: ['2754083a-8d39-4db0-9d28-337a6fe2b383', 'd6f85265-e1ee-49de-86b6-7224c69f928a', 'f66be966-bdd0-48b0-9dbe-f62324f2be0d', 'dbb459a4-5912-49fe-94f3-98928a7c58ab', '5e31b033-2ca9-460b-9628-b294f89317ea', '64160910-332a-4243-8e36-b0d3dd55c629', '1fc65d2a-eb74-4a85-90b2-a6b8568da4c1', '4a3cedbe-97a2-48d6-bef5-8e7fdff5f40c', '1dbddc57-3a40-468d-b7fe-8c0b75e8570e', '6da1784f-1a76-4b7c-a758-e7ccc2c3993b'], Activities: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25'], Accommodations: ['62e3be95-e9ac-4657-b2d3-69e4b6c78112', '9982257e-18a6-4d63-88cb-fe5b9adbe1c4', '5ab79ebb-655b-43c8-94a8-e31fc06535f6', 'fa262022-9fcb-4e68-86ba-e6b878d51487', '37e12ab8-de27-45bd-98cf-84f23e23b53b', '0d14770f-cb9a-41d8-b5b5-ebfad07f02fb', '07faa49e-5669-4699-a81a-d2991371cbd9', 'a5034a8c-75e0-48dd-87ca-a340d316b6b2', '7a4b4496-dfb8-462f-99e7-bb1cb86d83de', '457f4bad-7266-4d31-8632-106700e79e19']
2025-09-04 01:29:04,425 - app.api.itinerary - INFO - Found 0 flight options
2025-09-04 01:29:04,429 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-09-04 01:29:04,514 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-09-04 01:29:04,515 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-09-04 01:29:04,515 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-09-04 01:29:04,517 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-09-04 01:29:04,517 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-04 01:29:04,518 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-09-04 01:29:04,519 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-04 01:29:04,520 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-09-04 01:29:04,521 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 01:29:04,521 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 01:29:04,522 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-09-04 01:29:04,523 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-09-04 01:29:04,523 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-09-04 01:29:04,524 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-09-04 01:29:04,525 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-09-04 01:29:04,526 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-09-04 01:29:04,528 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-09-04 01:29:04,529 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-09-04 01:29:04,908 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-09-04 01:29:04,909 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-09-04 01:29:05,374 - app.ml.inference - INFO - TransformerReorderer loaded successfully
2025-09-04 01:29:05,839 - app.api.itinerary - INFO - Created schedule for 4 days
2025-09-04 01:29:05,844 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-09-04 01:29:06,026 - app.api.itinerary - INFO - Itinerary 10bed6c5-a330-4a5b-925e-60cc327c4973 persisted successfully
2025-09-04 01:29:06,026 - app.api.itinerary - INFO - Successfully generated itinerary 10bed6c5-a330-4a5b-925e-60cc327c4973 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-09-04 01:29:06,027 - app.api.itinerary - INFO - itinerary_generation completed in 3.64s
2025-09-04 01:31:55,681 - app.main - INFO - Shutting down application...
2025-09-04 01:31:55,682 - app.main - INFO - Closing database connections...
2025-09-04 01:31:55,682 - app.db.session - INFO - Closing database connections...
2025-09-04 01:31:55,706 - app.db.session - INFO - Database connections closed
2025-09-04 01:31:55,707 - app.main - INFO - Database connections closed successfully
2025-09-04 01:32:06,498 - app.main - INFO - Starting application...
2025-09-04 01:32:06,499 - app.main - INFO - Initializing database manager...
2025-09-04 01:32:06,499 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 01:32:06,532 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 01:32:06,590 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 01:32:06,591 - app.main - INFO - Database manager initialized successfully
2025-09-04 01:34:03,898 - app.main - INFO - Shutting down application...
2025-09-04 01:34:03,898 - app.main - INFO - Closing database connections...
2025-09-04 01:34:03,899 - app.db.session - INFO - Closing database connections...
2025-09-04 01:34:03,904 - app.db.session - INFO - Database connections closed
2025-09-04 01:34:03,904 - app.main - INFO - Database connections closed successfully
2025-09-04 01:34:13,452 - app.main - INFO - Starting application...
2025-09-04 01:34:13,452 - app.main - INFO - Initializing database manager...
2025-09-04 01:34:13,453 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 01:34:13,484 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 01:34:13,531 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 01:34:13,531 - app.main - INFO - Database manager initialized successfully
2025-09-04 01:34:15,794 - app.core.security - INFO - Current user resolved: testuser123
2025-09-04 01:34:17,771 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-04 01:34:17,772 - app.api.itinerary - INFO - Travel request parsed successfully
2025-09-04 01:34:17,781 - app.api.itinerary - INFO - Location coordinates retrieved
2025-09-04 01:34:17,784 - app.api.itinerary - INFO - Destination recommendations generated
2025-09-04 01:34:17,788 - app.api.itinerary - INFO - Activity recommendations generated
2025-09-04 01:34:17,794 - app.api.itinerary - INFO - Accommodation recommendations generated
2025-09-04 01:34:17,816 - app.api.itinerary - INFO - Found 0 flight options
2025-09-04 01:34:17,819 - app.api.itinerary - INFO - Transportation recommendations generated
2025-09-04 01:34:17,820 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-09-04 01:34:17,850 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-09-04 01:34:17,851 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-09-04 01:34:17,851 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-09-04 01:34:17,853 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-09-04 01:34:17,853 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-04 01:34:17,854 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-09-04 01:34:17,854 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-04 01:34:17,855 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-09-04 01:34:17,856 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 01:34:17,856 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 01:34:17,857 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-09-04 01:34:17,858 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-09-04 01:34:17,858 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-09-04 01:34:17,859 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-09-04 01:34:17,861 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-09-04 01:34:17,861 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-09-04 01:34:17,862 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-09-04 01:34:17,863 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-09-04 01:34:18,042 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-09-04 01:34:18,043 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-09-04 01:34:18,319 - app.ml.inference - INFO - TransformerReorderer loaded successfully
2025-09-04 01:34:18,494 - app.api.itinerary - INFO - Created schedule for 4 days
2025-09-04 01:34:18,495 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-09-04 01:34:18,560 - app.api.itinerary - INFO - Itinerary 8d2061d0-0b5e-44b5-9f26-f267f37487bd persisted successfully
2025-09-04 01:34:18,561 - app.api.itinerary - INFO - Successfully generated itinerary 8d2061d0-0b5e-44b5-9f26-f267f37487bd for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-09-04 01:34:18,561 - app.api.itinerary - INFO - itinerary_generation completed in 2.77s
2025-09-04 01:41:54,408 - app.main - INFO - Shutting down application...
2025-09-04 01:41:54,409 - app.main - INFO - Closing database connections...
2025-09-04 01:41:54,410 - app.db.session - INFO - Closing database connections...
2025-09-04 01:41:54,428 - app.db.session - INFO - Database connections closed
2025-09-04 01:41:54,428 - app.main - INFO - Database connections closed successfully
2025-09-04 01:42:08,998 - app.main - INFO - Starting application...
2025-09-04 01:42:08,998 - app.main - INFO - Initializing database manager...
2025-09-04 01:42:09,000 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 01:42:09,044 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 01:42:09,136 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 01:42:09,137 - app.main - INFO - Database manager initialized successfully
2025-09-04 01:42:38,241 - app.main - INFO - Shutting down application...
2025-09-04 01:42:38,242 - app.main - INFO - Closing database connections...
2025-09-04 01:42:38,243 - app.db.session - INFO - Closing database connections...
2025-09-04 01:42:38,248 - app.db.session - INFO - Database connections closed
2025-09-04 01:42:38,249 - app.main - INFO - Database connections closed successfully
2025-09-04 01:42:54,818 - app.main - INFO - Starting application...
2025-09-04 01:42:54,818 - app.main - INFO - Initializing database manager...
2025-09-04 01:42:54,819 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 01:42:54,867 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 01:42:54,930 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 01:42:54,931 - app.main - INFO - Database manager initialized successfully
2025-09-04 01:43:31,762 - app.main - INFO - Shutting down application...
2025-09-04 01:43:31,763 - app.main - INFO - Closing database connections...
2025-09-04 01:43:31,763 - app.db.session - INFO - Closing database connections...
2025-09-04 01:43:31,769 - app.db.session - INFO - Database connections closed
2025-09-04 01:43:31,769 - app.main - INFO - Database connections closed successfully
2025-09-04 01:43:42,789 - app.main - INFO - Starting application...
2025-09-04 01:43:42,790 - app.main - INFO - Initializing database manager...
2025-09-04 01:43:42,791 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 01:43:42,858 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 01:43:42,937 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 01:43:42,938 - app.main - INFO - Database manager initialized successfully
2025-09-04 01:44:20,169 - app.main - INFO - Shutting down application...
2025-09-04 01:44:20,170 - app.main - INFO - Closing database connections...
2025-09-04 01:44:20,171 - app.db.session - INFO - Closing database connections...
2025-09-04 01:44:20,176 - app.db.session - INFO - Database connections closed
2025-09-04 01:44:20,177 - app.main - INFO - Database connections closed successfully
2025-09-04 01:44:36,561 - app.main - INFO - Starting application...
2025-09-04 01:44:36,563 - app.main - INFO - Initializing database manager...
2025-09-04 01:44:36,565 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 01:44:36,651 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 01:44:36,794 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 01:44:36,795 - app.main - INFO - Database manager initialized successfully
2025-09-04 01:45:31,044 - app.main - INFO - Shutting down application...
2025-09-04 01:45:31,044 - app.main - INFO - Closing database connections...
2025-09-04 01:45:31,044 - app.db.session - INFO - Closing database connections...
2025-09-04 01:45:31,048 - app.db.session - INFO - Database connections closed
2025-09-04 01:45:31,049 - app.main - INFO - Database connections closed successfully
2025-09-04 01:45:41,472 - app.main - INFO - Starting application...
2025-09-04 01:45:41,474 - app.main - INFO - Initializing database manager...
2025-09-04 01:45:41,475 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 01:45:41,515 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 01:45:41,589 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 01:45:41,590 - app.main - INFO - Database manager initialized successfully
2025-09-04 01:46:00,304 - app.core.security - INFO - Current user resolved: testuser123
2025-09-04 01:46:02,371 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-04 01:46:02,372 - app.api.itinerary - INFO - Travel request parsed successfully
2025-09-04 01:46:02,390 - app.api.itinerary - INFO - Location coordinates retrieved
2025-09-04 01:46:02,398 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget night budget 200.0", "K": 5, "topk": [{"rank": 1, "row": 8, "id": "2754083a-8d39-4db0-9d28-337a6fe2b383", "score": 0.47943120106570436}, {"rank": 2, "row": 26, "id": "d6f85265-e1ee-49de-86b6-7224c69f928a", "score": 0.38049548496517277}, {"rank": 3, "row": 24, "id": "f66be966-bdd0-48b0-9dbe-f62324f2be0d", "score": 0.33373748819874866}, {"rank": 4, "row": 17, "id": "dbb459a4-5912-49fe-94f3-98928a7c58ab", "score": 0.32506303527396674}, {"rank": 5, "row": 0, "id": "5e31b033-2ca9-460b-9628-b294f89317ea", "score": 0.3000809465487028}]}
2025-09-04 01:46:02,404 - app.api.itinerary - INFO - activity rank_topk {"stage": "rank", "domain": "acc", "query": "itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget night budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 16, "id": "e5565d6b-90dd-42c1-89f3-e7293bf409ca", "score": 0.43660825287425575}, {"rank": 2, "row": 2561, "id": "e60cb649-146d-41a3-a20c-62ac68865086", "score": 0.3866877096702068}, {"rank": 3, "row": 850, "id": "198f0814-bf17-4849-8a01-02c7620d7833", "score": 0.37837448218273073}, {"rank": 4, "row": 1672, "id": "47d2b428-dc0c-440d-8a9d-9778f30a4e47", "score": 0.37837448218273073}, {"rank": 5, "row": 858, "id": "60a53ac7-b74a-4488-9269-23e8ee00433f", "score": 0.25759769885764905}, {"rank": 6, "row": 1684, "id": "cb136867-635d-4993-8104-1c4c02ac5343", "score": 0.25759769885764905}, {"rank": 7, "row": 2573, "id": "bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62", "score": 0.25620967195780736}, {"rank": 8, "row": 1680, "id": "4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2", "score": 0.22535241787390578}, {"rank": 9, "row": 859, "id": "292fc1d3-3325-4521-a841-dd50fee05fd7", "score": 0.22535241787390578}, {"rank": 10, "row": 2569, "id": "afd02e86-f3c1-4936-8099-747351aaab25", "score": 0.2245799727304617}]}
2025-09-04 01:46:02,418 - app.api.itinerary - INFO - accomodation rank_topk {"stage": "rank", "domain": "acc", "query": "itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget night budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 5765, "id": "62e3be95-e9ac-4657-b2d3-69e4b6c78112", "score": 0.5846951627024383}, {"rank": 2, "row": 3179, "id": "9982257e-18a6-4d63-88cb-fe5b9adbe1c4", "score": 0.5342644242428954}, {"rank": 3, "row": 8294, "id": "5ab79ebb-655b-43c8-94a8-e31fc06535f6", "score": 0.4722642377591524}, {"rank": 4, "row": 5248, "id": "fa262022-9fcb-4e68-86ba-e6b878d51487", "score": 0.4722642377591524}, {"rank": 5, "row": 7558, "id": "37e12ab8-de27-45bd-98cf-84f23e23b53b", "score": 0.4722642377591524}, {"rank": 6, "row": 2136, "id": "0d14770f-cb9a-41d8-b5b5-ebfad07f02fb", "score": 0.4722642377591524}, {"rank": 7, "row": 7788, "id": "07faa49e-5669-4699-a81a-d2991371cbd9", "score": 0.4714118773502709}, {"rank": 8, "row": 811, "id": "a5034a8c-75e0-48dd-87ca-a340d316b6b2", "score": 0.4714118773502709}, {"rank": 9, "row": 8411, "id": "7a4b4496-dfb8-462f-99e7-bb1cb86d83de", "score": 0.4714118773502709}, {"rank": 10, "row": 7225, "id": "457f4bad-7266-4d31-8632-106700e79e19", "score": 0.4714118773502709}]}
2025-09-04 01:46:02,492 - app.api.itinerary - INFO - Found 0 flight options
2025-09-04 01:46:02,495 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget night budget 200.0", "K": 0, "topk": []}
2025-09-04 01:46:02,496 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-09-04 01:46:02,565 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-09-04 01:46:02,566 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-09-04 01:46:02,567 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-09-04 01:46:02,568 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-09-04 01:46:02,568 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-04 01:46:02,569 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-09-04 01:46:02,570 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-04 01:46:02,571 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-09-04 01:46:02,572 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 01:46:02,573 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 01:46:02,574 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-09-04 01:46:02,575 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-09-04 01:46:02,575 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-09-04 01:46:02,576 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-09-04 01:46:02,576 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-09-04 01:46:02,577 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-09-04 01:46:02,578 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-09-04 01:46:02,582 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-09-04 01:46:03,067 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-09-04 01:46:03,068 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-09-04 01:46:03,448 - app.ml.inference - INFO - TransformerReorderer loaded successfully
2025-09-04 01:46:03,698 - app.api.itinerary - INFO - Created schedule for 4 days
2025-09-04 01:46:03,699 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-09-04 01:46:03,785 - app.api.itinerary - INFO - Itinerary 5cfbc218-743c-4fea-a5bd-7c8d9df71379 persisted successfully
2025-09-04 01:46:03,786 - app.api.itinerary - INFO - Successfully generated itinerary 5cfbc218-743c-4fea-a5bd-7c8d9df71379 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-09-04 01:46:03,788 - app.api.itinerary - INFO - itinerary_generation completed in 3.48s
2025-09-04 02:01:02,090 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-04 02:01:02,094 - app.api.nlp - INFO - Successfully parsed travel request
2025-09-04 02:01:02,095 - app.api.nlp - INFO - Travel request parsed successfully
2025-09-04 02:01:02,099 - app.api.nlp - INFO - nlp_parsing completed in 0.81s
2025-09-04 07:44:22,198 - app.main - INFO - Shutting down application...
2025-09-04 07:44:22,210 - app.main - INFO - Closing database connections...
2025-09-04 07:44:22,223 - app.db.session - INFO - Closing database connections...
2025-09-04 07:44:22,729 - app.db.session - INFO - Database connections closed
2025-09-04 07:44:22,732 - app.main - INFO - Database connections closed successfully
2025-09-04 07:45:11,837 - app.main - INFO - Starting application...
2025-09-04 07:45:11,840 - app.main - INFO - Initializing database manager...
2025-09-04 07:45:11,841 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 07:45:11,992 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 07:45:12,290 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 07:45:12,291 - app.main - INFO - Database manager initialized successfully
2025-09-04 10:12:49,083 - app.main - INFO - Shutting down application...
2025-09-04 10:12:49,120 - app.main - INFO - Closing database connections...
2025-09-04 10:12:49,134 - app.db.session - INFO - Closing database connections...
2025-09-04 10:12:49,750 - app.db.session - INFO - Database connections closed
2025-09-04 10:12:49,756 - app.main - INFO - Database connections closed successfully
2025-09-04 10:13:32,738 - app.main - INFO - Starting application...
2025-09-04 10:13:32,739 - app.main - INFO - Initializing database manager...
2025-09-04 10:13:32,741 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 10:13:32,862 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 10:13:33,093 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 10:13:33,094 - app.main - INFO - Database manager initialized successfully
2025-09-04 10:20:49,548 - app.main - INFO - Shutting down application...
2025-09-04 10:20:49,586 - app.main - INFO - Closing database connections...
2025-09-04 10:20:49,608 - app.db.session - INFO - Closing database connections...
2025-09-04 10:20:50,205 - app.db.session - INFO - Database connections closed
2025-09-04 10:20:50,211 - app.main - INFO - Database connections closed successfully
2025-09-04 10:21:24,286 - app.main - INFO - Starting application...
2025-09-04 10:21:24,287 - app.main - INFO - Initializing database manager...
2025-09-04 10:21:24,288 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 10:21:24,362 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 10:21:24,514 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 10:21:24,514 - app.main - INFO - Database manager initialized successfully
2025-09-04 10:22:48,347 - app.main - INFO - Shutting down application...
2025-09-04 10:22:48,354 - app.main - INFO - Closing database connections...
2025-09-04 10:22:48,357 - app.db.session - INFO - Closing database connections...
2025-09-04 10:22:48,490 - app.db.session - INFO - Database connections closed
2025-09-04 10:22:48,492 - app.main - INFO - Database connections closed successfully
2025-09-04 10:23:27,623 - app.main - INFO - Starting application...
2025-09-04 10:23:27,625 - app.main - INFO - Initializing database manager...
2025-09-04 10:23:27,625 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 10:23:27,717 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 10:23:27,961 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 10:23:27,962 - app.main - INFO - Database manager initialized successfully
2025-09-04 10:23:44,519 - app.main - INFO - Shutting down application...
2025-09-04 10:23:44,519 - app.main - INFO - Closing database connections...
2025-09-04 10:23:44,520 - app.db.session - INFO - Closing database connections...
2025-09-04 10:23:44,527 - app.db.session - INFO - Database connections closed
2025-09-04 10:23:44,528 - app.main - INFO - Database connections closed successfully
2025-09-04 10:24:20,146 - app.main - INFO - Starting application...
2025-09-04 10:24:20,148 - app.main - INFO - Initializing database manager...
2025-09-04 10:24:20,151 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 10:24:20,376 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 10:24:20,628 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 10:24:20,629 - app.main - INFO - Database manager initialized successfully
2025-09-04 10:35:49,631 - app.main - INFO - Shutting down application...
2025-09-04 10:35:49,638 - app.main - INFO - Closing database connections...
2025-09-04 10:35:49,641 - app.db.session - INFO - Closing database connections...
2025-09-04 10:35:49,755 - app.db.session - INFO - Database connections closed
2025-09-04 10:35:49,756 - app.main - INFO - Database connections closed successfully
2025-09-04 10:36:22,208 - app.main - INFO - Starting application...
2025-09-04 10:36:22,209 - app.main - INFO - Initializing database manager...
2025-09-04 10:36:22,210 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 10:36:22,293 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 10:36:22,405 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 10:36:22,405 - app.main - INFO - Database manager initialized successfully
2025-09-04 10:36:33,440 - app.main - INFO - Shutting down application...
2025-09-04 10:36:33,441 - app.main - INFO - Closing database connections...
2025-09-04 10:36:33,441 - app.db.session - INFO - Closing database connections...
2025-09-04 10:36:33,446 - app.db.session - INFO - Database connections closed
2025-09-04 10:36:33,446 - app.main - INFO - Database connections closed successfully
2025-09-04 10:36:46,585 - app.main - INFO - Starting application...
2025-09-04 10:36:46,586 - app.main - INFO - Initializing database manager...
2025-09-04 10:36:46,587 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 10:36:46,667 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 10:36:46,778 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 10:36:46,779 - app.main - INFO - Database manager initialized successfully
2025-09-04 10:42:11,670 - app.main - INFO - Shutting down application...
2025-09-04 10:42:11,671 - app.main - INFO - Closing database connections...
2025-09-04 10:42:11,671 - app.db.session - INFO - Closing database connections...
2025-09-04 10:42:11,676 - app.db.session - INFO - Database connections closed
2025-09-04 10:42:11,677 - app.main - INFO - Database connections closed successfully
2025-09-04 10:42:20,847 - app.main - INFO - Starting application...
2025-09-04 10:42:20,848 - app.main - INFO - Initializing database manager...
2025-09-04 10:42:20,848 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 10:42:20,894 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 10:42:20,959 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 10:42:20,960 - app.main - INFO - Database manager initialized successfully
2025-09-04 10:42:53,235 - app.main - INFO - Shutting down application...
2025-09-04 10:42:53,235 - app.main - INFO - Closing database connections...
2025-09-04 10:42:53,236 - app.db.session - INFO - Closing database connections...
2025-09-04 10:42:53,239 - app.db.session - INFO - Database connections closed
2025-09-04 10:42:53,239 - app.main - INFO - Database connections closed successfully
2025-09-04 10:43:01,847 - app.main - INFO - Starting application...
2025-09-04 10:43:01,847 - app.main - INFO - Initializing database manager...
2025-09-04 10:43:01,848 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 10:43:01,885 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 10:43:01,940 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 10:43:01,941 - app.main - INFO - Database manager initialized successfully
2025-09-04 10:43:41,428 - app.main - INFO - Shutting down application...
2025-09-04 10:43:41,428 - app.main - INFO - Closing database connections...
2025-09-04 10:43:41,429 - app.db.session - INFO - Closing database connections...
2025-09-04 10:43:41,433 - app.db.session - INFO - Database connections closed
2025-09-04 10:43:41,434 - app.main - INFO - Database connections closed successfully
2025-09-04 10:43:51,037 - app.main - INFO - Starting application...
2025-09-04 10:43:51,038 - app.main - INFO - Initializing database manager...
2025-09-04 10:43:51,038 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 10:43:51,070 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 10:43:51,122 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 10:43:51,123 - app.main - INFO - Database manager initialized successfully
2025-09-04 12:24:04,340 - app.main - INFO - Starting application...
2025-09-04 12:24:04,341 - app.main - INFO - Initializing database manager...
2025-09-04 12:24:04,342 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 12:24:04,430 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 12:24:04,532 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 12:24:04,532 - app.main - INFO - Database manager initialized successfully
2025-09-04 12:24:34,886 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-09-04 12:24:34,890 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-09-04 12:25:22,258 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-04 12:25:22,673 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-09-04 12:25:22,674 - app.core.security - INFO - user_authentication completed in 0.56s
2025-09-04 12:25:22,675 - app.api.auth - INFO - Successful login for user: ttgi_
2025-09-04 12:25:22,677 - app.core.security - INFO - Access token created successfully
2025-09-04 12:25:22,678 - app.core.security - INFO - Refresh token created successfully
2025-09-04 12:25:22,679 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-09-04 12:25:22,680 - app.api.auth - INFO - user_login completed in 0.56s
2025-09-04 12:25:22,704 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:25:24,452 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:25:24,520 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:25:24,589 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-04 12:25:24,590 - app.api.recommend - INFO - destination_recommendations completed in 0.02s
2025-09-04 12:25:24,592 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-04 12:25:24,598 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-04 12:25:24,599 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-04 12:25:24,600 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-04 12:26:35,151 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-04 12:26:35,152 - app.api.nlp - INFO - Successfully parsed travel request
2025-09-04 12:26:35,153 - app.api.nlp - INFO - Travel request parsed successfully
2025-09-04 12:26:35,154 - app.api.nlp - INFO - nlp_parsing completed in 3.18s
2025-09-04 12:32:17,182 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:32:17,687 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-04 12:32:17,689 - app.api.itinerary - INFO - Travel request parsed successfully
2025-09-04 12:32:17,764 - app.api.itinerary - INFO - Location coordinates retrieved
2025-09-04 12:32:17,791 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget night budget 200.0", "K": 5, "topk": [{"rank": 1, "row": 8, "id": "2754083a-8d39-4db0-9d28-337a6fe2b383", "score": 0.47943120106570436}, {"rank": 2, "row": 26, "id": "d6f85265-e1ee-49de-86b6-7224c69f928a", "score": 0.38049548496517277}, {"rank": 3, "row": 24, "id": "f66be966-bdd0-48b0-9dbe-f62324f2be0d", "score": 0.33373748819874866}, {"rank": 4, "row": 17, "id": "dbb459a4-5912-49fe-94f3-98928a7c58ab", "score": 0.32506303527396674}, {"rank": 5, "row": 0, "id": "5e31b033-2ca9-460b-9628-b294f89317ea", "score": 0.3000809465487028}]}
2025-09-04 12:32:17,802 - app.api.itinerary - INFO - activity rank_topk {"stage": "rank", "domain": "acc", "query": "itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget night budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 16, "id": "e5565d6b-90dd-42c1-89f3-e7293bf409ca", "score": 0.43660825287425575}, {"rank": 2, "row": 2561, "id": "e60cb649-146d-41a3-a20c-62ac68865086", "score": 0.3866877096702068}, {"rank": 3, "row": 850, "id": "198f0814-bf17-4849-8a01-02c7620d7833", "score": 0.37837448218273073}, {"rank": 4, "row": 1672, "id": "47d2b428-dc0c-440d-8a9d-9778f30a4e47", "score": 0.37837448218273073}, {"rank": 5, "row": 858, "id": "60a53ac7-b74a-4488-9269-23e8ee00433f", "score": 0.25759769885764905}, {"rank": 6, "row": 1684, "id": "cb136867-635d-4993-8104-1c4c02ac5343", "score": 0.25759769885764905}, {"rank": 7, "row": 2573, "id": "bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62", "score": 0.25620967195780736}, {"rank": 8, "row": 1680, "id": "4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2", "score": 0.22535241787390578}, {"rank": 9, "row": 859, "id": "292fc1d3-3325-4521-a841-dd50fee05fd7", "score": 0.22535241787390578}, {"rank": 10, "row": 2569, "id": "afd02e86-f3c1-4936-8099-747351aaab25", "score": 0.2245799727304617}]}
2025-09-04 12:32:17,831 - app.api.itinerary - INFO - accomodation rank_topk {"stage": "rank", "domain": "acc", "query": "itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget night budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 5765, "id": "62e3be95-e9ac-4657-b2d3-69e4b6c78112", "score": 0.5846951627024383}, {"rank": 2, "row": 3179, "id": "9982257e-18a6-4d63-88cb-fe5b9adbe1c4", "score": 0.5342644242428954}, {"rank": 3, "row": 8294, "id": "5ab79ebb-655b-43c8-94a8-e31fc06535f6", "score": 0.4722642377591524}, {"rank": 4, "row": 5248, "id": "fa262022-9fcb-4e68-86ba-e6b878d51487", "score": 0.4722642377591524}, {"rank": 5, "row": 7558, "id": "37e12ab8-de27-45bd-98cf-84f23e23b53b", "score": 0.4722642377591524}, {"rank": 6, "row": 2136, "id": "0d14770f-cb9a-41d8-b5b5-ebfad07f02fb", "score": 0.4722642377591524}, {"rank": 7, "row": 7788, "id": "07faa49e-5669-4699-a81a-d2991371cbd9", "score": 0.4714118773502709}, {"rank": 8, "row": 811, "id": "a5034a8c-75e0-48dd-87ca-a340d316b6b2", "score": 0.4714118773502709}, {"rank": 9, "row": 8411, "id": "7a4b4496-dfb8-462f-99e7-bb1cb86d83de", "score": 0.4714118773502709}, {"rank": 10, "row": 7225, "id": "457f4bad-7266-4d31-8632-106700e79e19", "score": 0.4714118773502709}]}
2025-09-04 12:32:17,996 - app.api.itinerary - INFO - Found 0 flight options
2025-09-04 12:32:18,002 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget night budget 200.0", "K": 0, "topk": []}
2025-09-04 12:32:18,003 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-09-04 12:32:18,160 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-09-04 12:32:18,161 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-09-04 12:32:18,162 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-09-04 12:32:18,163 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-09-04 12:32:18,163 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-04 12:32:18,164 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-09-04 12:32:18,165 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-04 12:32:18,166 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-09-04 12:32:18,166 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 12:32:18,168 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 12:32:18,169 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-09-04 12:32:18,170 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-09-04 12:32:18,170 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-09-04 12:32:18,171 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-09-04 12:32:18,171 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-09-04 12:32:18,172 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-09-04 12:32:18,174 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-09-04 12:32:18,174 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-09-04 12:32:18,625 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-09-04 12:32:18,625 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-09-04 12:32:19,259 - app.ml.inference - INFO - TransformerReorderer loaded successfully
2025-09-04 12:32:19,594 - app.api.itinerary - INFO - Created schedule for 4 days
2025-09-04 12:32:19,594 - app.api.itinerary - INFO - Scheduled items: 4 days with enriched details
2025-09-04 12:32:19,728 - app.api.itinerary - INFO - Itinerary e3925d26-d533-4e2c-a3c5-068f4b5a6af9 persisted successfully
2025-09-04 12:32:19,729 - app.api.itinerary - INFO - Successfully generated itinerary e3925d26-d533-4e2c-a3c5-068f4b5a6af9 for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-09-04 12:32:19,729 - app.api.itinerary - INFO - itinerary_generation completed in 2.52s
2025-09-04 12:32:26,162 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:32:26,226 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:32:26,227 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:32:26,228 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-04 12:32:26,229 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 12:32:26,230 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 12:32:26,230 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-04 12:32:26,389 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-04 12:32:26,550 - app.api.itinerary - INFO - Created schedule for 3 days
2025-09-04 12:32:26,551 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-09-04 12:32:26,563 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:32:26,625 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:32:26,627 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:32:26,629 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-04 12:32:26,629 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 12:32:26,630 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 12:32:26,630 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-04 12:32:26,763 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-04 12:32:27,091 - app.api.itinerary - INFO - Created schedule for 3 days
2025-09-04 12:32:27,091 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-09-04 12:32:54,592 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:32:54,639 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:32:54,641 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:32:54,643 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-04 12:32:54,643 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 12:32:54,644 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 12:32:54,645 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-04 12:32:54,772 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-04 12:32:54,915 - app.api.itinerary - INFO - Created schedule for 3 days
2025-09-04 12:32:54,916 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-09-04 12:33:02,361 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:33:48,753 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:33:48,783 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:33:48,784 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:33:48,784 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-04 12:33:48,785 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 12:33:48,786 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 12:33:48,787 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-04 12:33:48,916 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-04 12:33:49,051 - app.api.itinerary - INFO - Created schedule for 3 days
2025-09-04 12:33:49,052 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-09-04 12:33:55,544 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:33:55,577 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:33:55,578 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:33:55,579 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-04 12:33:55,580 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 12:33:55,582 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 12:33:55,583 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-04 12:33:55,695 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-04 12:33:55,843 - app.api.itinerary - INFO - Created schedule for 3 days
2025-09-04 12:33:55,843 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-09-04 12:34:00,845 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 12:34:00,877 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:34:00,878 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 12:34:00,879 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-04 12:34:00,880 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 12:34:00,881 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 12:34:00,881 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-04 12:34:01,020 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-04 12:34:01,170 - app.api.itinerary - INFO - Created schedule for 3 days
2025-09-04 12:34:01,171 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-09-04 12:34:14,626 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 15:47:45,847 - app.main - INFO - Starting application...
2025-09-04 15:47:45,847 - app.main - INFO - Initializing database manager...
2025-09-04 15:47:45,849 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-04 15:47:45,929 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-04 15:47:46,010 - app.db.session - INFO - Database manager initialized successfully
2025-09-04 15:47:46,010 - app.main - INFO - Database manager initialized successfully
2025-09-04 15:47:47,439 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-09-04 15:47:47,440 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-09-04 15:47:59,379 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-09-04 15:47:59,634 - app.core.security - WARNING - Authentication failed: invalid password for user - ttgi_
2025-09-04 15:47:59,634 - app.core.security - INFO - user_authentication completed in 0.41s
2025-09-04 15:47:59,635 - app.api.auth - WARNING - Failed login attempt for user: ttgi_
2025-09-04 15:47:59,635 - app.api.auth - INFO - user_login completed in 0.41s
2025-09-04 15:47:59,636 - app.db.session - ERROR - Unexpected session error: 401: Incorrect username or password
2025-09-04 17:25:41,155 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-09-04 17:25:41,158 - app.core.security - INFO - user_authentication completed in 0.72s
2025-09-04 17:25:41,160 - app.api.auth - INFO - Successful login for user: ttgi_
2025-09-04 17:25:41,175 - app.core.security - INFO - Access token created successfully
2025-09-04 17:25:41,178 - app.core.security - INFO - Refresh token created successfully
2025-09-04 17:25:41,181 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-09-04 17:25:41,182 - app.api.auth - INFO - user_login completed in 0.75s
2025-09-04 17:25:41,278 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 17:25:41,627 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 17:25:41,751 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 17:25:42,220 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-04 17:25:42,221 - app.api.recommend - INFO - destination_recommendations completed in 0.15s
2025-09-04 17:25:42,222 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-04 17:25:42,228 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-04 17:25:42,229 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-09-04 17:25:42,230 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-04 17:26:11,949 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-04 17:26:11,949 - app.api.nlp - INFO - Successfully parsed travel request
2025-09-04 17:26:11,950 - app.api.nlp - INFO - Travel request parsed successfully
2025-09-04 17:26:11,951 - app.api.nlp - INFO - nlp_parsing completed in 5.72s
2025-09-04 17:26:43,606 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 17:26:43,861 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-09-04 17:26:43,862 - app.api.itinerary - INFO - Travel request parsed successfully
2025-09-04 17:26:43,896 - app.api.itinerary - INFO - Location coordinates retrieved
2025-09-04 17:26:43,911 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 5, "topk": [{"rank": 1, "row": 8, "id": "2754083a-8d39-4db0-9d28-337a6fe2b383", "score": 0.47943120106570436}, {"rank": 2, "row": 26, "id": "d6f85265-e1ee-49de-86b6-7224c69f928a", "score": 0.38049548496517277}, {"rank": 3, "row": 24, "id": "f66be966-bdd0-48b0-9dbe-f62324f2be0d", "score": 0.33373748819874866}, {"rank": 4, "row": 17, "id": "dbb459a4-5912-49fe-94f3-98928a7c58ab", "score": 0.32506303527396674}, {"rank": 5, "row": 0, "id": "5e31b033-2ca9-460b-9628-b294f89317ea", "score": 0.3000809465487028}]}
2025-09-04 17:26:43,926 - app.api.itinerary - INFO - activity rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 16, "id": "e5565d6b-90dd-42c1-89f3-e7293bf409ca", "score": 0.43660825287425575}, {"rank": 2, "row": 2561, "id": "e60cb649-146d-41a3-a20c-62ac68865086", "score": 0.3866877096702068}, {"rank": 3, "row": 850, "id": "198f0814-bf17-4849-8a01-02c7620d7833", "score": 0.37837448218273073}, {"rank": 4, "row": 1672, "id": "47d2b428-dc0c-440d-8a9d-9778f30a4e47", "score": 0.37837448218273073}, {"rank": 5, "row": 858, "id": "60a53ac7-b74a-4488-9269-23e8ee00433f", "score": 0.25759769885764905}, {"rank": 6, "row": 1684, "id": "cb136867-635d-4993-8104-1c4c02ac5343", "score": 0.25759769885764905}, {"rank": 7, "row": 2573, "id": "bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62", "score": 0.25620967195780736}, {"rank": 8, "row": 1680, "id": "4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2", "score": 0.22535241787390578}, {"rank": 9, "row": 859, "id": "292fc1d3-3325-4521-a841-dd50fee05fd7", "score": 0.22535241787390578}, {"rank": 10, "row": 2569, "id": "afd02e86-f3c1-4936-8099-747351aaab25", "score": 0.2245799727304617}]}
2025-09-04 17:26:43,964 - app.api.itinerary - INFO - accomodation rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 5765, "id": "62e3be95-e9ac-4657-b2d3-69e4b6c78112", "score": 0.5846951627024383}, {"rank": 2, "row": 3179, "id": "9982257e-18a6-4d63-88cb-fe5b9adbe1c4", "score": 0.5342644242428954}, {"rank": 3, "row": 8294, "id": "5ab79ebb-655b-43c8-94a8-e31fc06535f6", "score": 0.4722642377591524}, {"rank": 4, "row": 5248, "id": "fa262022-9fcb-4e68-86ba-e6b878d51487", "score": 0.4722642377591524}, {"rank": 5, "row": 7558, "id": "37e12ab8-de27-45bd-98cf-84f23e23b53b", "score": 0.4722642377591524}, {"rank": 6, "row": 2136, "id": "0d14770f-cb9a-41d8-b5b5-ebfad07f02fb", "score": 0.4722642377591524}, {"rank": 7, "row": 7788, "id": "07faa49e-5669-4699-a81a-d2991371cbd9", "score": 0.4714118773502709}, {"rank": 8, "row": 811, "id": "a5034a8c-75e0-48dd-87ca-a340d316b6b2", "score": 0.4714118773502709}, {"rank": 9, "row": 8411, "id": "7a4b4496-dfb8-462f-99e7-bb1cb86d83de", "score": 0.4714118773502709}, {"rank": 10, "row": 7225, "id": "457f4bad-7266-4d31-8632-106700e79e19", "score": 0.4714118773502709}]}
2025-09-04 17:26:44,093 - app.api.itinerary - INFO - Found 0 flight options
2025-09-04 17:26:44,097 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 0, "topk": []}
2025-09-04 17:26:44,098 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-09-04 17:26:44,188 - app.api.itinerary - INFO - Recommended activity IDs: ['e5565d6b-90dd-42c1-89f3-e7293bf409ca', 'e60cb649-146d-41a3-a20c-62ac68865086', '198f0814-bf17-4849-8a01-02c7620d7833', '47d2b428-dc0c-440d-8a9d-9778f30a4e47', '60a53ac7-b74a-4488-9269-23e8ee00433f', 'cb136867-635d-4993-8104-1c4c02ac5343', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2', '292fc1d3-3325-4521-a841-dd50fee05fd7', 'afd02e86-f3c1-4936-8099-747351aaab25']
2025-09-04 17:26:44,189 - app.api.itinerary - INFO - Fetched 10 activity rows: [UUID('e5565d6b-90dd-42c1-89f3-e7293bf409ca'), UUID('198f0814-bf17-4849-8a01-02c7620d7833'), UUID('60a53ac7-b74a-4488-9269-23e8ee00433f'), UUID('292fc1d3-3325-4521-a841-dd50fee05fd7'), UUID('47d2b428-dc0c-440d-8a9d-9778f30a4e47'), UUID('4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2'), UUID('cb136867-635d-4993-8104-1c4c02ac5343'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62')]
2025-09-04 17:26:44,189 - app.api.itinerary - INFO - Activity location filter: center=(40.7127281,-74.0060152), radius_m=20000
2025-09-04 17:26:44,190 - app.api.itinerary - INFO - Adding activity POI: id=e5565d6b-90dd-42c1-89f3-e7293bf409ca, name='Broadway Show', lat=40.759, lon=-73.9845, price=120
2025-09-04 17:26:44,190 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-04 17:26:44,191 - app.api.itinerary - INFO - Adding activity POI: id=198f0814-bf17-4849-8a01-02c7620d7833, name='The New York Historical', lat=40.77934870000001, lon=-73.9739079, price=None
2025-09-04 17:26:44,191 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-09-04 17:26:44,193 - app.api.itinerary - INFO - Adding activity POI: id=60a53ac7-b74a-4488-9269-23e8ee00433f, name='Queens Museum', lat=40.745914, lon=-73.8467247, price=None
2025-09-04 17:26:44,194 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 17:26:44,194 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 17:26:44,195 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.77934870000001, lon=-73.9739079, id=47d2b428-dc0c-440d-8a9d-9778f30a4e47
2025-09-04 17:26:44,195 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.7127744, lon=-74.006059, id=4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2
2025-09-04 17:26:44,196 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.8467247, id=cb136867-635d-4993-8104-1c4c02ac5343
2025-09-04 17:26:44,196 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='the new york historical', lat=40.779349, lon=-73.973908, id=e60cb649-146d-41a3-a20c-62ac68865086
2025-09-04 17:26:44,197 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='new york city hall', lat=40.712774, lon=-74.006059, id=afd02e86-f3c1-4936-8099-747351aaab25
2025-09-04 17:26:44,197 - app.api.itinerary - INFO - Skipping duplicate activity by name/loc: name='queens museum', lat=40.745914, lon=-73.846725, id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62
2025-09-04 17:26:44,198 - app.api.itinerary - INFO - Excluding activity e5565d6b-90dd-42c1-89f3-e7293bf409ca due to price 120 > 20.0
2025-09-04 17:26:44,198 - app.api.itinerary - INFO - Activities after budget filter: 3 (before: 5)
2025-09-04 17:26:44,617 - app.api.itinerary - INFO - Built POI list with 34 unique items (from 34 raw)
2025-09-04 17:26:44,617 - app.api.itinerary - INFO - build_poi_list found 3 activities with radius_m=20000
2025-09-04 17:26:44,759 - app.api.itinerary - INFO - Created schedule for 3 days
2025-09-04 17:26:44,759 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-09-04 17:26:44,877 - app.api.itinerary - INFO - Itinerary fc0633bf-8046-4ffd-876d-0b3f8ff3a84a persisted successfully
2025-09-04 17:26:44,877 - app.api.itinerary - INFO - Successfully generated itinerary fc0633bf-8046-4ffd-876d-0b3f8ff3a84a for user dc7676f3-7404-4cf1-bdb3-905c05cabbcd
2025-09-04 17:26:44,878 - app.api.itinerary - INFO - itinerary_generation completed in 1.27s
2025-09-04 17:26:47,695 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 17:26:47,756 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 17:26:47,757 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 17:26:47,757 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-04 17:26:47,759 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 17:26:47,761 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 17:26:47,765 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-04 17:26:47,930 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-04 17:26:48,700 - app.ml.inference - INFO - TransformerReorderer loaded successfully
2025-09-04 17:26:48,929 - app.api.itinerary - INFO - Created schedule for 2 days
2025-09-04 17:26:48,930 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-09-04 17:26:48,939 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 17:26:48,964 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 17:26:48,964 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 17:26:48,965 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-04 17:26:48,965 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 17:26:48,966 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 17:26:48,967 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-04 17:26:49,073 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-04 17:26:49,175 - app.api.itinerary - INFO - Created schedule for 2 days
2025-09-04 17:26:49,176 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-09-04 17:27:26,968 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 17:27:27,008 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 17:27:27,008 - app.api.itinerary - INFO - Fetched 1 activity rows: [UUID('292fc1d3-3325-4521-a841-dd50fee05fd7')]
2025-09-04 17:27:27,009 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-09-04 17:27:27,009 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-09-04 17:27:27,010 - app.api.itinerary - INFO - Adding activity POI: id=292fc1d3-3325-4521-a841-dd50fee05fd7, name='New York City Hall', lat=40.7127744, lon=-74.006059, price=None
2025-09-04 17:27:27,011 - app.api.itinerary - INFO - Activities after budget filter: 1 (before: 2)
2025-09-04 17:27:27,139 - app.api.itinerary - INFO - Built POI list with 32 unique items (from 32 raw)
2025-09-04 17:27:27,275 - app.api.itinerary - INFO - Created schedule for 2 days
2025-09-04 17:27:27,276 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-09-04 17:28:14,502 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 17:28:14,529 - app.core.security - INFO - Current user resolved: ttgi_
2025-09-04 17:28:14,548 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-04 17:28:14,550 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-09-04 17:28:14,551 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-04 17:28:14,562 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-09-04 17:28:14,565 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-09-04 17:28:14,566 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-09-17 16:44:01,658 - app.main - INFO - Starting application...
2025-09-17 16:44:01,659 - app.main - INFO - Initializing database manager...
2025-09-17 16:44:01,660 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-17 16:44:01,701 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-17 16:44:01,754 - app.db.session - INFO - Database manager initialized successfully
2025-09-17 16:44:01,755 - app.main - INFO - Database manager initialized successfully
2025-09-18 15:05:50,363 - app.main - INFO - Shutting down application...
2025-09-18 15:05:50,372 - app.main - INFO - Closing database connections...
2025-09-18 15:05:50,379 - app.db.session - INFO - Closing database connections...
2025-09-18 15:05:50,531 - app.db.session - INFO - Database connections closed
2025-09-18 15:05:50,533 - app.main - INFO - Database connections closed successfully
2025-09-18 15:06:12,798 - app.main - INFO - Starting application...
2025-09-18 15:06:12,799 - app.main - INFO - Initializing database manager...
2025-09-18 15:06:12,800 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-18 15:06:12,858 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-18 15:06:12,968 - app.db.session - INFO - Database manager initialized successfully
2025-09-18 15:06:12,968 - app.main - INFO - Database manager initialized successfully
2025-09-19 12:05:37,918 - app.main - INFO - Starting application...
2025-09-19 12:05:37,919 - app.main - INFO - Initializing database manager...
2025-09-19 12:05:37,920 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-19 12:05:37,984 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-19 12:05:38,059 - app.db.session - INFO - Database manager initialized successfully
2025-09-19 12:05:38,060 - app.main - INFO - Database manager initialized successfully
2025-09-19 12:39:35,763 - app.main - INFO - Starting application...
2025-09-19 12:39:35,767 - app.main - INFO - Initializing database manager...
2025-09-19 12:39:35,767 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-09-19 12:39:35,820 - app.db.session - INFO - Database engine created with pool_size=10
2025-09-19 12:39:35,881 - app.db.session - INFO - Database manager initialized successfully
2025-09-19 12:39:35,882 - app.main - INFO - Database manager initialized successfully
2025-09-19 12:40:58,733 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-09-19 12:40:58,733 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-10-24 13:33:08,804 - app.main - INFO - Starting application...
2025-10-24 13:33:08,805 - app.main - INFO - Initializing database manager...
2025-10-24 13:33:08,806 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 13:33:08,874 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 13:33:08,979 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 13:33:08,980 - app.main - INFO - Database manager initialized successfully
2025-10-24 13:39:12,461 - app.main - INFO - Shutting down application...
2025-10-24 13:39:12,462 - app.main - INFO - Closing database connections...
2025-10-24 13:39:12,463 - app.db.session - INFO - Closing database connections...
2025-10-24 13:39:12,471 - app.db.session - INFO - Database connections closed
2025-10-24 13:39:12,472 - app.main - INFO - Database connections closed successfully
2025-10-24 13:39:25,310 - app.main - INFO - Starting application...
2025-10-24 13:39:25,310 - app.main - INFO - Initializing database manager...
2025-10-24 13:39:25,311 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 13:39:25,349 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 13:39:25,418 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 13:39:25,419 - app.main - INFO - Database manager initialized successfully
2025-10-24 14:51:31,575 - app.main - INFO - Starting application...
2025-10-24 14:51:31,575 - app.main - INFO - Initializing database manager...
2025-10-24 14:51:31,576 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 14:51:31,604 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 14:51:31,660 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 14:51:31,661 - app.main - INFO - Database manager initialized successfully
2025-10-24 15:59:43,550 - app.main - INFO - Starting application...
2025-10-24 15:59:43,551 - app.main - INFO - Initializing database manager...
2025-10-24 15:59:43,552 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 15:59:43,588 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 15:59:43,632 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 15:59:43,632 - app.main - INFO - Database manager initialized successfully
2025-10-24 16:01:02,362 - app.main - INFO - Starting application...
2025-10-24 16:01:02,363 - app.main - INFO - Initializing database manager...
2025-10-24 16:01:02,364 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 16:01:02,401 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 16:01:02,453 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 16:01:02,454 - app.main - INFO - Database manager initialized successfully
2025-10-24 16:11:12,185 - app.main - INFO - Starting application...
2025-10-24 16:11:12,187 - app.main - INFO - Initializing database manager...
2025-10-24 16:11:12,194 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 16:11:12,312 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 16:11:12,410 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 16:11:12,418 - app.main - INFO - Database manager initialized successfully
2025-10-24 16:20:43,092 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-10-24 16:20:43,456 - app.api.auth - INFO - New user registered: ttgi_
2025-10-24 16:20:43,457 - app.api.auth - INFO - New user registered: ttgi_
2025-10-24 16:20:43,469 - app.api.auth - INFO - user_registration completed in 0.58s
2025-10-24 16:20:43,870 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-10-24 16:20:43,871 - app.core.security - INFO - user_authentication completed in 0.34s
2025-10-24 16:20:43,871 - app.api.auth - INFO - Successful login for user: ttgi_
2025-10-24 16:20:43,908 - app.core.security - INFO - Access token created successfully
2025-10-24 16:20:43,910 - app.core.security - INFO - Refresh token created successfully
2025-10-24 16:20:43,911 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-10-24 16:20:43,912 - app.api.auth - INFO - user_login completed in 0.38s
2025-10-24 16:20:43,975 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:20:46,152 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:20:46,199 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:20:46,260 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-10-24 16:20:46,261 - app.api.recommend - INFO - destination_recommendations completed in 0.03s
2025-10-24 16:20:46,263 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-10-24 16:20:46,267 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-10-24 16:20:46,268 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-10-24 16:20:46,269 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-10-24 16:23:37,479 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-10-24 16:23:37,480 - app.api.nlp - INFO - Successfully parsed travel request
2025-10-24 16:23:37,481 - app.api.nlp - INFO - Travel request parsed successfully
2025-10-24 16:23:37,482 - app.api.nlp - INFO - nlp_parsing completed in 4.78s
2025-10-24 16:24:22,934 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:24:24,094 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-10-24 16:24:24,095 - app.api.itinerary - INFO - Travel request parsed successfully
2025-10-24 16:24:24,108 - app.api.itinerary - INFO - itinerary_generation completed in 1.17s
2025-10-24 16:24:24,109 - app.db.session - ERROR - Unexpected session error: 404: No destination found matching 'New York'
2025-10-24 16:29:35,067 - app.main - INFO - Starting application...
2025-10-24 16:29:35,068 - app.main - INFO - Initializing database manager...
2025-10-24 16:29:35,069 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 16:29:35,118 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 16:29:35,195 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 16:29:35,202 - app.main - INFO - Database manager initialized successfully
2025-10-24 16:31:20,998 - app.main - INFO - Shutting down application...
2025-10-24 16:31:20,998 - app.main - INFO - Closing database connections...
2025-10-24 16:31:20,998 - app.db.session - INFO - Closing database connections...
2025-10-24 16:31:21,007 - app.db.session - INFO - Database connections closed
2025-10-24 16:31:21,007 - app.main - INFO - Database connections closed successfully
2025-10-24 16:31:31,220 - app.main - INFO - Starting application...
2025-10-24 16:31:31,221 - app.main - INFO - Initializing database manager...
2025-10-24 16:31:31,223 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 16:31:31,252 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 16:31:31,305 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 16:31:31,305 - app.main - INFO - Database manager initialized successfully
2025-10-24 16:31:54,427 - app.main - INFO - Shutting down application...
2025-10-24 16:31:54,428 - app.main - INFO - Closing database connections...
2025-10-24 16:31:54,428 - app.db.session - INFO - Closing database connections...
2025-10-24 16:31:54,431 - app.db.session - INFO - Database connections closed
2025-10-24 16:31:54,431 - app.main - INFO - Database connections closed successfully
2025-10-24 16:32:03,148 - app.main - INFO - Starting application...
2025-10-24 16:32:03,148 - app.main - INFO - Initializing database manager...
2025-10-24 16:32:03,149 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 16:32:03,175 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 16:32:03,221 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 16:32:03,222 - app.main - INFO - Database manager initialized successfully
2025-10-24 16:33:00,767 - app.main - INFO - Shutting down application...
2025-10-24 16:33:00,768 - app.main - INFO - Closing database connections...
2025-10-24 16:33:00,768 - app.db.session - INFO - Closing database connections...
2025-10-24 16:33:00,773 - app.db.session - INFO - Database connections closed
2025-10-24 16:33:00,773 - app.main - INFO - Database connections closed successfully
2025-10-24 16:33:09,606 - app.main - INFO - Starting application...
2025-10-24 16:33:09,606 - app.main - INFO - Initializing database manager...
2025-10-24 16:33:09,607 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 16:33:09,634 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 16:33:09,684 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 16:33:09,684 - app.main - INFO - Database manager initialized successfully
2025-10-24 16:46:30,047 - app.main - INFO - Shutting down application...
2025-10-24 16:46:30,058 - app.main - INFO - Closing database connections...
2025-10-24 16:46:30,058 - app.db.session - INFO - Closing database connections...
2025-10-24 16:46:30,074 - app.db.session - INFO - Database connections closed
2025-10-24 16:46:30,075 - app.main - INFO - Database connections closed successfully
2025-10-24 16:46:42,825 - app.main - INFO - Starting application...
2025-10-24 16:46:42,825 - app.main - INFO - Initializing database manager...
2025-10-24 16:46:42,826 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 16:46:42,853 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 16:46:42,896 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 16:46:42,897 - app.main - INFO - Database manager initialized successfully
2025-10-24 16:47:03,051 - app.main - INFO - Shutting down application...
2025-10-24 16:47:03,051 - app.main - INFO - Closing database connections...
2025-10-24 16:47:03,051 - app.db.session - INFO - Closing database connections...
2025-10-24 16:47:03,055 - app.db.session - INFO - Database connections closed
2025-10-24 16:47:03,055 - app.main - INFO - Database connections closed successfully
2025-10-24 16:47:17,998 - app.main - INFO - Starting application...
2025-10-24 16:47:17,999 - app.main - INFO - Initializing database manager...
2025-10-24 16:47:18,002 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 16:47:18,033 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 16:47:18,086 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 16:47:18,086 - app.main - INFO - Database manager initialized successfully
2025-10-24 16:47:57,883 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:48:22,968 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-10-24 16:48:23,236 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-10-24 16:48:23,236 - app.core.security - INFO - user_authentication completed in 0.27s
2025-10-24 16:48:23,237 - app.api.auth - INFO - Successful login for user: ttgi_
2025-10-24 16:48:23,237 - app.core.security - INFO - Access token created successfully
2025-10-24 16:48:23,238 - app.core.security - INFO - Refresh token created successfully
2025-10-24 16:48:23,239 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-10-24 16:48:23,239 - app.api.auth - INFO - user_login completed in 0.28s
2025-10-24 16:48:23,299 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:48:24,265 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:48:24,312 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:48:24,343 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-10-24 16:48:24,343 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-10-24 16:48:24,344 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-10-24 16:48:24,380 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-10-24 16:48:24,383 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-10-24 16:48:24,384 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-10-24 16:48:44,068 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-10-24 16:48:44,068 - app.api.nlp - INFO - Successfully parsed travel request
2025-10-24 16:48:44,069 - app.api.nlp - INFO - Travel request parsed successfully
2025-10-24 16:48:44,070 - app.api.nlp - INFO - nlp_parsing completed in 2.29s
2025-10-24 16:48:47,773 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:48:47,968 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-10-24 16:48:47,969 - app.api.itinerary - INFO - Travel request parsed successfully
2025-10-24 16:48:47,981 - app.api.itinerary - INFO - Location coordinates retrieved
2025-10-24 16:48:47,985 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 5, "topk": [{"rank": 1, "row": 8, "id": "2754083a-8d39-4db0-9d28-337a6fe2b383", "score": 0.47943120106570436}, {"rank": 2, "row": 26, "id": "d6f85265-e1ee-49de-86b6-7224c69f928a", "score": 0.38049548496517277}, {"rank": 3, "row": 24, "id": "f66be966-bdd0-48b0-9dbe-f62324f2be0d", "score": 0.33373748819874866}, {"rank": 4, "row": 17, "id": "dbb459a4-5912-49fe-94f3-98928a7c58ab", "score": 0.32506303527396674}, {"rank": 5, "row": 0, "id": "5e31b033-2ca9-460b-9628-b294f89317ea", "score": 0.3000809465487028}]}
2025-10-24 16:48:47,989 - app.api.itinerary - INFO - activity rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 16, "id": "e5565d6b-90dd-42c1-89f3-e7293bf409ca", "score": 0.43660825287425575}, {"rank": 2, "row": 2561, "id": "e60cb649-146d-41a3-a20c-62ac68865086", "score": 0.3866877096702068}, {"rank": 3, "row": 850, "id": "198f0814-bf17-4849-8a01-02c7620d7833", "score": 0.37837448218273073}, {"rank": 4, "row": 1672, "id": "47d2b428-dc0c-440d-8a9d-9778f30a4e47", "score": 0.37837448218273073}, {"rank": 5, "row": 858, "id": "60a53ac7-b74a-4488-9269-23e8ee00433f", "score": 0.25759769885764905}, {"rank": 6, "row": 1684, "id": "cb136867-635d-4993-8104-1c4c02ac5343", "score": 0.25759769885764905}, {"rank": 7, "row": 2573, "id": "bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62", "score": 0.25620967195780736}, {"rank": 8, "row": 1680, "id": "4e3abb3d-8d9b-4369-b237-b7e36ff5bbf2", "score": 0.22535241787390578}, {"rank": 9, "row": 859, "id": "292fc1d3-3325-4521-a841-dd50fee05fd7", "score": 0.22535241787390578}, {"rank": 10, "row": 2569, "id": "afd02e86-f3c1-4936-8099-747351aaab25", "score": 0.2245799727304617}]}
2025-10-24 16:48:48,002 - app.api.itinerary - INFO - accomodation rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 5765, "id": "62e3be95-e9ac-4657-b2d3-69e4b6c78112", "score": 0.5846951627024383}, {"rank": 2, "row": 3179, "id": "9982257e-18a6-4d63-88cb-fe5b9adbe1c4", "score": 0.5342644242428954}, {"rank": 3, "row": 8294, "id": "5ab79ebb-655b-43c8-94a8-e31fc06535f6", "score": 0.4722642377591524}, {"rank": 4, "row": 5248, "id": "fa262022-9fcb-4e68-86ba-e6b878d51487", "score": 0.4722642377591524}, {"rank": 5, "row": 7558, "id": "37e12ab8-de27-45bd-98cf-84f23e23b53b", "score": 0.4722642377591524}, {"rank": 6, "row": 2136, "id": "0d14770f-cb9a-41d8-b5b5-ebfad07f02fb", "score": 0.4722642377591524}, {"rank": 7, "row": 7788, "id": "07faa49e-5669-4699-a81a-d2991371cbd9", "score": 0.4714118773502709}, {"rank": 8, "row": 811, "id": "a5034a8c-75e0-48dd-87ca-a340d316b6b2", "score": 0.4714118773502709}, {"rank": 9, "row": 8411, "id": "7a4b4496-dfb8-462f-99e7-bb1cb86d83de", "score": 0.4714118773502709}, {"rank": 10, "row": 7225, "id": "457f4bad-7266-4d31-8632-106700e79e19", "score": 0.4714118773502709}]}
2025-10-24 16:48:48,018 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.UndefinedObjectError'>: type "geography" does not exist
2025-10-24 16:48:48,019 - app.api.itinerary - ERROR - Failed to get flight options: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "geography" does not exist
[SQL: SELECT transportations.id 
FROM transportations 
WHERE ST_DWithin(CAST(ST_SetSRID(ST_MakePoint(transportations.departure_long, transportations.departure_lat), $1::INTEGER) AS geography(GEOMETRY,-1)), CAST(ST_SetSRID(ST_MakePoint($2::FLOAT, $3::FLOAT), $4::INTEGER) AS geography(GEOMETRY,-1)), $5::INTEGER) AND ST_DWithin(CAST(ST_SetSRID(ST_MakePoint(transportations.arrival_long, transportations.arrival_lat), $6::INTEGER) AS geography(GEOMETRY,-1)), CAST(ST_SetSRID(ST_MakePoint($7::FLOAT, $8::FLOAT), $9::INTEGER) AS geography(GEOMETRY,-1)), $10::INTEGER) AND transportations.departure_time >= $11::TIMESTAMP WITH TIME ZONE AND transportations.arrival_time <= $12::TIMESTAMP WITH TIME ZONE 
 LIMIT $13::INTEGER]
[parameters: (4326, -74.006015, 40.712728, 4326, 50000, 4326, -74.006015, 40.712728, 4326, 50000, datetime.datetime(2025, 7, 25, 0, 0, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 7, 27, 23, 59, 59, 999999, tzinfo=datetime.timezone.utc), 10)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-10-24 16:48:48,023 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 0, "topk": []}
2025-10-24 16:48:48,024 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-10-24 16:48:48,031 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.InFailedSQLTransactionError'>: current transaction is aborted, commands ignored until end of transaction block
2025-10-24 16:48:48,033 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 635, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 653, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.InFailedSQLTransactionError: current transaction is aborted, commands ignored until end of transaction block

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InFailedSQLTransactionError'>: current transaction is aborted, commands ignored until end of transaction block

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 422, in build_poi_list
    dest_rows = (await self.session.execute(dest_stmt)).all()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>: current transaction is aborted, commands ignored until end of transaction block
[SQL: SELECT destinations.id, destinations.latitude, destinations.longitude 
FROM destinations 
WHERE destinations.id IN ($6::UUID, $7::UUID, $8::UUID, $9::UUID, $10::UUID, $11::UUID, $12::UUID, $13::UUID, $14::UUID, $15::UUID) AND ST_DWithin(CAST(ST_SetSRID(ST_MakePoint(destinations.longitude, destinations.latitude), $1::INTEGER) AS geography(GEOMETRY,-1)), CAST(ST_SetSRID(ST_MakePoint($2::FLOAT, $3::FLOAT), $4::INTEGER) AS geography(GEOMETRY,-1)), $5::INTEGER)]
[parameters: (4326, -74.006015, 40.712728, 4326, 20000, '2754083a-8d39-4db0-9d28-337a6fe2b383', 'd6f85265-e1ee-49de-86b6-7224c69f928a', 'f66be966-bdd0-48b0-9dbe-f62324f2be0d', 'dbb459a4-5912-49fe-94f3-98928a7c58ab', '5e31b033-2ca9-460b-9628-b294f89317ea', '64160910-332a-4243-8e36-b0d3dd55c629', '1fc65d2a-eb74-4a85-90b2-a6b8568da4c1', '4a3cedbe-97a2-48d6-bef5-8e7fdff5f40c', '1dbddc57-3a40-468d-b7fe-8c0b75e8570e', '6da1784f-1a76-4b7c-a758-e7ccc2c3993b')]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-10-24 16:48:48,064 - app.api.itinerary - INFO - itinerary_generation completed in 0.29s
2025-10-24 16:48:48,065 - app.db.session - ERROR - Unexpected session error: 500: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InFailedSQLTransactionError'>: current transaction is aborted, commands ignored until end of transaction block
[SQL: SELECT destinations.id, destinations.latitude, destinations.longitude 
FROM destinations 
WHERE destinations.id IN ($6::UUID, $7::UUID, $8::UUID, $9::UUID, $10::UUID, $11::UUID, $12::UUID, $13::UUID, $14::UUID, $15::UUID) AND ST_DWithin(CAST(ST_SetSRID(ST_MakePoint(destinations.longitude, destinations.latitude), $1::INTEGER) AS geography(GEOMETRY,-1)), CAST(ST_SetSRID(ST_MakePoint($2::FLOAT, $3::FLOAT), $4::INTEGER) AS geography(GEOMETRY,-1)), $5::INTEGER)]
[parameters: (4326, -74.006015, 40.712728, 4326, 20000, '2754083a-8d39-4db0-9d28-337a6fe2b383', 'd6f85265-e1ee-49de-86b6-7224c69f928a', 'f66be966-bdd0-48b0-9dbe-f62324f2be0d', 'dbb459a4-5912-49fe-94f3-98928a7c58ab', '5e31b033-2ca9-460b-9628-b294f89317ea', '64160910-332a-4243-8e36-b0d3dd55c629', '1fc65d2a-eb74-4a85-90b2-a6b8568da4c1', '4a3cedbe-97a2-48d6-bef5-8e7fdff5f40c', '1dbddc57-3a40-468d-b7fe-8c0b75e8570e', '6da1784f-1a76-4b7c-a758-e7ccc2c3993b')]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-10-24 16:52:51,993 - app.main - INFO - Starting application...
2025-10-24 16:52:51,993 - app.main - INFO - Initializing database manager...
2025-10-24 16:52:51,994 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-10-24 16:52:52,025 - app.db.session - INFO - Database engine created with pool_size=10
2025-10-24 16:52:52,070 - app.db.session - INFO - Database manager initialized successfully
2025-10-24 16:52:52,070 - app.main - INFO - Database manager initialized successfully
2025-10-24 16:53:13,632 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:54:07,022 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-10-24 16:54:07,343 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-10-24 16:54:07,343 - app.core.security - INFO - user_authentication completed in 0.33s
2025-10-24 16:54:07,344 - app.api.auth - INFO - Successful login for user: ttgi_
2025-10-24 16:54:07,345 - app.core.security - INFO - Access token created successfully
2025-10-24 16:54:07,346 - app.core.security - INFO - Refresh token created successfully
2025-10-24 16:54:07,346 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-10-24 16:54:07,347 - app.api.auth - INFO - user_login completed in 0.33s
2025-10-24 16:54:07,399 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:54:07,674 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:54:07,706 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:54:07,768 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-10-24 16:54:07,769 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-10-24 16:54:07,770 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-10-24 16:54:07,778 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-10-24 16:54:07,781 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-10-24 16:54:07,781 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-10-24 16:54:41,462 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-10-24 16:54:41,462 - app.api.nlp - INFO - Successfully parsed travel request
2025-10-24 16:54:41,463 - app.api.nlp - INFO - Travel request parsed successfully
2025-10-24 16:54:41,465 - app.api.nlp - INFO - nlp_parsing completed in 2.19s
2025-10-24 16:54:44,813 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:54:44,940 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-10-24 16:54:44,941 - app.api.itinerary - INFO - Travel request parsed successfully
2025-10-24 16:54:44,949 - app.api.itinerary - INFO - Location coordinates retrieved
2025-10-24 16:54:44,951 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 0, "topk": []}
2025-10-24 16:54:44,954 - app.api.itinerary - INFO - activity rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 873, "id": "e60cb649-146d-41a3-a20c-62ac68865086", "score": 0.5050155577740821}, {"rank": 2, "row": 881, "id": "afd02e86-f3c1-4936-8099-747351aaab25", "score": 0.3568189310873978}, {"rank": 3, "row": 885, "id": "bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62", "score": 0.345141655605544}, {"rank": 4, "row": 855, "id": "582ace42-15e6-41d7-8e01-a235e42b6cdc", "score": 0.3280383594163051}, {"rank": 5, "row": 207, "id": "4053bc68-04be-4845-8911-b6191d66f660", "score": 0.2873488557371483}, {"rank": 6, "row": 862, "id": "b9319798-e843-4021-b78e-b2b0cf989b81", "score": 0.26974534501501146}, {"rank": 7, "row": 849, "id": "47d18462-d3a0-4a04-a7a0-5127dd6b9544", "score": 0.26418337786725715}, {"rank": 8, "row": 611, "id": "2c37c479-d420-4ecc-ab5a-7c98945df872", "score": 0.2601752192838376}, {"rank": 9, "row": 832, "id": "47aea1ad-5aee-439d-80d2-83f44f5ab390", "score": 0.2526850821865758}, {"rank": 10, "row": 888, "id": "32cd18ef-1dca-4b91-8880-ce6e848f9178", "score": 0.2287729898882584}]}
2025-10-24 16:54:44,957 - app.api.itinerary - INFO - accomodation rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 748, "id": "900bb15b-9eef-42f5-bf5e-65c9622b7a2c", "score": 0.38061260856304246}, {"rank": 2, "row": 744, "id": "415956d5-228b-44c0-b5eb-b23048e259c6", "score": 0.380380319030163}, {"rank": 3, "row": 745, "id": "81f0e907-6ab8-42df-9352-ed2898d439d6", "score": 0.37863515804022846}, {"rank": 4, "row": 719, "id": "c88591ae-46ca-4f62-8188-7384ca7a9aae", "score": 0.36887712294608216}, {"rank": 5, "row": 702, "id": "af1d1c0f-5f3f-4da2-bb5b-310eb7d376c6", "score": 0.36871773338582275}, {"rank": 6, "row": 724, "id": "7de91e21-7465-442e-bab3-522253dae9e3", "score": 0.3651573159369445}, {"rank": 7, "row": 739, "id": "81a9b577-54b7-4b2a-95d9-9fe8c3497b62", "score": 0.3641870321061805}, {"rank": 8, "row": 710, "id": "fb1de5fa-c74d-462d-a854-12d64b4845b2", "score": 0.3638986525394944}, {"rank": 9, "row": 746, "id": "47f5b486-d694-4499-9751-dde681f168f8", "score": 0.36364554258537457}, {"rank": 10, "row": 703, "id": "8ea23b4b-eb88-4b94-9791-a7be72bb1056", "score": 0.3629496788187859}]}
2025-10-24 16:54:44,977 - app.api.itinerary - INFO - Found 0 flight options
2025-10-24 16:54:44,979 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 0, "topk": []}
2025-10-24 16:54:44,980 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-10-24 16:54:45,042 - app.api.itinerary - INFO - Recommended activity IDs: ['e60cb649-146d-41a3-a20c-62ac68865086', 'afd02e86-f3c1-4936-8099-747351aaab25', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '582ace42-15e6-41d7-8e01-a235e42b6cdc', '4053bc68-04be-4845-8911-b6191d66f660', 'b9319798-e843-4021-b78e-b2b0cf989b81', '47d18462-d3a0-4a04-a7a0-5127dd6b9544', '2c37c479-d420-4ecc-ab5a-7c98945df872', '47aea1ad-5aee-439d-80d2-83f44f5ab390', '32cd18ef-1dca-4b91-8880-ce6e848f9178']
2025-10-24 16:54:45,043 - app.api.itinerary - INFO - Fetched 8 activity rows: [UUID('47aea1ad-5aee-439d-80d2-83f44f5ab390'), UUID('47d18462-d3a0-4a04-a7a0-5127dd6b9544'), UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc'), UUID('b9319798-e843-4021-b78e-b2b0cf989b81'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62'), UUID('32cd18ef-1dca-4b91-8880-ce6e848f9178')]
2025-10-24 16:54:45,043 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-10-24 16:54:45,044 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-10-24 16:54:45,047 - app.api.itinerary - INFO - Adding activity POI: id=47aea1ad-5aee-439d-80d2-83f44f5ab390, name='Lincoln Center for the Performing Arts', lat=40.772464, lon=-73.983489, price=4
2025-10-24 16:54:45,048 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-10-24 16:54:45,050 - app.api.itinerary - INFO - Adding activity POI: id=47d18462-d3a0-4a04-a7a0-5127dd6b9544, name='M&M'S New York', lat=40.760066, lon=-73.984296, price=2
2025-10-24 16:54:45,051 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-10-24 16:54:45,051 - app.api.itinerary - INFO - Adding activity POI: id=582ace42-15e6-41d7-8e01-a235e42b6cdc, name='New York Stock Exchange', lat=40.706877, lon=-74.011265, price=None
2025-10-24 16:54:45,051 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-10-24 16:54:45,052 - app.api.itinerary - INFO - Adding activity POI: id=b9319798-e843-4021-b78e-b2b0cf989b81, name='Yankee Stadium', lat=40.829643, lon=-73.926175, price=None
2025-10-24 16:54:45,052 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-10-24 16:54:45,054 - app.api.itinerary - INFO - Adding activity POI: id=e60cb649-146d-41a3-a20c-62ac68865086, name='The New York Historical', lat=40.779349, lon=-73.973908, price=None
2025-10-24 16:54:45,055 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-10-24 16:54:45,056 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, name='New York City Hall', lat=40.712774, lon=-74.006059, price=None
2025-10-24 16:54:45,058 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-10-24 16:54:45,059 - app.api.itinerary - INFO - Adding activity POI: id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62, name='Queens Museum', lat=40.745914, lon=-73.846725, price=None
2025-10-24 16:54:45,060 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-10-24 16:54:45,061 - app.api.itinerary - INFO - Adding activity POI: id=32cd18ef-1dca-4b91-8880-ce6e848f9178, name='New York Hall of Science', lat=40.747258, lon=-73.851692, price=None
2025-10-24 16:54:45,062 - app.api.itinerary - INFO - Activities after budget filter: 8 (before: 9)
2025-10-24 16:54:45,072 - app.api.itinerary - INFO - Built POI list with 39 unique items (from 39 raw)
2025-10-24 16:54:45,072 - app.api.itinerary - INFO - build_poi_list found 8 activities with radius_m=20000
2025-10-24 16:54:45,218 - app.api.itinerary - INFO - Created schedule for 3 days
2025-10-24 16:54:45,219 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-10-24 16:54:45,289 - app.api.itinerary - INFO - Itinerary a53a2477-19b4-4750-8609-636701456300 persisted successfully
2025-10-24 16:54:45,289 - app.api.itinerary - INFO - Successfully generated itinerary a53a2477-19b4-4750-8609-636701456300 for user 2e1da0cb-11e2-43e8-b8e5-634998e746ee
2025-10-24 16:54:45,290 - app.api.itinerary - INFO - itinerary_generation completed in 0.47s
2025-10-24 16:54:52,250 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:54:52,274 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc')]
2025-10-24 16:54:52,275 - app.api.itinerary - INFO - Fetched 2 activity rows: [UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-10-24 16:54:52,276 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-10-24 16:54:52,277 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-10-24 16:54:52,277 - app.api.itinerary - INFO - Adding activity POI: id=582ace42-15e6-41d7-8e01-a235e42b6cdc, name='New York Stock Exchange', lat=40.706877, lon=-74.011265, price=None
2025-10-24 16:54:52,278 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-10-24 16:54:52,279 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, name='New York City Hall', lat=40.712774, lon=-74.006059, price=None
2025-10-24 16:54:52,280 - app.api.itinerary - INFO - Activities after budget filter: 2 (before: 3)
2025-10-24 16:54:52,290 - app.api.itinerary - INFO - Built POI list with 33 unique items (from 33 raw)
2025-10-24 16:54:52,381 - app.api.itinerary - INFO - Created schedule for 2 days
2025-10-24 16:54:52,382 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-10-24 16:54:52,397 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:54:52,425 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc')]
2025-10-24 16:54:52,425 - app.api.itinerary - INFO - Fetched 2 activity rows: [UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-10-24 16:54:52,426 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-10-24 16:54:52,426 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-10-24 16:54:52,427 - app.api.itinerary - INFO - Adding activity POI: id=582ace42-15e6-41d7-8e01-a235e42b6cdc, name='New York Stock Exchange', lat=40.706877, lon=-74.011265, price=None
2025-10-24 16:54:52,428 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-10-24 16:54:52,429 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, name='New York City Hall', lat=40.712774, lon=-74.006059, price=None
2025-10-24 16:54:52,430 - app.api.itinerary - INFO - Activities after budget filter: 2 (before: 3)
2025-10-24 16:54:52,437 - app.api.itinerary - INFO - Built POI list with 33 unique items (from 33 raw)
2025-10-24 16:54:52,555 - app.api.itinerary - INFO - Created schedule for 2 days
2025-10-24 16:54:52,556 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-10-24 16:55:29,213 - app.core.security - INFO - Current user resolved: ttgi_
2025-10-24 16:55:29,233 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc')]
2025-10-24 16:55:29,234 - app.api.itinerary - INFO - Fetched 2 activity rows: [UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-10-24 16:55:29,235 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-10-24 16:55:29,235 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-10-24 16:55:29,235 - app.api.itinerary - INFO - Adding activity POI: id=582ace42-15e6-41d7-8e01-a235e42b6cdc, name='New York Stock Exchange', lat=40.706877, lon=-74.011265, price=None
2025-10-24 16:55:29,237 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-10-24 16:55:29,243 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, name='New York City Hall', lat=40.712774, lon=-74.006059, price=None
2025-10-24 16:55:29,243 - app.api.itinerary - INFO - Activities after budget filter: 2 (before: 3)
2025-10-24 16:55:29,250 - app.api.itinerary - INFO - Built POI list with 33 unique items (from 33 raw)
2025-10-24 16:55:29,336 - app.api.itinerary - INFO - Created schedule for 2 days
2025-10-24 16:55:29,337 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-11-17 11:33:17,595 - app.main - INFO - Starting application...
2025-11-17 11:33:17,596 - app.main - INFO - Initializing database manager...
2025-11-17 11:33:17,596 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-11-17 11:33:17,676 - app.db.session - INFO - Database engine created with pool_size=10
2025-11-17 11:33:17,767 - app.db.session - INFO - Database manager initialized successfully
2025-11-17 11:33:17,767 - app.main - INFO - Database manager initialized successfully
2025-11-17 15:26:23,440 - app.main - INFO - Starting application...
2025-11-17 15:26:23,441 - app.main - INFO - Initializing database manager...
2025-11-17 15:26:23,442 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-11-17 15:26:23,480 - app.db.session - INFO - Database engine created with pool_size=10
2025-11-17 15:26:23,559 - app.db.session - INFO - Database manager initialized successfully
2025-11-17 15:26:23,560 - app.main - INFO - Database manager initialized successfully
2025-11-17 15:40:05,582 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-11-17 15:40:06,000 - app.api.auth - INFO - New user registered: iota
2025-11-17 15:40:06,001 - app.api.auth - INFO - New user registered: iota
2025-11-17 15:40:06,021 - app.api.auth - INFO - user_registration completed in 0.59s
2025-11-17 15:40:06,451 - app.core.security - INFO - User authenticated successfully: iota
2025-11-17 15:40:06,453 - app.core.security - INFO - user_authentication completed in 0.35s
2025-11-17 15:40:06,453 - app.api.auth - INFO - Successful login for user: iota
2025-11-17 15:40:06,490 - app.core.security - INFO - Access token created successfully
2025-11-17 15:40:06,491 - app.core.security - INFO - Refresh token created successfully
2025-11-17 15:40:06,491 - app.api.auth - INFO - User iota logged in successfully
2025-11-17 15:40:06,492 - app.api.auth - INFO - user_login completed in 0.39s
2025-11-17 15:40:06,558 - app.core.security - INFO - Current user resolved: iota
2025-11-17 15:40:08,392 - app.core.security - INFO - Current user resolved: iota
2025-11-17 15:40:08,434 - app.core.security - INFO - Current user resolved: iota
2025-11-17 15:40:08,480 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-11-17 15:40:08,481 - app.api.recommend - INFO - destination_recommendations completed in 0.02s
2025-11-17 15:40:08,482 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-11-17 15:40:08,486 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-11-17 15:40:08,487 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-11-17 15:40:08,487 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-11-17 16:57:16,546 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-11-17 16:57:16,546 - app.api.nlp - INFO - Successfully parsed travel request
2025-11-17 16:57:16,547 - app.api.nlp - INFO - Travel request parsed successfully
2025-11-17 16:57:16,549 - app.api.nlp - INFO - nlp_parsing completed in 4.70s
2025-11-17 16:57:20,316 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-11-17 16:57:20,316 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-11-17 16:57:36,580 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-11-17 16:57:36,581 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-11-17 16:58:27,836 - app.core.security - INFO - User authenticated successfully: iota
2025-11-17 16:58:27,837 - app.core.security - INFO - user_authentication completed in 0.49s
2025-11-17 16:58:27,837 - app.api.auth - INFO - Successful login for user: iota
2025-11-17 16:58:27,839 - app.core.security - INFO - Access token created successfully
2025-11-17 16:58:27,840 - app.core.security - INFO - Refresh token created successfully
2025-11-17 16:58:27,840 - app.api.auth - INFO - User iota logged in successfully
2025-11-17 16:58:27,841 - app.api.auth - INFO - user_login completed in 0.49s
2025-11-17 16:58:27,855 - app.core.security - INFO - Current user resolved: iota
2025-11-17 16:58:28,537 - app.core.security - INFO - Current user resolved: iota
2025-11-17 16:58:28,565 - app.core.security - INFO - Current user resolved: iota
2025-11-17 16:58:28,625 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-11-17 16:58:28,626 - app.api.recommend - INFO - destination_recommendations completed in 0.01s
2025-11-17 16:58:28,627 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-11-17 16:58:28,632 - app.api.recommend - INFO - Generated 0 dest recommendations
2025-11-17 16:58:28,632 - app.api.recommend - INFO - destination_recommendations completed in 0.00s
2025-11-17 16:58:28,633 - app.db.session - ERROR - Unexpected session error: 404: No destination recommendations found
2025-11-17 16:58:36,438 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-11-17 16:58:36,439 - app.api.nlp - INFO - Successfully parsed travel request
2025-11-17 16:58:36,439 - app.api.nlp - INFO - Travel request parsed successfully
2025-11-17 16:58:36,440 - app.api.nlp - INFO - nlp_parsing completed in 0.17s
2025-11-17 16:58:38,594 - app.core.security - INFO - Current user resolved: iota
2025-11-17 16:58:38,728 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-11-17 16:58:38,729 - app.api.itinerary - INFO - Travel request parsed successfully
2025-11-17 16:58:38,755 - app.api.itinerary - INFO - Location coordinates retrieved
2025-11-17 16:58:38,758 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 0, "topk": []}
2025-11-17 16:58:38,771 - app.api.itinerary - INFO - activity rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 873, "id": "e60cb649-146d-41a3-a20c-62ac68865086", "score": 0.5050155577740821}, {"rank": 2, "row": 881, "id": "afd02e86-f3c1-4936-8099-747351aaab25", "score": 0.3568189310873978}, {"rank": 3, "row": 885, "id": "bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62", "score": 0.345141655605544}, {"rank": 4, "row": 855, "id": "582ace42-15e6-41d7-8e01-a235e42b6cdc", "score": 0.3280383594163051}, {"rank": 5, "row": 207, "id": "4053bc68-04be-4845-8911-b6191d66f660", "score": 0.2873488557371483}, {"rank": 6, "row": 862, "id": "b9319798-e843-4021-b78e-b2b0cf989b81", "score": 0.26974534501501146}, {"rank": 7, "row": 849, "id": "47d18462-d3a0-4a04-a7a0-5127dd6b9544", "score": 0.26418337786725715}, {"rank": 8, "row": 611, "id": "2c37c479-d420-4ecc-ab5a-7c98945df872", "score": 0.2601752192838376}, {"rank": 9, "row": 832, "id": "47aea1ad-5aee-439d-80d2-83f44f5ab390", "score": 0.2526850821865758}, {"rank": 10, "row": 888, "id": "32cd18ef-1dca-4b91-8880-ce6e848f9178", "score": 0.2287729898882584}]}
2025-11-17 16:58:38,782 - app.api.itinerary - INFO - accomodation rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 10, "topk": [{"rank": 1, "row": 748, "id": "900bb15b-9eef-42f5-bf5e-65c9622b7a2c", "score": 0.38061260856304246}, {"rank": 2, "row": 744, "id": "415956d5-228b-44c0-b5eb-b23048e259c6", "score": 0.380380319030163}, {"rank": 3, "row": 745, "id": "81f0e907-6ab8-42df-9352-ed2898d439d6", "score": 0.37863515804022846}, {"rank": 4, "row": 719, "id": "c88591ae-46ca-4f62-8188-7384ca7a9aae", "score": 0.36887712294608216}, {"rank": 5, "row": 702, "id": "af1d1c0f-5f3f-4da2-bb5b-310eb7d376c6", "score": 0.36871773338582275}, {"rank": 6, "row": 724, "id": "7de91e21-7465-442e-bab3-522253dae9e3", "score": 0.3651573159369445}, {"rank": 7, "row": 739, "id": "81a9b577-54b7-4b2a-95d9-9fe8c3497b62", "score": 0.3641870321061805}, {"rank": 8, "row": 710, "id": "fb1de5fa-c74d-462d-a854-12d64b4845b2", "score": 0.3638986525394944}, {"rank": 9, "row": 746, "id": "47f5b486-d694-4499-9751-dde681f168f8", "score": 0.36364554258537457}, {"rank": 10, "row": 703, "id": "8ea23b4b-eb88-4b94-9791-a7be72bb1056", "score": 0.3629496788187859}]}
2025-11-17 16:58:38,928 - app.api.itinerary - INFO - Found 0 flight options
2025-11-17 16:58:38,932 - app.api.itinerary - INFO - destination rank_topk {"stage": "rank", "domain": "acc", "query": "night weekend itinerary new york lunch leisurely pace max day museum iconic city sight hotel rating budget budget 200.0", "K": 0, "topk": []}
2025-11-17 16:58:38,933 - app.api.itinerary - INFO - Attempting build_poi_list with radius_m=20000
2025-11-17 16:58:39,021 - app.api.itinerary - INFO - Recommended activity IDs: ['e60cb649-146d-41a3-a20c-62ac68865086', 'afd02e86-f3c1-4936-8099-747351aaab25', 'bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62', '582ace42-15e6-41d7-8e01-a235e42b6cdc', '4053bc68-04be-4845-8911-b6191d66f660', 'b9319798-e843-4021-b78e-b2b0cf989b81', '47d18462-d3a0-4a04-a7a0-5127dd6b9544', '2c37c479-d420-4ecc-ab5a-7c98945df872', '47aea1ad-5aee-439d-80d2-83f44f5ab390', '32cd18ef-1dca-4b91-8880-ce6e848f9178']
2025-11-17 16:58:39,022 - app.api.itinerary - INFO - Fetched 8 activity rows: [UUID('47aea1ad-5aee-439d-80d2-83f44f5ab390'), UUID('47d18462-d3a0-4a04-a7a0-5127dd6b9544'), UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc'), UUID('b9319798-e843-4021-b78e-b2b0cf989b81'), UUID('e60cb649-146d-41a3-a20c-62ac68865086'), UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62'), UUID('32cd18ef-1dca-4b91-8880-ce6e848f9178')]
2025-11-17 16:58:39,022 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-11-17 16:58:39,023 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-11-17 16:58:39,024 - app.api.itinerary - INFO - Adding activity POI: id=47aea1ad-5aee-439d-80d2-83f44f5ab390, name='Lincoln Center for the Performing Arts', lat=40.772464, lon=-73.983489, price=4
2025-11-17 16:58:39,024 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-11-17 16:58:39,025 - app.api.itinerary - INFO - Adding activity POI: id=47d18462-d3a0-4a04-a7a0-5127dd6b9544, name='M&M'S New York', lat=40.760066, lon=-73.984296, price=2
2025-11-17 16:58:39,025 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-11-17 16:58:39,026 - app.api.itinerary - INFO - Adding activity POI: id=582ace42-15e6-41d7-8e01-a235e42b6cdc, name='New York Stock Exchange', lat=40.706877, lon=-74.011265, price=None
2025-11-17 16:58:39,026 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-11-17 16:58:39,027 - app.api.itinerary - INFO - Adding activity POI: id=b9319798-e843-4021-b78e-b2b0cf989b81, name='Yankee Stadium', lat=40.829643, lon=-73.926175, price=None
2025-11-17 16:58:39,027 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-11-17 16:58:39,028 - app.api.itinerary - INFO - Adding activity POI: id=e60cb649-146d-41a3-a20c-62ac68865086, name='The New York Historical', lat=40.779349, lon=-73.973908, price=None
2025-11-17 16:58:39,028 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-11-17 16:58:39,028 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, name='New York City Hall', lat=40.712774, lon=-74.006059, price=None
2025-11-17 16:58:39,029 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-11-17 16:58:39,030 - app.api.itinerary - INFO - Adding activity POI: id=bfad0f9a-1be8-4ecd-96b7-f2eda41f7f62, name='Queens Museum', lat=40.745914, lon=-73.846725, price=None
2025-11-17 16:58:39,030 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-11-17 16:58:39,030 - app.api.itinerary - INFO - Adding activity POI: id=32cd18ef-1dca-4b91-8880-ce6e848f9178, name='New York Hall of Science', lat=40.747258, lon=-73.851692, price=None
2025-11-17 16:58:39,033 - app.api.itinerary - INFO - Activities after budget filter: 8 (before: 9)
2025-11-17 16:58:39,050 - app.api.itinerary - INFO - Built POI list with 39 unique items (from 39 raw)
2025-11-17 16:58:39,050 - app.api.itinerary - INFO - build_poi_list found 8 activities with radius_m=20000
2025-11-17 16:58:39,245 - app.api.itinerary - INFO - Created schedule for 3 days
2025-11-17 16:58:39,246 - app.api.itinerary - INFO - Scheduled items: 3 days with enriched details
2025-11-17 16:58:39,329 - app.api.itinerary - INFO - Itinerary b6c36377-5e3c-432b-bb60-3c625e3985cb persisted successfully
2025-11-17 16:58:39,330 - app.api.itinerary - INFO - Successfully generated itinerary b6c36377-5e3c-432b-bb60-3c625e3985cb for user 6f707c43-c3a0-461e-9f15-f6722e2d6b3b
2025-11-17 16:58:39,331 - app.api.itinerary - INFO - itinerary_generation completed in 0.73s
2025-11-17 16:58:47,605 - app.core.security - INFO - Current user resolved: iota
2025-11-17 16:58:47,633 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc')]
2025-11-17 16:58:47,633 - app.api.itinerary - INFO - Fetched 2 activity rows: [UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-11-17 16:58:47,634 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-11-17 16:58:47,636 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-11-17 16:58:47,637 - app.api.itinerary - INFO - Adding activity POI: id=582ace42-15e6-41d7-8e01-a235e42b6cdc, name='New York Stock Exchange', lat=40.706877, lon=-74.011265, price=None
2025-11-17 16:58:47,638 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-11-17 16:58:47,638 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, name='New York City Hall', lat=40.712774, lon=-74.006059, price=None
2025-11-17 16:58:47,639 - app.api.itinerary - INFO - Activities after budget filter: 2 (before: 3)
2025-11-17 16:58:47,646 - app.api.itinerary - INFO - Built POI list with 33 unique items (from 33 raw)
2025-11-17 16:58:47,797 - app.api.itinerary - INFO - Created schedule for 2 days
2025-11-17 16:58:47,797 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-11-17 16:58:47,812 - app.core.security - INFO - Current user resolved: iota
2025-11-17 16:58:47,832 - app.api.itinerary - INFO - Recommended activity IDs: [UUID('afd02e86-f3c1-4936-8099-747351aaab25'), UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc')]
2025-11-17 16:58:47,832 - app.api.itinerary - INFO - Fetched 2 activity rows: [UUID('582ace42-15e6-41d7-8e01-a235e42b6cdc'), UUID('afd02e86-f3c1-4936-8099-747351aaab25')]
2025-11-17 16:58:47,832 - app.api.itinerary - INFO - Activity location filter: center=(40.712728,-74.006015), radius_m=20000
2025-11-17 16:58:47,833 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:30\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-11-17 16:58:47,833 - app.api.itinerary - INFO - Adding activity POI: id=582ace42-15e6-41d7-8e01-a235e42b6cdc, name='New York Stock Exchange', lat=40.706877, lon=-74.011265, price=None
2025-11-17 16:58:47,834 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-11-17 16:58:47,834 - app.api.itinerary - INFO - Adding activity POI: id=afd02e86-f3c1-4936-8099-747351aaab25, name='New York City Hall', lat=40.712774, lon=-74.006059, price=None
2025-11-17 16:58:47,835 - app.api.itinerary - INFO - Activities after budget filter: 2 (before: 3)
2025-11-17 16:58:47,842 - app.api.itinerary - INFO - Built POI list with 33 unique items (from 33 raw)
2025-11-17 16:58:47,979 - app.api.itinerary - INFO - Created schedule for 2 days
2025-11-17 16:58:47,981 - app.api.itinerary - INFO - Scheduled items: 2 days with enriched details
2025-11-17 17:34:11,756 - app.main - INFO - Shutting down application...
2025-11-17 17:34:11,758 - app.main - INFO - Closing database connections...
2025-11-17 17:34:11,759 - app.db.session - INFO - Closing database connections...
2025-11-17 17:34:11,838 - app.db.session - INFO - Database connections closed
2025-11-17 17:34:11,839 - app.main - INFO - Database connections closed successfully
2025-11-17 17:34:33,351 - app.main - INFO - Starting application...
2025-11-17 17:34:33,351 - app.main - INFO - Initializing database manager...
2025-11-17 17:34:33,352 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-11-17 17:34:33,414 - app.db.session - INFO - Database engine created with pool_size=10
2025-11-17 17:34:33,487 - app.db.session - INFO - Database manager initialized successfully
2025-11-17 17:34:33,487 - app.main - INFO - Database manager initialized successfully
