2025-08-03 21:02:20,810 - app.main - INFO - Starting application...
2025-08-03 21:02:20,811 - app.main - INFO - Initializing database manager...
2025-08-03 21:02:20,811 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:02:20,812 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:02:20,812 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:02:50,078 - app.main - INFO - Shutting down application...
2025-08-03 21:02:50,079 - app.main - INFO - Closing database connections...
2025-08-03 21:02:50,079 - app.main - INFO - Database connections closed successfully
2025-08-03 21:02:58,505 - app.main - INFO - Starting application...
2025-08-03 21:02:58,506 - app.main - INFO - Initializing database manager...
2025-08-03 21:02:58,506 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:02:58,507 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:02:58,508 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:04:07,932 - app.main - INFO - Shutting down application...
2025-08-03 21:04:07,932 - app.main - INFO - Closing database connections...
2025-08-03 21:04:07,932 - app.main - INFO - Database connections closed successfully
2025-08-03 21:04:14,767 - app.main - INFO - Starting application...
2025-08-03 21:04:14,768 - app.main - INFO - Initializing database manager...
2025-08-03 21:04:14,768 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:04:14,769 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:04:14,770 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:08:02,882 - app.main - INFO - Shutting down application...
2025-08-03 21:08:02,882 - app.main - INFO - Closing database connections...
2025-08-03 21:08:02,883 - app.main - INFO - Database connections closed successfully
2025-08-03 21:08:11,873 - app.main - INFO - Starting application...
2025-08-03 21:08:11,874 - app.main - INFO - Initializing database manager...
2025-08-03 21:08:11,874 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:08:11,875 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:08:11,876 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:08:51,851 - app.main - INFO - Shutting down application...
2025-08-03 21:08:51,852 - app.main - INFO - Closing database connections...
2025-08-03 21:08:51,852 - app.main - INFO - Database connections closed successfully
2025-08-03 21:08:59,290 - app.main - INFO - Starting application...
2025-08-03 21:08:59,291 - app.main - INFO - Initializing database manager...
2025-08-03 21:08:59,291 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:08:59,293 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:08:59,293 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:12:41,124 - app.main - INFO - Shutting down application...
2025-08-03 21:12:41,125 - app.main - INFO - Closing database connections...
2025-08-03 21:12:41,125 - app.main - INFO - Database connections closed successfully
2025-08-03 21:12:49,187 - app.main - INFO - Starting application...
2025-08-03 21:12:49,188 - app.main - INFO - Initializing database manager...
2025-08-03 21:12:49,189 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:12:49,190 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:12:49,190 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:12:58,416 - app.main - INFO - Shutting down application...
2025-08-03 21:12:58,417 - app.main - INFO - Closing database connections...
2025-08-03 21:12:58,417 - app.main - INFO - Database connections closed successfully
2025-08-03 21:13:05,785 - app.main - INFO - Starting application...
2025-08-03 21:13:05,786 - app.main - INFO - Initializing database manager...
2025-08-03 21:13:05,786 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:13:05,788 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:13:05,788 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:13:15,816 - app.main - INFO - Shutting down application...
2025-08-03 21:13:15,816 - app.main - INFO - Closing database connections...
2025-08-03 21:13:15,817 - app.main - INFO - Database connections closed successfully
2025-08-03 21:13:24,801 - app.main - INFO - Starting application...
2025-08-03 21:13:24,801 - app.main - INFO - Initializing database manager...
2025-08-03 21:13:24,802 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:13:24,803 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:13:24,803 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:14:24,170 - app.main - INFO - Shutting down application...
2025-08-03 21:14:24,172 - app.main - INFO - Closing database connections...
2025-08-03 21:14:24,173 - app.main - INFO - Database connections closed successfully
2025-08-03 21:14:33,751 - app.main - INFO - Starting application...
2025-08-03 21:14:33,752 - app.main - INFO - Initializing database manager...
2025-08-03 21:14:33,753 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:14:33,755 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:14:33,755 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:14:44,788 - app.main - INFO - Shutting down application...
2025-08-03 21:14:44,789 - app.main - INFO - Closing database connections...
2025-08-03 21:14:44,789 - app.main - INFO - Database connections closed successfully
2025-08-03 21:14:53,278 - app.main - INFO - Starting application...
2025-08-03 21:14:53,279 - app.main - INFO - Initializing database manager...
2025-08-03 21:14:53,279 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:14:53,280 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:14:53,281 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:16:34,629 - app.main - INFO - Shutting down application...
2025-08-03 21:16:34,630 - app.main - INFO - Closing database connections...
2025-08-03 21:16:34,630 - app.main - INFO - Database connections closed successfully
2025-08-03 21:16:42,397 - app.main - INFO - Starting application...
2025-08-03 21:16:42,398 - app.main - INFO - Initializing database manager...
2025-08-03 21:16:42,398 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:16:42,399 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:16:42,399 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:16:53,236 - app.main - INFO - Shutting down application...
2025-08-03 21:16:53,236 - app.main - INFO - Closing database connections...
2025-08-03 21:16:53,236 - app.main - INFO - Database connections closed successfully
2025-08-03 21:17:01,500 - app.main - INFO - Starting application...
2025-08-03 21:17:01,501 - app.main - INFO - Initializing database manager...
2025-08-03 21:17:01,501 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:17:01,503 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:17:01,503 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:18:37,870 - app.main - INFO - Shutting down application...
2025-08-03 21:18:37,870 - app.main - INFO - Closing database connections...
2025-08-03 21:18:37,870 - app.main - INFO - Database connections closed successfully
2025-08-03 21:18:45,160 - app.main - INFO - Starting application...
2025-08-03 21:18:45,161 - app.main - INFO - Initializing database manager...
2025-08-03 21:18:45,161 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:18:45,163 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:18:45,163 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:03,818 - app.main - INFO - Shutting down application...
2025-08-03 21:20:03,819 - app.main - INFO - Closing database connections...
2025-08-03 21:20:03,819 - app.main - INFO - Database connections closed successfully
2025-08-03 21:20:13,039 - app.main - INFO - Starting application...
2025-08-03 21:20:13,040 - app.main - INFO - Initializing database manager...
2025-08-03 21:20:13,041 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:20:13,043 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:13,043 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:23,887 - app.main - INFO - Shutting down application...
2025-08-03 21:20:23,887 - app.main - INFO - Closing database connections...
2025-08-03 21:20:23,888 - app.main - INFO - Database connections closed successfully
2025-08-03 21:20:32,377 - app.main - INFO - Starting application...
2025-08-03 21:20:32,377 - app.main - INFO - Initializing database manager...
2025-08-03 21:20:32,378 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:20:32,379 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:32,381 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:44,410 - app.main - INFO - Shutting down application...
2025-08-03 21:20:44,410 - app.main - INFO - Closing database connections...
2025-08-03 21:20:44,410 - app.main - INFO - Database connections closed successfully
2025-08-03 21:20:52,862 - app.main - INFO - Starting application...
2025-08-03 21:20:52,862 - app.main - INFO - Initializing database manager...
2025-08-03 21:20:52,863 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:20:52,864 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:20:52,864 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:21:03,193 - app.main - INFO - Shutting down application...
2025-08-03 21:21:03,194 - app.main - INFO - Closing database connections...
2025-08-03 21:21:03,194 - app.main - INFO - Database connections closed successfully
2025-08-03 21:21:11,992 - app.main - INFO - Starting application...
2025-08-03 21:21:11,993 - app.main - INFO - Initializing database manager...
2025-08-03 21:21:11,993 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:21:11,995 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:21:11,995 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:22:30,248 - app.main - INFO - Shutting down application...
2025-08-03 21:22:30,248 - app.main - INFO - Closing database connections...
2025-08-03 21:22:30,248 - app.main - INFO - Database connections closed successfully
2025-08-03 21:22:38,230 - app.main - INFO - Starting application...
2025-08-03 21:22:38,231 - app.main - INFO - Initializing database manager...
2025-08-03 21:22:38,232 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:22:38,234 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:22:38,235 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:22:51,670 - app.main - INFO - Shutting down application...
2025-08-03 21:22:51,671 - app.main - INFO - Closing database connections...
2025-08-03 21:22:51,671 - app.main - INFO - Database connections closed successfully
2025-08-03 21:22:59,551 - app.main - INFO - Starting application...
2025-08-03 21:22:59,552 - app.main - INFO - Initializing database manager...
2025-08-03 21:22:59,553 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:22:59,555 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:22:59,555 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:25:25,908 - app.main - INFO - Shutting down application...
2025-08-03 21:25:25,908 - app.main - INFO - Closing database connections...
2025-08-03 21:25:25,909 - app.main - INFO - Database connections closed successfully
2025-08-03 21:25:33,899 - app.main - INFO - Starting application...
2025-08-03 21:25:33,900 - app.main - INFO - Initializing database manager...
2025-08-03 21:25:33,900 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:25:33,902 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:25:33,902 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:25:43,846 - app.main - INFO - Shutting down application...
2025-08-03 21:25:43,846 - app.main - INFO - Closing database connections...
2025-08-03 21:25:43,846 - app.main - INFO - Database connections closed successfully
2025-08-03 21:25:52,151 - app.main - INFO - Starting application...
2025-08-03 21:25:52,152 - app.main - INFO - Initializing database manager...
2025-08-03 21:25:52,152 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:25:52,154 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:25:52,154 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:26:51,827 - app.main - INFO - Shutting down application...
2025-08-03 21:26:51,828 - app.main - INFO - Closing database connections...
2025-08-03 21:26:51,828 - app.main - INFO - Database connections closed successfully
2025-08-03 21:27:00,048 - app.main - INFO - Starting application...
2025-08-03 21:27:00,049 - app.main - INFO - Initializing database manager...
2025-08-03 21:27:00,049 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:27:00,051 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:27:00,051 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:27:09,681 - app.main - INFO - Shutting down application...
2025-08-03 21:27:09,682 - app.main - INFO - Closing database connections...
2025-08-03 21:27:09,682 - app.main - INFO - Database connections closed successfully
2025-08-03 21:27:17,367 - app.main - INFO - Starting application...
2025-08-03 21:27:17,367 - app.main - INFO - Initializing database manager...
2025-08-03 21:27:17,368 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:27:17,370 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:27:17,370 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:27:29,586 - app.main - INFO - Shutting down application...
2025-08-03 21:27:29,586 - app.main - INFO - Closing database connections...
2025-08-03 21:27:29,587 - app.main - INFO - Database connections closed successfully
2025-08-03 21:27:37,333 - app.main - INFO - Starting application...
2025-08-03 21:27:37,333 - app.main - INFO - Initializing database manager...
2025-08-03 21:27:37,334 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:27:37,336 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:27:37,336 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:28:59,281 - app.main - INFO - Shutting down application...
2025-08-03 21:28:59,282 - app.main - INFO - Closing database connections...
2025-08-03 21:28:59,282 - app.main - INFO - Database connections closed successfully
2025-08-03 21:29:07,122 - app.main - INFO - Starting application...
2025-08-03 21:29:07,123 - app.main - INFO - Initializing database manager...
2025-08-03 21:29:07,123 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:29:07,125 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:29:07,126 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:29:17,555 - app.main - INFO - Shutting down application...
2025-08-03 21:29:17,556 - app.main - INFO - Closing database connections...
2025-08-03 21:29:17,556 - app.main - INFO - Database connections closed successfully
2025-08-03 21:29:24,851 - app.main - INFO - Starting application...
2025-08-03 21:29:24,852 - app.main - INFO - Initializing database manager...
2025-08-03 21:29:24,853 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 21:29:24,854 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 21:29:24,855 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:42:51,693 - app.main - INFO - Shutting down application...
2025-08-03 22:42:51,700 - app.main - INFO - Closing database connections...
2025-08-03 22:42:51,703 - app.main - INFO - Database connections closed successfully
2025-08-03 22:43:07,862 - app.main - INFO - Starting application...
2025-08-03 22:43:07,863 - app.main - INFO - Initializing database manager...
2025-08-03 22:43:07,865 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 22:43:07,867 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:43:07,868 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:43:13,532 - app.main - INFO - Shutting down application...
2025-08-03 22:43:13,533 - app.main - INFO - Closing database connections...
2025-08-03 22:43:13,533 - app.main - INFO - Database connections closed successfully
2025-08-03 22:43:22,250 - app.main - INFO - Starting application...
2025-08-03 22:43:22,251 - app.main - INFO - Initializing database manager...
2025-08-03 22:43:22,251 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 22:43:22,253 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:43:22,253 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:44:59,962 - app.main - INFO - Shutting down application...
2025-08-03 22:44:59,963 - app.main - INFO - Closing database connections...
2025-08-03 22:44:59,963 - app.main - INFO - Database connections closed successfully
2025-08-03 22:45:08,224 - app.main - INFO - Starting application...
2025-08-03 22:45:08,224 - app.main - INFO - Initializing database manager...
2025-08-03 22:45:08,225 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 22:45:08,226 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:45:08,227 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:49:12,626 - app.main - INFO - Shutting down application...
2025-08-03 22:49:12,627 - app.main - INFO - Closing database connections...
2025-08-03 22:49:12,627 - app.main - INFO - Database connections closed successfully
2025-08-03 22:49:18,731 - app.main - INFO - Starting application...
2025-08-03 22:49:18,732 - app.main - INFO - Initializing database manager...
2025-08-03 22:49:18,732 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-03 22:49:18,734 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-03 22:49:18,735 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:04:33,809 - app.main - INFO - Starting application...
2025-08-04 00:04:33,810 - app.main - INFO - Initializing database manager...
2025-08-04 00:04:33,812 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:04:33,813 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:04:33,813 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:05:51,665 - app.main - INFO - Starting application...
2025-08-04 00:05:51,666 - app.main - INFO - Initializing database manager...
2025-08-04 00:05:51,666 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:05:51,668 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:05:51,669 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:06:16,499 - app.main - INFO - Starting application...
2025-08-04 00:06:16,500 - app.main - INFO - Initializing database manager...
2025-08-04 00:06:16,502 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:06:16,507 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:06:16,508 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:16:28,647 - app.main - INFO - Shutting down application...
2025-08-04 00:16:28,648 - app.main - INFO - Closing database connections...
2025-08-04 00:16:28,648 - app.main - INFO - Database connections closed successfully
2025-08-04 00:16:37,085 - app.main - INFO - Starting application...
2025-08-04 00:16:37,086 - app.main - INFO - Initializing database manager...
2025-08-04 00:16:37,087 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:16:37,094 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:16:37,095 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:16:49,049 - app.main - ERROR - Unhandled exception: 'async_generator' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 634, in solve_dependencies
    solved = await solve_generator(
             ^^^^^^^^^^^^^^^^^^^^^^
        call=call, stack=async_exit_stack, sub_values=solved_result.values
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 560, in solve_generator
    return await stack.enter_async_context(cm)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 668, in enter_async_context
    result = await _enter(cm)
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/db/session.py", line 289, in get_session
    async with db_manager.get_session() as session:
               ~~~~~~~~~~~~~~~~~~~~~~^^
TypeError: 'async_generator' object does not support the asynchronous context manager protocol
2025-08-04 00:19:44,935 - app.main - INFO - Shutting down application...
2025-08-04 00:19:44,937 - app.main - INFO - Closing database connections...
2025-08-04 00:19:44,938 - app.main - INFO - Database connections closed successfully
2025-08-04 00:19:54,051 - app.main - INFO - Starting application...
2025-08-04 00:19:54,053 - app.main - INFO - Initializing database manager...
2025-08-04 00:19:54,056 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:19:54,057 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:19:54,058 - app.main - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:20:00,910 - app.main - ERROR - Unhandled exception: Database manager not initialized
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 634, in solve_dependencies
    solved = await solve_generator(
             ^^^^^^^^^^^^^^^^^^^^^^
        call=call, stack=async_exit_stack, sub_values=solved_result.values
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 560, in solve_generator
    return await stack.enter_async_context(cm)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 668, in enter_async_context
    result = await _enter(cm)
             ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/db/session.py", line 290, in get_session
    async with db_manager.get_session() as session:
               ~~~~~~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/db/session.py", line 148, in get_session
    raise RuntimeError("Database manager not initialized")
RuntimeError: Database manager not initialized
2025-08-04 00:25:15,041 - app.main - INFO - Shutting down application...
2025-08-04 00:25:15,043 - app.main - INFO - Closing database connections...
2025-08-04 00:25:15,043 - app.main - INFO - Database connections closed successfully
2025-08-04 00:25:23,616 - app.main - INFO - Starting application...
2025-08-04 00:25:23,618 - app.main - INFO - Initializing database manager...
2025-08-04 00:25:23,619 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:25:23,621 - app.db.session - ERROR - Failed to initialize database manager: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:25:23,621 - app.main - ERROR - Failed to initialize database manager
Traceback (most recent call last):
  File "/app/app/main.py", line 37, in lifespan
    await db_manager.initialize()
  File "/app/app/db/session.py", line 127, in initialize
    self.engine = self._create_engine()
                  ~~~~~~~~~~~~~~~~~~~^^
  File "/app/app/db/session.py", line 94, in _create_engine
    engine = create_async_engine(**engine_config)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
  File "<string>", line 2, in create_engine
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/create.py", line 673, in create_engine
    raise exc.ArgumentError(
    ...<4 lines>...
    )
sqlalchemy.exc.ArgumentError: Pool class QueuePool cannot be used with asyncio engine (Background on this error at: https://sqlalche.me/e/20/pcls)
2025-08-04 00:29:45,121 - app.main - INFO - Starting application...
2025-08-04 00:29:45,123 - app.main - INFO - Initializing database manager...
2025-08-04 00:29:45,125 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:29:45,127 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:29:45,200 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:29:45,201 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:29:45,202 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:30:37,559 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-04 00:30:37,943 - app.db.crud - INFO - Created user: testuser123
2025-08-04 00:30:37,944 - app.api.users - INFO - Created new user: testuser123
2025-08-04 00:30:38,032 - app.main - INFO - Shutting down application...
2025-08-04 00:30:38,032 - app.main - INFO - Closing database connections...
2025-08-04 00:30:38,033 - app.db.session - INFO - Closing database connections...
2025-08-04 00:30:38,038 - app.db.session - INFO - Database connections closed
2025-08-04 00:30:38,038 - app.main - INFO - Database connections closed successfully
2025-08-04 00:30:46,549 - app.main - INFO - Starting application...
2025-08-04 00:30:46,552 - app.main - INFO - Initializing database manager...
2025-08-04 00:30:46,552 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:30:46,557 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:30:46,634 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:30:46,636 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:30:46,637 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:30:54,914 - app.db.session - ERROR - Unexpected session error: 1 validation errors:
  {'type': 'enum', 'loc': ('response', 0, 'status'), 'msg': "Input should be 'active', 'inactive' or 'suspended'", 'input': None, 'ctx': {'expected': "'active', 'inactive' or 'suspended'"}}

2025-08-04 00:30:54,916 - app.main - ERROR - Unhandled exception: 1 validation errors:
  {'type': 'enum', 'loc': ('response', 0, 'status'), 'msg': "Input should be 'active', 'inactive' or 'suspended'", 'input': None, 'ctx': {'expected': "'active', 'inactive' or 'suspended'"}}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'enum', 'loc': ('response', 0, 'status'), 'msg': "Input should be 'active', 'inactive' or 'suspended'", 'input': None, 'ctx': {'expected': "'active', 'inactive' or 'suspended'"}}

2025-08-04 00:36:36,905 - app.main - INFO - Shutting down application...
2025-08-04 00:36:36,905 - app.main - INFO - Closing database connections...
2025-08-04 00:36:36,906 - app.db.session - INFO - Closing database connections...
2025-08-04 00:36:36,912 - app.db.session - INFO - Database connections closed
2025-08-04 00:36:36,913 - app.main - INFO - Database connections closed successfully
2025-08-04 00:36:46,981 - app.main - INFO - Starting application...
2025-08-04 00:36:46,982 - app.main - INFO - Initializing database manager...
2025-08-04 00:36:46,983 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:36:46,985 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:36:47,928 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:36:47,929 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:36:47,929 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:37:08,002 - app.main - INFO - Shutting down application...
2025-08-04 00:37:08,003 - app.main - INFO - Closing database connections...
2025-08-04 00:37:08,004 - app.db.session - INFO - Closing database connections...
2025-08-04 00:37:08,010 - app.db.session - INFO - Database connections closed
2025-08-04 00:37:08,010 - app.main - INFO - Database connections closed successfully
2025-08-04 00:37:16,346 - app.main - INFO - Starting application...
2025-08-04 00:37:16,347 - app.main - INFO - Initializing database manager...
2025-08-04 00:37:16,349 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:37:16,351 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:37:16,418 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:37:16,419 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:37:16,419 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:40:47,283 - app.main - ERROR - Database health check failed: (psycopg2.OperationalError) server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request.

[SQL: SELECT 1]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-08-04 00:41:21,409 - app.main - INFO - Shutting down application...
2025-08-04 00:41:21,410 - app.main - INFO - Closing database connections...
2025-08-04 00:41:21,411 - app.db.session - INFO - Closing database connections...
2025-08-04 00:41:21,414 - app.db.session - INFO - Database connections closed
2025-08-04 00:41:21,416 - app.main - INFO - Database connections closed successfully
2025-08-04 00:41:30,767 - app.main - INFO - Starting application...
2025-08-04 00:41:30,768 - app.main - INFO - Initializing database manager...
2025-08-04 00:41:30,769 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:41:30,771 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:41:30,836 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:41:30,838 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:41:30,839 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:44:00,152 - app.main - INFO - Shutting down application...
2025-08-04 00:44:00,152 - app.main - INFO - Closing database connections...
2025-08-04 00:44:00,153 - app.db.session - INFO - Closing database connections...
2025-08-04 00:44:00,159 - app.db.session - INFO - Database connections closed
2025-08-04 00:44:00,160 - app.main - INFO - Database connections closed successfully
2025-08-04 00:44:10,526 - app.main - INFO - Starting application...
2025-08-04 00:44:10,528 - app.main - INFO - Initializing database manager...
2025-08-04 00:44:10,529 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:44:10,532 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:44:10,615 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:44:10,615 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:44:10,616 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:44:29,178 - app.main - INFO - Shutting down application...
2025-08-04 00:44:29,179 - app.main - INFO - Closing database connections...
2025-08-04 00:44:29,180 - app.db.session - INFO - Closing database connections...
2025-08-04 00:44:29,186 - app.db.session - INFO - Database connections closed
2025-08-04 00:44:29,187 - app.main - INFO - Database connections closed successfully
2025-08-04 00:44:38,030 - app.main - INFO - Starting application...
2025-08-04 00:44:38,030 - app.main - INFO - Initializing database manager...
2025-08-04 00:44:38,032 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:44:38,034 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:44:38,109 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:44:38,110 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:44:38,111 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:44:59,323 - app.main - INFO - Shutting down application...
2025-08-04 00:44:59,324 - app.main - INFO - Closing database connections...
2025-08-04 00:44:59,325 - app.db.session - INFO - Closing database connections...
2025-08-04 00:44:59,330 - app.db.session - INFO - Database connections closed
2025-08-04 00:44:59,332 - app.main - INFO - Database connections closed successfully
2025-08-04 00:45:08,522 - app.main - INFO - Starting application...
2025-08-04 00:45:08,523 - app.main - INFO - Initializing database manager...
2025-08-04 00:45:08,524 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:45:08,528 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:45:08,601 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:45:08,601 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:45:08,602 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:45:59,359 - app.main - INFO - Shutting down application...
2025-08-04 00:45:59,360 - app.main - INFO - Closing database connections...
2025-08-04 00:45:59,360 - app.db.session - INFO - Closing database connections...
2025-08-04 00:45:59,375 - app.db.session - INFO - Database connections closed
2025-08-04 00:45:59,376 - app.main - INFO - Database connections closed successfully
2025-08-04 00:46:08,046 - app.main - INFO - Starting application...
2025-08-04 00:46:08,047 - app.main - INFO - Initializing database manager...
2025-08-04 00:46:08,048 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:46:08,052 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:46:08,125 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:46:08,125 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:46:08,126 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:46:30,588 - app.main - INFO - Shutting down application...
2025-08-04 00:46:30,588 - app.main - INFO - Closing database connections...
2025-08-04 00:46:30,589 - app.db.session - INFO - Closing database connections...
2025-08-04 00:46:30,594 - app.db.session - INFO - Database connections closed
2025-08-04 00:46:30,595 - app.main - INFO - Database connections closed successfully
2025-08-04 00:46:38,943 - app.main - INFO - Starting application...
2025-08-04 00:46:38,943 - app.main - INFO - Initializing database manager...
2025-08-04 00:46:38,944 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:46:38,947 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:46:39,021 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:46:39,023 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:46:39,026 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:47:00,810 - app.main - INFO - Shutting down application...
2025-08-04 00:47:00,811 - app.main - INFO - Closing database connections...
2025-08-04 00:47:00,811 - app.db.session - INFO - Closing database connections...
2025-08-04 00:47:00,817 - app.db.session - INFO - Database connections closed
2025-08-04 00:47:00,818 - app.main - INFO - Database connections closed successfully
2025-08-04 00:47:09,330 - app.main - INFO - Starting application...
2025-08-04 00:47:09,333 - app.main - INFO - Initializing database manager...
2025-08-04 00:47:09,334 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:47:09,339 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:47:09,407 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:47:09,409 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:47:09,409 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:48:41,578 - app.main - INFO - Shutting down application...
2025-08-04 00:48:41,579 - app.main - INFO - Closing database connections...
2025-08-04 00:48:41,580 - app.db.session - INFO - Closing database connections...
2025-08-04 00:48:41,585 - app.db.session - INFO - Database connections closed
2025-08-04 00:48:41,586 - app.main - INFO - Database connections closed successfully
2025-08-04 00:48:50,238 - app.main - INFO - Starting application...
2025-08-04 00:48:50,239 - app.main - INFO - Initializing database manager...
2025-08-04 00:48:50,240 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:48:50,243 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:48:50,317 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:48:50,318 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:48:50,318 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:50:46,137 - app.main - INFO - Shutting down application...
2025-08-04 00:50:46,138 - app.main - INFO - Closing database connections...
2025-08-04 00:50:46,139 - app.db.session - INFO - Closing database connections...
2025-08-04 00:50:46,143 - app.db.session - INFO - Database connections closed
2025-08-04 00:50:46,144 - app.main - INFO - Database connections closed successfully
2025-08-04 00:50:54,620 - app.main - INFO - Starting application...
2025-08-04 00:50:54,621 - app.main - INFO - Initializing database manager...
2025-08-04 00:50:54,622 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:50:54,626 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:50:54,709 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:50:54,710 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:50:54,711 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:53:07,880 - app.main - INFO - Starting application...
2025-08-04 00:53:07,880 - app.main - INFO - Initializing database manager...
2025-08-04 00:53:07,881 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:53:07,883 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:53:07,951 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:53:07,951 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:53:07,952 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:53:58,071 - app.main - INFO - Starting application...
2025-08-04 00:53:58,072 - app.main - INFO - Initializing database manager...
2025-08-04 00:53:58,073 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:53:58,076 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:53:58,152 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:53:58,152 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:53:58,153 - app.main - INFO - Database manager initialized successfully
2025-08-04 00:55:57,336 - app.main - INFO - Shutting down application...
2025-08-04 00:55:57,337 - app.main - INFO - Closing database connections...
2025-08-04 00:55:57,338 - app.db.session - INFO - Closing database connections...
2025-08-04 00:55:57,344 - app.db.session - INFO - Database connections closed
2025-08-04 00:55:57,345 - app.main - INFO - Database connections closed successfully
2025-08-04 00:56:07,442 - app.main - INFO - Starting application...
2025-08-04 00:56:07,443 - app.main - INFO - Initializing database manager...
2025-08-04 00:56:07,444 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 00:56:07,446 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 00:56:07,525 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 00:56:07,525 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 00:56:07,526 - app.main - INFO - Database manager initialized successfully
2025-08-04 01:03:43,974 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-04 01:03:44,321 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-04 01:03:44,322 - app.core.security - INFO - user_authentication completed in 0.42s
2025-08-04 01:03:44,323 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-04 01:03:44,346 - app.core.security - INFO - Access token created successfully
2025-08-04 01:03:44,347 - app.core.security - INFO - Refresh token created successfully
2025-08-04 01:03:44,348 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-04 01:03:44,349 - app.api.auth - INFO - user_login completed in 0.45s
2025-08-04 01:06:52,335 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 01:06:54,250 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 01:06:54,291 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 01:06:54,293 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 01:06:54,303 - app.api.itinerary - ERROR - Failed to get location coordinates: 'NoneType' object has no attribute 'latitude'
2025-08-04 01:06:54,303 - app.api.itinerary - INFO - itinerary_generation completed in 1.97s
2025-08-04 01:06:54,304 - app.db.session - ERROR - Unexpected session error: 500: Failed to retrieve location coordinates
2025-08-04 01:13:09,100 - app.main - INFO - Shutting down application...
2025-08-04 01:13:09,101 - app.main - INFO - Closing database connections...
2025-08-04 01:13:09,102 - app.db.session - INFO - Closing database connections...
2025-08-04 01:13:09,111 - app.db.session - INFO - Database connections closed
2025-08-04 01:13:09,112 - app.main - INFO - Database connections closed successfully
2025-08-04 01:13:18,352 - app.main - INFO - Starting application...
2025-08-04 01:13:18,353 - app.main - INFO - Initializing database manager...
2025-08-04 01:13:18,355 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 01:13:18,357 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 01:13:18,428 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 01:13:18,429 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 01:13:18,430 - app.main - INFO - Database manager initialized successfully
2025-08-04 01:13:35,592 - app.main - INFO - Shutting down application...
2025-08-04 01:13:35,593 - app.main - INFO - Closing database connections...
2025-08-04 01:13:35,594 - app.db.session - INFO - Closing database connections...
2025-08-04 01:13:35,602 - app.db.session - INFO - Database connections closed
2025-08-04 01:13:35,602 - app.main - INFO - Database connections closed successfully
2025-08-04 01:13:46,637 - app.main - INFO - Starting application...
2025-08-04 01:13:46,638 - app.main - INFO - Initializing database manager...
2025-08-04 01:13:46,639 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 01:13:46,642 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 01:13:46,731 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 01:13:46,732 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 01:13:46,732 - app.main - INFO - Database manager initialized successfully
2025-08-04 01:14:05,500 - app.main - INFO - Shutting down application...
2025-08-04 01:14:05,501 - app.main - INFO - Closing database connections...
2025-08-04 01:14:05,502 - app.db.session - INFO - Closing database connections...
2025-08-04 01:14:05,511 - app.db.session - INFO - Database connections closed
2025-08-04 01:14:05,512 - app.main - INFO - Database connections closed successfully
2025-08-04 01:14:16,402 - app.main - INFO - Starting application...
2025-08-04 01:14:16,404 - app.main - INFO - Initializing database manager...
2025-08-04 01:14:16,407 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 01:14:16,416 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 01:14:16,494 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 01:14:16,495 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 01:14:16,495 - app.main - INFO - Database manager initialized successfully
2025-08-04 01:14:30,819 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 01:14:32,761 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 01:14:32,799 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 01:14:32,800 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 01:14:32,822 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 01:14:32,835 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 01:14:32,840 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 01:14:32,884 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 01:14:32,989 - app.api.itinerary - ERROR - Failed to build POI list: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 01:14:32,990 - app.api.itinerary - INFO - itinerary_generation completed in 2.17s
2025-08-04 01:14:32,992 - app.db.session - ERROR - Unexpected session error: 500: Failed to build itinerary items
2025-08-04 11:31:41,320 - app.main - INFO - Shutting down application...
2025-08-04 11:31:41,324 - app.main - INFO - Closing database connections...
2025-08-04 11:31:41,328 - app.db.session - INFO - Closing database connections...
2025-08-04 11:31:41,354 - app.db.session - INFO - Database connections closed
2025-08-04 11:31:41,355 - app.main - INFO - Database connections closed successfully
2025-08-04 11:31:51,070 - app.main - INFO - Starting application...
2025-08-04 11:31:51,071 - app.main - INFO - Initializing database manager...
2025-08-04 11:31:51,072 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 11:31:51,074 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 11:31:51,148 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 11:31:51,148 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 11:31:51,149 - app.main - INFO - Database manager initialized successfully
2025-08-04 11:34:17,387 - app.main - INFO - Shutting down application...
2025-08-04 11:34:17,388 - app.main - INFO - Closing database connections...
2025-08-04 11:34:17,389 - app.db.session - INFO - Closing database connections...
2025-08-04 11:34:17,396 - app.db.session - INFO - Database connections closed
2025-08-04 11:34:17,397 - app.main - INFO - Database connections closed successfully
2025-08-04 11:34:27,095 - app.main - INFO - Starting application...
2025-08-04 11:34:27,096 - app.main - INFO - Initializing database manager...
2025-08-04 11:34:27,097 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 11:34:27,100 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 11:34:27,183 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 11:34:27,186 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 11:34:27,188 - app.main - INFO - Database manager initialized successfully
2025-08-04 11:51:18,074 - app.main - INFO - Shutting down application...
2025-08-04 11:51:18,075 - app.main - INFO - Closing database connections...
2025-08-04 11:51:18,076 - app.db.session - INFO - Closing database connections...
2025-08-04 11:51:18,086 - app.db.session - INFO - Database connections closed
2025-08-04 11:51:18,086 - app.main - INFO - Database connections closed successfully
2025-08-04 11:51:27,073 - app.main - INFO - Starting application...
2025-08-04 11:51:27,074 - app.main - INFO - Initializing database manager...
2025-08-04 11:51:27,075 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 11:51:27,077 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 11:51:27,142 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 11:51:27,143 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 11:51:27,143 - app.main - INFO - Database manager initialized successfully
2025-08-04 20:19:00,879 - app.main - INFO - Shutting down application...
2025-08-04 20:19:00,886 - app.main - INFO - Closing database connections...
2025-08-04 20:19:00,892 - app.db.session - INFO - Closing database connections...
2025-08-04 20:19:01,027 - app.db.session - INFO - Database connections closed
2025-08-04 20:19:01,029 - app.main - INFO - Database connections closed successfully
2025-08-04 21:09:35,382 - app.main - INFO - Starting application...
2025-08-04 21:09:35,383 - app.main - INFO - Initializing database manager...
2025-08-04 21:09:35,384 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:09:35,386 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:09:35,565 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:09:35,566 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:09:35,566 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:09:52,303 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-04 21:09:52,650 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-04 21:09:52,651 - app.core.security - INFO - user_authentication completed in 0.43s
2025-08-04 21:09:52,651 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-04 21:09:52,666 - app.core.security - INFO - Access token created successfully
2025-08-04 21:09:52,667 - app.core.security - INFO - Refresh token created successfully
2025-08-04 21:09:52,667 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-04 21:09:52,668 - app.api.auth - INFO - user_login completed in 0.45s
2025-08-04 21:10:22,126 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 21:10:23,683 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 21:10:23,707 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 21:10:23,807 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
2025-08-04 21:10:23,809 - app.db.session - ERROR - Database session error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('560478a6-3119-457d-8341-8ee576cb8f0d'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=datetime.timezone.utc), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-05T00:00:00+00:00", "2026-07-06T00:00:00+00:00", "2026-07-07T00:00:00+00:00" ... (158 characters truncated) ... .0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 1578.986406326294, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 21, 10, 23, 803246, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 21, 10, 23, 803271, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-04 21:10:23,810 - app.main - ERROR - Unhandled exception: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('560478a6-3119-457d-8341-8ee576cb8f0d'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=datetime.timezone.utc), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-05T00:00:00+00:00", "2026-07-06T00:00:00+00:00", "2026-07-07T00:00:00+00:00" ... (158 characters truncated) ... .0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 1578.986406326294, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 21, 10, 23, 803246, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 21, 10, 23, 803271, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 635, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 653, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedObjectError: type "itinerarystatus" does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 862, in generate_itinerary
    await session.commit()
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 1014, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
        statement, multiparams, execution_options=execution_options
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('560478a6-3119-457d-8341-8ee576cb8f0d'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=datetime.timezone.utc), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=datetime.timezone.utc), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-05T00:00:00+00:00", "2026-07-06T00:00:00+00:00", "2026-07-07T00:00:00+00:00" ... (158 characters truncated) ... .0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 1578.986406326294, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 21, 10, 23, 803246, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 21, 10, 23, 803271, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-04 21:13:38,335 - app.main - INFO - Shutting down application...
2025-08-04 21:13:38,336 - app.main - INFO - Closing database connections...
2025-08-04 21:13:38,337 - app.db.session - INFO - Closing database connections...
2025-08-04 21:13:38,347 - app.db.session - INFO - Database connections closed
2025-08-04 21:13:38,347 - app.main - INFO - Database connections closed successfully
2025-08-04 21:14:09,053 - app.main - INFO - Starting application...
2025-08-04 21:14:09,054 - app.main - INFO - Initializing database manager...
2025-08-04 21:14:09,056 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:14:09,059 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:14:09,120 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:14:09,120 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:14:09,121 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:15:08,842 - app.main - INFO - Shutting down application...
2025-08-04 21:15:08,842 - app.main - INFO - Closing database connections...
2025-08-04 21:15:08,842 - app.db.session - INFO - Closing database connections...
2025-08-04 21:15:08,846 - app.db.session - INFO - Database connections closed
2025-08-04 21:15:08,846 - app.main - INFO - Database connections closed successfully
2025-08-04 21:15:15,204 - app.main - INFO - Starting application...
2025-08-04 21:15:15,205 - app.main - INFO - Initializing database manager...
2025-08-04 21:15:15,205 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:15:15,207 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:15:15,262 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:15:15,262 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:15:15,263 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:15:40,512 - app.main - INFO - Shutting down application...
2025-08-04 21:15:40,513 - app.main - INFO - Closing database connections...
2025-08-04 21:15:40,513 - app.db.session - INFO - Closing database connections...
2025-08-04 21:15:40,518 - app.db.session - INFO - Database connections closed
2025-08-04 21:15:40,518 - app.main - INFO - Database connections closed successfully
2025-08-04 21:15:48,816 - app.main - INFO - Starting application...
2025-08-04 21:15:48,817 - app.main - INFO - Initializing database manager...
2025-08-04 21:15:48,818 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:15:48,819 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:15:48,869 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:15:48,869 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:15:48,869 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:15:48,940 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 21:15:50,578 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 21:15:50,603 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 21:15:50,604 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 21:15:50,612 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 21:15:50,617 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 21:15:50,621 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 21:15:50,643 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 21:15:50,650 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 340, in build_poi_list
    opens=datetime.combine(start_date.date(), time(9, 0), tzinfo=start_date.tzinfo),
                                              ~~~~^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 21:15:50,660 - app.api.itinerary - INFO - itinerary_generation completed in 1.72s
2025-08-04 21:15:50,661 - app.db.session - ERROR - Unexpected session error: 500: Failed to build itinerary items
2025-08-04 21:19:05,025 - app.main - INFO - Shutting down application...
2025-08-04 21:19:05,026 - app.main - INFO - Closing database connections...
2025-08-04 21:19:05,026 - app.db.session - INFO - Closing database connections...
2025-08-04 21:19:05,037 - app.db.session - INFO - Database connections closed
2025-08-04 21:19:05,038 - app.main - INFO - Database connections closed successfully
2025-08-04 21:19:15,612 - app.main - INFO - Starting application...
2025-08-04 21:19:15,613 - app.main - INFO - Initializing database manager...
2025-08-04 21:19:15,614 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:19:15,616 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:19:15,684 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:19:15,685 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:19:15,686 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:19:24,410 - app.main - INFO - Shutting down application...
2025-08-04 21:19:24,411 - app.main - INFO - Closing database connections...
2025-08-04 21:19:24,411 - app.db.session - INFO - Closing database connections...
2025-08-04 21:19:24,415 - app.db.session - INFO - Database connections closed
2025-08-04 21:19:24,415 - app.main - INFO - Database connections closed successfully
2025-08-04 21:19:31,427 - app.main - INFO - Starting application...
2025-08-04 21:19:31,428 - app.main - INFO - Initializing database manager...
2025-08-04 21:19:31,429 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:19:31,431 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:19:31,495 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:19:31,496 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:19:31,496 - app.main - INFO - Database manager initialized successfully
2025-08-04 21:20:29,783 - app.main - INFO - Shutting down application...
2025-08-04 21:20:29,783 - app.main - INFO - Closing database connections...
2025-08-04 21:20:29,783 - app.db.session - INFO - Closing database connections...
2025-08-04 21:20:29,787 - app.db.session - INFO - Database connections closed
2025-08-04 21:20:29,788 - app.main - INFO - Database connections closed successfully
2025-08-04 21:20:36,255 - app.main - INFO - Starting application...
2025-08-04 21:20:36,256 - app.main - INFO - Initializing database manager...
2025-08-04 21:20:36,256 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 21:20:36,258 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 21:20:36,306 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 21:20:36,306 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 21:20:36,307 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:15:33,688 - app.main - INFO - Shutting down application...
2025-08-04 22:15:33,691 - app.main - INFO - Closing database connections...
2025-08-04 22:15:33,692 - app.db.session - INFO - Closing database connections...
2025-08-04 22:15:33,720 - app.db.session - INFO - Database connections closed
2025-08-04 22:15:33,720 - app.main - INFO - Database connections closed successfully
2025-08-04 22:15:45,238 - app.main - INFO - Starting application...
2025-08-04 22:15:45,245 - app.main - INFO - Initializing database manager...
2025-08-04 22:15:45,249 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:15:45,254 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:15:45,427 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:15:45,428 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:15:45,434 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:20:25,720 - app.core.security - WARNING - JWT decode error: Signature has expired.
2025-08-04 22:20:25,721 - app.db.session - ERROR - Unexpected session error: 401: Could not validate credentials
2025-08-04 22:20:33,523 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-04 22:20:33,843 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-04 22:20:33,844 - app.core.security - INFO - user_authentication completed in 0.41s
2025-08-04 22:20:33,844 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-04 22:20:33,846 - app.core.security - INFO - Access token created successfully
2025-08-04 22:20:33,847 - app.core.security - INFO - Refresh token created successfully
2025-08-04 22:20:33,847 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-04 22:20:33,848 - app.api.auth - INFO - user_login completed in 0.41s
2025-08-04 22:20:50,136 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:20:51,989 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:20:52,019 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:20:52,020 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:20:52,029 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:20:52,041 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:20:52,044 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:20:52,119 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:20:52,127 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 340, in build_poi_list
    opens=datetime.combine(start_date.date(), time(9, 0), tzinfo=start_date.tzinfo),
                                              ~~~~^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:20:52,136 - app.api.itinerary - INFO - itinerary_generation completed in 1.99s
2025-08-04 22:20:52,137 - app.db.session - ERROR - Unexpected session error: 500: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:23:42,165 - app.main - INFO - Shutting down application...
2025-08-04 22:23:42,166 - app.main - INFO - Closing database connections...
2025-08-04 22:23:42,166 - app.db.session - INFO - Closing database connections...
2025-08-04 22:23:42,181 - app.db.session - INFO - Database connections closed
2025-08-04 22:23:42,181 - app.main - INFO - Database connections closed successfully
2025-08-04 22:23:54,766 - app.main - INFO - Starting application...
2025-08-04 22:23:54,767 - app.main - INFO - Initializing database manager...
2025-08-04 22:23:54,767 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:23:54,770 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:23:54,890 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:23:54,890 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:23:54,891 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:24:04,725 - app.main - INFO - Shutting down application...
2025-08-04 22:24:04,726 - app.main - INFO - Closing database connections...
2025-08-04 22:24:04,727 - app.db.session - INFO - Closing database connections...
2025-08-04 22:24:04,733 - app.db.session - INFO - Database connections closed
2025-08-04 22:24:04,733 - app.main - INFO - Database connections closed successfully
2025-08-04 22:24:31,399 - app.main - INFO - Starting application...
2025-08-04 22:24:31,403 - app.main - INFO - Initializing database manager...
2025-08-04 22:24:31,403 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:24:31,405 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:24:31,461 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:24:31,462 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:24:31,462 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:25:40,993 - app.main - INFO - Shutting down application...
2025-08-04 22:25:40,994 - app.main - INFO - Closing database connections...
2025-08-04 22:25:40,994 - app.db.session - INFO - Closing database connections...
2025-08-04 22:25:40,999 - app.db.session - INFO - Database connections closed
2025-08-04 22:25:41,000 - app.main - INFO - Database connections closed successfully
2025-08-04 22:25:49,480 - app.main - INFO - Starting application...
2025-08-04 22:25:49,482 - app.main - INFO - Initializing database manager...
2025-08-04 22:25:49,483 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:25:49,485 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:25:49,539 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:25:49,539 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:25:49,540 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:26:15,935 - app.main - INFO - Shutting down application...
2025-08-04 22:26:15,935 - app.main - INFO - Closing database connections...
2025-08-04 22:26:15,936 - app.db.session - INFO - Closing database connections...
2025-08-04 22:26:15,940 - app.db.session - INFO - Database connections closed
2025-08-04 22:26:15,940 - app.main - INFO - Database connections closed successfully
2025-08-04 22:26:24,806 - app.main - INFO - Starting application...
2025-08-04 22:26:24,806 - app.main - INFO - Initializing database manager...
2025-08-04 22:26:24,807 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:26:24,810 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:26:24,915 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:26:24,916 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:26:24,917 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:26:49,888 - app.main - INFO - Shutting down application...
2025-08-04 22:26:49,890 - app.main - INFO - Closing database connections...
2025-08-04 22:26:49,891 - app.db.session - INFO - Closing database connections...
2025-08-04 22:26:49,902 - app.db.session - INFO - Database connections closed
2025-08-04 22:26:49,906 - app.main - INFO - Database connections closed successfully
2025-08-04 22:27:00,037 - app.main - INFO - Starting application...
2025-08-04 22:27:00,037 - app.main - INFO - Initializing database manager...
2025-08-04 22:27:00,038 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:27:00,041 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:27:00,090 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:27:00,091 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:27:00,091 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:27:10,333 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:27:11,823 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:27:11,847 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:27:11,848 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:27:11,858 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:27:11,862 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:27:11,865 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:27:11,925 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:27:11,949 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:27:11,949 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 68, in parse_opening_hours
    o, c = oh.split("-")
    ^^^^
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 362, in build_poi_list
    o, c = parse_opening_hours(oh or "")
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 72, in parse_opening_hours
    return time(9, 0), time(17, 0)
           ~~~~^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:27:11,962 - app.api.itinerary - INFO - itinerary_generation completed in 1.63s
2025-08-04 22:27:11,962 - app.db.session - ERROR - Unexpected session error: 500: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:27:11,994 - app.main - INFO - Shutting down application...
2025-08-04 22:27:11,994 - app.main - INFO - Closing database connections...
2025-08-04 22:27:11,995 - app.db.session - INFO - Closing database connections...
2025-08-04 22:27:12,004 - app.db.session - INFO - Database connections closed
2025-08-04 22:27:12,005 - app.main - INFO - Database connections closed successfully
2025-08-04 22:27:19,118 - app.main - INFO - Starting application...
2025-08-04 22:27:19,120 - app.main - INFO - Initializing database manager...
2025-08-04 22:27:19,122 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:27:19,124 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:27:19,187 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:27:19,188 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:27:19,188 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:27:29,012 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:27:30,442 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:27:30,465 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:27:30,466 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:27:30,474 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:27:30,477 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:27:30,480 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:27:30,500 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:27:30,510 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:27:30,510 - app.api.itinerary - ERROR - Failed to build POI list
Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 68, in parse_opening_hours
    o, c = oh.split("-")
    ^^^^
ValueError: not enough values to unpack (expected 2, got 1)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/app/app/api/itinerary.py", line 362, in build_poi_list
    o, c = parse_opening_hours(oh or "")
           ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 72, in parse_opening_hours
    return time(9, 0), time(17, 0)
           ~~~~^^^^^^
TypeError: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:27:30,522 - app.api.itinerary - INFO - itinerary_generation completed in 1.51s
2025-08-04 22:27:30,522 - app.db.session - ERROR - Unexpected session error: 500: 'module' object is not callable. Did you mean: 'time.time(...)'?
2025-08-04 22:29:52,658 - app.main - INFO - Shutting down application...
2025-08-04 22:29:52,658 - app.main - INFO - Closing database connections...
2025-08-04 22:29:52,659 - app.db.session - INFO - Closing database connections...
2025-08-04 22:29:52,664 - app.db.session - INFO - Database connections closed
2025-08-04 22:29:52,664 - app.main - INFO - Database connections closed successfully
2025-08-04 22:30:03,011 - app.main - INFO - Starting application...
2025-08-04 22:30:03,012 - app.main - INFO - Initializing database manager...
2025-08-04 22:30:03,012 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:30:03,015 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:30:03,066 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:30:03,066 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:30:03,067 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:30:11,289 - app.main - INFO - Shutting down application...
2025-08-04 22:30:11,290 - app.main - INFO - Closing database connections...
2025-08-04 22:30:11,290 - app.db.session - INFO - Closing database connections...
2025-08-04 22:30:11,294 - app.db.session - INFO - Database connections closed
2025-08-04 22:30:11,294 - app.main - INFO - Database connections closed successfully
2025-08-04 22:30:18,148 - app.main - INFO - Starting application...
2025-08-04 22:30:18,149 - app.main - INFO - Initializing database manager...
2025-08-04 22:30:18,149 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:30:18,151 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:30:18,200 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:30:18,201 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:30:18,202 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:30:29,836 - app.main - INFO - Shutting down application...
2025-08-04 22:30:29,837 - app.main - INFO - Closing database connections...
2025-08-04 22:30:29,838 - app.db.session - INFO - Closing database connections...
2025-08-04 22:30:29,842 - app.db.session - INFO - Database connections closed
2025-08-04 22:30:29,842 - app.main - INFO - Database connections closed successfully
2025-08-04 22:30:38,108 - app.main - INFO - Starting application...
2025-08-04 22:30:38,108 - app.main - INFO - Initializing database manager...
2025-08-04 22:30:38,109 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:30:38,111 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:30:38,159 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:30:38,160 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:30:38,162 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:30:38,252 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:30:39,819 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:30:39,844 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:30:39,845 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:30:39,854 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:30:39,857 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:30:39,861 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:30:39,883 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:30:39,893 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,893 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,894 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,895 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,896 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,897 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,898 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:30:39,898 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:30:39,899 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:30:39,899 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:30:39,919 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:30:40,044 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:30:40,058 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
2025-08-04 22:30:40,062 - app.api.itinerary - ERROR - Failed to persist itinerary: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('18eaebfb-4d6e-4777-9790-6d06b0cb8fd6'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=<UTC>), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=<UTC>), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-11T00:00:00+00:00"], "interests": ["budget"], "budget": 2000.0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 1583.9834213256836, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 22, 30, 40, 50149, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 22, 30, 40, 50155, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-04 22:30:40,062 - app.api.itinerary - INFO - itinerary_generation completed in 1.81s
2025-08-04 22:30:40,063 - app.db.session - ERROR - Unexpected session error: 500: Failed to save itinerary
2025-08-04 22:31:39,284 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:31:39,306 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:31:39,318 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:31:39,319 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:31:39,321 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:31:39,323 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:31:39,325 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:31:39,329 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:31:39,335 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,336 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,336 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,337 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,337 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,338 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,338 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:31:39,339 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:31:39,339 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:31:39,340 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:31:39,342 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:31:39,446 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:31:39,451 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
2025-08-04 22:31:39,453 - app.api.itinerary - ERROR - Failed to persist itinerary: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedObjectError'>: type "itinerarystatus" does not exist
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('8b4368ba-d672-4970-8346-ef2b155b7d98'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=<UTC>), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=<UTC>), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-11T00:00:00+00:00"], "interests": ["budget"], "budget": 2000.0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 32.39846229553223, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 22, 31, 39, 449749, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 22, 31, 39, 449755, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-08-04 22:31:39,453 - app.api.itinerary - INFO - itinerary_generation completed in 0.17s
2025-08-04 22:31:39,454 - app.db.session - ERROR - Unexpected session error: 500: Failed to save itinerary
2025-08-04 22:36:34,648 - app.main - INFO - Starting application...
2025-08-04 22:36:34,649 - app.main - INFO - Initializing database manager...
2025-08-04 22:36:34,649 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:36:34,651 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:36:34,719 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:36:34,719 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:36:34,720 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:36:45,732 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:36:47,232 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:36:47,257 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:36:47,258 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:36:47,269 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:36:47,273 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:36:47,276 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:36:47,304 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:36:47,316 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,317 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,317 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,318 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,319 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,320 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,321 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:36:47,321 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:36:47,322 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:36:47,323 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:36:47,330 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:36:47,489 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:36:47,507 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum itinerarystatus: "GENERATED"
2025-08-04 22:36:47,509 - app.api.itinerary - ERROR - Failed to persist itinerary: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum itinerarystatus: "GENERATED"
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('bb29ace9-9d2d-480d-8893-54428dacde51'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=<UTC>), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=<UTC>), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-11T00:00:00+00:00"], "interests": ["budget"], "budget": 2000.0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 1516.7720317840576, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 22, 36, 47, 496353, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 22, 36, 47, 496359, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-04 22:36:47,509 - app.api.itinerary - INFO - itinerary_generation completed in 1.77s
2025-08-04 22:36:47,510 - app.db.session - ERROR - Unexpected session error: 500: Failed to save itinerary
2025-08-04 22:37:10,780 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:37:10,800 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:37:10,809 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:37:10,810 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:37:10,812 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:37:10,814 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:37:10,816 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:37:10,820 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:37:10,824 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,824 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,825 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,825 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,825 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,826 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,827 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:37:10,827 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:37:10,828 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:37:10,829 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:37:10,831 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:37:10,939 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:37:10,942 - app.db.session - ERROR - Database connection error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum itinerarystatus: "GENERATED"
2025-08-04 22:37:10,943 - app.api.itinerary - ERROR - Failed to persist itinerary: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: invalid input value for enum itinerarystatus: "GENERATED"
[SQL: INSERT INTO itineraries (id, name, start_date, end_date, status, data, user_id, budget, notes, tags, created_at, updated_at, is_deleted, deleted_at) VALUES ($1::UUID, $2::VARCHAR, $3::TIMESTAMP WITH TIME ZONE, $4::TIMESTAMP WITH TIME ZONE, $5::itinerarystatus, $6::JSON, $7::UUID, $8::NUMERIC, $9::VARCHAR, $10::JSON, $11::TIMESTAMP WITH TIME ZONE, $12::TIMESTAMP WITH TIME ZONE, $13::BOOLEAN, $14::TIMESTAMP WITH TIME ZONE)]
[parameters: (UUID('0c14fe4f-dcfb-4f47-a1e6-1a430fc5d655'), 'Paris', datetime.datetime(2026, 7, 4, 0, 0, tzinfo=<UTC>), datetime.datetime(2026, 7, 11, 0, 0, tzinfo=<UTC>), 'GENERATED', '{"locations": ["Paris"], "dates": ["2026-07-04T00:00:00+00:00", "2026-07-11T00:00:00+00:00"], "interests": ["budget"], "budget": 2000.0, "duration_days": 7, "group_size": null, "travel_style": "budget", "confidence_score": 95.0, "parsing_time_ms": 27.144193649291992, "warnings": []}', UUID('6790fec6-c660-495e-9c52-6e7b6a1f7e97'), None, None, 'null', datetime.datetime(2025, 8, 4, 22, 37, 10, 941231, tzinfo=datetime.timezone.utc), datetime.datetime(2025, 8, 4, 22, 37, 10, 941236, tzinfo=datetime.timezone.utc), False, None)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2025-08-04 22:37:10,943 - app.api.itinerary - INFO - itinerary_generation completed in 0.16s
2025-08-04 22:37:10,944 - app.db.session - ERROR - Unexpected session error: 500: Failed to save itinerary
2025-08-04 22:42:12,096 - app.main - INFO - Starting application...
2025-08-04 22:42:12,097 - app.main - INFO - Initializing database manager...
2025-08-04 22:42:12,098 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:42:12,100 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:42:12,153 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:42:12,154 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:42:12,154 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:42:24,633 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:42:26,153 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:42:26,178 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:42:26,179 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:42:26,185 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:42:26,188 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:42:26,191 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:42:26,210 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:42:26,219 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,219 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,220 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,221 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,222 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,222 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,223 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:42:26,223 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:42:26,224 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:42:26,225 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:42:26,231 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:42:26,348 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:42:26,412 - app.api.itinerary - INFO - Itinerary 22093061-db79-432e-b98e-ba28eb05a3ff persisted successfully
2025-08-04 22:42:26,413 - app.api.itinerary - INFO - Successfully generated itinerary 22093061-db79-432e-b98e-ba28eb05a3ff for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-04 22:42:26,413 - app.api.itinerary - INFO - itinerary_generation completed in 1.78s
2025-08-04 22:44:11,679 - app.main - INFO - Shutting down application...
2025-08-04 22:44:11,679 - app.main - INFO - Closing database connections...
2025-08-04 22:44:11,679 - app.db.session - INFO - Closing database connections...
2025-08-04 22:44:11,684 - app.db.session - INFO - Database connections closed
2025-08-04 22:44:11,685 - app.main - INFO - Database connections closed successfully
2025-08-04 22:44:17,918 - app.main - INFO - Starting application...
2025-08-04 22:44:17,919 - app.main - INFO - Initializing database manager...
2025-08-04 22:44:17,919 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:44:17,921 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:44:17,965 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:44:17,966 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:44:17,966 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:44:25,875 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:44:27,356 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:44:27,380 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:44:27,490 - app.db.session - ERROR - Unexpected session error: 404: No activities found within 20.0 km
2025-08-04 22:46:03,970 - app.main - INFO - Shutting down application...
2025-08-04 22:46:03,970 - app.main - INFO - Closing database connections...
2025-08-04 22:46:03,971 - app.db.session - INFO - Closing database connections...
2025-08-04 22:46:03,978 - app.db.session - INFO - Database connections closed
2025-08-04 22:46:03,979 - app.main - INFO - Database connections closed successfully
2025-08-04 22:46:11,131 - app.main - INFO - Starting application...
2025-08-04 22:46:11,131 - app.main - INFO - Initializing database manager...
2025-08-04 22:46:11,132 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:46:11,136 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:46:11,187 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:46:11,188 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:46:11,188 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:46:15,159 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:46:16,648 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:46:16,674 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:46:16,734 - app.db.session - ERROR - Unexpected session error: 404: No activities found within 20.0 km
2025-08-04 22:46:53,175 - app.main - INFO - Shutting down application...
2025-08-04 22:46:53,178 - app.main - INFO - Closing database connections...
2025-08-04 22:46:53,179 - app.db.session - INFO - Closing database connections...
2025-08-04 22:46:53,197 - app.db.session - INFO - Database connections closed
2025-08-04 22:46:53,199 - app.main - INFO - Database connections closed successfully
2025-08-04 22:47:03,080 - app.main - INFO - Starting application...
2025-08-04 22:47:03,080 - app.main - INFO - Initializing database manager...
2025-08-04 22:47:03,082 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:47:03,084 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:47:03,138 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:47:03,139 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:47:03,139 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:47:04,045 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:47:05,797 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:47:05,823 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:47:05,899 - app.db.session - ERROR - Unexpected session error: 404: No activities found within 50.0 km
2025-08-04 22:47:49,309 - app.main - INFO - Shutting down application...
2025-08-04 22:47:49,309 - app.main - INFO - Closing database connections...
2025-08-04 22:47:49,310 - app.db.session - INFO - Closing database connections...
2025-08-04 22:47:49,329 - app.db.session - INFO - Database connections closed
2025-08-04 22:47:49,330 - app.main - INFO - Database connections closed successfully
2025-08-04 22:47:58,136 - app.main - INFO - Starting application...
2025-08-04 22:47:58,137 - app.main - INFO - Initializing database manager...
2025-08-04 22:47:58,138 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:47:58,140 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:47:58,201 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:47:58,202 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:47:58,202 - app.main - INFO - Database manager initialized successfully
2025-08-04 22:47:59,302 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 22:48:00,868 - app.core.nlp.parser - WARNING - Error parsing date in pattern: Input type must be str
2025-08-04 22:48:00,892 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 22:48:00,893 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 22:48:00,899 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 22:48:00,902 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 22:48:00,905 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 22:48:00,925 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 22:48:00,935 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,935 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 10:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,936 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,936 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20094:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20094:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,937 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Tuesday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Wednesday: 2:00\u2009\u2013\u200911:00\u202fPM", "Thursday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Friday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Saturday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM", "Sunday: 5:00\u202fAM\u2009\u2013\u200911:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,938 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 1:00\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,938 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Wednesday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Thursday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Friday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Saturday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM", "Sunday: 6:30\u202fAM\u2009\u2013\u20096:30\u202fPM"], using default 9:00-17:00
2025-08-04 22:48:00,939 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-04 22:48:00,940 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Tuesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Wednesday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Thursday: 7:00\u202fAM\u2009\u2013\u20096:00\u202fPM", "Friday: Closed", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:48:00,941 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 12:00\u2009\u2013\u20095:00\u202fPM", "Sunday: Closed"], using default 9:00-17:00
2025-08-04 22:48:00,950 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-04 22:48:01,070 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-04 22:48:01,120 - app.api.itinerary - INFO - Itinerary 3c24bfeb-7da3-44c6-b097-fea1464f81d6 persisted successfully
2025-08-04 22:48:01,120 - app.api.itinerary - INFO - Successfully generated itinerary 3c24bfeb-7da3-44c6-b097-fea1464f81d6 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-04 22:48:01,121 - app.api.itinerary - INFO - itinerary_generation completed in 1.82s
2025-08-04 22:48:11,388 - app.main - INFO - Shutting down application...
2025-08-04 22:48:11,389 - app.main - INFO - Closing database connections...
2025-08-04 22:48:11,389 - app.db.session - INFO - Closing database connections...
2025-08-04 22:48:11,398 - app.db.session - INFO - Database connections closed
2025-08-04 22:48:11,399 - app.main - INFO - Database connections closed successfully
2025-08-04 22:48:19,353 - app.main - INFO - Starting application...
2025-08-04 22:48:19,353 - app.main - INFO - Initializing database manager...
2025-08-04 22:48:19,354 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 22:48:19,356 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 22:48:19,437 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 22:48:19,438 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 22:48:19,438 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:19:28,931 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 23:19:31,186 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 23:19:31,187 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 23:19:31,196 - app.api.itinerary - INFO - itinerary_generation completed in 2.25s
2025-08-04 23:19:31,197 - app.db.session - ERROR - Unexpected session error: 404: Destination 'New York City' not found
2025-08-04 23:19:46,297 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 23:19:46,413 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 23:19:46,414 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-04 23:19:46,418 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-04 23:19:46,430 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-04 23:19:46,433 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-04 23:19:46,496 - app.api.itinerary - INFO - Found 0 flight options
2025-08-04 23:19:46,510 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,510 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-08-04 23:19:46,511 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-08-04 23:19:46,512 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,513 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,514 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,514 - app.api.itinerary - WARNING - Invalid opening hours format: [], using default 9:00-17:00
2025-08-04 23:19:46,514 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,515 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-04 23:19:46,521 - app.api.itinerary - INFO - Built POI list with 49 items
2025-08-04 23:19:46,560 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-04 23:19:46,622 - app.api.itinerary - INFO - Itinerary 90e61afc-7697-4133-927c-e0e66408f220 persisted successfully
2025-08-04 23:19:46,623 - app.api.itinerary - INFO - Successfully generated itinerary 90e61afc-7697-4133-927c-e0e66408f220 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-04 23:19:46,623 - app.api.itinerary - INFO - itinerary_generation completed in 0.32s
2025-08-04 23:20:11,504 - app.main - INFO - Shutting down application...
2025-08-04 23:20:11,505 - app.main - INFO - Closing database connections...
2025-08-04 23:20:11,506 - app.db.session - INFO - Closing database connections...
2025-08-04 23:20:11,521 - app.db.session - INFO - Database connections closed
2025-08-04 23:20:11,522 - app.main - INFO - Database connections closed successfully
2025-08-04 23:20:22,276 - app.main - INFO - Starting application...
2025-08-04 23:20:22,277 - app.main - INFO - Initializing database manager...
2025-08-04 23:20:22,278 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:20:22,281 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:20:22,342 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:20:22,342 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:20:22,343 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:20:22,432 - app.core.security - INFO - Current user resolved: testuser123
2025-08-04 23:20:24,776 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-04 23:20:24,878 - app.db.session - ERROR - Unexpected session error: 404: No accommodations found within 20.0 km
2025-08-04 23:20:33,579 - app.main - INFO - Shutting down application...
2025-08-04 23:20:33,580 - app.main - INFO - Closing database connections...
2025-08-04 23:20:33,580 - app.db.session - INFO - Closing database connections...
2025-08-04 23:20:33,586 - app.db.session - INFO - Database connections closed
2025-08-04 23:20:33,586 - app.main - INFO - Database connections closed successfully
2025-08-04 23:20:40,990 - app.main - INFO - Starting application...
2025-08-04 23:20:40,991 - app.main - INFO - Initializing database manager...
2025-08-04 23:20:40,993 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:20:40,995 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:20:41,040 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:20:41,041 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:20:41,041 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:43:35,621 - app.main - INFO - Shutting down application...
2025-08-04 23:43:35,623 - app.main - INFO - Closing database connections...
2025-08-04 23:43:35,624 - app.db.session - INFO - Closing database connections...
2025-08-04 23:43:35,663 - app.db.session - INFO - Database connections closed
2025-08-04 23:43:35,664 - app.main - INFO - Database connections closed successfully
2025-08-04 23:43:48,370 - app.main - INFO - Starting application...
2025-08-04 23:43:48,371 - app.main - INFO - Initializing database manager...
2025-08-04 23:43:48,372 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:43:48,374 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:43:48,481 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:43:48,482 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:43:48,483 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:48:36,925 - app.main - INFO - Shutting down application...
2025-08-04 23:48:36,926 - app.main - INFO - Closing database connections...
2025-08-04 23:48:36,926 - app.db.session - INFO - Closing database connections...
2025-08-04 23:48:36,932 - app.db.session - INFO - Database connections closed
2025-08-04 23:48:36,932 - app.main - INFO - Database connections closed successfully
2025-08-04 23:48:48,642 - app.main - INFO - Starting application...
2025-08-04 23:48:48,643 - app.main - INFO - Initializing database manager...
2025-08-04 23:48:48,644 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:48:48,647 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:48:48,704 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:48:48,704 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:48:48,705 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:49:15,892 - app.main - INFO - Shutting down application...
2025-08-04 23:49:15,894 - app.main - INFO - Closing database connections...
2025-08-04 23:49:15,895 - app.db.session - INFO - Closing database connections...
2025-08-04 23:49:15,905 - app.db.session - INFO - Database connections closed
2025-08-04 23:49:15,905 - app.main - INFO - Database connections closed successfully
2025-08-04 23:49:22,903 - app.main - INFO - Starting application...
2025-08-04 23:49:22,904 - app.main - INFO - Initializing database manager...
2025-08-04 23:49:22,905 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:49:22,906 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:49:22,961 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:49:22,962 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:49:22,963 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:51:38,737 - app.main - INFO - Shutting down application...
2025-08-04 23:51:38,738 - app.main - INFO - Closing database connections...
2025-08-04 23:51:38,738 - app.db.session - INFO - Closing database connections...
2025-08-04 23:51:38,743 - app.db.session - INFO - Database connections closed
2025-08-04 23:51:38,743 - app.main - INFO - Database connections closed successfully
2025-08-04 23:51:45,638 - app.main - INFO - Starting application...
2025-08-04 23:51:45,639 - app.main - INFO - Initializing database manager...
2025-08-04 23:51:45,640 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:51:45,642 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:51:45,693 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:51:45,694 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:51:45,694 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:52:28,529 - app.main - INFO - Shutting down application...
2025-08-04 23:52:28,529 - app.main - INFO - Closing database connections...
2025-08-04 23:52:28,530 - app.db.session - INFO - Closing database connections...
2025-08-04 23:52:28,534 - app.db.session - INFO - Database connections closed
2025-08-04 23:52:28,535 - app.main - INFO - Database connections closed successfully
2025-08-04 23:52:35,062 - app.main - INFO - Starting application...
2025-08-04 23:52:35,063 - app.main - INFO - Initializing database manager...
2025-08-04 23:52:35,065 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:52:35,066 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:52:35,115 - app.db.session - ERROR - Database health check failed: 'AsyncAdaptedQueuePool' object has no attribute 'invalidated'
2025-08-04 23:52:35,116 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:52:35,116 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:53:45,512 - app.main - INFO - Shutting down application...
2025-08-04 23:53:45,512 - app.main - INFO - Closing database connections...
2025-08-04 23:53:45,513 - app.db.session - INFO - Closing database connections...
2025-08-04 23:53:45,516 - app.db.session - INFO - Database connections closed
2025-08-04 23:53:45,516 - app.main - INFO - Database connections closed successfully
2025-08-04 23:53:52,502 - app.main - INFO - Starting application...
2025-08-04 23:53:52,503 - app.main - INFO - Initializing database manager...
2025-08-04 23:53:52,504 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:53:52,505 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:53:52,562 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:53:52,563 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:55:07,306 - app.main - INFO - Shutting down application...
2025-08-04 23:55:07,307 - app.main - INFO - Closing database connections...
2025-08-04 23:55:07,308 - app.db.session - INFO - Closing database connections...
2025-08-04 23:55:07,313 - app.db.session - INFO - Database connections closed
2025-08-04 23:55:07,313 - app.main - INFO - Database connections closed successfully
2025-08-04 23:55:15,545 - app.main - INFO - Starting application...
2025-08-04 23:55:15,546 - app.main - INFO - Initializing database manager...
2025-08-04 23:55:15,547 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:55:15,550 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:55:15,607 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:55:15,608 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:56:59,183 - app.main - INFO - Shutting down application...
2025-08-04 23:56:59,183 - app.main - INFO - Closing database connections...
2025-08-04 23:56:59,184 - app.db.session - INFO - Closing database connections...
2025-08-04 23:56:59,188 - app.db.session - INFO - Database connections closed
2025-08-04 23:56:59,189 - app.main - INFO - Database connections closed successfully
2025-08-04 23:57:06,624 - app.main - INFO - Starting application...
2025-08-04 23:57:06,625 - app.main - INFO - Initializing database manager...
2025-08-04 23:57:06,628 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:57:06,631 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:57:06,705 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:57:06,706 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:58:49,060 - app.main - INFO - Shutting down application...
2025-08-04 23:58:49,060 - app.main - INFO - Closing database connections...
2025-08-04 23:58:49,061 - app.db.session - INFO - Closing database connections...
2025-08-04 23:58:49,065 - app.db.session - INFO - Database connections closed
2025-08-04 23:58:49,066 - app.main - INFO - Database connections closed successfully
2025-08-04 23:58:56,484 - app.main - INFO - Starting application...
2025-08-04 23:58:56,485 - app.main - INFO - Initializing database manager...
2025-08-04 23:58:56,485 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:58:56,487 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:58:56,533 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:58:56,533 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:59:05,057 - app.main - INFO - Shutting down application...
2025-08-04 23:59:05,057 - app.main - INFO - Closing database connections...
2025-08-04 23:59:05,058 - app.db.session - INFO - Closing database connections...
2025-08-04 23:59:05,062 - app.db.session - INFO - Database connections closed
2025-08-04 23:59:05,062 - app.main - INFO - Database connections closed successfully
2025-08-04 23:59:12,857 - app.main - INFO - Starting application...
2025-08-04 23:59:12,857 - app.main - INFO - Initializing database manager...
2025-08-04 23:59:12,858 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:59:12,861 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:59:12,916 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:59:12,917 - app.main - INFO - Database manager initialized successfully
2025-08-04 23:59:23,762 - app.main - INFO - Shutting down application...
2025-08-04 23:59:23,763 - app.main - INFO - Closing database connections...
2025-08-04 23:59:23,763 - app.db.session - INFO - Closing database connections...
2025-08-04 23:59:23,769 - app.db.session - INFO - Database connections closed
2025-08-04 23:59:23,770 - app.main - INFO - Database connections closed successfully
2025-08-04 23:59:31,414 - app.main - INFO - Starting application...
2025-08-04 23:59:31,414 - app.main - INFO - Initializing database manager...
2025-08-04 23:59:31,415 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-04 23:59:31,417 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-04 23:59:31,513 - app.db.session - INFO - Database manager initialized successfully
2025-08-04 23:59:31,514 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:03:23,640 - app.main - INFO - Shutting down application...
2025-08-05 00:03:23,642 - app.main - INFO - Closing database connections...
2025-08-05 00:03:23,643 - app.db.session - INFO - Closing database connections...
2025-08-05 00:03:23,660 - app.db.session - INFO - Database connections closed
2025-08-05 00:03:23,661 - app.main - INFO - Database connections closed successfully
2025-08-05 00:03:36,405 - app.main - INFO - Starting application...
2025-08-05 00:03:36,405 - app.main - INFO - Initializing database manager...
2025-08-05 00:03:36,406 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:03:36,409 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:03:36,481 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:03:36,483 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:05:34,663 - app.main - INFO - Shutting down application...
2025-08-05 00:05:34,663 - app.main - INFO - Closing database connections...
2025-08-05 00:05:34,664 - app.db.session - INFO - Closing database connections...
2025-08-05 00:05:34,669 - app.db.session - INFO - Database connections closed
2025-08-05 00:05:34,669 - app.main - INFO - Database connections closed successfully
2025-08-05 00:05:44,005 - app.main - INFO - Starting application...
2025-08-05 00:05:44,005 - app.main - INFO - Initializing database manager...
2025-08-05 00:05:44,007 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:05:44,009 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:05:44,056 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:05:44,057 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:07:24,503 - app.main - INFO - Shutting down application...
2025-08-05 00:07:24,503 - app.main - INFO - Closing database connections...
2025-08-05 00:07:24,504 - app.db.session - INFO - Closing database connections...
2025-08-05 00:07:24,509 - app.db.session - INFO - Database connections closed
2025-08-05 00:07:24,509 - app.main - INFO - Database connections closed successfully
2025-08-05 00:07:31,675 - app.main - INFO - Starting application...
2025-08-05 00:07:31,676 - app.main - INFO - Initializing database manager...
2025-08-05 00:07:31,676 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:07:31,678 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:07:31,726 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:07:31,726 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:08:09,875 - app.main - INFO - Shutting down application...
2025-08-05 00:08:09,876 - app.main - INFO - Closing database connections...
2025-08-05 00:08:09,876 - app.db.session - INFO - Closing database connections...
2025-08-05 00:08:09,880 - app.db.session - INFO - Database connections closed
2025-08-05 00:08:09,880 - app.main - INFO - Database connections closed successfully
2025-08-05 00:08:16,500 - app.main - INFO - Starting application...
2025-08-05 00:08:16,501 - app.main - INFO - Initializing database manager...
2025-08-05 00:08:16,501 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:08:16,503 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:08:16,556 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:08:16,557 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:08:28,602 - app.main - INFO - Shutting down application...
2025-08-05 00:08:28,602 - app.main - INFO - Closing database connections...
2025-08-05 00:08:28,603 - app.db.session - INFO - Closing database connections...
2025-08-05 00:08:28,606 - app.db.session - INFO - Database connections closed
2025-08-05 00:08:28,607 - app.main - INFO - Database connections closed successfully
2025-08-05 00:08:36,100 - app.main - INFO - Starting application...
2025-08-05 00:08:36,101 - app.main - INFO - Initializing database manager...
2025-08-05 00:08:36,101 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:08:36,103 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:08:36,153 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:08:36,153 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:08:44,977 - app.main - INFO - Shutting down application...
2025-08-05 00:08:44,978 - app.main - INFO - Closing database connections...
2025-08-05 00:08:44,978 - app.db.session - INFO - Closing database connections...
2025-08-05 00:08:44,982 - app.db.session - INFO - Database connections closed
2025-08-05 00:08:44,982 - app.main - INFO - Database connections closed successfully
2025-08-05 00:08:52,619 - app.main - INFO - Starting application...
2025-08-05 00:08:52,619 - app.main - INFO - Initializing database manager...
2025-08-05 00:08:52,620 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:08:52,621 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:08:52,668 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:08:52,668 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:10:16,640 - app.main - INFO - Shutting down application...
2025-08-05 00:10:16,640 - app.main - INFO - Closing database connections...
2025-08-05 00:10:16,641 - app.db.session - INFO - Closing database connections...
2025-08-05 00:10:16,646 - app.db.session - INFO - Database connections closed
2025-08-05 00:10:16,646 - app.main - INFO - Database connections closed successfully
2025-08-05 00:10:23,835 - app.main - INFO - Starting application...
2025-08-05 00:10:23,837 - app.main - INFO - Initializing database manager...
2025-08-05 00:10:23,839 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:10:23,841 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:10:23,889 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:10:23,890 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:10:36,037 - app.main - INFO - Shutting down application...
2025-08-05 00:10:36,037 - app.main - INFO - Closing database connections...
2025-08-05 00:10:36,037 - app.db.session - INFO - Closing database connections...
2025-08-05 00:10:36,041 - app.db.session - INFO - Database connections closed
2025-08-05 00:10:36,042 - app.main - INFO - Database connections closed successfully
2025-08-05 00:10:42,419 - app.main - INFO - Starting application...
2025-08-05 00:10:42,423 - app.main - INFO - Initializing database manager...
2025-08-05 00:10:42,426 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:10:42,429 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:10:42,547 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:10:42,547 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:11:40,255 - app.main - INFO - Shutting down application...
2025-08-05 00:11:40,256 - app.main - INFO - Closing database connections...
2025-08-05 00:11:40,256 - app.db.session - INFO - Closing database connections...
2025-08-05 00:11:40,261 - app.db.session - INFO - Database connections closed
2025-08-05 00:11:40,262 - app.main - INFO - Database connections closed successfully
2025-08-05 00:11:46,722 - app.main - INFO - Starting application...
2025-08-05 00:11:46,723 - app.main - INFO - Initializing database manager...
2025-08-05 00:11:46,724 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:11:46,725 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:11:46,790 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:11:46,790 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:12:12,299 - app.main - INFO - Shutting down application...
2025-08-05 00:12:12,299 - app.main - INFO - Closing database connections...
2025-08-05 00:12:12,300 - app.db.session - INFO - Closing database connections...
2025-08-05 00:12:12,304 - app.db.session - INFO - Database connections closed
2025-08-05 00:12:12,305 - app.main - INFO - Database connections closed successfully
2025-08-05 00:12:19,168 - app.main - INFO - Starting application...
2025-08-05 00:12:19,168 - app.main - INFO - Initializing database manager...
2025-08-05 00:12:19,169 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:12:19,170 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:12:19,216 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:12:19,216 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:12:46,110 - app.main - INFO - Shutting down application...
2025-08-05 00:12:46,110 - app.main - INFO - Closing database connections...
2025-08-05 00:12:46,111 - app.db.session - INFO - Closing database connections...
2025-08-05 00:12:46,116 - app.db.session - INFO - Database connections closed
2025-08-05 00:12:46,116 - app.main - INFO - Database connections closed successfully
2025-08-05 00:12:53,379 - app.main - INFO - Starting application...
2025-08-05 00:12:53,380 - app.main - INFO - Initializing database manager...
2025-08-05 00:12:53,380 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:12:53,382 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:12:53,441 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:12:53,442 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:13:03,573 - app.main - INFO - Shutting down application...
2025-08-05 00:13:03,573 - app.main - INFO - Closing database connections...
2025-08-05 00:13:03,574 - app.db.session - INFO - Closing database connections...
2025-08-05 00:13:03,577 - app.db.session - INFO - Database connections closed
2025-08-05 00:13:03,578 - app.main - INFO - Database connections closed successfully
2025-08-05 00:13:13,050 - app.main - INFO - Starting application...
2025-08-05 00:13:13,051 - app.main - INFO - Initializing database manager...
2025-08-05 00:13:13,052 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:13:13,054 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:13:13,126 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:13:13,127 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:13:21,854 - app.main - INFO - Shutting down application...
2025-08-05 00:13:21,856 - app.main - INFO - Closing database connections...
2025-08-05 00:13:21,857 - app.db.session - INFO - Closing database connections...
2025-08-05 00:13:21,861 - app.db.session - INFO - Database connections closed
2025-08-05 00:13:21,862 - app.main - INFO - Database connections closed successfully
2025-08-05 00:13:29,059 - app.main - INFO - Starting application...
2025-08-05 00:13:29,059 - app.main - INFO - Initializing database manager...
2025-08-05 00:13:29,061 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:13:29,063 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:13:29,124 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:13:29,124 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:13:39,053 - app.main - INFO - Shutting down application...
2025-08-05 00:13:39,053 - app.main - INFO - Closing database connections...
2025-08-05 00:13:39,053 - app.db.session - INFO - Closing database connections...
2025-08-05 00:13:39,057 - app.db.session - INFO - Database connections closed
2025-08-05 00:13:39,057 - app.main - INFO - Database connections closed successfully
2025-08-05 00:13:48,338 - app.main - INFO - Starting application...
2025-08-05 00:13:48,339 - app.main - INFO - Initializing database manager...
2025-08-05 00:13:48,341 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:13:48,342 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:13:48,392 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:13:48,393 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:13:58,925 - app.main - INFO - Shutting down application...
2025-08-05 00:13:58,925 - app.main - INFO - Closing database connections...
2025-08-05 00:13:58,927 - app.db.session - INFO - Closing database connections...
2025-08-05 00:13:58,935 - app.db.session - INFO - Database connections closed
2025-08-05 00:13:58,936 - app.main - INFO - Database connections closed successfully
2025-08-05 00:14:06,124 - app.main - INFO - Starting application...
2025-08-05 00:14:06,125 - app.main - INFO - Initializing database manager...
2025-08-05 00:14:06,125 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:14:06,126 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:14:06,176 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:14:06,177 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:14:17,263 - app.main - INFO - Shutting down application...
2025-08-05 00:14:17,263 - app.main - INFO - Closing database connections...
2025-08-05 00:14:17,264 - app.db.session - INFO - Closing database connections...
2025-08-05 00:14:17,269 - app.db.session - INFO - Database connections closed
2025-08-05 00:14:17,269 - app.main - INFO - Database connections closed successfully
2025-08-05 00:14:24,215 - app.main - INFO - Starting application...
2025-08-05 00:14:24,216 - app.main - INFO - Initializing database manager...
2025-08-05 00:14:24,218 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:14:24,219 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:14:24,266 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:14:24,266 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:14:51,065 - app.main - INFO - Shutting down application...
2025-08-05 00:14:51,066 - app.main - INFO - Closing database connections...
2025-08-05 00:14:51,066 - app.db.session - INFO - Closing database connections...
2025-08-05 00:14:51,070 - app.db.session - INFO - Database connections closed
2025-08-05 00:14:51,070 - app.main - INFO - Database connections closed successfully
2025-08-05 00:14:57,433 - app.main - INFO - Starting application...
2025-08-05 00:14:57,433 - app.main - INFO - Initializing database manager...
2025-08-05 00:14:57,434 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:14:57,436 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:14:57,489 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:14:57,490 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:15:07,018 - app.main - INFO - Shutting down application...
2025-08-05 00:15:07,019 - app.main - INFO - Closing database connections...
2025-08-05 00:15:07,019 - app.db.session - INFO - Closing database connections...
2025-08-05 00:15:07,023 - app.db.session - INFO - Database connections closed
2025-08-05 00:15:07,024 - app.main - INFO - Database connections closed successfully
2025-08-05 00:15:14,954 - app.main - INFO - Starting application...
2025-08-05 00:15:14,955 - app.main - INFO - Initializing database manager...
2025-08-05 00:15:14,956 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:15:14,959 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:15:15,028 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:15:15,029 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:18:01,617 - app.main - INFO - Shutting down application...
2025-08-05 00:18:01,618 - app.main - INFO - Closing database connections...
2025-08-05 00:18:01,618 - app.db.session - INFO - Closing database connections...
2025-08-05 00:18:01,631 - app.db.session - INFO - Database connections closed
2025-08-05 00:18:01,631 - app.main - INFO - Database connections closed successfully
2025-08-05 00:18:10,556 - app.main - INFO - Starting application...
2025-08-05 00:18:10,557 - app.main - INFO - Initializing database manager...
2025-08-05 00:18:10,558 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:18:10,560 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:18:10,629 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:18:10,630 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:18:18,252 - app.main - INFO - Shutting down application...
2025-08-05 00:18:18,253 - app.main - INFO - Closing database connections...
2025-08-05 00:18:18,254 - app.db.session - INFO - Closing database connections...
2025-08-05 00:18:18,261 - app.db.session - INFO - Database connections closed
2025-08-05 00:18:18,261 - app.main - INFO - Database connections closed successfully
2025-08-05 00:18:25,758 - app.main - INFO - Starting application...
2025-08-05 00:18:25,759 - app.main - INFO - Initializing database manager...
2025-08-05 00:18:25,760 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:18:25,762 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:18:25,824 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:18:25,825 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:20:07,090 - app.main - INFO - Shutting down application...
2025-08-05 00:20:07,091 - app.main - INFO - Closing database connections...
2025-08-05 00:20:07,091 - app.db.session - INFO - Closing database connections...
2025-08-05 00:20:07,095 - app.db.session - INFO - Database connections closed
2025-08-05 00:20:07,095 - app.main - INFO - Database connections closed successfully
2025-08-05 00:20:14,747 - app.main - INFO - Starting application...
2025-08-05 00:20:14,748 - app.main - INFO - Initializing database manager...
2025-08-05 00:20:14,748 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:20:14,750 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:20:14,804 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:20:14,805 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:22:13,517 - app.main - INFO - Shutting down application...
2025-08-05 00:22:13,518 - app.main - INFO - Closing database connections...
2025-08-05 00:22:13,518 - app.db.session - INFO - Closing database connections...
2025-08-05 00:22:13,522 - app.db.session - INFO - Database connections closed
2025-08-05 00:22:13,523 - app.main - INFO - Database connections closed successfully
2025-08-05 00:22:19,795 - app.main - INFO - Starting application...
2025-08-05 00:22:19,796 - app.main - INFO - Initializing database manager...
2025-08-05 00:22:19,796 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:22:19,799 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:22:19,871 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:22:19,871 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:22:29,604 - app.main - INFO - Shutting down application...
2025-08-05 00:22:29,605 - app.main - INFO - Closing database connections...
2025-08-05 00:22:29,605 - app.db.session - INFO - Closing database connections...
2025-08-05 00:22:29,610 - app.db.session - INFO - Database connections closed
2025-08-05 00:22:29,611 - app.main - INFO - Database connections closed successfully
2025-08-05 00:22:37,514 - app.main - INFO - Starting application...
2025-08-05 00:22:37,515 - app.main - INFO - Initializing database manager...
2025-08-05 00:22:37,517 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:22:37,520 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:22:37,572 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:22:37,573 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:24:07,090 - app.main - INFO - Shutting down application...
2025-08-05 00:24:07,090 - app.main - INFO - Closing database connections...
2025-08-05 00:24:07,090 - app.db.session - INFO - Closing database connections...
2025-08-05 00:24:07,095 - app.db.session - INFO - Database connections closed
2025-08-05 00:24:07,095 - app.main - INFO - Database connections closed successfully
2025-08-05 00:24:13,788 - app.main - INFO - Starting application...
2025-08-05 00:24:13,789 - app.main - INFO - Initializing database manager...
2025-08-05 00:24:13,790 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:24:13,792 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:24:13,844 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:24:13,844 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:24:26,127 - app.main - INFO - Shutting down application...
2025-08-05 00:24:26,127 - app.main - INFO - Closing database connections...
2025-08-05 00:24:26,128 - app.db.session - INFO - Closing database connections...
2025-08-05 00:24:26,131 - app.db.session - INFO - Database connections closed
2025-08-05 00:24:26,131 - app.main - INFO - Database connections closed successfully
2025-08-05 00:24:32,273 - app.main - INFO - Starting application...
2025-08-05 00:24:32,273 - app.main - INFO - Initializing database manager...
2025-08-05 00:24:32,274 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:24:32,275 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:24:32,319 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:24:32,319 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:25:10,651 - app.main - INFO - Shutting down application...
2025-08-05 00:25:10,652 - app.main - INFO - Closing database connections...
2025-08-05 00:25:10,652 - app.db.session - INFO - Closing database connections...
2025-08-05 00:25:10,655 - app.db.session - INFO - Database connections closed
2025-08-05 00:25:10,656 - app.main - INFO - Database connections closed successfully
2025-08-05 00:25:17,659 - app.main - INFO - Starting application...
2025-08-05 00:25:17,664 - app.main - INFO - Initializing database manager...
2025-08-05 00:25:17,664 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:25:17,666 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:25:17,719 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:25:17,719 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:25:29,636 - app.main - INFO - Shutting down application...
2025-08-05 00:25:29,637 - app.main - INFO - Closing database connections...
2025-08-05 00:25:29,637 - app.db.session - INFO - Closing database connections...
2025-08-05 00:25:29,641 - app.db.session - INFO - Database connections closed
2025-08-05 00:25:29,641 - app.main - INFO - Database connections closed successfully
2025-08-05 00:25:37,233 - app.main - INFO - Starting application...
2025-08-05 00:25:37,233 - app.main - INFO - Initializing database manager...
2025-08-05 00:25:37,234 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:25:37,235 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:25:37,285 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:25:37,285 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:28:20,050 - app.main - INFO - Shutting down application...
2025-08-05 00:28:20,051 - app.main - INFO - Closing database connections...
2025-08-05 00:28:20,051 - app.db.session - INFO - Closing database connections...
2025-08-05 00:28:20,055 - app.db.session - INFO - Database connections closed
2025-08-05 00:28:20,055 - app.main - INFO - Database connections closed successfully
2025-08-05 00:28:26,423 - app.main - INFO - Starting application...
2025-08-05 00:28:26,423 - app.main - INFO - Initializing database manager...
2025-08-05 00:28:26,424 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:28:26,426 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:28:26,473 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:28:26,474 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:28:39,579 - app.main - INFO - Shutting down application...
2025-08-05 00:28:39,579 - app.main - INFO - Closing database connections...
2025-08-05 00:28:39,580 - app.db.session - INFO - Closing database connections...
2025-08-05 00:28:39,583 - app.db.session - INFO - Database connections closed
2025-08-05 00:28:39,584 - app.main - INFO - Database connections closed successfully
2025-08-05 00:28:46,489 - app.main - INFO - Starting application...
2025-08-05 00:28:46,489 - app.main - INFO - Initializing database manager...
2025-08-05 00:28:46,490 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:28:46,491 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:28:46,536 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:28:46,537 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:29:41,921 - app.main - INFO - Shutting down application...
2025-08-05 00:29:41,922 - app.main - INFO - Closing database connections...
2025-08-05 00:29:41,922 - app.db.session - INFO - Closing database connections...
2025-08-05 00:29:41,926 - app.db.session - INFO - Database connections closed
2025-08-05 00:29:41,927 - app.main - INFO - Database connections closed successfully
2025-08-05 00:29:49,073 - app.main - INFO - Starting application...
2025-08-05 00:29:49,073 - app.main - INFO - Initializing database manager...
2025-08-05 00:29:49,074 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:29:49,075 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:29:49,121 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:29:49,122 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:29:58,349 - app.main - INFO - Shutting down application...
2025-08-05 00:29:58,349 - app.main - INFO - Closing database connections...
2025-08-05 00:29:58,350 - app.db.session - INFO - Closing database connections...
2025-08-05 00:29:58,355 - app.db.session - INFO - Database connections closed
2025-08-05 00:29:58,356 - app.main - INFO - Database connections closed successfully
2025-08-05 00:30:06,670 - app.main - INFO - Starting application...
2025-08-05 00:30:06,670 - app.main - INFO - Initializing database manager...
2025-08-05 00:30:06,673 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:30:06,675 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:30:06,740 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:30:06,741 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:32:04,637 - app.main - INFO - Shutting down application...
2025-08-05 00:32:04,638 - app.main - INFO - Closing database connections...
2025-08-05 00:32:04,638 - app.db.session - INFO - Closing database connections...
2025-08-05 00:32:04,643 - app.db.session - INFO - Database connections closed
2025-08-05 00:32:04,643 - app.main - INFO - Database connections closed successfully
2025-08-05 00:32:10,867 - app.main - INFO - Starting application...
2025-08-05 00:32:10,868 - app.main - INFO - Initializing database manager...
2025-08-05 00:32:10,869 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:32:10,871 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:32:10,925 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:32:10,926 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:32:23,674 - app.main - INFO - Shutting down application...
2025-08-05 00:32:23,674 - app.main - INFO - Closing database connections...
2025-08-05 00:32:23,675 - app.db.session - INFO - Closing database connections...
2025-08-05 00:32:23,679 - app.db.session - INFO - Database connections closed
2025-08-05 00:32:23,679 - app.main - INFO - Database connections closed successfully
2025-08-05 00:32:31,336 - app.main - INFO - Starting application...
2025-08-05 00:32:31,338 - app.main - INFO - Initializing database manager...
2025-08-05 00:32:31,340 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:32:31,365 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:32:31,413 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:32:31,414 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:55:06,586 - app.main - INFO - Starting application...
2025-08-05 00:55:06,587 - app.main - INFO - Initializing database manager...
2025-08-05 00:55:06,587 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:55:06,608 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:55:06,656 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:55:06,656 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:55:30,865 - app.main - INFO - Starting application...
2025-08-05 00:55:30,866 - app.main - INFO - Initializing database manager...
2025-08-05 00:55:30,866 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 00:55:30,903 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 00:55:30,970 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 00:55:30,970 - app.main - INFO - Database manager initialized successfully
2025-08-05 00:56:02,453 - app.core.security - ERROR - Authentication error for testuser123: '_AsyncGeneratorContextManager' object has no attribute 'execute'
2025-08-05 00:56:02,454 - app.core.security - INFO - user_authentication completed in 0.00s
2025-08-05 00:56:02,454 - app.api.auth - WARNING - Failed login attempt for user: testuser123
2025-08-05 00:56:02,455 - app.api.auth - INFO - user_login completed in 0.00s
2025-08-05 00:56:27,715 - app.db.crud - ERROR - Error getting user by username testuser123: '_AsyncGeneratorContextManager' object has no attribute 'execute'
2025-08-05 00:56:27,716 - app.db.crud - ERROR - Error getting user by email test@example.com: '_AsyncGeneratorContextManager' object has no attribute 'execute'
2025-08-05 00:56:27,717 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-05 00:56:28,080 - app.api.users - ERROR - Error creating user: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:00:51,033 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:00:51,033 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:02:58,422 - app.main - INFO - Shutting down application...
2025-08-05 01:02:58,422 - app.main - INFO - Closing database connections...
2025-08-05 01:02:58,424 - app.db.session - INFO - Closing database connections...
2025-08-05 01:02:58,449 - app.db.session - INFO - Database connections closed
2025-08-05 01:02:58,450 - app.main - INFO - Database connections closed successfully
2025-08-05 01:04:50,909 - app.main - INFO - Starting application...
2025-08-05 01:04:50,911 - app.main - INFO - Initializing database manager...
2025-08-05 01:04:50,911 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:04:50,974 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:04:51,062 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:04:51,062 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:04:57,954 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:04:57,955 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:05:17,867 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:05:17,868 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:07:21,606 - app.main - INFO - Shutting down application...
2025-08-05 01:07:21,607 - app.main - INFO - Closing database connections...
2025-08-05 01:07:21,607 - app.db.session - INFO - Closing database connections...
2025-08-05 01:07:21,610 - app.db.session - INFO - Database connections closed
2025-08-05 01:07:21,611 - app.main - INFO - Database connections closed successfully
2025-08-05 01:28:38,804 - app.main - INFO - Starting application...
2025-08-05 01:28:38,807 - app.main - INFO - Initializing database manager...
2025-08-05 01:28:38,808 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:28:38,843 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:28:38,939 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:28:38,939 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:28:39,042 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:28:39,042 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:29:02,499 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:29:02,499 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:29:15,354 - app.api.auth - ERROR - Unexpected error in registration: '_AsyncGeneratorContextManager' object has no attribute 'rollback'
2025-08-05 01:29:15,354 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 01:32:39,911 - app.main - INFO - Shutting down application...
2025-08-05 01:32:39,911 - app.main - INFO - Closing database connections...
2025-08-05 01:32:39,912 - app.db.session - INFO - Closing database connections...
2025-08-05 01:32:39,917 - app.db.session - INFO - Database connections closed
2025-08-05 01:32:39,918 - app.main - INFO - Database connections closed successfully
2025-08-05 01:32:46,626 - app.main - INFO - Starting application...
2025-08-05 01:32:46,626 - app.main - INFO - Initializing database manager...
2025-08-05 01:32:46,627 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:32:46,656 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:32:46,707 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:32:46,707 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:34:21,465 - app.api.auth - INFO - user_registration completed in 0.13s
2025-08-05 01:34:21,466 - app.db.session - ERROR - Unexpected session error: 400: Username already registered
2025-08-05 01:34:36,416 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-05 01:34:36,738 - app.core.security - INFO - User authenticated successfully: testuser123
2025-08-05 01:34:36,738 - app.core.security - INFO - user_authentication completed in 0.33s
2025-08-05 01:34:36,739 - app.api.auth - INFO - Successful login for user: testuser123
2025-08-05 01:34:36,763 - app.core.security - INFO - Access token created successfully
2025-08-05 01:34:36,763 - app.core.security - INFO - Refresh token created successfully
2025-08-05 01:34:36,764 - app.api.auth - INFO - User testuser123 logged in successfully
2025-08-05 01:34:36,764 - app.api.auth - INFO - user_login completed in 0.35s
2025-08-05 01:35:04,874 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:35:06,634 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 01:35:06,635 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 01:35:06,647 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 01:35:06,659 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 01:35:06,664 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 01:35:06,823 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 01:35:06,844 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,844 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,845 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:35:06,845 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,845 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:35:06,846 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,846 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,847 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:35:06,847 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:35:06,866 - app.api.itinerary - INFO - Built POI list with 49 items
2025-08-05 01:35:06,912 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-05 01:35:06,989 - app.api.itinerary - INFO - Itinerary fb54d921-6c30-41c0-aace-34df126fc657 persisted successfully
2025-08-05 01:35:06,989 - app.api.itinerary - INFO - Successfully generated itinerary fb54d921-6c30-41c0-aace-34df126fc657 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 01:35:06,990 - app.api.itinerary - INFO - itinerary_generation completed in 2.11s
2025-08-05 01:43:05,372 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:43:05,388 - app.db.crud - ERROR - Error getting itinerary <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7ff8b02f4c30>: 'UUID' object has no attribute 'execute'
2025-08-05 01:43:05,389 - app.db.session - ERROR - Unexpected session error: 'NoneType' object has no attribute 'user_id'
2025-08-05 01:43:05,393 - app.main - ERROR - Unhandled exception: 'NoneType' object has no attribute 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 623, in read_itinerary
    if itin.user_id != current_user.id:
       ^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'user_id'
2025-08-05 01:46:39,978 - app.main - INFO - Shutting down application...
2025-08-05 01:46:39,978 - app.main - INFO - Closing database connections...
2025-08-05 01:46:39,979 - app.db.session - INFO - Closing database connections...
2025-08-05 01:46:40,044 - app.db.session - INFO - Database connections closed
2025-08-05 01:46:40,045 - app.main - INFO - Database connections closed successfully
2025-08-05 01:47:01,035 - app.main - INFO - Starting application...
2025-08-05 01:47:01,036 - app.main - INFO - Initializing database manager...
2025-08-05 01:47:01,036 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:47:01,071 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:47:01,139 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:47:01,140 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:47:35,313 - app.main - INFO - Shutting down application...
2025-08-05 01:47:35,313 - app.main - INFO - Closing database connections...
2025-08-05 01:47:35,313 - app.db.session - INFO - Closing database connections...
2025-08-05 01:47:35,317 - app.db.session - INFO - Database connections closed
2025-08-05 01:47:35,317 - app.main - INFO - Database connections closed successfully
2025-08-05 01:47:42,349 - app.main - INFO - Starting application...
2025-08-05 01:47:42,350 - app.main - INFO - Initializing database manager...
2025-08-05 01:47:42,351 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:47:42,375 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:47:42,437 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:47:42,438 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:48:10,573 - app.main - INFO - Shutting down application...
2025-08-05 01:48:10,573 - app.main - INFO - Closing database connections...
2025-08-05 01:48:10,574 - app.db.session - INFO - Closing database connections...
2025-08-05 01:48:10,579 - app.db.session - INFO - Database connections closed
2025-08-05 01:48:10,579 - app.main - INFO - Database connections closed successfully
2025-08-05 01:48:18,185 - app.main - INFO - Starting application...
2025-08-05 01:48:18,186 - app.main - INFO - Initializing database manager...
2025-08-05 01:48:18,187 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:48:18,210 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:48:18,263 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:48:18,263 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:48:28,091 - app.main - INFO - Shutting down application...
2025-08-05 01:48:28,091 - app.main - INFO - Closing database connections...
2025-08-05 01:48:28,092 - app.db.session - INFO - Closing database connections...
2025-08-05 01:48:28,096 - app.db.session - INFO - Database connections closed
2025-08-05 01:48:28,097 - app.main - INFO - Database connections closed successfully
2025-08-05 01:49:10,674 - app.main - INFO - Starting application...
2025-08-05 01:49:10,675 - app.main - INFO - Initializing database manager...
2025-08-05 01:49:10,675 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:49:10,715 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:49:10,784 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:49:10,784 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:50:01,215 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:50:01,217 - app.db.crud - ERROR - Error getting itinerary <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7cf40c144cd0>: 'UUID' object has no attribute 'execute'
2025-08-05 01:50:01,217 - app.db.session - ERROR - Unexpected session error: 404: Itinerary with ID <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7cf40c144cd0> not found
2025-08-05 01:50:25,419 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:50:27,224 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 01:50:27,224 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 01:50:27,233 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 01:50:27,239 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 01:50:27,242 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 01:50:27,293 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 01:50:27,306 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,307 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,307 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:50:27,308 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,309 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:50:27,309 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,310 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,311 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 01:50:27,312 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 01:50:27,318 - app.api.itinerary - INFO - Built POI list with 49 items
2025-08-05 01:50:27,375 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-05 01:50:27,426 - app.api.itinerary - INFO - Itinerary 71fa84d6-6df0-4894-9cea-d5d896cc6c6a persisted successfully
2025-08-05 01:50:27,426 - app.api.itinerary - INFO - Successfully generated itinerary 71fa84d6-6df0-4894-9cea-d5d896cc6c6a for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 01:50:27,427 - app.api.itinerary - INFO - itinerary_generation completed in 2.01s
2025-08-05 01:50:56,793 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:50:56,794 - app.db.crud - ERROR - Error getting itinerary <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7cf40c169a70>: 'UUID' object has no attribute 'execute'
2025-08-05 01:50:56,795 - app.db.session - ERROR - Unexpected session error: 404: Itinerary with ID <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7cf40c169a70> not found
2025-08-05 01:52:23,591 - app.main - INFO - Shutting down application...
2025-08-05 01:52:23,591 - app.main - INFO - Closing database connections...
2025-08-05 01:52:23,592 - app.db.session - INFO - Closing database connections...
2025-08-05 01:52:23,597 - app.db.session - INFO - Database connections closed
2025-08-05 01:52:23,598 - app.main - INFO - Database connections closed successfully
2025-08-05 01:52:30,690 - app.main - INFO - Starting application...
2025-08-05 01:52:30,691 - app.main - INFO - Initializing database manager...
2025-08-05 01:52:30,692 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:52:30,730 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:52:30,782 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:52:30,782 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:52:42,920 - app.main - INFO - Shutting down application...
2025-08-05 01:52:42,920 - app.main - INFO - Closing database connections...
2025-08-05 01:52:42,920 - app.db.session - INFO - Closing database connections...
2025-08-05 01:52:42,925 - app.db.session - INFO - Database connections closed
2025-08-05 01:52:42,925 - app.main - INFO - Database connections closed successfully
2025-08-05 01:52:53,032 - app.main - INFO - Starting application...
2025-08-05 01:52:53,032 - app.main - INFO - Initializing database manager...
2025-08-05 01:52:53,033 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:52:53,058 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:52:53,115 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:52:53,116 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:53:03,947 - app.main - INFO - Shutting down application...
2025-08-05 01:53:03,948 - app.main - INFO - Closing database connections...
2025-08-05 01:53:03,948 - app.db.session - INFO - Closing database connections...
2025-08-05 01:53:03,951 - app.db.session - INFO - Database connections closed
2025-08-05 01:53:03,952 - app.main - INFO - Database connections closed successfully
2025-08-05 01:53:11,053 - app.main - INFO - Starting application...
2025-08-05 01:53:11,054 - app.main - INFO - Initializing database manager...
2025-08-05 01:53:11,055 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:53:11,080 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:53:11,134 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:53:11,134 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:53:23,675 - app.main - INFO - Shutting down application...
2025-08-05 01:53:23,675 - app.main - INFO - Closing database connections...
2025-08-05 01:53:23,676 - app.db.session - INFO - Closing database connections...
2025-08-05 01:53:23,680 - app.db.session - INFO - Database connections closed
2025-08-05 01:53:23,680 - app.main - INFO - Database connections closed successfully
2025-08-05 01:53:31,356 - app.main - INFO - Starting application...
2025-08-05 01:53:31,356 - app.main - INFO - Initializing database manager...
2025-08-05 01:53:31,357 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:53:31,387 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:53:31,437 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:53:31,437 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:53:34,632 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 01:56:10,165 - app.main - INFO - Shutting down application...
2025-08-05 01:56:10,166 - app.main - INFO - Closing database connections...
2025-08-05 01:56:10,166 - app.db.session - INFO - Closing database connections...
2025-08-05 01:56:10,171 - app.db.session - INFO - Database connections closed
2025-08-05 01:56:10,172 - app.main - INFO - Database connections closed successfully
2025-08-05 01:56:16,790 - app.main - INFO - Starting application...
2025-08-05 01:56:16,791 - app.main - INFO - Initializing database manager...
2025-08-05 01:56:16,791 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:56:16,814 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:56:16,879 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:56:16,881 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:56:26,207 - app.main - INFO - Shutting down application...
2025-08-05 01:56:26,208 - app.main - INFO - Closing database connections...
2025-08-05 01:56:26,208 - app.db.session - INFO - Closing database connections...
2025-08-05 01:56:26,212 - app.db.session - INFO - Database connections closed
2025-08-05 01:56:26,212 - app.main - INFO - Database connections closed successfully
2025-08-05 01:56:35,781 - app.main - INFO - Starting application...
2025-08-05 01:56:35,781 - app.main - INFO - Initializing database manager...
2025-08-05 01:56:35,782 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:56:35,814 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:56:35,892 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:56:35,892 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:57:48,786 - app.main - INFO - Shutting down application...
2025-08-05 01:57:48,787 - app.main - INFO - Closing database connections...
2025-08-05 01:57:48,787 - app.db.session - INFO - Closing database connections...
2025-08-05 01:57:48,795 - app.db.session - INFO - Database connections closed
2025-08-05 01:57:48,804 - app.main - INFO - Database connections closed successfully
2025-08-05 01:57:57,718 - app.main - INFO - Starting application...
2025-08-05 01:57:57,719 - app.main - INFO - Initializing database manager...
2025-08-05 01:57:57,719 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:57:57,782 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:57:57,862 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:57:57,863 - app.main - INFO - Database manager initialized successfully
2025-08-05 01:58:06,288 - app.main - INFO - Shutting down application...
2025-08-05 01:58:06,288 - app.main - INFO - Closing database connections...
2025-08-05 01:58:06,289 - app.db.session - INFO - Closing database connections...
2025-08-05 01:58:06,291 - app.db.session - INFO - Database connections closed
2025-08-05 01:58:06,292 - app.main - INFO - Database connections closed successfully
2025-08-05 01:58:15,772 - app.main - INFO - Starting application...
2025-08-05 01:58:15,773 - app.main - INFO - Initializing database manager...
2025-08-05 01:58:15,773 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 01:58:15,796 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 01:58:15,846 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 01:58:15,846 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:02:55,087 - app.main - INFO - Shutting down application...
2025-08-05 02:02:55,087 - app.main - INFO - Closing database connections...
2025-08-05 02:02:55,087 - app.db.session - INFO - Closing database connections...
2025-08-05 02:02:55,090 - app.db.session - INFO - Database connections closed
2025-08-05 02:02:55,090 - app.main - INFO - Database connections closed successfully
2025-08-05 02:05:07,171 - app.main - INFO - Starting application...
2025-08-05 02:05:07,172 - app.main - INFO - Initializing database manager...
2025-08-05 02:05:07,172 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:05:07,221 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:05:07,306 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:05:07,307 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:06:40,228 - app.main - INFO - Shutting down application...
2025-08-05 02:06:40,229 - app.main - INFO - Closing database connections...
2025-08-05 02:06:40,229 - app.db.session - INFO - Closing database connections...
2025-08-05 02:06:40,233 - app.db.session - INFO - Database connections closed
2025-08-05 02:06:40,233 - app.main - INFO - Database connections closed successfully
2025-08-05 02:06:48,906 - app.main - INFO - Starting application...
2025-08-05 02:06:48,906 - app.main - INFO - Initializing database manager...
2025-08-05 02:06:48,907 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:06:48,932 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:06:48,979 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:06:48,980 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:06:49,067 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 02:06:51,190 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 02:06:51,191 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 02:06:51,203 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 02:06:51,209 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 02:06:51,212 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 02:06:51,277 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 02:06:51,293 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,293 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,294 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:06:51,295 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,297 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:06:51,297 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,298 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,298 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:06:51,299 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:06:51,308 - app.api.itinerary - INFO - Built POI list with 49 items
2025-08-05 02:06:51,394 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-05 02:06:51,490 - app.api.itinerary - INFO - Itinerary 3a376b57-8f37-4b5a-9613-b48210214353 persisted successfully
2025-08-05 02:06:51,490 - app.api.itinerary - INFO - Successfully generated itinerary 3a376b57-8f37-4b5a-9613-b48210214353 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 02:06:51,491 - app.api.itinerary - INFO - itinerary_generation completed in 2.42s
2025-08-05 02:07:13,658 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 02:08:01,671 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 02:08:01,790 - app.core.nlp.parser - INFO - Parsed travel request with 75.0% confidence
2025-08-05 02:08:01,791 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 02:08:01,794 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 02:08:01,797 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 02:08:01,799 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 02:08:01,808 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 02:08:01,821 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:01,821 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:01,822 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:01,822 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:01,823 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:01,823 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:01,823 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:01,824 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:01,827 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-05 02:08:01,944 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-05 02:08:01,973 - app.api.itinerary - INFO - Itinerary 1a888af6-5eca-4436-adbd-0b877d5e3b6e persisted successfully
2025-08-05 02:08:01,974 - app.api.itinerary - INFO - Successfully generated itinerary 1a888af6-5eca-4436-adbd-0b877d5e3b6e for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 02:08:01,974 - app.api.itinerary - INFO - itinerary_generation completed in 0.30s
2025-08-05 02:08:01,979 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.23515, id=UUID('e570f32c-4c51-4088-9056-f86ab78fb9eb'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/571618861.webp?k=dbbeb1b1cc661e28674e3a52863c3a49058e9afc24f9408a667e8692603a5a29&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Suite 401 in Shanghai city centre', description=None, longitude=121.45707, price=Decimal('1071'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.23515, id=UUID('e570f32c-4c51-4088-9056-f86ab78fb9eb'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/571618861.webp?k=dbbeb1b1cc661e28674e3a52863c3a49058e9afc24f9408a667e8692603a5a29&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Suite 401 in Shanghai city centre', description=None, longitude=121.45707, price=Decimal('1071'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20897, id=UUID('a93d93b3-53e2-4459-aff5-1fc6857502f2'), images=[], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - TianZi Fang Branch Xintiandi Taipuqiao near the Bund Sunny Cozy Deluxe Room', description=None, longitude=121.47061, price=Decimal('2005'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20897, id=UUID('a93d93b3-53e2-4459-aff5-1fc6857502f2'), images=[], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - TianZi Fang Branch Xintiandi Taipuqiao near the Bund Sunny Cozy Deluxe Room', description=None, longitude=121.47061, price=Decimal('2005'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20142, id=UUID('f097db0e-6dd9-485a-94e4-a022490a29ce'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/606218929.webp?k=a2646e155889ee486d7b578496e00a055dd5b0c25c1dcfaec156464c9ff3da14&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - Bund Branch Quality Renovated Luxury 3Bedroom, Spacious Living Room Fully Equipped Haiyue Garden', description=None, longitude=121.47484, price=Decimal('3756'), amenities=['182'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20142, id=UUID('f097db0e-6dd9-485a-94e4-a022490a29ce'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/606218929.webp?k=a2646e155889ee486d7b578496e00a055dd5b0c25c1dcfaec156464c9ff3da14&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - Bund Branch Quality Renovated Luxury 3Bedroom, Spacious Living Room Fully Equipped Haiyue Garden', description=None, longitude=121.47484, price=Decimal('3756'), amenities=['182'], star_rating=None, check_in_time=None, contact_info=None)}

2025-08-05 02:08:01,980 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}

2025-08-05 02:08:18,321 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 02:08:18,418 - app.core.nlp.parser - INFO - Parsed travel request with 75.0% confidence
2025-08-05 02:08:18,419 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 02:08:18,421 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 02:08:18,423 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 02:08:18,425 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 02:08:18,434 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 02:08:18,438 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:18,439 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:18,440 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:18,440 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:18,441 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:18,441 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:18,442 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Open 24 hours", "Tuesday: Open 24 hours", "Wednesday: Open 24 hours", "Thursday: Open 24 hours", "Friday: Open 24 hours", "Saturday: Open 24 hours", "Sunday: Open 24 hours"], using default 9:00-17:00
2025-08-05 02:08:18,442 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Tuesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Wednesday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Thursday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Friday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 10:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Sunday: 12:00\u2009\u2013\u20096:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:08:18,445 - app.api.itinerary - INFO - Built POI list with 50 items
2025-08-05 02:08:18,566 - app.api.itinerary - INFO - Created schedule for 8 days
2025-08-05 02:08:18,586 - app.api.itinerary - INFO - Itinerary 43344cab-4980-4e67-81f6-dd022abf6991 persisted successfully
2025-08-05 02:08:18,586 - app.api.itinerary - INFO - Successfully generated itinerary 43344cab-4980-4e67-81f6-dd022abf6991 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 02:08:18,587 - app.api.itinerary - INFO - itinerary_generation completed in 0.26s
2025-08-05 02:08:18,588 - app.db.session - ERROR - Unexpected session error: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.23515, id=UUID('e570f32c-4c51-4088-9056-f86ab78fb9eb'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/571618861.webp?k=dbbeb1b1cc661e28674e3a52863c3a49058e9afc24f9408a667e8692603a5a29&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Suite 401 in Shanghai city centre', description=None, longitude=121.45707, price=Decimal('1071'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.23515, id=UUID('e570f32c-4c51-4088-9056-f86ab78fb9eb'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/571618861.webp?k=dbbeb1b1cc661e28674e3a52863c3a49058e9afc24f9408a667e8692603a5a29&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Suite 401 in Shanghai city centre', description=None, longitude=121.45707, price=Decimal('1071'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20897, id=UUID('a93d93b3-53e2-4459-aff5-1fc6857502f2'), images=[], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - TianZi Fang Branch Xintiandi Taipuqiao near the Bund Sunny Cozy Deluxe Room', description=None, longitude=121.47061, price=Decimal('2005'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20897, id=UUID('a93d93b3-53e2-4459-aff5-1fc6857502f2'), images=[], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - TianZi Fang Branch Xintiandi Taipuqiao near the Bund Sunny Cozy Deluxe Room', description=None, longitude=121.47061, price=Decimal('2005'), amenities=[], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20142, id=UUID('f097db0e-6dd9-485a-94e4-a022490a29ce'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/606218929.webp?k=a2646e155889ee486d7b578496e00a055dd5b0c25c1dcfaec156464c9ff3da14&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - Bund Branch Quality Renovated Luxury 3Bedroom, Spacious Living Room Fully Equipped Haiyue Garden', description=None, longitude=121.47484, price=Decimal('3756'), amenities=['182'], star_rating=None, check_in_time=None, contact_info=None)}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation(latitude=31.20142, id=UUID('f097db0e-6dd9-485a-94e4-a022490a29ce'), images=['https://cf.bstatic.com/xdata/images/hotel/square240/606218929.webp?k=a2646e155889ee486d7b578496e00a055dd5b0c25c1dcfaec156464c9ff3da14&o='], rating=10.0, type=None, capacity=None, check_out_time=None, name='Eastern Hub - Bund Branch Quality Renovated Luxury 3Bedroom, Spacious Living Room Fully Equipped Haiyue Garden', description=None, longitude=121.47484, price=Decimal('3756'), amenities=['182'], star_rating=None, check_in_time=None, contact_info=None)}

2025-08-05 02:08:18,591 - app.main - ERROR - Unhandled exception: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 0, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 1, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'created_at'), 'msg': 'Field required', 'input': Accommodation()}
  {'type': 'missing', 'loc': ('response', 'accom_links', 2, 'accommodation', 'updated_at'), 'msg': 'Field required', 'input': Accommodation()}

2025-08-05 02:10:53,499 - app.core.security - INFO - Current user resolved: testuser123
2025-08-05 02:10:53,615 - app.core.nlp.parser - INFO - Parsed travel request with 95.0% confidence
2025-08-05 02:10:53,615 - app.api.itinerary - INFO - Travel request parsed successfully
2025-08-05 02:10:53,619 - app.api.itinerary - INFO - Location coordinates retrieved
2025-08-05 02:10:53,621 - app.api.itinerary - INFO - Destination recommendations generated
2025-08-05 02:10:53,624 - app.api.itinerary - INFO - Activity recommendations generated
2025-08-05 02:10:53,632 - app.api.itinerary - INFO - Found 0 flight options
2025-08-05 02:10:53,637 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,637 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,638 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:10:53,638 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,639 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:10:53,639 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,639 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 11:00\u202fAM\u2009\u2013\u20098:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,640 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Tuesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Wednesday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Thursday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Friday: 9:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Saturday: Closed", "Sunday: Closed"], using default 9:00-17:00
2025-08-05 02:10:53,640 - app.api.itinerary - WARNING - Invalid opening hours format: ["Monday: Closed", "Tuesday: Closed", "Wednesday: 12:00\u2009\u2013\u20095:00\u202fPM", "Thursday: 12:00\u2009\u2013\u20095:00\u202fPM", "Friday: 12:00\u2009\u2013\u20095:00\u202fPM", "Saturday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM", "Sunday: 11:00\u202fAM\u2009\u2013\u20095:00\u202fPM"], using default 9:00-17:00
2025-08-05 02:10:53,643 - app.api.itinerary - INFO - Built POI list with 49 items
2025-08-05 02:10:53,689 - app.api.itinerary - INFO - Created schedule for 3 days
2025-08-05 02:10:53,709 - app.api.itinerary - INFO - Itinerary bf25e091-64d2-4ab8-98b1-afec645ae7f9 persisted successfully
2025-08-05 02:10:53,709 - app.api.itinerary - INFO - Successfully generated itinerary bf25e091-64d2-4ab8-98b1-afec645ae7f9 for user 6790fec6-c660-495e-9c52-6e7b6a1f7e97
2025-08-05 02:10:53,710 - app.api.itinerary - INFO - itinerary_generation completed in 0.21s
2025-08-05 02:18:30,813 - app.main - INFO - Shutting down application...
2025-08-05 02:18:30,814 - app.main - INFO - Closing database connections...
2025-08-05 02:18:30,815 - app.db.session - INFO - Closing database connections...
2025-08-05 02:18:30,841 - app.db.session - INFO - Database connections closed
2025-08-05 02:18:30,841 - app.main - INFO - Database connections closed successfully
2025-08-05 02:18:40,681 - app.main - INFO - Starting application...
2025-08-05 02:18:40,681 - app.main - INFO - Initializing database manager...
2025-08-05 02:18:40,682 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:18:40,721 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:18:40,786 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:18:40,787 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:57:03,078 - app.main - INFO - Shutting down application...
2025-08-05 02:57:03,079 - app.main - INFO - Closing database connections...
2025-08-05 02:57:03,079 - app.db.session - INFO - Closing database connections...
2025-08-05 02:57:03,102 - app.db.session - INFO - Database connections closed
2025-08-05 02:57:03,102 - app.main - INFO - Database connections closed successfully
2025-08-05 02:57:13,491 - app.main - INFO - Starting application...
2025-08-05 02:57:13,492 - app.main - INFO - Initializing database manager...
2025-08-05 02:57:13,494 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:57:13,560 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:57:13,657 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:57:13,658 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:57:21,179 - app.main - INFO - Shutting down application...
2025-08-05 02:57:21,179 - app.main - INFO - Closing database connections...
2025-08-05 02:57:21,179 - app.db.session - INFO - Closing database connections...
2025-08-05 02:57:21,185 - app.db.session - INFO - Database connections closed
2025-08-05 02:57:21,186 - app.main - INFO - Database connections closed successfully
2025-08-05 02:57:32,322 - app.main - INFO - Starting application...
2025-08-05 02:57:32,323 - app.main - INFO - Initializing database manager...
2025-08-05 02:57:32,323 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:57:32,362 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:57:32,427 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:57:32,428 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:57:41,553 - app.main - INFO - Shutting down application...
2025-08-05 02:57:41,553 - app.main - INFO - Closing database connections...
2025-08-05 02:57:41,554 - app.db.session - INFO - Closing database connections...
2025-08-05 02:57:41,558 - app.db.session - INFO - Database connections closed
2025-08-05 02:57:41,558 - app.main - INFO - Database connections closed successfully
2025-08-05 02:57:49,349 - app.main - INFO - Starting application...
2025-08-05 02:57:49,350 - app.main - INFO - Initializing database manager...
2025-08-05 02:57:49,352 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:57:49,408 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:57:49,486 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:57:49,487 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:58:02,053 - app.main - INFO - Shutting down application...
2025-08-05 02:58:02,054 - app.main - INFO - Closing database connections...
2025-08-05 02:58:02,054 - app.db.session - INFO - Closing database connections...
2025-08-05 02:58:02,059 - app.db.session - INFO - Database connections closed
2025-08-05 02:58:02,060 - app.main - INFO - Database connections closed successfully
2025-08-05 02:58:25,314 - app.main - INFO - Starting application...
2025-08-05 02:58:25,315 - app.main - INFO - Initializing database manager...
2025-08-05 02:58:25,316 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:58:25,340 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:58:25,386 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:58:25,387 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:58:52,635 - app.main - INFO - Shutting down application...
2025-08-05 02:58:52,636 - app.main - INFO - Closing database connections...
2025-08-05 02:58:52,636 - app.db.session - INFO - Closing database connections...
2025-08-05 02:58:52,640 - app.db.session - INFO - Database connections closed
2025-08-05 02:58:52,640 - app.main - INFO - Database connections closed successfully
2025-08-05 02:59:18,279 - app.main - INFO - Starting application...
2025-08-05 02:59:18,280 - app.main - INFO - Initializing database manager...
2025-08-05 02:59:18,280 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:59:18,329 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:59:18,399 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:59:18,399 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:59:29,035 - app.main - INFO - Shutting down application...
2025-08-05 02:59:29,036 - app.main - INFO - Closing database connections...
2025-08-05 02:59:29,038 - app.db.session - INFO - Closing database connections...
2025-08-05 02:59:29,043 - app.db.session - INFO - Database connections closed
2025-08-05 02:59:29,043 - app.main - INFO - Database connections closed successfully
2025-08-05 02:59:40,004 - app.main - INFO - Starting application...
2025-08-05 02:59:40,004 - app.main - INFO - Initializing database manager...
2025-08-05 02:59:40,004 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:59:40,028 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:59:40,073 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:59:40,074 - app.main - INFO - Database manager initialized successfully
2025-08-05 02:59:48,899 - app.main - INFO - Shutting down application...
2025-08-05 02:59:48,900 - app.main - INFO - Closing database connections...
2025-08-05 02:59:48,900 - app.db.session - INFO - Closing database connections...
2025-08-05 02:59:48,904 - app.db.session - INFO - Database connections closed
2025-08-05 02:59:48,904 - app.main - INFO - Database connections closed successfully
2025-08-05 02:59:55,644 - app.main - INFO - Starting application...
2025-08-05 02:59:55,645 - app.main - INFO - Initializing database manager...
2025-08-05 02:59:55,645 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 02:59:55,666 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 02:59:55,717 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 02:59:55,717 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:00:05,245 - app.main - INFO - Shutting down application...
2025-08-05 03:00:05,245 - app.main - INFO - Closing database connections...
2025-08-05 03:00:05,246 - app.db.session - INFO - Closing database connections...
2025-08-05 03:00:05,249 - app.db.session - INFO - Database connections closed
2025-08-05 03:00:05,249 - app.main - INFO - Database connections closed successfully
2025-08-05 03:00:14,410 - app.main - INFO - Starting application...
2025-08-05 03:00:14,410 - app.main - INFO - Initializing database manager...
2025-08-05 03:00:14,412 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:00:14,475 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:00:14,562 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:00:14,562 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:00:24,691 - app.main - INFO - Shutting down application...
2025-08-05 03:00:24,691 - app.main - INFO - Closing database connections...
2025-08-05 03:00:24,691 - app.db.session - INFO - Closing database connections...
2025-08-05 03:00:24,695 - app.db.session - INFO - Database connections closed
2025-08-05 03:00:24,695 - app.main - INFO - Database connections closed successfully
2025-08-05 03:00:32,234 - app.main - INFO - Starting application...
2025-08-05 03:00:32,235 - app.main - INFO - Initializing database manager...
2025-08-05 03:00:32,236 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:00:32,303 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:00:32,389 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:00:32,389 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:00:43,805 - app.main - INFO - Shutting down application...
2025-08-05 03:00:43,806 - app.main - INFO - Closing database connections...
2025-08-05 03:00:43,806 - app.db.session - INFO - Closing database connections...
2025-08-05 03:00:43,810 - app.db.session - INFO - Database connections closed
2025-08-05 03:00:43,810 - app.main - INFO - Database connections closed successfully
2025-08-05 03:01:05,660 - app.main - INFO - Starting application...
2025-08-05 03:01:05,660 - app.main - INFO - Initializing database manager...
2025-08-05 03:01:05,661 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:01:05,696 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:01:05,770 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:01:05,771 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:01:17,472 - app.main - INFO - Shutting down application...
2025-08-05 03:01:17,472 - app.main - INFO - Closing database connections...
2025-08-05 03:01:17,472 - app.db.session - INFO - Closing database connections...
2025-08-05 03:01:17,476 - app.db.session - INFO - Database connections closed
2025-08-05 03:01:17,476 - app.main - INFO - Database connections closed successfully
2025-08-05 03:01:24,626 - app.main - INFO - Starting application...
2025-08-05 03:01:24,626 - app.main - INFO - Initializing database manager...
2025-08-05 03:01:24,627 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:01:24,660 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:01:24,710 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:01:24,710 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:01:56,980 - app.main - INFO - Shutting down application...
2025-08-05 03:01:56,980 - app.main - INFO - Closing database connections...
2025-08-05 03:01:56,981 - app.db.session - INFO - Closing database connections...
2025-08-05 03:01:56,985 - app.db.session - INFO - Database connections closed
2025-08-05 03:01:56,986 - app.main - INFO - Database connections closed successfully
2025-08-05 03:02:04,449 - app.main - INFO - Starting application...
2025-08-05 03:02:04,450 - app.main - INFO - Initializing database manager...
2025-08-05 03:02:04,450 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:02:04,482 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:02:04,545 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:02:04,546 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:02:17,814 - app.main - INFO - Shutting down application...
2025-08-05 03:02:17,814 - app.main - INFO - Closing database connections...
2025-08-05 03:02:17,815 - app.db.session - INFO - Closing database connections...
2025-08-05 03:02:17,818 - app.db.session - INFO - Database connections closed
2025-08-05 03:02:17,818 - app.main - INFO - Database connections closed successfully
2025-08-05 03:02:25,196 - app.main - INFO - Starting application...
2025-08-05 03:02:25,196 - app.main - INFO - Initializing database manager...
2025-08-05 03:02:25,197 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:02:25,227 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:02:25,271 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:02:25,272 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:02:35,702 - app.main - INFO - Shutting down application...
2025-08-05 03:02:35,703 - app.main - INFO - Closing database connections...
2025-08-05 03:02:35,703 - app.db.session - INFO - Closing database connections...
2025-08-05 03:02:35,708 - app.db.session - INFO - Database connections closed
2025-08-05 03:02:35,709 - app.main - INFO - Database connections closed successfully
2025-08-05 03:02:42,713 - app.main - INFO - Starting application...
2025-08-05 03:02:42,713 - app.main - INFO - Initializing database manager...
2025-08-05 03:02:42,714 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:02:42,735 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:02:42,781 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:02:42,781 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:06:24,896 - app.main - INFO - Shutting down application...
2025-08-05 03:06:24,896 - app.main - INFO - Closing database connections...
2025-08-05 03:06:24,897 - app.db.session - INFO - Closing database connections...
2025-08-05 03:06:24,904 - app.db.session - INFO - Database connections closed
2025-08-05 03:06:24,904 - app.main - INFO - Database connections closed successfully
2025-08-05 03:07:53,931 - app.main - INFO - Starting application...
2025-08-05 03:07:53,932 - app.main - INFO - Initializing database manager...
2025-08-05 03:07:53,932 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:07:53,970 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:07:54,071 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:07:54,072 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:09:39,307 - app.main - INFO - Shutting down application...
2025-08-05 03:09:39,308 - app.main - INFO - Closing database connections...
2025-08-05 03:09:39,308 - app.db.session - INFO - Closing database connections...
2025-08-05 03:09:39,311 - app.db.session - INFO - Database connections closed
2025-08-05 03:09:39,311 - app.main - INFO - Database connections closed successfully
2025-08-05 03:09:49,590 - app.main - INFO - Starting application...
2025-08-05 03:09:49,591 - app.main - INFO - Initializing database manager...
2025-08-05 03:09:49,591 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:09:49,624 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:09:49,691 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:09:49,693 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:09:59,222 - app.main - INFO - Shutting down application...
2025-08-05 03:09:59,223 - app.main - INFO - Closing database connections...
2025-08-05 03:09:59,224 - app.db.session - INFO - Closing database connections...
2025-08-05 03:09:59,229 - app.db.session - INFO - Database connections closed
2025-08-05 03:09:59,229 - app.main - INFO - Database connections closed successfully
2025-08-05 03:10:06,743 - app.main - INFO - Starting application...
2025-08-05 03:10:06,743 - app.main - INFO - Initializing database manager...
2025-08-05 03:10:06,744 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:10:06,773 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:10:06,822 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:10:06,822 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:10:18,904 - app.main - INFO - Shutting down application...
2025-08-05 03:10:18,917 - app.main - INFO - Closing database connections...
2025-08-05 03:10:18,947 - app.db.session - INFO - Closing database connections...
2025-08-05 03:10:18,952 - app.db.session - INFO - Database connections closed
2025-08-05 03:10:18,953 - app.main - INFO - Database connections closed successfully
2025-08-05 03:10:26,391 - app.main - INFO - Starting application...
2025-08-05 03:10:26,391 - app.main - INFO - Initializing database manager...
2025-08-05 03:10:26,392 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:10:26,440 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:10:26,506 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:10:26,507 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:10:52,125 - app.main - INFO - Shutting down application...
2025-08-05 03:10:52,125 - app.main - INFO - Closing database connections...
2025-08-05 03:10:52,126 - app.db.session - INFO - Closing database connections...
2025-08-05 03:10:52,129 - app.db.session - INFO - Database connections closed
2025-08-05 03:10:52,130 - app.main - INFO - Database connections closed successfully
2025-08-05 03:11:01,552 - app.main - INFO - Starting application...
2025-08-05 03:11:01,552 - app.main - INFO - Initializing database manager...
2025-08-05 03:11:01,553 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:11:01,579 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:11:01,633 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:11:01,633 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:11:11,863 - app.main - INFO - Shutting down application...
2025-08-05 03:11:11,864 - app.main - INFO - Closing database connections...
2025-08-05 03:11:11,864 - app.db.session - INFO - Closing database connections...
2025-08-05 03:11:11,868 - app.db.session - INFO - Database connections closed
2025-08-05 03:11:11,868 - app.main - INFO - Database connections closed successfully
2025-08-05 03:11:19,064 - app.main - INFO - Starting application...
2025-08-05 03:11:19,064 - app.main - INFO - Initializing database manager...
2025-08-05 03:11:19,065 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:11:19,101 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:11:19,176 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:11:19,176 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:15:26,599 - app.main - INFO - Shutting down application...
2025-08-05 03:15:26,601 - app.main - INFO - Closing database connections...
2025-08-05 03:15:26,602 - app.db.session - INFO - Closing database connections...
2025-08-05 03:15:26,608 - app.db.session - INFO - Database connections closed
2025-08-05 03:15:26,608 - app.main - INFO - Database connections closed successfully
2025-08-05 03:15:45,326 - app.main - INFO - Starting application...
2025-08-05 03:15:45,328 - app.main - INFO - Initializing database manager...
2025-08-05 03:15:45,330 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:15:45,409 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:15:45,524 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:15:45,526 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:15:57,766 - app.main - INFO - Shutting down application...
2025-08-05 03:15:57,767 - app.main - INFO - Closing database connections...
2025-08-05 03:15:57,768 - app.db.session - INFO - Closing database connections...
2025-08-05 03:15:57,773 - app.db.session - INFO - Database connections closed
2025-08-05 03:15:57,775 - app.main - INFO - Database connections closed successfully
2025-08-05 03:17:29,049 - app.main - INFO - Starting application...
2025-08-05 03:17:29,050 - app.main - INFO - Initializing database manager...
2025-08-05 03:17:29,052 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:17:29,106 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:17:29,239 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:17:29,239 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:17:38,870 - app.main - INFO - Shutting down application...
2025-08-05 03:17:38,870 - app.main - INFO - Closing database connections...
2025-08-05 03:17:38,871 - app.db.session - INFO - Closing database connections...
2025-08-05 03:17:38,875 - app.db.session - INFO - Database connections closed
2025-08-05 03:17:38,876 - app.main - INFO - Database connections closed successfully
2025-08-05 03:17:48,967 - app.main - INFO - Starting application...
2025-08-05 03:17:48,968 - app.main - INFO - Initializing database manager...
2025-08-05 03:17:48,969 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:17:48,997 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:17:49,046 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:17:49,047 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:19:32,154 - app.main - INFO - Shutting down application...
2025-08-05 03:19:32,155 - app.main - INFO - Closing database connections...
2025-08-05 03:19:32,155 - app.db.session - INFO - Closing database connections...
2025-08-05 03:19:32,161 - app.db.session - INFO - Database connections closed
2025-08-05 03:19:32,161 - app.main - INFO - Database connections closed successfully
2025-08-05 03:20:01,598 - app.main - INFO - Starting application...
2025-08-05 03:20:01,601 - app.main - INFO - Initializing database manager...
2025-08-05 03:20:01,604 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:20:01,631 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:20:01,684 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:20:01,684 - app.main - INFO - Database manager initialized successfully
2025-08-05 03:20:12,514 - app.main - INFO - Shutting down application...
2025-08-05 03:20:12,515 - app.main - INFO - Closing database connections...
2025-08-05 03:20:12,515 - app.db.session - INFO - Closing database connections...
2025-08-05 03:20:12,520 - app.db.session - INFO - Database connections closed
2025-08-05 03:20:12,521 - app.main - INFO - Database connections closed successfully
2025-08-05 03:20:41,643 - app.main - INFO - Starting application...
2025-08-05 03:20:41,645 - app.main - INFO - Initializing database manager...
2025-08-05 03:20:41,646 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 03:20:41,670 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 03:20:41,719 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 03:20:41,719 - app.main - INFO - Database manager initialized successfully
2025-08-05 21:03:02,383 - app.main - INFO - Starting application...
2025-08-05 21:03:02,384 - app.main - INFO - Initializing database manager...
2025-08-05 21:03:02,384 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 21:03:02,447 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 21:03:02,515 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 21:03:02,516 - app.main - INFO - Database manager initialized successfully
2025-08-05 21:27:25,478 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-05 21:27:25,837 - app.api.auth - INFO - New user registered: ttobi_94
2025-08-05 21:27:25,837 - app.api.auth - INFO - New user registered: ttobi_94
2025-08-05 21:27:25,880 - app.api.auth - ERROR - Unexpected error in registration: 3 validation errors for UserRead
status
  Field required [type=missing, input_value={'id': UUID('b760e9d1-895...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
updated_at
  Field required [type=missing, input_value={'id': UUID('b760e9d1-895...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'id': UUID('b760e9d1-895...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-08-05 21:27:25,881 - app.api.auth - INFO - user_registration completed in 0.54s
2025-08-05 21:27:25,882 - app.db.session - ERROR - Unexpected session error: 500: Registration failed
2025-08-05 21:34:17,068 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 21:34:17,069 - app.db.session - ERROR - Unexpected session error: 400: Username already registered
2025-08-05 21:34:55,724 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 21:34:55,724 - app.db.session - ERROR - Unexpected session error: 400: Email already registered
2025-08-05 21:44:57,633 - app.api.auth - INFO - New user registered: ttobi
2025-08-05 21:44:57,634 - app.api.auth - INFO - New user registered: ttobi
2025-08-05 21:44:57,634 - app.api.auth - ERROR - Unexpected error in registration: 3 validation errors for UserRead
status
  Field required [type=missing, input_value={'id': UUID('17f3ed12-e72...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
updated_at
  Field required [type=missing, input_value={'id': UUID('17f3ed12-e72...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
is_active
  Field required [type=missing, input_value={'id': UUID('17f3ed12-e72...=datetime.timezone.utc)}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-08-05 21:44:57,635 - app.api.auth - INFO - user_registration completed in 0.29s
2025-08-05 21:44:57,635 - app.db.session - ERROR - Unexpected session error: 500: Registration failed
2025-08-05 21:45:15,731 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 21:45:15,731 - app.db.session - ERROR - Unexpected session error: 400: Username already registered
2025-08-05 21:45:21,818 - app.api.auth - INFO - user_registration completed in 0.00s
2025-08-05 21:45:21,819 - app.db.session - ERROR - Unexpected session error: 400: Email already registered
2025-08-05 21:48:40,731 - app.main - INFO - Shutting down application...
2025-08-05 21:48:40,731 - app.main - INFO - Closing database connections...
2025-08-05 21:48:40,732 - app.db.session - INFO - Closing database connections...
2025-08-05 21:48:40,743 - app.db.session - INFO - Database connections closed
2025-08-05 21:48:40,743 - app.main - INFO - Database connections closed successfully
2025-08-05 21:48:54,465 - app.main - INFO - Starting application...
2025-08-05 21:48:54,468 - app.main - INFO - Initializing database manager...
2025-08-05 21:48:54,470 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 21:48:54,519 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 21:48:54,634 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 21:48:54,634 - app.main - INFO - Database manager initialized successfully
2025-08-05 21:49:04,498 - app.main - INFO - Shutting down application...
2025-08-05 21:49:04,498 - app.main - INFO - Closing database connections...
2025-08-05 21:49:04,499 - app.db.session - INFO - Closing database connections...
2025-08-05 21:49:04,502 - app.db.session - INFO - Database connections closed
2025-08-05 21:49:04,503 - app.main - INFO - Database connections closed successfully
2025-08-05 21:49:12,385 - app.main - INFO - Starting application...
2025-08-05 21:49:12,385 - app.main - INFO - Initializing database manager...
2025-08-05 21:49:12,386 - app.db.session - INFO - Database URL prepared: postgresql://db:5432/traveldb
2025-08-05 21:49:12,409 - app.db.session - INFO - Database engine created with pool_size=10
2025-08-05 21:49:12,458 - app.db.session - INFO - Database manager initialized successfully
2025-08-05 21:49:12,458 - app.main - INFO - Database manager initialized successfully
2025-08-05 21:55:57,222 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-08-05 21:55:57,586 - app.api.auth - INFO - New user registered: ttob
2025-08-05 21:55:57,586 - app.api.auth - INFO - New user registered: ttob
2025-08-05 21:55:57,593 - app.api.auth - INFO - user_registration completed in 0.43s
2025-08-05 21:58:37,028 - app.api.auth - INFO - New user registered: ttgi_
2025-08-05 21:58:37,028 - app.api.auth - INFO - New user registered: ttgi_
2025-08-05 21:58:37,029 - app.api.auth - INFO - user_registration completed in 0.33s
2025-08-05 21:58:37,348 - app.core.security - INFO - User authenticated successfully: ttgi_
2025-08-05 21:58:37,349 - app.core.security - INFO - user_authentication completed in 0.30s
2025-08-05 21:58:37,350 - app.api.auth - INFO - Successful login for user: ttgi_
2025-08-05 21:58:37,369 - app.core.security - INFO - Access token created successfully
2025-08-05 21:58:37,369 - app.core.security - INFO - Refresh token created successfully
2025-08-05 21:58:37,370 - app.api.auth - INFO - User ttgi_ logged in successfully
2025-08-05 21:58:37,370 - app.api.auth - INFO - user_login completed in 0.32s
2025-08-05 21:58:37,429 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 21:58:38,673 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 21:58:38,679 - app.db.session - ERROR - Unexpected session error: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 21:58:38,682 - app.main - ERROR - Unhandled exception: get_itineraries() missing 1 required positional argument: 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 678, in list_itineraries
    itineraries = await get_itineraries(session)
                        ~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 21:58:38,732 - app.core.security - INFO - Current user resolved: ttgi_
2025-08-05 21:58:38,735 - app.db.session - ERROR - Unexpected session error: get_itineraries() missing 1 required positional argument: 'user_id'
2025-08-05 21:58:38,740 - app.main - ERROR - Unhandled exception: get_itineraries() missing 1 required positional argument: 'user_id'
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/slowapi/extension.py", line 734, in async_wrapper
    response = await func(*args, **kwargs)  # type: ignore
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/itinerary.py", line 678, in list_itineraries
    itineraries = await get_itineraries(session)
                        ~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: get_itineraries() missing 1 required positional argument: 'user_id'
